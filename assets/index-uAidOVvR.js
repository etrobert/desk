function PB(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(n,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}})();var Us=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Od(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ZP={exports:{}},Nd={},e2={exports:{}},qe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tc=Symbol.for("react.element"),DB=Symbol.for("react.portal"),OB=Symbol.for("react.fragment"),NB=Symbol.for("react.strict_mode"),LB=Symbol.for("react.profiler"),MB=Symbol.for("react.provider"),VB=Symbol.for("react.context"),FB=Symbol.for("react.forward_ref"),BB=Symbol.for("react.suspense"),qB=Symbol.for("react.memo"),$B=Symbol.for("react.lazy"),kb=Symbol.iterator;function zB(t){return t===null||typeof t!="object"?null:(t=kb&&t[kb]||t["@@iterator"],typeof t=="function"?t:null)}var t2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},r2=Object.assign,n2={};function jo(t,e,r){this.props=t,this.context=e,this.refs=n2,this.updater=r||t2}jo.prototype.isReactComponent={};jo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};jo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function i2(){}i2.prototype=jo.prototype;function m_(t,e,r){this.props=t,this.context=e,this.refs=n2,this.updater=r||t2}var y_=m_.prototype=new i2;y_.constructor=m_;r2(y_,jo.prototype);y_.isPureReactComponent=!0;var Ab=Array.isArray,a2=Object.prototype.hasOwnProperty,w_={current:null},s2={key:!0,ref:!0,__self:!0,__source:!0};function o2(t,e,r){var n,i={},a=null,s=null;if(e!=null)for(n in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(a=""+e.key),e)a2.call(e,n)&&!s2.hasOwnProperty(n)&&(i[n]=e[n]);var o=arguments.length-2;if(o===1)i.children=r;else if(1<o){for(var u=Array(o),l=0;l<o;l++)u[l]=arguments[l+2];i.children=u}if(t&&t.defaultProps)for(n in o=t.defaultProps,o)i[n]===void 0&&(i[n]=o[n]);return{$$typeof:Tc,type:t,key:a,ref:s,props:i,_owner:w_.current}}function UB(t,e){return{$$typeof:Tc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function __(t){return typeof t=="object"&&t!==null&&t.$$typeof===Tc}function jB(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var Pb=/\/+/g;function vp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?jB(""+t.key):e.toString(36)}function th(t,e,r,n,i){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(a){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case Tc:case DB:s=!0}}if(s)return s=t,i=i(s),t=n===""?"."+vp(s,0):n,Ab(i)?(r="",t!=null&&(r=t.replace(Pb,"$&/")+"/"),th(i,e,r,"",function(l){return l})):i!=null&&(__(i)&&(i=UB(i,r+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(Pb,"$&/")+"/")+t)),e.push(i)),1;if(s=0,n=n===""?".":n+":",Ab(t))for(var o=0;o<t.length;o++){a=t[o];var u=n+vp(a,o);s+=th(a,e,r,u,i)}else if(u=zB(t),typeof u=="function")for(t=u.call(t),o=0;!(a=t.next()).done;)a=a.value,u=n+vp(a,o++),s+=th(a,e,r,u,i);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function vf(t,e,r){if(t==null)return t;var n=[],i=0;return th(t,n,"","",function(a){return e.call(r,a,i++)}),n}function WB(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Rr={current:null},rh={transition:null},HB={ReactCurrentDispatcher:Rr,ReactCurrentBatchConfig:rh,ReactCurrentOwner:w_};qe.Children={map:vf,forEach:function(t,e,r){vf(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return vf(t,function(){e++}),e},toArray:function(t){return vf(t,function(e){return e})||[]},only:function(t){if(!__(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};qe.Component=jo;qe.Fragment=OB;qe.Profiler=LB;qe.PureComponent=m_;qe.StrictMode=NB;qe.Suspense=BB;qe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=HB;qe.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=r2({},t.props),i=t.key,a=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,s=w_.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(u in e)a2.call(e,u)&&!s2.hasOwnProperty(u)&&(n[u]=e[u]===void 0&&o!==void 0?o[u]:e[u])}var u=arguments.length-2;if(u===1)n.children=r;else if(1<u){o=Array(u);for(var l=0;l<u;l++)o[l]=arguments[l+2];n.children=o}return{$$typeof:Tc,type:t.type,key:i,ref:a,props:n,_owner:s}};qe.createContext=function(t){return t={$$typeof:VB,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:MB,_context:t},t.Consumer=t};qe.createElement=o2;qe.createFactory=function(t){var e=o2.bind(null,t);return e.type=t,e};qe.createRef=function(){return{current:null}};qe.forwardRef=function(t){return{$$typeof:FB,render:t}};qe.isValidElement=__;qe.lazy=function(t){return{$$typeof:$B,_payload:{_status:-1,_result:t},_init:WB}};qe.memo=function(t,e){return{$$typeof:qB,type:t,compare:e===void 0?null:e}};qe.startTransition=function(t){var e=rh.transition;rh.transition={};try{t()}finally{rh.transition=e}};qe.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};qe.useCallback=function(t,e){return Rr.current.useCallback(t,e)};qe.useContext=function(t){return Rr.current.useContext(t)};qe.useDebugValue=function(){};qe.useDeferredValue=function(t){return Rr.current.useDeferredValue(t)};qe.useEffect=function(t,e){return Rr.current.useEffect(t,e)};qe.useId=function(){return Rr.current.useId()};qe.useImperativeHandle=function(t,e,r){return Rr.current.useImperativeHandle(t,e,r)};qe.useInsertionEffect=function(t,e){return Rr.current.useInsertionEffect(t,e)};qe.useLayoutEffect=function(t,e){return Rr.current.useLayoutEffect(t,e)};qe.useMemo=function(t,e){return Rr.current.useMemo(t,e)};qe.useReducer=function(t,e,r){return Rr.current.useReducer(t,e,r)};qe.useRef=function(t){return Rr.current.useRef(t)};qe.useState=function(t){return Rr.current.useState(t)};qe.useSyncExternalStore=function(t,e,r){return Rr.current.useSyncExternalStore(t,e,r)};qe.useTransition=function(){return Rr.current.useTransition()};qe.version="18.2.0";e2.exports=qe;var ie=e2.exports;const sl=Od(ie),GB=PB({__proto__:null,default:sl},[ie]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KB=ie,QB=Symbol.for("react.element"),YB=Symbol.for("react.fragment"),XB=Object.prototype.hasOwnProperty,JB=KB.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ZB={key:!0,ref:!0,__self:!0,__source:!0};function u2(t,e,r){var n,i={},a=null,s=null;r!==void 0&&(a=""+r),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(s=e.ref);for(n in e)XB.call(e,n)&&!ZB.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:QB,type:t,key:a,ref:s,props:i,_owner:JB.current}}Nd.Fragment=YB;Nd.jsx=u2;Nd.jsxs=u2;ZP.exports=Nd;var U=ZP.exports,A1={},l2={exports:{}},Yr={},c2={exports:{}},f2={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(D,$){var z=D.length;D.push($);e:for(;0<z;){var B=z-1>>>1,j=D[B];if(0<i(j,$))D[B]=$,D[z]=j,z=B;else break e}}function r(D){return D.length===0?null:D[0]}function n(D){if(D.length===0)return null;var $=D[0],z=D.pop();if(z!==$){D[0]=z;e:for(var B=0,j=D.length,Q=j>>>1;B<Q;){var N=2*(B+1)-1,M=D[N],q=N+1,V=D[q];if(0>i(M,z))q<j&&0>i(V,M)?(D[B]=V,D[q]=z,B=q):(D[B]=M,D[N]=z,B=N);else if(q<j&&0>i(V,z))D[B]=V,D[q]=z,B=q;else break e}}return $}function i(D,$){var z=D.sortIndex-$.sortIndex;return z!==0?z:D.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();t.unstable_now=function(){return s.now()-o}}var u=[],l=[],c=1,f=null,h=3,d=!1,v=!1,w=!1,m=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(D){for(var $=r(l);$!==null;){if($.callback===null)n(l);else if($.startTime<=D)n(l),$.sortIndex=$.expirationTime,e(u,$);else break;$=r(l)}}function _(D){if(w=!1,y(D),!v)if(r(u)!==null)v=!0,O(T);else{var $=r(l);$!==null&&L(_,$.startTime-D)}}function T(D,$){v=!1,w&&(w=!1,p(I),I=-1),d=!0;var z=h;try{for(y($),f=r(u);f!==null&&(!(f.expirationTime>$)||D&&!R());){var B=f.callback;if(typeof B=="function"){f.callback=null,h=f.priorityLevel;var j=B(f.expirationTime<=$);$=t.unstable_now(),typeof j=="function"?f.callback=j:f===r(u)&&n(u),y($)}else n(u);f=r(u)}if(f!==null)var Q=!0;else{var N=r(l);N!==null&&L(_,N.startTime-$),Q=!1}return Q}finally{f=null,h=z,d=!1}}var b=!1,E=null,I=-1,S=5,C=-1;function R(){return!(t.unstable_now()-C<S)}function x(){if(E!==null){var D=t.unstable_now();C=D;var $=!0;try{$=E(!0,D)}finally{$?P():(b=!1,E=null)}}else b=!1}var P;if(typeof g=="function")P=function(){g(x)};else if(typeof MessageChannel<"u"){var A=new MessageChannel,F=A.port2;A.port1.onmessage=x,P=function(){F.postMessage(null)}}else P=function(){m(x,0)};function O(D){E=D,b||(b=!0,P())}function L(D,$){I=m(function(){D(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(D){D.callback=null},t.unstable_continueExecution=function(){v||d||(v=!0,O(T))},t.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<D?Math.floor(1e3/D):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(D){switch(h){case 1:case 2:case 3:var $=3;break;default:$=h}var z=h;h=$;try{return D()}finally{h=z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(D,$){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var z=h;h=D;try{return $()}finally{h=z}},t.unstable_scheduleCallback=function(D,$,z){var B=t.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?B+z:B):z=B,D){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return j=z+j,D={id:c++,callback:$,priorityLevel:D,startTime:z,expirationTime:j,sortIndex:-1},z>B?(D.sortIndex=z,e(l,D),r(u)===null&&D===r(l)&&(w?(p(I),I=-1):w=!0,L(_,z-B))):(D.sortIndex=j,e(u,D),v||d||(v=!0,O(T))),D},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(D){var $=h;return function(){var z=h;h=$;try{return D.apply(this,arguments)}finally{h=z}}}})(f2);c2.exports=f2;var eq=c2.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h2=ie,Kr=eq;function oe(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var d2=new Set,Il={};function gs(t,e){bo(t,e),bo(t+"Capture",e)}function bo(t,e){for(Il[t]=e,t=0;t<e.length;t++)d2.add(e[t])}var di=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),P1=Object.prototype.hasOwnProperty,tq=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Db={},Ob={};function rq(t){return P1.call(Ob,t)?!0:P1.call(Db,t)?!1:tq.test(t)?Ob[t]=!0:(Db[t]=!0,!1)}function nq(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function iq(t,e,r,n){if(e===null||typeof e>"u"||nq(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function kr(t,e,r,n,i,a,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=s}var ir={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ir[t]=new kr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ir[e]=new kr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ir[t]=new kr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ir[t]=new kr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ir[t]=new kr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ir[t]=new kr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ir[t]=new kr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ir[t]=new kr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ir[t]=new kr(t,5,!1,t.toLowerCase(),null,!1,!1)});var E_=/[\-:]([a-z])/g;function T_(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(E_,T_);ir[e]=new kr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(E_,T_);ir[e]=new kr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(E_,T_);ir[e]=new kr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ir[t]=new kr(t,1,!1,t.toLowerCase(),null,!1,!1)});ir.xlinkHref=new kr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ir[t]=new kr(t,1,!1,t.toLowerCase(),null,!0,!0)});function b_(t,e,r,n){var i=ir.hasOwnProperty(e)?ir[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(iq(e,r,i,n)&&(r=null),n||i===null?rq(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=r===null?i.type===3?!1:"":r:(e=i.attributeName,n=i.attributeNamespace,r===null?t.removeAttribute(e):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var bi=h2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,pf=Symbol.for("react.element"),js=Symbol.for("react.portal"),Ws=Symbol.for("react.fragment"),S_=Symbol.for("react.strict_mode"),D1=Symbol.for("react.profiler"),v2=Symbol.for("react.provider"),p2=Symbol.for("react.context"),I_=Symbol.for("react.forward_ref"),O1=Symbol.for("react.suspense"),N1=Symbol.for("react.suspense_list"),C_=Symbol.for("react.memo"),Ni=Symbol.for("react.lazy"),g2=Symbol.for("react.offscreen"),Nb=Symbol.iterator;function Su(t){return t===null||typeof t!="object"?null:(t=Nb&&t[Nb]||t["@@iterator"],typeof t=="function"?t:null)}var gt=Object.assign,pp;function zu(t){if(pp===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);pp=e&&e[1]||""}return`
`+pp+t}var gp=!1;function mp(t,e){if(!t||gp)return"";gp=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var n=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){n=l}t.call(e.prototype)}else{try{throw Error()}catch(l){n=l}t()}}catch(l){if(l&&n&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),a=n.stack.split(`
`),s=i.length-1,o=a.length-1;1<=s&&0<=o&&i[s]!==a[o];)o--;for(;1<=s&&0<=o;s--,o--)if(i[s]!==a[o]){if(s!==1||o!==1)do if(s--,o--,0>o||i[s]!==a[o]){var u=`
`+i[s].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=s&&0<=o);break}}}finally{gp=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?zu(t):""}function aq(t){switch(t.tag){case 5:return zu(t.type);case 16:return zu("Lazy");case 13:return zu("Suspense");case 19:return zu("SuspenseList");case 0:case 2:case 15:return t=mp(t.type,!1),t;case 11:return t=mp(t.type.render,!1),t;case 1:return t=mp(t.type,!0),t;default:return""}}function L1(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ws:return"Fragment";case js:return"Portal";case D1:return"Profiler";case S_:return"StrictMode";case O1:return"Suspense";case N1:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case p2:return(t.displayName||"Context")+".Consumer";case v2:return(t._context.displayName||"Context")+".Provider";case I_:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case C_:return e=t.displayName||null,e!==null?e:L1(t.type)||"Memo";case Ni:e=t._payload,t=t._init;try{return L1(t(e))}catch{}}return null}function sq(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return L1(e);case 8:return e===S_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function fa(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function m2(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function oq(t){var e=m2(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,a=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){n=""+s,a.call(this,s)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(s){n=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function gf(t){t._valueTracker||(t._valueTracker=oq(t))}function y2(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=m2(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function kh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function M1(t,e){var r=e.checked;return gt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function Lb(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=fa(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function w2(t,e){e=e.checked,e!=null&&b_(t,"checked",e,!1)}function V1(t,e){w2(t,e);var r=fa(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?F1(t,e.type,r):e.hasOwnProperty("defaultValue")&&F1(t,e.type,fa(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Mb(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function F1(t,e,r){(e!=="number"||kh(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Uu=Array.isArray;function oo(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+fa(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function B1(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(oe(91));return gt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Vb(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(oe(92));if(Uu(r)){if(1<r.length)throw Error(oe(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:fa(r)}}function _2(t,e){var r=fa(e.value),n=fa(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function Fb(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function E2(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function q1(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?E2(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var mf,T2=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(mf=mf||document.createElement("div"),mf.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=mf.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Cl(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var ol={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},uq=["Webkit","ms","Moz","O"];Object.keys(ol).forEach(function(t){uq.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ol[e]=ol[t]})});function b2(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||ol.hasOwnProperty(t)&&ol[t]?(""+e).trim():e+"px"}function S2(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=b2(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}var lq=gt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $1(t,e){if(e){if(lq[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(oe(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(oe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(oe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(oe(62))}}function z1(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var U1=null;function x_(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var j1=null,uo=null,lo=null;function Bb(t){if(t=Ic(t)){if(typeof j1!="function")throw Error(oe(280));var e=t.stateNode;e&&(e=Bd(e),j1(t.stateNode,t.type,e))}}function I2(t){uo?lo?lo.push(t):lo=[t]:uo=t}function C2(){if(uo){var t=uo,e=lo;if(lo=uo=null,Bb(t),e)for(t=0;t<e.length;t++)Bb(e[t])}}function x2(t,e){return t(e)}function R2(){}var yp=!1;function k2(t,e,r){if(yp)return t(e,r);yp=!0;try{return x2(t,e,r)}finally{yp=!1,(uo!==null||lo!==null)&&(R2(),C2())}}function xl(t,e){var r=t.stateNode;if(r===null)return null;var n=Bd(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(oe(231,e,typeof r));return r}var W1=!1;if(di)try{var Iu={};Object.defineProperty(Iu,"passive",{get:function(){W1=!0}}),window.addEventListener("test",Iu,Iu),window.removeEventListener("test",Iu,Iu)}catch{W1=!1}function cq(t,e,r,n,i,a,s,o,u){var l=Array.prototype.slice.call(arguments,3);try{e.apply(r,l)}catch(c){this.onError(c)}}var ul=!1,Ah=null,Ph=!1,H1=null,fq={onError:function(t){ul=!0,Ah=t}};function hq(t,e,r,n,i,a,s,o,u){ul=!1,Ah=null,cq.apply(fq,arguments)}function dq(t,e,r,n,i,a,s,o,u){if(hq.apply(this,arguments),ul){if(ul){var l=Ah;ul=!1,Ah=null}else throw Error(oe(198));Ph||(Ph=!0,H1=l)}}function ms(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function A2(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function qb(t){if(ms(t)!==t)throw Error(oe(188))}function vq(t){var e=t.alternate;if(!e){if(e=ms(t),e===null)throw Error(oe(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(i===null)break;var a=i.alternate;if(a===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===r)return qb(i),t;if(a===n)return qb(i),e;a=a.sibling}throw Error(oe(188))}if(r.return!==n.return)r=i,n=a;else{for(var s=!1,o=i.child;o;){if(o===r){s=!0,r=i,n=a;break}if(o===n){s=!0,n=i,r=a;break}o=o.sibling}if(!s){for(o=a.child;o;){if(o===r){s=!0,r=a,n=i;break}if(o===n){s=!0,n=a,r=i;break}o=o.sibling}if(!s)throw Error(oe(189))}}if(r.alternate!==n)throw Error(oe(190))}if(r.tag!==3)throw Error(oe(188));return r.stateNode.current===r?t:e}function P2(t){return t=vq(t),t!==null?D2(t):null}function D2(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=D2(t);if(e!==null)return e;t=t.sibling}return null}var O2=Kr.unstable_scheduleCallback,$b=Kr.unstable_cancelCallback,pq=Kr.unstable_shouldYield,gq=Kr.unstable_requestPaint,bt=Kr.unstable_now,mq=Kr.unstable_getCurrentPriorityLevel,R_=Kr.unstable_ImmediatePriority,N2=Kr.unstable_UserBlockingPriority,Dh=Kr.unstable_NormalPriority,yq=Kr.unstable_LowPriority,L2=Kr.unstable_IdlePriority,Ld=null,jn=null;function wq(t){if(jn&&typeof jn.onCommitFiberRoot=="function")try{jn.onCommitFiberRoot(Ld,t,void 0,(t.current.flags&128)===128)}catch{}}var In=Math.clz32?Math.clz32:Tq,_q=Math.log,Eq=Math.LN2;function Tq(t){return t>>>=0,t===0?32:31-(_q(t)/Eq|0)|0}var yf=64,wf=4194304;function ju(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Oh(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,i=t.suspendedLanes,a=t.pingedLanes,s=r&268435455;if(s!==0){var o=s&~i;o!==0?n=ju(o):(a&=s,a!==0&&(n=ju(a)))}else s=r&~i,s!==0?n=ju(s):a!==0&&(n=ju(a));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,a=e&-e,i>=a||i===16&&(a&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-In(e),i=1<<r,n|=t[r],e&=~i;return n}function bq(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Sq(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,a=t.pendingLanes;0<a;){var s=31-In(a),o=1<<s,u=i[s];u===-1?(!(o&r)||o&n)&&(i[s]=bq(o,e)):u<=e&&(t.expiredLanes|=o),a&=~o}}function G1(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function M2(){var t=yf;return yf<<=1,!(yf&4194240)&&(yf=64),t}function wp(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function bc(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-In(e),t[e]=r}function Iq(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var i=31-In(r),a=1<<i;e[i]=0,n[i]=-1,t[i]=-1,r&=~a}}function k_(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-In(r),i=1<<n;i&e|t[n]&e&&(t[n]|=e),r&=~i}}var Je=0;function V2(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var F2,A_,B2,q2,$2,K1=!1,_f=[],Ki=null,Qi=null,Yi=null,Rl=new Map,kl=new Map,Mi=[],Cq="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function zb(t,e){switch(t){case"focusin":case"focusout":Ki=null;break;case"dragenter":case"dragleave":Qi=null;break;case"mouseover":case"mouseout":Yi=null;break;case"pointerover":case"pointerout":Rl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":kl.delete(e.pointerId)}}function Cu(t,e,r,n,i,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:a,targetContainers:[i]},e!==null&&(e=Ic(e),e!==null&&A_(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function xq(t,e,r,n,i){switch(e){case"focusin":return Ki=Cu(Ki,t,e,r,n,i),!0;case"dragenter":return Qi=Cu(Qi,t,e,r,n,i),!0;case"mouseover":return Yi=Cu(Yi,t,e,r,n,i),!0;case"pointerover":var a=i.pointerId;return Rl.set(a,Cu(Rl.get(a)||null,t,e,r,n,i)),!0;case"gotpointercapture":return a=i.pointerId,kl.set(a,Cu(kl.get(a)||null,t,e,r,n,i)),!0}return!1}function z2(t){var e=$a(t.target);if(e!==null){var r=ms(e);if(r!==null){if(e=r.tag,e===13){if(e=A2(r),e!==null){t.blockedOn=e,$2(t.priority,function(){B2(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function nh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=Q1(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);U1=n,r.target.dispatchEvent(n),U1=null}else return e=Ic(r),e!==null&&A_(e),t.blockedOn=r,!1;e.shift()}return!0}function Ub(t,e,r){nh(t)&&r.delete(e)}function Rq(){K1=!1,Ki!==null&&nh(Ki)&&(Ki=null),Qi!==null&&nh(Qi)&&(Qi=null),Yi!==null&&nh(Yi)&&(Yi=null),Rl.forEach(Ub),kl.forEach(Ub)}function xu(t,e){t.blockedOn===e&&(t.blockedOn=null,K1||(K1=!0,Kr.unstable_scheduleCallback(Kr.unstable_NormalPriority,Rq)))}function Al(t){function e(i){return xu(i,t)}if(0<_f.length){xu(_f[0],t);for(var r=1;r<_f.length;r++){var n=_f[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Ki!==null&&xu(Ki,t),Qi!==null&&xu(Qi,t),Yi!==null&&xu(Yi,t),Rl.forEach(e),kl.forEach(e),r=0;r<Mi.length;r++)n=Mi[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<Mi.length&&(r=Mi[0],r.blockedOn===null);)z2(r),r.blockedOn===null&&Mi.shift()}var co=bi.ReactCurrentBatchConfig,Nh=!0;function kq(t,e,r,n){var i=Je,a=co.transition;co.transition=null;try{Je=1,P_(t,e,r,n)}finally{Je=i,co.transition=a}}function Aq(t,e,r,n){var i=Je,a=co.transition;co.transition=null;try{Je=4,P_(t,e,r,n)}finally{Je=i,co.transition=a}}function P_(t,e,r,n){if(Nh){var i=Q1(t,e,r,n);if(i===null)kp(t,e,n,Lh,r),zb(t,n);else if(xq(i,t,e,r,n))n.stopPropagation();else if(zb(t,n),e&4&&-1<Cq.indexOf(t)){for(;i!==null;){var a=Ic(i);if(a!==null&&F2(a),a=Q1(t,e,r,n),a===null&&kp(t,e,n,Lh,r),a===i)break;i=a}i!==null&&n.stopPropagation()}else kp(t,e,n,null,r)}}var Lh=null;function Q1(t,e,r,n){if(Lh=null,t=x_(n),t=$a(t),t!==null)if(e=ms(t),e===null)t=null;else if(r=e.tag,r===13){if(t=A2(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Lh=t,null}function U2(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(mq()){case R_:return 1;case N2:return 4;case Dh:case yq:return 16;case L2:return 536870912;default:return 16}default:return 16}}var Ui=null,D_=null,ih=null;function j2(){if(ih)return ih;var t,e=D_,r=e.length,n,i="value"in Ui?Ui.value:Ui.textContent,a=i.length;for(t=0;t<r&&e[t]===i[t];t++);var s=r-t;for(n=1;n<=s&&e[r-n]===i[a-n];n++);return ih=i.slice(t,1<n?1-n:void 0)}function ah(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ef(){return!0}function jb(){return!1}function Xr(t){function e(r,n,i,a,s){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=a,this.target=s,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(r=t[o],this[o]=r?r(a):a[o]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Ef:jb,this.isPropagationStopped=jb,this}return gt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Ef)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Ef)},persist:function(){},isPersistent:Ef}),e}var Wo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},O_=Xr(Wo),Sc=gt({},Wo,{view:0,detail:0}),Pq=Xr(Sc),_p,Ep,Ru,Md=gt({},Sc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:N_,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ru&&(Ru&&t.type==="mousemove"?(_p=t.screenX-Ru.screenX,Ep=t.screenY-Ru.screenY):Ep=_p=0,Ru=t),_p)},movementY:function(t){return"movementY"in t?t.movementY:Ep}}),Wb=Xr(Md),Dq=gt({},Md,{dataTransfer:0}),Oq=Xr(Dq),Nq=gt({},Sc,{relatedTarget:0}),Tp=Xr(Nq),Lq=gt({},Wo,{animationName:0,elapsedTime:0,pseudoElement:0}),Mq=Xr(Lq),Vq=gt({},Wo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Fq=Xr(Vq),Bq=gt({},Wo,{data:0}),Hb=Xr(Bq),qq={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$q={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zq={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Uq(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=zq[t])?!!e[t]:!1}function N_(){return Uq}var jq=gt({},Sc,{key:function(t){if(t.key){var e=qq[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ah(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?$q[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:N_,charCode:function(t){return t.type==="keypress"?ah(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ah(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Wq=Xr(jq),Hq=gt({},Md,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Gb=Xr(Hq),Gq=gt({},Sc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:N_}),Kq=Xr(Gq),Qq=gt({},Wo,{propertyName:0,elapsedTime:0,pseudoElement:0}),Yq=Xr(Qq),Xq=gt({},Md,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Jq=Xr(Xq),Zq=[9,13,27,32],L_=di&&"CompositionEvent"in window,ll=null;di&&"documentMode"in document&&(ll=document.documentMode);var e4=di&&"TextEvent"in window&&!ll,W2=di&&(!L_||ll&&8<ll&&11>=ll),Kb=" ",Qb=!1;function H2(t,e){switch(t){case"keyup":return Zq.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function G2(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Hs=!1;function t4(t,e){switch(t){case"compositionend":return G2(e);case"keypress":return e.which!==32?null:(Qb=!0,Kb);case"textInput":return t=e.data,t===Kb&&Qb?null:t;default:return null}}function r4(t,e){if(Hs)return t==="compositionend"||!L_&&H2(t,e)?(t=j2(),ih=D_=Ui=null,Hs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return W2&&e.locale!=="ko"?null:e.data;default:return null}}var n4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Yb(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!n4[t.type]:e==="textarea"}function K2(t,e,r,n){I2(n),e=Mh(e,"onChange"),0<e.length&&(r=new O_("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var cl=null,Pl=null;function i4(t){aD(t,0)}function Vd(t){var e=Qs(t);if(y2(e))return t}function a4(t,e){if(t==="change")return e}var Q2=!1;if(di){var bp;if(di){var Sp="oninput"in document;if(!Sp){var Xb=document.createElement("div");Xb.setAttribute("oninput","return;"),Sp=typeof Xb.oninput=="function"}bp=Sp}else bp=!1;Q2=bp&&(!document.documentMode||9<document.documentMode)}function Jb(){cl&&(cl.detachEvent("onpropertychange",Y2),Pl=cl=null)}function Y2(t){if(t.propertyName==="value"&&Vd(Pl)){var e=[];K2(e,Pl,t,x_(t)),k2(i4,e)}}function s4(t,e,r){t==="focusin"?(Jb(),cl=e,Pl=r,cl.attachEvent("onpropertychange",Y2)):t==="focusout"&&Jb()}function o4(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Vd(Pl)}function u4(t,e){if(t==="click")return Vd(e)}function l4(t,e){if(t==="input"||t==="change")return Vd(e)}function c4(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var kn=typeof Object.is=="function"?Object.is:c4;function Dl(t,e){if(kn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!P1.call(e,i)||!kn(t[i],e[i]))return!1}return!0}function Zb(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function eS(t,e){var r=Zb(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Zb(r)}}function X2(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?X2(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function J2(){for(var t=window,e=kh();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=kh(t.document)}return e}function M_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function f4(t){var e=J2(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&X2(r.ownerDocument.documentElement,r)){if(n!==null&&M_(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=r.textContent.length,a=Math.min(n.start,i);n=n.end===void 0?a:Math.min(n.end,i),!t.extend&&a>n&&(i=n,n=a,a=i),i=eS(r,a);var s=eS(r,n);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),a>n?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var h4=di&&"documentMode"in document&&11>=document.documentMode,Gs=null,Y1=null,fl=null,X1=!1;function tS(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;X1||Gs==null||Gs!==kh(n)||(n=Gs,"selectionStart"in n&&M_(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),fl&&Dl(fl,n)||(fl=n,n=Mh(Y1,"onSelect"),0<n.length&&(e=new O_("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Gs)))}function Tf(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Ks={animationend:Tf("Animation","AnimationEnd"),animationiteration:Tf("Animation","AnimationIteration"),animationstart:Tf("Animation","AnimationStart"),transitionend:Tf("Transition","TransitionEnd")},Ip={},Z2={};di&&(Z2=document.createElement("div").style,"AnimationEvent"in window||(delete Ks.animationend.animation,delete Ks.animationiteration.animation,delete Ks.animationstart.animation),"TransitionEvent"in window||delete Ks.transitionend.transition);function Fd(t){if(Ip[t])return Ip[t];if(!Ks[t])return t;var e=Ks[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in Z2)return Ip[t]=e[r];return t}var eD=Fd("animationend"),tD=Fd("animationiteration"),rD=Fd("animationstart"),nD=Fd("transitionend"),iD=new Map,rS="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ea(t,e){iD.set(t,e),gs(e,[t])}for(var Cp=0;Cp<rS.length;Cp++){var xp=rS[Cp],d4=xp.toLowerCase(),v4=xp[0].toUpperCase()+xp.slice(1);Ea(d4,"on"+v4)}Ea(eD,"onAnimationEnd");Ea(tD,"onAnimationIteration");Ea(rD,"onAnimationStart");Ea("dblclick","onDoubleClick");Ea("focusin","onFocus");Ea("focusout","onBlur");Ea(nD,"onTransitionEnd");bo("onMouseEnter",["mouseout","mouseover"]);bo("onMouseLeave",["mouseout","mouseover"]);bo("onPointerEnter",["pointerout","pointerover"]);bo("onPointerLeave",["pointerout","pointerover"]);gs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));gs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));gs("onBeforeInput",["compositionend","keypress","textInput","paste"]);gs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));gs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));gs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),p4=new Set("cancel close invalid load scroll toggle".split(" ").concat(Wu));function nS(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,dq(n,e,void 0,t),t.currentTarget=null}function aD(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;e:{var a=void 0;if(e)for(var s=n.length-1;0<=s;s--){var o=n[s],u=o.instance,l=o.currentTarget;if(o=o.listener,u!==a&&i.isPropagationStopped())break e;nS(i,o,l),a=u}else for(s=0;s<n.length;s++){if(o=n[s],u=o.instance,l=o.currentTarget,o=o.listener,u!==a&&i.isPropagationStopped())break e;nS(i,o,l),a=u}}}if(Ph)throw t=H1,Ph=!1,H1=null,t}function st(t,e){var r=e[rw];r===void 0&&(r=e[rw]=new Set);var n=t+"__bubble";r.has(n)||(sD(e,t,2,!1),r.add(n))}function Rp(t,e,r){var n=0;e&&(n|=4),sD(r,t,n,e)}var bf="_reactListening"+Math.random().toString(36).slice(2);function Ol(t){if(!t[bf]){t[bf]=!0,d2.forEach(function(r){r!=="selectionchange"&&(p4.has(r)||Rp(r,!1,t),Rp(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[bf]||(e[bf]=!0,Rp("selectionchange",!1,e))}}function sD(t,e,r,n){switch(U2(e)){case 1:var i=kq;break;case 4:i=Aq;break;default:i=P_}r=i.bind(null,e,r,t),i=void 0,!W1||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function kp(t,e,r,n,i){var a=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var s=n.tag;if(s===3||s===4){var o=n.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(s===4)for(s=n.return;s!==null;){var u=s.tag;if((u===3||u===4)&&(u=s.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;s=s.return}for(;o!==null;){if(s=$a(o),s===null)return;if(u=s.tag,u===5||u===6){n=a=s;continue e}o=o.parentNode}}n=n.return}k2(function(){var l=a,c=x_(r),f=[];e:{var h=iD.get(t);if(h!==void 0){var d=O_,v=t;switch(t){case"keypress":if(ah(r)===0)break e;case"keydown":case"keyup":d=Wq;break;case"focusin":v="focus",d=Tp;break;case"focusout":v="blur",d=Tp;break;case"beforeblur":case"afterblur":d=Tp;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":d=Wb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":d=Oq;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":d=Kq;break;case eD:case tD:case rD:d=Mq;break;case nD:d=Yq;break;case"scroll":d=Pq;break;case"wheel":d=Jq;break;case"copy":case"cut":case"paste":d=Fq;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":d=Gb}var w=(e&4)!==0,m=!w&&t==="scroll",p=w?h!==null?h+"Capture":null:h;w=[];for(var g=l,y;g!==null;){y=g;var _=y.stateNode;if(y.tag===5&&_!==null&&(y=_,p!==null&&(_=xl(g,p),_!=null&&w.push(Nl(g,_,y)))),m)break;g=g.return}0<w.length&&(h=new d(h,v,null,r,c),f.push({event:h,listeners:w}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",d=t==="mouseout"||t==="pointerout",h&&r!==U1&&(v=r.relatedTarget||r.fromElement)&&($a(v)||v[vi]))break e;if((d||h)&&(h=c.window===c?c:(h=c.ownerDocument)?h.defaultView||h.parentWindow:window,d?(v=r.relatedTarget||r.toElement,d=l,v=v?$a(v):null,v!==null&&(m=ms(v),v!==m||v.tag!==5&&v.tag!==6)&&(v=null)):(d=null,v=l),d!==v)){if(w=Wb,_="onMouseLeave",p="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(w=Gb,_="onPointerLeave",p="onPointerEnter",g="pointer"),m=d==null?h:Qs(d),y=v==null?h:Qs(v),h=new w(_,g+"leave",d,r,c),h.target=m,h.relatedTarget=y,_=null,$a(c)===l&&(w=new w(p,g+"enter",v,r,c),w.target=y,w.relatedTarget=m,_=w),m=_,d&&v)t:{for(w=d,p=v,g=0,y=w;y;y=Ds(y))g++;for(y=0,_=p;_;_=Ds(_))y++;for(;0<g-y;)w=Ds(w),g--;for(;0<y-g;)p=Ds(p),y--;for(;g--;){if(w===p||p!==null&&w===p.alternate)break t;w=Ds(w),p=Ds(p)}w=null}else w=null;d!==null&&iS(f,h,d,w,!1),v!==null&&m!==null&&iS(f,m,v,w,!0)}}e:{if(h=l?Qs(l):window,d=h.nodeName&&h.nodeName.toLowerCase(),d==="select"||d==="input"&&h.type==="file")var T=a4;else if(Yb(h))if(Q2)T=l4;else{T=o4;var b=s4}else(d=h.nodeName)&&d.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(T=u4);if(T&&(T=T(t,l))){K2(f,T,r,c);break e}b&&b(t,h,l),t==="focusout"&&(b=h._wrapperState)&&b.controlled&&h.type==="number"&&F1(h,"number",h.value)}switch(b=l?Qs(l):window,t){case"focusin":(Yb(b)||b.contentEditable==="true")&&(Gs=b,Y1=l,fl=null);break;case"focusout":fl=Y1=Gs=null;break;case"mousedown":X1=!0;break;case"contextmenu":case"mouseup":case"dragend":X1=!1,tS(f,r,c);break;case"selectionchange":if(h4)break;case"keydown":case"keyup":tS(f,r,c)}var E;if(L_)e:{switch(t){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else Hs?H2(t,r)&&(I="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(I="onCompositionStart");I&&(W2&&r.locale!=="ko"&&(Hs||I!=="onCompositionStart"?I==="onCompositionEnd"&&Hs&&(E=j2()):(Ui=c,D_="value"in Ui?Ui.value:Ui.textContent,Hs=!0)),b=Mh(l,I),0<b.length&&(I=new Hb(I,t,null,r,c),f.push({event:I,listeners:b}),E?I.data=E:(E=G2(r),E!==null&&(I.data=E)))),(E=e4?t4(t,r):r4(t,r))&&(l=Mh(l,"onBeforeInput"),0<l.length&&(c=new Hb("onBeforeInput","beforeinput",null,r,c),f.push({event:c,listeners:l}),c.data=E))}aD(f,e)})}function Nl(t,e,r){return{instance:t,listener:e,currentTarget:r}}function Mh(t,e){for(var r=e+"Capture",n=[];t!==null;){var i=t,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=xl(t,r),a!=null&&n.unshift(Nl(t,a,i)),a=xl(t,e),a!=null&&n.push(Nl(t,a,i))),t=t.return}return n}function Ds(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function iS(t,e,r,n,i){for(var a=e._reactName,s=[];r!==null&&r!==n;){var o=r,u=o.alternate,l=o.stateNode;if(u!==null&&u===n)break;o.tag===5&&l!==null&&(o=l,i?(u=xl(r,a),u!=null&&s.unshift(Nl(r,u,o))):i||(u=xl(r,a),u!=null&&s.push(Nl(r,u,o)))),r=r.return}s.length!==0&&t.push({event:e,listeners:s})}var g4=/\r\n?/g,m4=/\u0000|\uFFFD/g;function aS(t){return(typeof t=="string"?t:""+t).replace(g4,`
`).replace(m4,"")}function Sf(t,e,r){if(e=aS(e),aS(t)!==e&&r)throw Error(oe(425))}function Vh(){}var J1=null,Z1=null;function ew(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var tw=typeof setTimeout=="function"?setTimeout:void 0,y4=typeof clearTimeout=="function"?clearTimeout:void 0,sS=typeof Promise=="function"?Promise:void 0,w4=typeof queueMicrotask=="function"?queueMicrotask:typeof sS<"u"?function(t){return sS.resolve(null).then(t).catch(_4)}:tw;function _4(t){setTimeout(function(){throw t})}function Ap(t,e){var r=e,n=0;do{var i=r.nextSibling;if(t.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){t.removeChild(i),Al(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);Al(e)}function Xi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function oS(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Ho=Math.random().toString(36).slice(2),Fn="__reactFiber$"+Ho,Ll="__reactProps$"+Ho,vi="__reactContainer$"+Ho,rw="__reactEvents$"+Ho,E4="__reactListeners$"+Ho,T4="__reactHandles$"+Ho;function $a(t){var e=t[Fn];if(e)return e;for(var r=t.parentNode;r;){if(e=r[vi]||r[Fn]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=oS(t);t!==null;){if(r=t[Fn])return r;t=oS(t)}return e}t=r,r=t.parentNode}return null}function Ic(t){return t=t[Fn]||t[vi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Qs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(oe(33))}function Bd(t){return t[Ll]||null}var nw=[],Ys=-1;function Ta(t){return{current:t}}function lt(t){0>Ys||(t.current=nw[Ys],nw[Ys]=null,Ys--)}function nt(t,e){Ys++,nw[Ys]=t.current,t.current=e}var ha={},mr=Ta(ha),Mr=Ta(!1),Za=ha;function So(t,e){var r=t.type.contextTypes;if(!r)return ha;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in r)i[a]=e[a];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Vr(t){return t=t.childContextTypes,t!=null}function Fh(){lt(Mr),lt(mr)}function uS(t,e,r){if(mr.current!==ha)throw Error(oe(168));nt(mr,e),nt(Mr,r)}function oD(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(oe(108,sq(t)||"Unknown",i));return gt({},r,n)}function Bh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ha,Za=mr.current,nt(mr,t),nt(Mr,Mr.current),!0}function lS(t,e,r){var n=t.stateNode;if(!n)throw Error(oe(169));r?(t=oD(t,e,Za),n.__reactInternalMemoizedMergedChildContext=t,lt(Mr),lt(mr),nt(mr,t)):lt(Mr),nt(Mr,r)}var ai=null,qd=!1,Pp=!1;function uD(t){ai===null?ai=[t]:ai.push(t)}function b4(t){qd=!0,uD(t)}function ba(){if(!Pp&&ai!==null){Pp=!0;var t=0,e=Je;try{var r=ai;for(Je=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}ai=null,qd=!1}catch(i){throw ai!==null&&(ai=ai.slice(t+1)),O2(R_,ba),i}finally{Je=e,Pp=!1}}return null}var Xs=[],Js=0,qh=null,$h=0,tn=[],rn=0,es=null,si=1,oi="";function La(t,e){Xs[Js++]=$h,Xs[Js++]=qh,qh=t,$h=e}function lD(t,e,r){tn[rn++]=si,tn[rn++]=oi,tn[rn++]=es,es=t;var n=si;t=oi;var i=32-In(n)-1;n&=~(1<<i),r+=1;var a=32-In(e)+i;if(30<a){var s=i-i%5;a=(n&(1<<s)-1).toString(32),n>>=s,i-=s,si=1<<32-In(e)+i|r<<i|n,oi=a+t}else si=1<<a|r<<i|n,oi=t}function V_(t){t.return!==null&&(La(t,1),lD(t,1,0))}function F_(t){for(;t===qh;)qh=Xs[--Js],Xs[Js]=null,$h=Xs[--Js],Xs[Js]=null;for(;t===es;)es=tn[--rn],tn[rn]=null,oi=tn[--rn],tn[rn]=null,si=tn[--rn],tn[rn]=null}var Hr=null,jr=null,ft=!1,bn=null;function cD(t,e){var r=on(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function cS(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Hr=t,jr=Xi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Hr=t,jr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=es!==null?{id:si,overflow:oi}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=on(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Hr=t,jr=null,!0):!1;default:return!1}}function iw(t){return(t.mode&1)!==0&&(t.flags&128)===0}function aw(t){if(ft){var e=jr;if(e){var r=e;if(!cS(t,e)){if(iw(t))throw Error(oe(418));e=Xi(r.nextSibling);var n=Hr;e&&cS(t,e)?cD(n,r):(t.flags=t.flags&-4097|2,ft=!1,Hr=t)}}else{if(iw(t))throw Error(oe(418));t.flags=t.flags&-4097|2,ft=!1,Hr=t}}}function fS(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Hr=t}function If(t){if(t!==Hr)return!1;if(!ft)return fS(t),ft=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ew(t.type,t.memoizedProps)),e&&(e=jr)){if(iw(t))throw fD(),Error(oe(418));for(;e;)cD(t,e),e=Xi(e.nextSibling)}if(fS(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(oe(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){jr=Xi(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}jr=null}}else jr=Hr?Xi(t.stateNode.nextSibling):null;return!0}function fD(){for(var t=jr;t;)t=Xi(t.nextSibling)}function Io(){jr=Hr=null,ft=!1}function B_(t){bn===null?bn=[t]:bn.push(t)}var S4=bi.ReactCurrentBatchConfig;function yn(t,e){if(t&&t.defaultProps){e=gt({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}var zh=Ta(null),Uh=null,Zs=null,q_=null;function $_(){q_=Zs=Uh=null}function z_(t){var e=zh.current;lt(zh),t._currentValue=e}function sw(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function fo(t,e){Uh=t,q_=Zs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Lr=!0),t.firstContext=null)}function cn(t){var e=t._currentValue;if(q_!==t)if(t={context:t,memoizedValue:e,next:null},Zs===null){if(Uh===null)throw Error(oe(308));Zs=t,Uh.dependencies={lanes:0,firstContext:t}}else Zs=Zs.next=t;return e}var za=null;function U_(t){za===null?za=[t]:za.push(t)}function hD(t,e,r,n){var i=e.interleaved;return i===null?(r.next=r,U_(e)):(r.next=i.next,i.next=r),e.interleaved=r,pi(t,n)}function pi(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Li=!1;function j_(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function dD(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function hi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ji(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,We&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,pi(t,r)}return i=n.interleaved,i===null?(e.next=e,U_(n)):(e.next=i.next,i.next=e),n.interleaved=e,pi(t,r)}function sh(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,k_(t,r)}}function hS(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var s={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?i=a=s:a=a.next=s,r=r.next}while(r!==null);a===null?i=a=e:a=a.next=e}else i=a=e;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function jh(t,e,r,n){var i=t.updateQueue;Li=!1;var a=i.firstBaseUpdate,s=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var u=o,l=u.next;u.next=null,s===null?a=l:s.next=l,s=u;var c=t.alternate;c!==null&&(c=c.updateQueue,o=c.lastBaseUpdate,o!==s&&(o===null?c.firstBaseUpdate=l:o.next=l,c.lastBaseUpdate=u))}if(a!==null){var f=i.baseState;s=0,c=l=u=null,o=a;do{var h=o.lane,d=o.eventTime;if((n&h)===h){c!==null&&(c=c.next={eventTime:d,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var v=t,w=o;switch(h=e,d=r,w.tag){case 1:if(v=w.payload,typeof v=="function"){f=v.call(d,f,h);break e}f=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=w.payload,h=typeof v=="function"?v.call(d,f,h):v,h==null)break e;f=gt({},f,h);break e;case 2:Li=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[o]:h.push(o))}else d={eventTime:d,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},c===null?(l=c=d,u=f):c=c.next=d,s|=h;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;h=o,o=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(c===null&&(u=f),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else a===null&&(i.shared.lanes=0);rs|=s,t.lanes=s,t.memoizedState=f}}function dS(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(oe(191,i));i.call(n)}}}var vD=new h2.Component().refs;function ow(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:gt({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var $d={isMounted:function(t){return(t=t._reactInternals)?ms(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=xr(),i=ea(t),a=hi(n,i);a.payload=e,r!=null&&(a.callback=r),e=Ji(t,a,i),e!==null&&(Cn(e,t,i,n),sh(e,t,i))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=xr(),i=ea(t),a=hi(n,i);a.tag=1,a.payload=e,r!=null&&(a.callback=r),e=Ji(t,a,i),e!==null&&(Cn(e,t,i,n),sh(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=xr(),n=ea(t),i=hi(r,n);i.tag=2,e!=null&&(i.callback=e),e=Ji(t,i,n),e!==null&&(Cn(e,t,n,r),sh(e,t,n))}};function vS(t,e,r,n,i,a,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,a,s):e.prototype&&e.prototype.isPureReactComponent?!Dl(r,n)||!Dl(i,a):!0}function pD(t,e,r){var n=!1,i=ha,a=e.contextType;return typeof a=="object"&&a!==null?a=cn(a):(i=Vr(e)?Za:mr.current,n=e.contextTypes,a=(n=n!=null)?So(t,i):ha),e=new e(r,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=$d,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=a),e}function pS(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&$d.enqueueReplaceState(e,e.state,null)}function uw(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs=vD,j_(t);var a=e.contextType;typeof a=="object"&&a!==null?i.context=cn(a):(a=Vr(e)?Za:mr.current,i.context=So(t,a)),i.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(ow(t,e,a,r),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&$d.enqueueReplaceState(i,i.state,null),jh(t,r,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function ku(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(oe(309));var n=r.stateNode}if(!n)throw Error(oe(147,t));var i=n,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(s){var o=i.refs;o===vD&&(o=i.refs={}),s===null?delete o[a]:o[a]=s},e._stringRef=a,e)}if(typeof t!="string")throw Error(oe(284));if(!r._owner)throw Error(oe(290,t))}return t}function Cf(t,e){throw t=Object.prototype.toString.call(e),Error(oe(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function gS(t){var e=t._init;return e(t._payload)}function gD(t){function e(p,g){if(t){var y=p.deletions;y===null?(p.deletions=[g],p.flags|=16):y.push(g)}}function r(p,g){if(!t)return null;for(;g!==null;)e(p,g),g=g.sibling;return null}function n(p,g){for(p=new Map;g!==null;)g.key!==null?p.set(g.key,g):p.set(g.index,g),g=g.sibling;return p}function i(p,g){return p=ta(p,g),p.index=0,p.sibling=null,p}function a(p,g,y){return p.index=y,t?(y=p.alternate,y!==null?(y=y.index,y<g?(p.flags|=2,g):y):(p.flags|=2,g)):(p.flags|=1048576,g)}function s(p){return t&&p.alternate===null&&(p.flags|=2),p}function o(p,g,y,_){return g===null||g.tag!==6?(g=Fp(y,p.mode,_),g.return=p,g):(g=i(g,y),g.return=p,g)}function u(p,g,y,_){var T=y.type;return T===Ws?c(p,g,y.props.children,_,y.key):g!==null&&(g.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Ni&&gS(T)===g.type)?(_=i(g,y.props),_.ref=ku(p,g,y),_.return=p,_):(_=hh(y.type,y.key,y.props,null,p.mode,_),_.ref=ku(p,g,y),_.return=p,_)}function l(p,g,y,_){return g===null||g.tag!==4||g.stateNode.containerInfo!==y.containerInfo||g.stateNode.implementation!==y.implementation?(g=Bp(y,p.mode,_),g.return=p,g):(g=i(g,y.children||[]),g.return=p,g)}function c(p,g,y,_,T){return g===null||g.tag!==7?(g=Ya(y,p.mode,_,T),g.return=p,g):(g=i(g,y),g.return=p,g)}function f(p,g,y){if(typeof g=="string"&&g!==""||typeof g=="number")return g=Fp(""+g,p.mode,y),g.return=p,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case pf:return y=hh(g.type,g.key,g.props,null,p.mode,y),y.ref=ku(p,null,g),y.return=p,y;case js:return g=Bp(g,p.mode,y),g.return=p,g;case Ni:var _=g._init;return f(p,_(g._payload),y)}if(Uu(g)||Su(g))return g=Ya(g,p.mode,y,null),g.return=p,g;Cf(p,g)}return null}function h(p,g,y,_){var T=g!==null?g.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return T!==null?null:o(p,g,""+y,_);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case pf:return y.key===T?u(p,g,y,_):null;case js:return y.key===T?l(p,g,y,_):null;case Ni:return T=y._init,h(p,g,T(y._payload),_)}if(Uu(y)||Su(y))return T!==null?null:c(p,g,y,_,null);Cf(p,y)}return null}function d(p,g,y,_,T){if(typeof _=="string"&&_!==""||typeof _=="number")return p=p.get(y)||null,o(g,p,""+_,T);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case pf:return p=p.get(_.key===null?y:_.key)||null,u(g,p,_,T);case js:return p=p.get(_.key===null?y:_.key)||null,l(g,p,_,T);case Ni:var b=_._init;return d(p,g,y,b(_._payload),T)}if(Uu(_)||Su(_))return p=p.get(y)||null,c(g,p,_,T,null);Cf(g,_)}return null}function v(p,g,y,_){for(var T=null,b=null,E=g,I=g=0,S=null;E!==null&&I<y.length;I++){E.index>I?(S=E,E=null):S=E.sibling;var C=h(p,E,y[I],_);if(C===null){E===null&&(E=S);break}t&&E&&C.alternate===null&&e(p,E),g=a(C,g,I),b===null?T=C:b.sibling=C,b=C,E=S}if(I===y.length)return r(p,E),ft&&La(p,I),T;if(E===null){for(;I<y.length;I++)E=f(p,y[I],_),E!==null&&(g=a(E,g,I),b===null?T=E:b.sibling=E,b=E);return ft&&La(p,I),T}for(E=n(p,E);I<y.length;I++)S=d(E,p,I,y[I],_),S!==null&&(t&&S.alternate!==null&&E.delete(S.key===null?I:S.key),g=a(S,g,I),b===null?T=S:b.sibling=S,b=S);return t&&E.forEach(function(R){return e(p,R)}),ft&&La(p,I),T}function w(p,g,y,_){var T=Su(y);if(typeof T!="function")throw Error(oe(150));if(y=T.call(y),y==null)throw Error(oe(151));for(var b=T=null,E=g,I=g=0,S=null,C=y.next();E!==null&&!C.done;I++,C=y.next()){E.index>I?(S=E,E=null):S=E.sibling;var R=h(p,E,C.value,_);if(R===null){E===null&&(E=S);break}t&&E&&R.alternate===null&&e(p,E),g=a(R,g,I),b===null?T=R:b.sibling=R,b=R,E=S}if(C.done)return r(p,E),ft&&La(p,I),T;if(E===null){for(;!C.done;I++,C=y.next())C=f(p,C.value,_),C!==null&&(g=a(C,g,I),b===null?T=C:b.sibling=C,b=C);return ft&&La(p,I),T}for(E=n(p,E);!C.done;I++,C=y.next())C=d(E,p,I,C.value,_),C!==null&&(t&&C.alternate!==null&&E.delete(C.key===null?I:C.key),g=a(C,g,I),b===null?T=C:b.sibling=C,b=C);return t&&E.forEach(function(x){return e(p,x)}),ft&&La(p,I),T}function m(p,g,y,_){if(typeof y=="object"&&y!==null&&y.type===Ws&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case pf:e:{for(var T=y.key,b=g;b!==null;){if(b.key===T){if(T=y.type,T===Ws){if(b.tag===7){r(p,b.sibling),g=i(b,y.props.children),g.return=p,p=g;break e}}else if(b.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Ni&&gS(T)===b.type){r(p,b.sibling),g=i(b,y.props),g.ref=ku(p,b,y),g.return=p,p=g;break e}r(p,b);break}else e(p,b);b=b.sibling}y.type===Ws?(g=Ya(y.props.children,p.mode,_,y.key),g.return=p,p=g):(_=hh(y.type,y.key,y.props,null,p.mode,_),_.ref=ku(p,g,y),_.return=p,p=_)}return s(p);case js:e:{for(b=y.key;g!==null;){if(g.key===b)if(g.tag===4&&g.stateNode.containerInfo===y.containerInfo&&g.stateNode.implementation===y.implementation){r(p,g.sibling),g=i(g,y.children||[]),g.return=p,p=g;break e}else{r(p,g);break}else e(p,g);g=g.sibling}g=Bp(y,p.mode,_),g.return=p,p=g}return s(p);case Ni:return b=y._init,m(p,g,b(y._payload),_)}if(Uu(y))return v(p,g,y,_);if(Su(y))return w(p,g,y,_);Cf(p,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,g!==null&&g.tag===6?(r(p,g.sibling),g=i(g,y),g.return=p,p=g):(r(p,g),g=Fp(y,p.mode,_),g.return=p,p=g),s(p)):r(p,g)}return m}var Co=gD(!0),mD=gD(!1),Cc={},Wn=Ta(Cc),Ml=Ta(Cc),Vl=Ta(Cc);function Ua(t){if(t===Cc)throw Error(oe(174));return t}function W_(t,e){switch(nt(Vl,e),nt(Ml,t),nt(Wn,Cc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:q1(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=q1(e,t)}lt(Wn),nt(Wn,e)}function xo(){lt(Wn),lt(Ml),lt(Vl)}function yD(t){Ua(Vl.current);var e=Ua(Wn.current),r=q1(e,t.type);e!==r&&(nt(Ml,t),nt(Wn,r))}function H_(t){Ml.current===t&&(lt(Wn),lt(Ml))}var dt=Ta(0);function Wh(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Dp=[];function G_(){for(var t=0;t<Dp.length;t++)Dp[t]._workInProgressVersionPrimary=null;Dp.length=0}var oh=bi.ReactCurrentDispatcher,Op=bi.ReactCurrentBatchConfig,ts=0,vt=null,Dt=null,zt=null,Hh=!1,hl=!1,Fl=0,I4=0;function ur(){throw Error(oe(321))}function K_(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!kn(t[r],e[r]))return!1;return!0}function Q_(t,e,r,n,i,a){if(ts=a,vt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,oh.current=t===null||t.memoizedState===null?k4:A4,t=r(n,i),hl){a=0;do{if(hl=!1,Fl=0,25<=a)throw Error(oe(301));a+=1,zt=Dt=null,e.updateQueue=null,oh.current=P4,t=r(n,i)}while(hl)}if(oh.current=Gh,e=Dt!==null&&Dt.next!==null,ts=0,zt=Dt=vt=null,Hh=!1,e)throw Error(oe(300));return t}function Y_(){var t=Fl!==0;return Fl=0,t}function Vn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zt===null?vt.memoizedState=zt=t:zt=zt.next=t,zt}function fn(){if(Dt===null){var t=vt.alternate;t=t!==null?t.memoizedState:null}else t=Dt.next;var e=zt===null?vt.memoizedState:zt.next;if(e!==null)zt=e,Dt=t;else{if(t===null)throw Error(oe(310));Dt=t,t={memoizedState:Dt.memoizedState,baseState:Dt.baseState,baseQueue:Dt.baseQueue,queue:Dt.queue,next:null},zt===null?vt.memoizedState=zt=t:zt=zt.next=t}return zt}function Bl(t,e){return typeof e=="function"?e(t):e}function Np(t){var e=fn(),r=e.queue;if(r===null)throw Error(oe(311));r.lastRenderedReducer=t;var n=Dt,i=n.baseQueue,a=r.pending;if(a!==null){if(i!==null){var s=i.next;i.next=a.next,a.next=s}n.baseQueue=i=a,r.pending=null}if(i!==null){a=i.next,n=n.baseState;var o=s=null,u=null,l=a;do{var c=l.lane;if((ts&c)===c)u!==null&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),n=l.hasEagerState?l.eagerState:t(n,l.action);else{var f={lane:c,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};u===null?(o=u=f,s=n):u=u.next=f,vt.lanes|=c,rs|=c}l=l.next}while(l!==null&&l!==a);u===null?s=n:u.next=o,kn(n,e.memoizedState)||(Lr=!0),e.memoizedState=n,e.baseState=s,e.baseQueue=u,r.lastRenderedState=n}if(t=r.interleaved,t!==null){i=t;do a=i.lane,vt.lanes|=a,rs|=a,i=i.next;while(i!==t)}else i===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Lp(t){var e=fn(),r=e.queue;if(r===null)throw Error(oe(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,a=e.memoizedState;if(i!==null){r.pending=null;var s=i=i.next;do a=t(a,s.action),s=s.next;while(s!==i);kn(a,e.memoizedState)||(Lr=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),r.lastRenderedState=a}return[a,n]}function wD(){}function _D(t,e){var r=vt,n=fn(),i=e(),a=!kn(n.memoizedState,i);if(a&&(n.memoizedState=i,Lr=!0),n=n.queue,X_(bD.bind(null,r,n,t),[t]),n.getSnapshot!==e||a||zt!==null&&zt.memoizedState.tag&1){if(r.flags|=2048,ql(9,TD.bind(null,r,n,i,e),void 0,null),Ut===null)throw Error(oe(349));ts&30||ED(r,e,i)}return i}function ED(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=vt.updateQueue,e===null?(e={lastEffect:null,stores:null},vt.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function TD(t,e,r,n){e.value=r,e.getSnapshot=n,SD(e)&&ID(t)}function bD(t,e,r){return r(function(){SD(e)&&ID(t)})}function SD(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!kn(t,r)}catch{return!0}}function ID(t){var e=pi(t,1);e!==null&&Cn(e,t,1,-1)}function mS(t){var e=Vn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Bl,lastRenderedState:t},e.queue=t,t=t.dispatch=R4.bind(null,vt,t),[e.memoizedState,t]}function ql(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=vt.updateQueue,e===null?(e={lastEffect:null,stores:null},vt.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function CD(){return fn().memoizedState}function uh(t,e,r,n){var i=Vn();vt.flags|=t,i.memoizedState=ql(1|e,r,void 0,n===void 0?null:n)}function zd(t,e,r,n){var i=fn();n=n===void 0?null:n;var a=void 0;if(Dt!==null){var s=Dt.memoizedState;if(a=s.destroy,n!==null&&K_(n,s.deps)){i.memoizedState=ql(e,r,a,n);return}}vt.flags|=t,i.memoizedState=ql(1|e,r,a,n)}function yS(t,e){return uh(8390656,8,t,e)}function X_(t,e){return zd(2048,8,t,e)}function xD(t,e){return zd(4,2,t,e)}function RD(t,e){return zd(4,4,t,e)}function kD(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function AD(t,e,r){return r=r!=null?r.concat([t]):null,zd(4,4,kD.bind(null,e,t),r)}function J_(){}function PD(t,e){var r=fn();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&K_(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function DD(t,e){var r=fn();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&K_(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function OD(t,e,r){return ts&21?(kn(r,e)||(r=M2(),vt.lanes|=r,rs|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Lr=!0),t.memoizedState=r)}function C4(t,e){var r=Je;Je=r!==0&&4>r?r:4,t(!0);var n=Op.transition;Op.transition={};try{t(!1),e()}finally{Je=r,Op.transition=n}}function ND(){return fn().memoizedState}function x4(t,e,r){var n=ea(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},LD(t))MD(e,r);else if(r=hD(t,e,r,n),r!==null){var i=xr();Cn(r,t,n,i),VD(r,e,n)}}function R4(t,e,r){var n=ea(t),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(LD(t))MD(e,i);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var s=e.lastRenderedState,o=a(s,r);if(i.hasEagerState=!0,i.eagerState=o,kn(o,s)){var u=e.interleaved;u===null?(i.next=i,U_(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}r=hD(t,e,i,n),r!==null&&(i=xr(),Cn(r,t,n,i),VD(r,e,n))}}function LD(t){var e=t.alternate;return t===vt||e!==null&&e===vt}function MD(t,e){hl=Hh=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function VD(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,k_(t,r)}}var Gh={readContext:cn,useCallback:ur,useContext:ur,useEffect:ur,useImperativeHandle:ur,useInsertionEffect:ur,useLayoutEffect:ur,useMemo:ur,useReducer:ur,useRef:ur,useState:ur,useDebugValue:ur,useDeferredValue:ur,useTransition:ur,useMutableSource:ur,useSyncExternalStore:ur,useId:ur,unstable_isNewReconciler:!1},k4={readContext:cn,useCallback:function(t,e){return Vn().memoizedState=[t,e===void 0?null:e],t},useContext:cn,useEffect:yS,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,uh(4194308,4,kD.bind(null,e,t),r)},useLayoutEffect:function(t,e){return uh(4194308,4,t,e)},useInsertionEffect:function(t,e){return uh(4,2,t,e)},useMemo:function(t,e){var r=Vn();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Vn();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=x4.bind(null,vt,t),[n.memoizedState,t]},useRef:function(t){var e=Vn();return t={current:t},e.memoizedState=t},useState:mS,useDebugValue:J_,useDeferredValue:function(t){return Vn().memoizedState=t},useTransition:function(){var t=mS(!1),e=t[0];return t=C4.bind(null,t[1]),Vn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=vt,i=Vn();if(ft){if(r===void 0)throw Error(oe(407));r=r()}else{if(r=e(),Ut===null)throw Error(oe(349));ts&30||ED(n,e,r)}i.memoizedState=r;var a={value:r,getSnapshot:e};return i.queue=a,yS(bD.bind(null,n,a,t),[t]),n.flags|=2048,ql(9,TD.bind(null,n,a,r,e),void 0,null),r},useId:function(){var t=Vn(),e=Ut.identifierPrefix;if(ft){var r=oi,n=si;r=(n&~(1<<32-In(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=Fl++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=I4++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},A4={readContext:cn,useCallback:PD,useContext:cn,useEffect:X_,useImperativeHandle:AD,useInsertionEffect:xD,useLayoutEffect:RD,useMemo:DD,useReducer:Np,useRef:CD,useState:function(){return Np(Bl)},useDebugValue:J_,useDeferredValue:function(t){var e=fn();return OD(e,Dt.memoizedState,t)},useTransition:function(){var t=Np(Bl)[0],e=fn().memoizedState;return[t,e]},useMutableSource:wD,useSyncExternalStore:_D,useId:ND,unstable_isNewReconciler:!1},P4={readContext:cn,useCallback:PD,useContext:cn,useEffect:X_,useImperativeHandle:AD,useInsertionEffect:xD,useLayoutEffect:RD,useMemo:DD,useReducer:Lp,useRef:CD,useState:function(){return Lp(Bl)},useDebugValue:J_,useDeferredValue:function(t){var e=fn();return Dt===null?e.memoizedState=t:OD(e,Dt.memoizedState,t)},useTransition:function(){var t=Lp(Bl)[0],e=fn().memoizedState;return[t,e]},useMutableSource:wD,useSyncExternalStore:_D,useId:ND,unstable_isNewReconciler:!1};function Ro(t,e){try{var r="",n=e;do r+=aq(n),n=n.return;while(n);var i=r}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:i,digest:null}}function Mp(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function lw(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var D4=typeof WeakMap=="function"?WeakMap:Map;function FD(t,e,r){r=hi(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){Qh||(Qh=!0,ww=n),lw(t,e)},r}function BD(t,e,r){r=hi(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;r.payload=function(){return n(i)},r.callback=function(){lw(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){lw(t,e),typeof n!="function"&&(Zi===null?Zi=new Set([this]):Zi.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),r}function wS(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new D4;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(r)||(i.add(r),t=H4.bind(null,t,e,r),e.then(t,t))}function _S(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function ES(t,e,r,n,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=hi(-1,1),e.tag=2,Ji(r,e,1))),r.lanes|=1),t)}var O4=bi.ReactCurrentOwner,Lr=!1;function Ir(t,e,r,n){e.child=t===null?mD(e,null,r,n):Co(e,t.child,r,n)}function TS(t,e,r,n,i){r=r.render;var a=e.ref;return fo(e,i),n=Q_(t,e,r,n,a,i),r=Y_(),t!==null&&!Lr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,gi(t,e,i)):(ft&&r&&V_(e),e.flags|=1,Ir(t,e,n,i),e.child)}function bS(t,e,r,n,i){if(t===null){var a=r.type;return typeof a=="function"&&!sE(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=a,qD(t,e,a,n,i)):(t=hh(r.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&i)){var s=a.memoizedProps;if(r=r.compare,r=r!==null?r:Dl,r(s,n)&&t.ref===e.ref)return gi(t,e,i)}return e.flags|=1,t=ta(a,n),t.ref=e.ref,t.return=e,e.child=t}function qD(t,e,r,n,i){if(t!==null){var a=t.memoizedProps;if(Dl(a,n)&&t.ref===e.ref)if(Lr=!1,e.pendingProps=n=a,(t.lanes&i)!==0)t.flags&131072&&(Lr=!0);else return e.lanes=t.lanes,gi(t,e,i)}return cw(t,e,r,n,i)}function $D(t,e,r){var n=e.pendingProps,i=n.children,a=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},nt(to,Ur),Ur|=r;else{if(!(r&1073741824))return t=a!==null?a.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,nt(to,Ur),Ur|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:r,nt(to,Ur),Ur|=n}else a!==null?(n=a.baseLanes|r,e.memoizedState=null):n=r,nt(to,Ur),Ur|=n;return Ir(t,e,i,r),e.child}function zD(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function cw(t,e,r,n,i){var a=Vr(r)?Za:mr.current;return a=So(e,a),fo(e,i),r=Q_(t,e,r,n,a,i),n=Y_(),t!==null&&!Lr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,gi(t,e,i)):(ft&&n&&V_(e),e.flags|=1,Ir(t,e,r,i),e.child)}function SS(t,e,r,n,i){if(Vr(r)){var a=!0;Bh(e)}else a=!1;if(fo(e,i),e.stateNode===null)lh(t,e),pD(e,r,n),uw(e,r,n,i),n=!0;else if(t===null){var s=e.stateNode,o=e.memoizedProps;s.props=o;var u=s.context,l=r.contextType;typeof l=="object"&&l!==null?l=cn(l):(l=Vr(r)?Za:mr.current,l=So(e,l));var c=r.getDerivedStateFromProps,f=typeof c=="function"||typeof s.getSnapshotBeforeUpdate=="function";f||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==n||u!==l)&&pS(e,s,n,l),Li=!1;var h=e.memoizedState;s.state=h,jh(e,n,s,i),u=e.memoizedState,o!==n||h!==u||Mr.current||Li?(typeof c=="function"&&(ow(e,r,c,n),u=e.memoizedState),(o=Li||vS(e,r,o,n,h,u,l))?(f||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=u),s.props=n,s.state=u,s.context=l,n=o):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{s=e.stateNode,dD(t,e),o=e.memoizedProps,l=e.type===e.elementType?o:yn(e.type,o),s.props=l,f=e.pendingProps,h=s.context,u=r.contextType,typeof u=="object"&&u!==null?u=cn(u):(u=Vr(r)?Za:mr.current,u=So(e,u));var d=r.getDerivedStateFromProps;(c=typeof d=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==f||h!==u)&&pS(e,s,n,u),Li=!1,h=e.memoizedState,s.state=h,jh(e,n,s,i);var v=e.memoizedState;o!==f||h!==v||Mr.current||Li?(typeof d=="function"&&(ow(e,r,d,n),v=e.memoizedState),(l=Li||vS(e,r,l,n,h,v,u)||!1)?(c||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(n,v,u),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(n,v,u)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=v),s.props=n,s.state=v,s.context=u,n=l):(typeof s.componentDidUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),n=!1)}return fw(t,e,r,n,a,i)}function fw(t,e,r,n,i,a){zD(t,e);var s=(e.flags&128)!==0;if(!n&&!s)return i&&lS(e,r,!1),gi(t,e,a);n=e.stateNode,O4.current=e;var o=s&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&s?(e.child=Co(e,t.child,null,a),e.child=Co(e,null,o,a)):Ir(t,e,o,a),e.memoizedState=n.state,i&&lS(e,r,!0),e.child}function UD(t){var e=t.stateNode;e.pendingContext?uS(t,e.pendingContext,e.pendingContext!==e.context):e.context&&uS(t,e.context,!1),W_(t,e.containerInfo)}function IS(t,e,r,n,i){return Io(),B_(i),e.flags|=256,Ir(t,e,r,n),e.child}var hw={dehydrated:null,treeContext:null,retryLane:0};function dw(t){return{baseLanes:t,cachePool:null,transitions:null}}function jD(t,e,r){var n=e.pendingProps,i=dt.current,a=!1,s=(e.flags&128)!==0,o;if((o=s)||(o=t!==null&&t.memoizedState===null?!1:(i&2)!==0),o?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),nt(dt,i&1),t===null)return aw(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=n.children,t=n.fallback,a?(n=e.mode,a=e.child,s={mode:"hidden",children:s},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=s):a=Wd(s,n,0,null),t=Ya(t,n,r,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=dw(r),e.memoizedState=hw,t):Z_(e,s));if(i=t.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return N4(t,e,s,n,o,i,r);if(a){a=n.fallback,s=e.mode,i=t.child,o=i.sibling;var u={mode:"hidden",children:n.children};return!(s&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=u,e.deletions=null):(n=ta(i,u),n.subtreeFlags=i.subtreeFlags&14680064),o!==null?a=ta(o,a):(a=Ya(a,s,r,null),a.flags|=2),a.return=e,n.return=e,n.sibling=a,e.child=n,n=a,a=e.child,s=t.child.memoizedState,s=s===null?dw(r):{baseLanes:s.baseLanes|r,cachePool:null,transitions:s.transitions},a.memoizedState=s,a.childLanes=t.childLanes&~r,e.memoizedState=hw,n}return a=t.child,t=a.sibling,n=ta(a,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function Z_(t,e){return e=Wd({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function xf(t,e,r,n){return n!==null&&B_(n),Co(e,t.child,null,r),t=Z_(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function N4(t,e,r,n,i,a,s){if(r)return e.flags&256?(e.flags&=-257,n=Mp(Error(oe(422))),xf(t,e,s,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=n.fallback,i=e.mode,n=Wd({mode:"visible",children:n.children},i,0,null),a=Ya(a,i,s,null),a.flags|=2,n.return=e,a.return=e,n.sibling=a,e.child=n,e.mode&1&&Co(e,t.child,null,s),e.child.memoizedState=dw(s),e.memoizedState=hw,a);if(!(e.mode&1))return xf(t,e,s,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var o=n.dgst;return n=o,a=Error(oe(419)),n=Mp(a,n,void 0),xf(t,e,s,n)}if(o=(s&t.childLanes)!==0,Lr||o){if(n=Ut,n!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|s)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,pi(t,i),Cn(n,t,i,-1))}return aE(),n=Mp(Error(oe(421))),xf(t,e,s,n)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=G4.bind(null,t),i._reactRetry=e,null):(t=a.treeContext,jr=Xi(i.nextSibling),Hr=e,ft=!0,bn=null,t!==null&&(tn[rn++]=si,tn[rn++]=oi,tn[rn++]=es,si=t.id,oi=t.overflow,es=e),e=Z_(e,n.children),e.flags|=4096,e)}function CS(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),sw(t.return,e,r)}function Vp(t,e,r,n,i){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=i)}function WD(t,e,r){var n=e.pendingProps,i=n.revealOrder,a=n.tail;if(Ir(t,e,n.children,r),n=dt.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&CS(t,r,e);else if(t.tag===19)CS(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(nt(dt,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&Wh(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),Vp(e,!1,i,r,a);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Wh(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}Vp(e,!0,r,null,a);break;case"together":Vp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function lh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function gi(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),rs|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(oe(153));if(e.child!==null){for(t=e.child,r=ta(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=ta(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function L4(t,e,r){switch(e.tag){case 3:UD(e),Io();break;case 5:yD(e);break;case 1:Vr(e.type)&&Bh(e);break;case 4:W_(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;nt(zh,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(nt(dt,dt.current&1),e.flags|=128,null):r&e.child.childLanes?jD(t,e,r):(nt(dt,dt.current&1),t=gi(t,e,r),t!==null?t.sibling:null);nt(dt,dt.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return WD(t,e,r);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),nt(dt,dt.current),n)break;return null;case 22:case 23:return e.lanes=0,$D(t,e,r)}return gi(t,e,r)}var HD,vw,GD,KD;HD=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};vw=function(){};GD=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,Ua(Wn.current);var a=null;switch(r){case"input":i=M1(t,i),n=M1(t,n),a=[];break;case"select":i=gt({},i,{value:void 0}),n=gt({},n,{value:void 0}),a=[];break;case"textarea":i=B1(t,i),n=B1(t,n),a=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=Vh)}$1(r,n);var s;r=null;for(l in i)if(!n.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var o=i[l];for(s in o)o.hasOwnProperty(s)&&(r||(r={}),r[s]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Il.hasOwnProperty(l)?a||(a=[]):(a=a||[]).push(l,null));for(l in n){var u=n[l];if(o=i!=null?i[l]:void 0,n.hasOwnProperty(l)&&u!==o&&(u!=null||o!=null))if(l==="style")if(o){for(s in o)!o.hasOwnProperty(s)||u&&u.hasOwnProperty(s)||(r||(r={}),r[s]="");for(s in u)u.hasOwnProperty(s)&&o[s]!==u[s]&&(r||(r={}),r[s]=u[s])}else r||(a||(a=[]),a.push(l,r)),r=u;else l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,o=o?o.__html:void 0,u!=null&&o!==u&&(a=a||[]).push(l,u)):l==="children"?typeof u!="string"&&typeof u!="number"||(a=a||[]).push(l,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(Il.hasOwnProperty(l)?(u!=null&&l==="onScroll"&&st("scroll",t),a||o===u||(a=[])):(a=a||[]).push(l,u))}r&&(a=a||[]).push("style",r);var l=a;(e.updateQueue=l)&&(e.flags|=4)}};KD=function(t,e,r,n){r!==n&&(e.flags|=4)};function Au(t,e){if(!ft)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function lr(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function M4(t,e,r){var n=e.pendingProps;switch(F_(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lr(e),null;case 1:return Vr(e.type)&&Fh(),lr(e),null;case 3:return n=e.stateNode,xo(),lt(Mr),lt(mr),G_(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(If(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,bn!==null&&(Tw(bn),bn=null))),vw(t,e),lr(e),null;case 5:H_(e);var i=Ua(Vl.current);if(r=e.type,t!==null&&e.stateNode!=null)GD(t,e,r,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(oe(166));return lr(e),null}if(t=Ua(Wn.current),If(e)){n=e.stateNode,r=e.type;var a=e.memoizedProps;switch(n[Fn]=e,n[Ll]=a,t=(e.mode&1)!==0,r){case"dialog":st("cancel",n),st("close",n);break;case"iframe":case"object":case"embed":st("load",n);break;case"video":case"audio":for(i=0;i<Wu.length;i++)st(Wu[i],n);break;case"source":st("error",n);break;case"img":case"image":case"link":st("error",n),st("load",n);break;case"details":st("toggle",n);break;case"input":Lb(n,a),st("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},st("invalid",n);break;case"textarea":Vb(n,a),st("invalid",n)}$1(r,a),i=null;for(var s in a)if(a.hasOwnProperty(s)){var o=a[s];s==="children"?typeof o=="string"?n.textContent!==o&&(a.suppressHydrationWarning!==!0&&Sf(n.textContent,o,t),i=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(a.suppressHydrationWarning!==!0&&Sf(n.textContent,o,t),i=["children",""+o]):Il.hasOwnProperty(s)&&o!=null&&s==="onScroll"&&st("scroll",n)}switch(r){case"input":gf(n),Mb(n,a,!0);break;case"textarea":gf(n),Fb(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=Vh)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=E2(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=s.createElement(r,{is:n.is}):(t=s.createElement(r),r==="select"&&(s=t,n.multiple?s.multiple=!0:n.size&&(s.size=n.size))):t=s.createElementNS(t,r),t[Fn]=e,t[Ll]=n,HD(t,e,!1,!1),e.stateNode=t;e:{switch(s=z1(r,n),r){case"dialog":st("cancel",t),st("close",t),i=n;break;case"iframe":case"object":case"embed":st("load",t),i=n;break;case"video":case"audio":for(i=0;i<Wu.length;i++)st(Wu[i],t);i=n;break;case"source":st("error",t),i=n;break;case"img":case"image":case"link":st("error",t),st("load",t),i=n;break;case"details":st("toggle",t),i=n;break;case"input":Lb(t,n),i=M1(t,n),st("invalid",t);break;case"option":i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=gt({},n,{value:void 0}),st("invalid",t);break;case"textarea":Vb(t,n),i=B1(t,n),st("invalid",t);break;default:i=n}$1(r,i),o=i;for(a in o)if(o.hasOwnProperty(a)){var u=o[a];a==="style"?S2(t,u):a==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&T2(t,u)):a==="children"?typeof u=="string"?(r!=="textarea"||u!=="")&&Cl(t,u):typeof u=="number"&&Cl(t,""+u):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Il.hasOwnProperty(a)?u!=null&&a==="onScroll"&&st("scroll",t):u!=null&&b_(t,a,u,s))}switch(r){case"input":gf(t),Mb(t,n,!1);break;case"textarea":gf(t),Fb(t);break;case"option":n.value!=null&&t.setAttribute("value",""+fa(n.value));break;case"select":t.multiple=!!n.multiple,a=n.value,a!=null?oo(t,!!n.multiple,a,!1):n.defaultValue!=null&&oo(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Vh)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return lr(e),null;case 6:if(t&&e.stateNode!=null)KD(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(oe(166));if(r=Ua(Vl.current),Ua(Wn.current),If(e)){if(n=e.stateNode,r=e.memoizedProps,n[Fn]=e,(a=n.nodeValue!==r)&&(t=Hr,t!==null))switch(t.tag){case 3:Sf(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Sf(n.nodeValue,r,(t.mode&1)!==0)}a&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Fn]=e,e.stateNode=n}return lr(e),null;case 13:if(lt(dt),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ft&&jr!==null&&e.mode&1&&!(e.flags&128))fD(),Io(),e.flags|=98560,a=!1;else if(a=If(e),n!==null&&n.dehydrated!==null){if(t===null){if(!a)throw Error(oe(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(oe(317));a[Fn]=e}else Io(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;lr(e),a=!1}else bn!==null&&(Tw(bn),bn=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||dt.current&1?Ot===0&&(Ot=3):aE())),e.updateQueue!==null&&(e.flags|=4),lr(e),null);case 4:return xo(),vw(t,e),t===null&&Ol(e.stateNode.containerInfo),lr(e),null;case 10:return z_(e.type._context),lr(e),null;case 17:return Vr(e.type)&&Fh(),lr(e),null;case 19:if(lt(dt),a=e.memoizedState,a===null)return lr(e),null;if(n=(e.flags&128)!==0,s=a.rendering,s===null)if(n)Au(a,!1);else{if(Ot!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=Wh(t),s!==null){for(e.flags|=128,Au(a,!1),n=s.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)a=r,t=n,a.flags&=14680066,s=a.alternate,s===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=s.childLanes,a.lanes=s.lanes,a.child=s.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=s.memoizedProps,a.memoizedState=s.memoizedState,a.updateQueue=s.updateQueue,a.type=s.type,t=s.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return nt(dt,dt.current&1|2),e.child}t=t.sibling}a.tail!==null&&bt()>ko&&(e.flags|=128,n=!0,Au(a,!1),e.lanes=4194304)}else{if(!n)if(t=Wh(s),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Au(a,!0),a.tail===null&&a.tailMode==="hidden"&&!s.alternate&&!ft)return lr(e),null}else 2*bt()-a.renderingStartTime>ko&&r!==1073741824&&(e.flags|=128,n=!0,Au(a,!1),e.lanes=4194304);a.isBackwards?(s.sibling=e.child,e.child=s):(r=a.last,r!==null?r.sibling=s:e.child=s,a.last=s)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=bt(),e.sibling=null,r=dt.current,nt(dt,n?r&1|2:r&1),e):(lr(e),null);case 22:case 23:return iE(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Ur&1073741824&&(lr(e),e.subtreeFlags&6&&(e.flags|=8192)):lr(e),null;case 24:return null;case 25:return null}throw Error(oe(156,e.tag))}function V4(t,e){switch(F_(e),e.tag){case 1:return Vr(e.type)&&Fh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return xo(),lt(Mr),lt(mr),G_(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return H_(e),null;case 13:if(lt(dt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(oe(340));Io()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return lt(dt),null;case 4:return xo(),null;case 10:return z_(e.type._context),null;case 22:case 23:return iE(),null;case 24:return null;default:return null}}var Rf=!1,hr=!1,F4=typeof WeakSet=="function"?WeakSet:Set,pe=null;function eo(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){wt(t,e,n)}else r.current=null}function pw(t,e,r){try{r()}catch(n){wt(t,e,n)}}var xS=!1;function B4(t,e){if(J1=Nh,t=J2(),M_(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var s=0,o=-1,u=-1,l=0,c=0,f=t,h=null;t:for(;;){for(var d;f!==r||i!==0&&f.nodeType!==3||(o=s+i),f!==a||n!==0&&f.nodeType!==3||(u=s+n),f.nodeType===3&&(s+=f.nodeValue.length),(d=f.firstChild)!==null;)h=f,f=d;for(;;){if(f===t)break t;if(h===r&&++l===i&&(o=s),h===a&&++c===n&&(u=s),(d=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=d}r=o===-1||u===-1?null:{start:o,end:u}}else r=null}r=r||{start:0,end:0}}else r=null;for(Z1={focusedElem:t,selectionRange:r},Nh=!1,pe=e;pe!==null;)if(e=pe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,pe=t;else for(;pe!==null;){e=pe;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var w=v.memoizedProps,m=v.memoizedState,p=e.stateNode,g=p.getSnapshotBeforeUpdate(e.elementType===e.type?w:yn(e.type,w),m);p.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(oe(163))}}catch(_){wt(e,e.return,_)}if(t=e.sibling,t!==null){t.return=e.return,pe=t;break}pe=e.return}return v=xS,xS=!1,v}function dl(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var a=i.destroy;i.destroy=void 0,a!==void 0&&pw(e,r,a)}i=i.next}while(i!==n)}}function Ud(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function gw(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function QD(t){var e=t.alternate;e!==null&&(t.alternate=null,QD(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Fn],delete e[Ll],delete e[rw],delete e[E4],delete e[T4])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function YD(t){return t.tag===5||t.tag===3||t.tag===4}function RS(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||YD(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function mw(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Vh));else if(n!==4&&(t=t.child,t!==null))for(mw(t,e,r),t=t.sibling;t!==null;)mw(t,e,r),t=t.sibling}function yw(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(yw(t,e,r),t=t.sibling;t!==null;)yw(t,e,r),t=t.sibling}var Kt=null,En=!1;function Ai(t,e,r){for(r=r.child;r!==null;)XD(t,e,r),r=r.sibling}function XD(t,e,r){if(jn&&typeof jn.onCommitFiberUnmount=="function")try{jn.onCommitFiberUnmount(Ld,r)}catch{}switch(r.tag){case 5:hr||eo(r,e);case 6:var n=Kt,i=En;Kt=null,Ai(t,e,r),Kt=n,En=i,Kt!==null&&(En?(t=Kt,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Kt.removeChild(r.stateNode));break;case 18:Kt!==null&&(En?(t=Kt,r=r.stateNode,t.nodeType===8?Ap(t.parentNode,r):t.nodeType===1&&Ap(t,r),Al(t)):Ap(Kt,r.stateNode));break;case 4:n=Kt,i=En,Kt=r.stateNode.containerInfo,En=!0,Ai(t,e,r),Kt=n,En=i;break;case 0:case 11:case 14:case 15:if(!hr&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var a=i,s=a.destroy;a=a.tag,s!==void 0&&(a&2||a&4)&&pw(r,e,s),i=i.next}while(i!==n)}Ai(t,e,r);break;case 1:if(!hr&&(eo(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){wt(r,e,o)}Ai(t,e,r);break;case 21:Ai(t,e,r);break;case 22:r.mode&1?(hr=(n=hr)||r.memoizedState!==null,Ai(t,e,r),hr=n):Ai(t,e,r);break;default:Ai(t,e,r)}}function kS(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new F4),e.forEach(function(n){var i=K4.bind(null,t,n);r.has(n)||(r.add(n),n.then(i,i))})}}function mn(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var a=t,s=e,o=s;e:for(;o!==null;){switch(o.tag){case 5:Kt=o.stateNode,En=!1;break e;case 3:Kt=o.stateNode.containerInfo,En=!0;break e;case 4:Kt=o.stateNode.containerInfo,En=!0;break e}o=o.return}if(Kt===null)throw Error(oe(160));XD(a,s,i),Kt=null,En=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(l){wt(i,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)JD(e,t),e=e.sibling}function JD(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(mn(e,t),Mn(t),n&4){try{dl(3,t,t.return),Ud(3,t)}catch(w){wt(t,t.return,w)}try{dl(5,t,t.return)}catch(w){wt(t,t.return,w)}}break;case 1:mn(e,t),Mn(t),n&512&&r!==null&&eo(r,r.return);break;case 5:if(mn(e,t),Mn(t),n&512&&r!==null&&eo(r,r.return),t.flags&32){var i=t.stateNode;try{Cl(i,"")}catch(w){wt(t,t.return,w)}}if(n&4&&(i=t.stateNode,i!=null)){var a=t.memoizedProps,s=r!==null?r.memoizedProps:a,o=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{o==="input"&&a.type==="radio"&&a.name!=null&&w2(i,a),z1(o,s);var l=z1(o,a);for(s=0;s<u.length;s+=2){var c=u[s],f=u[s+1];c==="style"?S2(i,f):c==="dangerouslySetInnerHTML"?T2(i,f):c==="children"?Cl(i,f):b_(i,c,f,l)}switch(o){case"input":V1(i,a);break;case"textarea":_2(i,a);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var d=a.value;d!=null?oo(i,!!a.multiple,d,!1):h!==!!a.multiple&&(a.defaultValue!=null?oo(i,!!a.multiple,a.defaultValue,!0):oo(i,!!a.multiple,a.multiple?[]:"",!1))}i[Ll]=a}catch(w){wt(t,t.return,w)}}break;case 6:if(mn(e,t),Mn(t),n&4){if(t.stateNode===null)throw Error(oe(162));i=t.stateNode,a=t.memoizedProps;try{i.nodeValue=a}catch(w){wt(t,t.return,w)}}break;case 3:if(mn(e,t),Mn(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Al(e.containerInfo)}catch(w){wt(t,t.return,w)}break;case 4:mn(e,t),Mn(t);break;case 13:mn(e,t),Mn(t),i=t.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(rE=bt())),n&4&&kS(t);break;case 22:if(c=r!==null&&r.memoizedState!==null,t.mode&1?(hr=(l=hr)||c,mn(e,t),hr=l):mn(e,t),Mn(t),n&8192){if(l=t.memoizedState!==null,(t.stateNode.isHidden=l)&&!c&&t.mode&1)for(pe=t,c=t.child;c!==null;){for(f=pe=c;pe!==null;){switch(h=pe,d=h.child,h.tag){case 0:case 11:case 14:case 15:dl(4,h,h.return);break;case 1:eo(h,h.return);var v=h.stateNode;if(typeof v.componentWillUnmount=="function"){n=h,r=h.return;try{e=n,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(w){wt(n,r,w)}}break;case 5:eo(h,h.return);break;case 22:if(h.memoizedState!==null){PS(f);continue}}d!==null?(d.return=h,pe=d):PS(f)}c=c.sibling}e:for(c=null,f=t;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,l?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(o=f.stateNode,u=f.memoizedProps.style,s=u!=null&&u.hasOwnProperty("display")?u.display:null,o.style.display=b2("display",s))}catch(w){wt(t,t.return,w)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(w){wt(t,t.return,w)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:mn(e,t),Mn(t),n&4&&kS(t);break;case 21:break;default:mn(e,t),Mn(t)}}function Mn(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(YD(r)){var n=r;break e}r=r.return}throw Error(oe(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(Cl(i,""),n.flags&=-33);var a=RS(t);yw(t,a,i);break;case 3:case 4:var s=n.stateNode.containerInfo,o=RS(t);mw(t,o,s);break;default:throw Error(oe(161))}}catch(u){wt(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function q4(t,e,r){pe=t,ZD(t)}function ZD(t,e,r){for(var n=(t.mode&1)!==0;pe!==null;){var i=pe,a=i.child;if(i.tag===22&&n){var s=i.memoizedState!==null||Rf;if(!s){var o=i.alternate,u=o!==null&&o.memoizedState!==null||hr;o=Rf;var l=hr;if(Rf=s,(hr=u)&&!l)for(pe=i;pe!==null;)s=pe,u=s.child,s.tag===22&&s.memoizedState!==null?DS(i):u!==null?(u.return=s,pe=u):DS(i);for(;a!==null;)pe=a,ZD(a),a=a.sibling;pe=i,Rf=o,hr=l}AS(t)}else i.subtreeFlags&8772&&a!==null?(a.return=i,pe=a):AS(t)}}function AS(t){for(;pe!==null;){var e=pe;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:hr||Ud(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!hr)if(r===null)n.componentDidMount();else{var i=e.elementType===e.type?r.memoizedProps:yn(e.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&dS(e,a,n);break;case 3:var s=e.updateQueue;if(s!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}dS(e,s,r)}break;case 5:var o=e.stateNode;if(r===null&&e.flags&4){r=o;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&r.focus();break;case"img":u.src&&(r.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var c=l.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&Al(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(oe(163))}hr||e.flags&512&&gw(e)}catch(h){wt(e,e.return,h)}}if(e===t){pe=null;break}if(r=e.sibling,r!==null){r.return=e.return,pe=r;break}pe=e.return}}function PS(t){for(;pe!==null;){var e=pe;if(e===t){pe=null;break}var r=e.sibling;if(r!==null){r.return=e.return,pe=r;break}pe=e.return}}function DS(t){for(;pe!==null;){var e=pe;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{Ud(4,e)}catch(u){wt(e,r,u)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(u){wt(e,i,u)}}var a=e.return;try{gw(e)}catch(u){wt(e,a,u)}break;case 5:var s=e.return;try{gw(e)}catch(u){wt(e,s,u)}}}catch(u){wt(e,e.return,u)}if(e===t){pe=null;break}var o=e.sibling;if(o!==null){o.return=e.return,pe=o;break}pe=e.return}}var $4=Math.ceil,Kh=bi.ReactCurrentDispatcher,eE=bi.ReactCurrentOwner,ln=bi.ReactCurrentBatchConfig,We=0,Ut=null,Rt=null,Zt=0,Ur=0,to=Ta(0),Ot=0,$l=null,rs=0,jd=0,tE=0,vl=null,Dr=null,rE=0,ko=1/0,ii=null,Qh=!1,ww=null,Zi=null,kf=!1,ji=null,Yh=0,pl=0,_w=null,ch=-1,fh=0;function xr(){return We&6?bt():ch!==-1?ch:ch=bt()}function ea(t){return t.mode&1?We&2&&Zt!==0?Zt&-Zt:S4.transition!==null?(fh===0&&(fh=M2()),fh):(t=Je,t!==0||(t=window.event,t=t===void 0?16:U2(t.type)),t):1}function Cn(t,e,r,n){if(50<pl)throw pl=0,_w=null,Error(oe(185));bc(t,r,n),(!(We&2)||t!==Ut)&&(t===Ut&&(!(We&2)&&(jd|=r),Ot===4&&Vi(t,Zt)),Fr(t,n),r===1&&We===0&&!(e.mode&1)&&(ko=bt()+500,qd&&ba()))}function Fr(t,e){var r=t.callbackNode;Sq(t,e);var n=Oh(t,t===Ut?Zt:0);if(n===0)r!==null&&$b(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&$b(r),e===1)t.tag===0?b4(OS.bind(null,t)):uD(OS.bind(null,t)),w4(function(){!(We&6)&&ba()}),r=null;else{switch(V2(n)){case 1:r=R_;break;case 4:r=N2;break;case 16:r=Dh;break;case 536870912:r=L2;break;default:r=Dh}r=oO(r,eO.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function eO(t,e){if(ch=-1,fh=0,We&6)throw Error(oe(327));var r=t.callbackNode;if(ho()&&t.callbackNode!==r)return null;var n=Oh(t,t===Ut?Zt:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Xh(t,n);else{e=n;var i=We;We|=2;var a=rO();(Ut!==t||Zt!==e)&&(ii=null,ko=bt()+500,Qa(t,e));do try{j4();break}catch(o){tO(t,o)}while(!0);$_(),Kh.current=a,We=i,Rt!==null?e=0:(Ut=null,Zt=0,e=Ot)}if(e!==0){if(e===2&&(i=G1(t),i!==0&&(n=i,e=Ew(t,i))),e===1)throw r=$l,Qa(t,0),Vi(t,n),Fr(t,bt()),r;if(e===6)Vi(t,n);else{if(i=t.current.alternate,!(n&30)&&!z4(i)&&(e=Xh(t,n),e===2&&(a=G1(t),a!==0&&(n=a,e=Ew(t,a))),e===1))throw r=$l,Qa(t,0),Vi(t,n),Fr(t,bt()),r;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(oe(345));case 2:Ma(t,Dr,ii);break;case 3:if(Vi(t,n),(n&130023424)===n&&(e=rE+500-bt(),10<e)){if(Oh(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){xr(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=tw(Ma.bind(null,t,Dr,ii),e);break}Ma(t,Dr,ii);break;case 4:if(Vi(t,n),(n&4194240)===n)break;for(e=t.eventTimes,i=-1;0<n;){var s=31-In(n);a=1<<s,s=e[s],s>i&&(i=s),n&=~a}if(n=i,n=bt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*$4(n/1960))-n,10<n){t.timeoutHandle=tw(Ma.bind(null,t,Dr,ii),n);break}Ma(t,Dr,ii);break;case 5:Ma(t,Dr,ii);break;default:throw Error(oe(329))}}}return Fr(t,bt()),t.callbackNode===r?eO.bind(null,t):null}function Ew(t,e){var r=vl;return t.current.memoizedState.isDehydrated&&(Qa(t,e).flags|=256),t=Xh(t,e),t!==2&&(e=Dr,Dr=r,e!==null&&Tw(e)),t}function Tw(t){Dr===null?Dr=t:Dr.push.apply(Dr,t)}function z4(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],a=i.getSnapshot;i=i.value;try{if(!kn(a(),i))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Vi(t,e){for(e&=~tE,e&=~jd,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-In(e),n=1<<r;t[r]=-1,e&=~n}}function OS(t){if(We&6)throw Error(oe(327));ho();var e=Oh(t,0);if(!(e&1))return Fr(t,bt()),null;var r=Xh(t,e);if(t.tag!==0&&r===2){var n=G1(t);n!==0&&(e=n,r=Ew(t,n))}if(r===1)throw r=$l,Qa(t,0),Vi(t,e),Fr(t,bt()),r;if(r===6)throw Error(oe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ma(t,Dr,ii),Fr(t,bt()),null}function nE(t,e){var r=We;We|=1;try{return t(e)}finally{We=r,We===0&&(ko=bt()+500,qd&&ba())}}function ns(t){ji!==null&&ji.tag===0&&!(We&6)&&ho();var e=We;We|=1;var r=ln.transition,n=Je;try{if(ln.transition=null,Je=1,t)return t()}finally{Je=n,ln.transition=r,We=e,!(We&6)&&ba()}}function iE(){Ur=to.current,lt(to)}function Qa(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,y4(r)),Rt!==null)for(r=Rt.return;r!==null;){var n=r;switch(F_(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Fh();break;case 3:xo(),lt(Mr),lt(mr),G_();break;case 5:H_(n);break;case 4:xo();break;case 13:lt(dt);break;case 19:lt(dt);break;case 10:z_(n.type._context);break;case 22:case 23:iE()}r=r.return}if(Ut=t,Rt=t=ta(t.current,null),Zt=Ur=e,Ot=0,$l=null,tE=jd=rs=0,Dr=vl=null,za!==null){for(e=0;e<za.length;e++)if(r=za[e],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,a=r.pending;if(a!==null){var s=a.next;a.next=i,n.next=s}r.pending=n}za=null}return t}function tO(t,e){do{var r=Rt;try{if($_(),oh.current=Gh,Hh){for(var n=vt.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Hh=!1}if(ts=0,zt=Dt=vt=null,hl=!1,Fl=0,eE.current=null,r===null||r.return===null){Ot=1,$l=e,Rt=null;break}e:{var a=t,s=r.return,o=r,u=e;if(e=Zt,o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var l=u,c=o,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var h=c.alternate;h?(c.updateQueue=h.updateQueue,c.memoizedState=h.memoizedState,c.lanes=h.lanes):(c.updateQueue=null,c.memoizedState=null)}var d=_S(s);if(d!==null){d.flags&=-257,ES(d,s,o,a,e),d.mode&1&&wS(a,l,e),e=d,u=l;var v=e.updateQueue;if(v===null){var w=new Set;w.add(u),e.updateQueue=w}else v.add(u);break e}else{if(!(e&1)){wS(a,l,e),aE();break e}u=Error(oe(426))}}else if(ft&&o.mode&1){var m=_S(s);if(m!==null){!(m.flags&65536)&&(m.flags|=256),ES(m,s,o,a,e),B_(Ro(u,o));break e}}a=u=Ro(u,o),Ot!==4&&(Ot=2),vl===null?vl=[a]:vl.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var p=FD(a,u,e);hS(a,p);break e;case 1:o=u;var g=a.type,y=a.stateNode;if(!(a.flags&128)&&(typeof g.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Zi===null||!Zi.has(y)))){a.flags|=65536,e&=-e,a.lanes|=e;var _=BD(a,o,e);hS(a,_);break e}}a=a.return}while(a!==null)}iO(r)}catch(T){e=T,Rt===r&&r!==null&&(Rt=r=r.return);continue}break}while(!0)}function rO(){var t=Kh.current;return Kh.current=Gh,t===null?Gh:t}function aE(){(Ot===0||Ot===3||Ot===2)&&(Ot=4),Ut===null||!(rs&268435455)&&!(jd&268435455)||Vi(Ut,Zt)}function Xh(t,e){var r=We;We|=2;var n=rO();(Ut!==t||Zt!==e)&&(ii=null,Qa(t,e));do try{U4();break}catch(i){tO(t,i)}while(!0);if($_(),We=r,Kh.current=n,Rt!==null)throw Error(oe(261));return Ut=null,Zt=0,Ot}function U4(){for(;Rt!==null;)nO(Rt)}function j4(){for(;Rt!==null&&!pq();)nO(Rt)}function nO(t){var e=sO(t.alternate,t,Ur);t.memoizedProps=t.pendingProps,e===null?iO(t):Rt=e,eE.current=null}function iO(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=V4(r,e),r!==null){r.flags&=32767,Rt=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ot=6,Rt=null;return}}else if(r=M4(r,e,Ur),r!==null){Rt=r;return}if(e=e.sibling,e!==null){Rt=e;return}Rt=e=t}while(e!==null);Ot===0&&(Ot=5)}function Ma(t,e,r){var n=Je,i=ln.transition;try{ln.transition=null,Je=1,W4(t,e,r,n)}finally{ln.transition=i,Je=n}return null}function W4(t,e,r,n){do ho();while(ji!==null);if(We&6)throw Error(oe(327));r=t.finishedWork;var i=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(oe(177));t.callbackNode=null,t.callbackPriority=0;var a=r.lanes|r.childLanes;if(Iq(t,a),t===Ut&&(Rt=Ut=null,Zt=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||kf||(kf=!0,oO(Dh,function(){return ho(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=ln.transition,ln.transition=null;var s=Je;Je=1;var o=We;We|=4,eE.current=null,B4(t,r),JD(r,t),f4(Z1),Nh=!!J1,Z1=J1=null,t.current=r,q4(r),gq(),We=o,Je=s,ln.transition=a}else t.current=r;if(kf&&(kf=!1,ji=t,Yh=i),a=t.pendingLanes,a===0&&(Zi=null),wq(r.stateNode),Fr(t,bt()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)i=e[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(Qh)throw Qh=!1,t=ww,ww=null,t;return Yh&1&&t.tag!==0&&ho(),a=t.pendingLanes,a&1?t===_w?pl++:(pl=0,_w=t):pl=0,ba(),null}function ho(){if(ji!==null){var t=V2(Yh),e=ln.transition,r=Je;try{if(ln.transition=null,Je=16>t?16:t,ji===null)var n=!1;else{if(t=ji,ji=null,Yh=0,We&6)throw Error(oe(331));var i=We;for(We|=4,pe=t.current;pe!==null;){var a=pe,s=a.child;if(pe.flags&16){var o=a.deletions;if(o!==null){for(var u=0;u<o.length;u++){var l=o[u];for(pe=l;pe!==null;){var c=pe;switch(c.tag){case 0:case 11:case 15:dl(8,c,a)}var f=c.child;if(f!==null)f.return=c,pe=f;else for(;pe!==null;){c=pe;var h=c.sibling,d=c.return;if(QD(c),c===l){pe=null;break}if(h!==null){h.return=d,pe=h;break}pe=d}}}var v=a.alternate;if(v!==null){var w=v.child;if(w!==null){v.child=null;do{var m=w.sibling;w.sibling=null,w=m}while(w!==null)}}pe=a}}if(a.subtreeFlags&2064&&s!==null)s.return=a,pe=s;else e:for(;pe!==null;){if(a=pe,a.flags&2048)switch(a.tag){case 0:case 11:case 15:dl(9,a,a.return)}var p=a.sibling;if(p!==null){p.return=a.return,pe=p;break e}pe=a.return}}var g=t.current;for(pe=g;pe!==null;){s=pe;var y=s.child;if(s.subtreeFlags&2064&&y!==null)y.return=s,pe=y;else e:for(s=g;pe!==null;){if(o=pe,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Ud(9,o)}}catch(T){wt(o,o.return,T)}if(o===s){pe=null;break e}var _=o.sibling;if(_!==null){_.return=o.return,pe=_;break e}pe=o.return}}if(We=i,ba(),jn&&typeof jn.onPostCommitFiberRoot=="function")try{jn.onPostCommitFiberRoot(Ld,t)}catch{}n=!0}return n}finally{Je=r,ln.transition=e}}return!1}function NS(t,e,r){e=Ro(r,e),e=FD(t,e,1),t=Ji(t,e,1),e=xr(),t!==null&&(bc(t,1,e),Fr(t,e))}function wt(t,e,r){if(t.tag===3)NS(t,t,r);else for(;e!==null;){if(e.tag===3){NS(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Zi===null||!Zi.has(n))){t=Ro(r,t),t=BD(e,t,1),e=Ji(e,t,1),t=xr(),e!==null&&(bc(e,1,t),Fr(e,t));break}}e=e.return}}function H4(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=xr(),t.pingedLanes|=t.suspendedLanes&r,Ut===t&&(Zt&r)===r&&(Ot===4||Ot===3&&(Zt&130023424)===Zt&&500>bt()-rE?Qa(t,0):tE|=r),Fr(t,e)}function aO(t,e){e===0&&(t.mode&1?(e=wf,wf<<=1,!(wf&130023424)&&(wf=4194304)):e=1);var r=xr();t=pi(t,e),t!==null&&(bc(t,e,r),Fr(t,r))}function G4(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),aO(t,r)}function K4(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(oe(314))}n!==null&&n.delete(e),aO(t,r)}var sO;sO=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Mr.current)Lr=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Lr=!1,L4(t,e,r);Lr=!!(t.flags&131072)}else Lr=!1,ft&&e.flags&1048576&&lD(e,$h,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;lh(t,e),t=e.pendingProps;var i=So(e,mr.current);fo(e,r),i=Q_(null,e,n,t,i,r);var a=Y_();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Vr(n)?(a=!0,Bh(e)):a=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,j_(e),i.updater=$d,e.stateNode=i,i._reactInternals=e,uw(e,n,t,r),e=fw(null,e,n,!0,a,r)):(e.tag=0,ft&&a&&V_(e),Ir(null,e,i,r),e=e.child),e;case 16:n=e.elementType;e:{switch(lh(t,e),t=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=Y4(n),t=yn(n,t),i){case 0:e=cw(null,e,n,t,r);break e;case 1:e=SS(null,e,n,t,r);break e;case 11:e=TS(null,e,n,t,r);break e;case 14:e=bS(null,e,n,yn(n.type,t),r);break e}throw Error(oe(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:yn(n,i),cw(t,e,n,i,r);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:yn(n,i),SS(t,e,n,i,r);case 3:e:{if(UD(e),t===null)throw Error(oe(387));n=e.pendingProps,a=e.memoizedState,i=a.element,dD(t,e),jh(e,n,null,r);var s=e.memoizedState;if(n=s.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){i=Ro(Error(oe(423)),e),e=IS(t,e,n,r,i);break e}else if(n!==i){i=Ro(Error(oe(424)),e),e=IS(t,e,n,r,i);break e}else for(jr=Xi(e.stateNode.containerInfo.firstChild),Hr=e,ft=!0,bn=null,r=mD(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Io(),n===i){e=gi(t,e,r);break e}Ir(t,e,n,r)}e=e.child}return e;case 5:return yD(e),t===null&&aw(e),n=e.type,i=e.pendingProps,a=t!==null?t.memoizedProps:null,s=i.children,ew(n,i)?s=null:a!==null&&ew(n,a)&&(e.flags|=32),zD(t,e),Ir(t,e,s,r),e.child;case 6:return t===null&&aw(e),null;case 13:return jD(t,e,r);case 4:return W_(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Co(e,null,n,r):Ir(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:yn(n,i),TS(t,e,n,i,r);case 7:return Ir(t,e,e.pendingProps,r),e.child;case 8:return Ir(t,e,e.pendingProps.children,r),e.child;case 12:return Ir(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,a=e.memoizedProps,s=i.value,nt(zh,n._currentValue),n._currentValue=s,a!==null)if(kn(a.value,s)){if(a.children===i.children&&!Mr.current){e=gi(t,e,r);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var o=a.dependencies;if(o!==null){s=a.child;for(var u=o.firstContext;u!==null;){if(u.context===n){if(a.tag===1){u=hi(-1,r&-r),u.tag=2;var l=a.updateQueue;if(l!==null){l=l.shared;var c=l.pending;c===null?u.next=u:(u.next=c.next,c.next=u),l.pending=u}}a.lanes|=r,u=a.alternate,u!==null&&(u.lanes|=r),sw(a.return,r,e),o.lanes|=r;break}u=u.next}}else if(a.tag===10)s=a.type===e.type?null:a.child;else if(a.tag===18){if(s=a.return,s===null)throw Error(oe(341));s.lanes|=r,o=s.alternate,o!==null&&(o.lanes|=r),sw(s,r,e),s=a.sibling}else s=a.child;if(s!==null)s.return=a;else for(s=a;s!==null;){if(s===e){s=null;break}if(a=s.sibling,a!==null){a.return=s.return,s=a;break}s=s.return}a=s}Ir(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,fo(e,r),i=cn(i),n=n(i),e.flags|=1,Ir(t,e,n,r),e.child;case 14:return n=e.type,i=yn(n,e.pendingProps),i=yn(n.type,i),bS(t,e,n,i,r);case 15:return qD(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:yn(n,i),lh(t,e),e.tag=1,Vr(n)?(t=!0,Bh(e)):t=!1,fo(e,r),pD(e,n,i),uw(e,n,i,r),fw(null,e,n,!0,t,r);case 19:return WD(t,e,r);case 22:return $D(t,e,r)}throw Error(oe(156,e.tag))};function oO(t,e){return O2(t,e)}function Q4(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function on(t,e,r,n){return new Q4(t,e,r,n)}function sE(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Y4(t){if(typeof t=="function")return sE(t)?1:0;if(t!=null){if(t=t.$$typeof,t===I_)return 11;if(t===C_)return 14}return 2}function ta(t,e){var r=t.alternate;return r===null?(r=on(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function hh(t,e,r,n,i,a){var s=2;if(n=t,typeof t=="function")sE(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case Ws:return Ya(r.children,i,a,e);case S_:s=8,i|=8;break;case D1:return t=on(12,r,e,i|2),t.elementType=D1,t.lanes=a,t;case O1:return t=on(13,r,e,i),t.elementType=O1,t.lanes=a,t;case N1:return t=on(19,r,e,i),t.elementType=N1,t.lanes=a,t;case g2:return Wd(r,i,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case v2:s=10;break e;case p2:s=9;break e;case I_:s=11;break e;case C_:s=14;break e;case Ni:s=16,n=null;break e}throw Error(oe(130,t==null?t:typeof t,""))}return e=on(s,r,e,i),e.elementType=t,e.type=n,e.lanes=a,e}function Ya(t,e,r,n){return t=on(7,t,n,e),t.lanes=r,t}function Wd(t,e,r,n){return t=on(22,t,n,e),t.elementType=g2,t.lanes=r,t.stateNode={isHidden:!1},t}function Fp(t,e,r){return t=on(6,t,null,e),t.lanes=r,t}function Bp(t,e,r){return e=on(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function X4(t,e,r,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=wp(0),this.expirationTimes=wp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wp(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function oE(t,e,r,n,i,a,s,o,u){return t=new X4(t,e,r,o,u),e===1?(e=1,a===!0&&(e|=8)):e=0,a=on(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},j_(a),t}function J4(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:js,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function uO(t){if(!t)return ha;t=t._reactInternals;e:{if(ms(t)!==t||t.tag!==1)throw Error(oe(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Vr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(oe(171))}if(t.tag===1){var r=t.type;if(Vr(r))return oD(t,r,e)}return e}function lO(t,e,r,n,i,a,s,o,u){return t=oE(r,n,!0,t,i,a,s,o,u),t.context=uO(null),r=t.current,n=xr(),i=ea(r),a=hi(n,i),a.callback=e??null,Ji(r,a,i),t.current.lanes=i,bc(t,i,n),Fr(t,n),t}function Hd(t,e,r,n){var i=e.current,a=xr(),s=ea(i);return r=uO(r),e.context===null?e.context=r:e.pendingContext=r,e=hi(a,s),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Ji(i,e,s),t!==null&&(Cn(t,i,s,a),sh(t,i,s)),s}function Jh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function LS(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function uE(t,e){LS(t,e),(t=t.alternate)&&LS(t,e)}function Z4(){return null}var cO=typeof reportError=="function"?reportError:function(t){console.error(t)};function lE(t){this._internalRoot=t}Gd.prototype.render=lE.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(oe(409));Hd(t,e,null,null)};Gd.prototype.unmount=lE.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ns(function(){Hd(null,t,null,null)}),e[vi]=null}};function Gd(t){this._internalRoot=t}Gd.prototype.unstable_scheduleHydration=function(t){if(t){var e=q2();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Mi.length&&e!==0&&e<Mi[r].priority;r++);Mi.splice(r,0,t),r===0&&z2(t)}};function cE(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Kd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function MS(){}function e$(t,e,r,n,i){if(i){if(typeof n=="function"){var a=n;n=function(){var l=Jh(s);a.call(l)}}var s=lO(e,n,t,0,null,!1,!1,"",MS);return t._reactRootContainer=s,t[vi]=s.current,Ol(t.nodeType===8?t.parentNode:t),ns(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof n=="function"){var o=n;n=function(){var l=Jh(u);o.call(l)}}var u=oE(t,0,!1,null,null,!1,!1,"",MS);return t._reactRootContainer=u,t[vi]=u.current,Ol(t.nodeType===8?t.parentNode:t),ns(function(){Hd(e,u,r,n)}),u}function Qd(t,e,r,n,i){var a=r._reactRootContainer;if(a){var s=a;if(typeof i=="function"){var o=i;i=function(){var u=Jh(s);o.call(u)}}Hd(e,s,t,i)}else s=e$(r,e,t,i,n);return Jh(s)}F2=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=ju(e.pendingLanes);r!==0&&(k_(e,r|1),Fr(e,bt()),!(We&6)&&(ko=bt()+500,ba()))}break;case 13:ns(function(){var n=pi(t,1);if(n!==null){var i=xr();Cn(n,t,1,i)}}),uE(t,1)}};A_=function(t){if(t.tag===13){var e=pi(t,134217728);if(e!==null){var r=xr();Cn(e,t,134217728,r)}uE(t,134217728)}};B2=function(t){if(t.tag===13){var e=ea(t),r=pi(t,e);if(r!==null){var n=xr();Cn(r,t,e,n)}uE(t,e)}};q2=function(){return Je};$2=function(t,e){var r=Je;try{return Je=t,e()}finally{Je=r}};j1=function(t,e,r){switch(e){case"input":if(V1(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=Bd(n);if(!i)throw Error(oe(90));y2(n),V1(n,i)}}}break;case"textarea":_2(t,r);break;case"select":e=r.value,e!=null&&oo(t,!!r.multiple,e,!1)}};x2=nE;R2=ns;var t$={usingClientEntryPoint:!1,Events:[Ic,Qs,Bd,I2,C2,nE]},Pu={findFiberByHostInstance:$a,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},r$={bundleType:Pu.bundleType,version:Pu.version,rendererPackageName:Pu.rendererPackageName,rendererConfig:Pu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:bi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=P2(t),t===null?null:t.stateNode},findFiberByHostInstance:Pu.findFiberByHostInstance||Z4,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Af=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Af.isDisabled&&Af.supportsFiber)try{Ld=Af.inject(r$),jn=Af}catch{}}Yr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=t$;Yr.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!cE(e))throw Error(oe(200));return J4(t,e,null,r)};Yr.createRoot=function(t,e){if(!cE(t))throw Error(oe(299));var r=!1,n="",i=cO;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=oE(t,1,!1,null,null,r,!1,n,i),t[vi]=e.current,Ol(t.nodeType===8?t.parentNode:t),new lE(e)};Yr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(oe(188)):(t=Object.keys(t).join(","),Error(oe(268,t)));return t=P2(e),t=t===null?null:t.stateNode,t};Yr.flushSync=function(t){return ns(t)};Yr.hydrate=function(t,e,r){if(!Kd(e))throw Error(oe(200));return Qd(null,t,e,!0,r)};Yr.hydrateRoot=function(t,e,r){if(!cE(t))throw Error(oe(405));var n=r!=null&&r.hydratedSources||null,i=!1,a="",s=cO;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(s=r.onRecoverableError)),e=lO(e,null,t,1,r??null,i,!1,a,s),t[vi]=e.current,Ol(t),n)for(t=0;t<n.length;t++)r=n[t],i=r._getVersion,i=i(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,i]:e.mutableSourceEagerHydrationData.push(r,i);return new Gd(e)};Yr.render=function(t,e,r){if(!Kd(e))throw Error(oe(200));return Qd(null,t,e,!1,r)};Yr.unmountComponentAtNode=function(t){if(!Kd(t))throw Error(oe(40));return t._reactRootContainer?(ns(function(){Qd(null,null,t,!1,function(){t._reactRootContainer=null,t[vi]=null})}),!0):!1};Yr.unstable_batchedUpdates=nE;Yr.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!Kd(r))throw Error(oe(200));if(t==null||t._reactInternals===void 0)throw Error(oe(38));return Qd(t,e,r,!1,n)};Yr.version="18.2.0-next-9e3b772b8-20220608";function fO(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(fO)}catch(t){console.error(t)}}fO(),l2.exports=Yr;var n$=l2.exports,VS=n$;A1.createRoot=VS.createRoot,A1.hydrateRoot=VS.hydrateRoot;/**
 * @remix-run/router v1.15.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zl(){return zl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},zl.apply(this,arguments)}var Wi;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Wi||(Wi={}));const FS="popstate";function i$(t){t===void 0&&(t={});function e(n,i){let{pathname:a,search:s,hash:o}=n.location;return bw("",{pathname:a,search:s,hash:o},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(n,i){return typeof i=="string"?i:Zh(i)}return s$(e,r,null,t)}function St(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function fE(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function a$(){return Math.random().toString(36).substr(2,8)}function BS(t,e){return{usr:t.state,key:t.key,idx:e}}function bw(t,e,r,n){return r===void 0&&(r=null),zl({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Go(e):e,{state:r,key:e&&e.key||n||a$()})}function Zh(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Go(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function s$(t,e,r,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:a=!1}=n,s=i.history,o=Wi.Pop,u=null,l=c();l==null&&(l=0,s.replaceState(zl({},s.state,{idx:l}),""));function c(){return(s.state||{idx:null}).idx}function f(){o=Wi.Pop;let m=c(),p=m==null?null:m-l;l=m,u&&u({action:o,location:w.location,delta:p})}function h(m,p){o=Wi.Push;let g=bw(w.location,m,p);r&&r(g,m),l=c()+1;let y=BS(g,l),_=w.createHref(g);try{s.pushState(y,"",_)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;i.location.assign(_)}a&&u&&u({action:o,location:w.location,delta:1})}function d(m,p){o=Wi.Replace;let g=bw(w.location,m,p);r&&r(g,m),l=c();let y=BS(g,l),_=w.createHref(g);s.replaceState(y,"",_),a&&u&&u({action:o,location:w.location,delta:0})}function v(m){let p=i.location.origin!=="null"?i.location.origin:i.location.href,g=typeof m=="string"?m:Zh(m);return St(p,"No window.location.(origin|href) available to create URL for href: "+g),new URL(g,p)}let w={get action(){return o},get location(){return t(i,s)},listen(m){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(FS,f),u=m,()=>{i.removeEventListener(FS,f),u=null}},createHref(m){return e(i,m)},createURL:v,encodeLocation(m){let p=v(m);return{pathname:p.pathname,search:p.search,hash:p.hash}},push:h,replace:d,go(m){return s.go(m)}};return w}var qS;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(qS||(qS={}));function o$(t,e,r){r===void 0&&(r="/");let n=typeof e=="string"?Go(e):e,i=hE(n.pathname||"/",r);if(i==null)return null;let a=hO(t);u$(a);let s=null;for(let o=0;s==null&&o<a.length;++o)s=m$(a[o],_$(i));return s}function hO(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let i=(a,s,o)=>{let u={relativePath:o===void 0?a.path||"":o,caseSensitive:a.caseSensitive===!0,childrenIndex:s,route:a};u.relativePath.startsWith("/")&&(St(u.relativePath.startsWith(n),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(n.length));let l=ra([n,u.relativePath]),c=r.concat(u);a.children&&a.children.length>0&&(St(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),hO(a.children,e,c,l)),!(a.path==null&&!a.index)&&e.push({path:l,score:p$(l,a.index),routesMeta:c})};return t.forEach((a,s)=>{var o;if(a.path===""||!((o=a.path)!=null&&o.includes("?")))i(a,s);else for(let u of dO(a.path))i(a,s,u)}),e}function dO(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,i=r.endsWith("?"),a=r.replace(/\?$/,"");if(n.length===0)return i?[a,""]:[a];let s=dO(n.join("/")),o=[];return o.push(...s.map(u=>u===""?a:[a,u].join("/"))),i&&o.push(...s),o.map(u=>t.startsWith("/")&&u===""?"/":u)}function u$(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:g$(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const l$=/^:[\w-]+$/,c$=3,f$=2,h$=1,d$=10,v$=-2,$S=t=>t==="*";function p$(t,e){let r=t.split("/"),n=r.length;return r.some($S)&&(n+=v$),e&&(n+=f$),r.filter(i=>!$S(i)).reduce((i,a)=>i+(l$.test(a)?c$:a===""?h$:d$),n)}function g$(t,e){return t.length===e.length&&t.slice(0,-1).every((n,i)=>n===e[i])?t[t.length-1]-e[e.length-1]:0}function m$(t,e){let{routesMeta:r}=t,n={},i="/",a=[];for(let s=0;s<r.length;++s){let o=r[s],u=s===r.length-1,l=i==="/"?e:e.slice(i.length)||"/",c=y$({path:o.relativePath,caseSensitive:o.caseSensitive,end:u},l);if(!c)return null;Object.assign(n,c.params);let f=o.route;a.push({params:n,pathname:ra([i,c.pathname]),pathnameBase:I$(ra([i,c.pathnameBase])),route:f}),c.pathnameBase!=="/"&&(i=ra([i,c.pathnameBase]))}return a}function y$(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=w$(t.path,t.caseSensitive,t.end),i=e.match(r);if(!i)return null;let a=i[0],s=a.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:n.reduce((l,c,f)=>{let{paramName:h,isOptional:d}=c;if(h==="*"){let w=o[f]||"";s=a.slice(0,a.length-w.length).replace(/(.)\/+$/,"$1")}const v=o[f];return d&&!v?l[h]=void 0:l[h]=E$(v||"",h),l},{}),pathname:a,pathnameBase:s,pattern:t}}function w$(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),fE(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,o,u)=>(n.push({paramName:o,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function _$(t){try{return decodeURI(t)}catch(e){return fE(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function E$(t,e){try{return decodeURIComponent(t)}catch(r){return fE(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+r+").")),t}}function hE(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function T$(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:i=""}=typeof t=="string"?Go(t):t;return{pathname:r?r.startsWith("/")?r:b$(r,e):e,search:C$(n),hash:x$(i)}}function b$(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function qp(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function S$(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function dE(t,e){let r=S$(t);return e?r.map((n,i)=>i===t.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function vE(t,e,r,n){n===void 0&&(n=!1);let i;typeof t=="string"?i=Go(t):(i=zl({},t),St(!i.pathname||!i.pathname.includes("?"),qp("?","pathname","search",i)),St(!i.pathname||!i.pathname.includes("#"),qp("#","pathname","hash",i)),St(!i.search||!i.search.includes("#"),qp("#","search","hash",i)));let a=t===""||i.pathname==="",s=a?"/":i.pathname,o;if(s==null)o=r;else{let f=e.length-1;if(!n&&s.startsWith("..")){let h=s.split("/");for(;h[0]==="..";)h.shift(),f-=1;i.pathname=h.join("/")}o=f>=0?e[f]:"/"}let u=T$(i,o),l=s&&s!=="/"&&s.endsWith("/"),c=(a||s===".")&&r.endsWith("/");return!u.pathname.endsWith("/")&&(l||c)&&(u.pathname+="/"),u}const ra=t=>t.join("/").replace(/\/\/+/g,"/"),I$=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),C$=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,x$=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function R$(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const vO=["post","put","patch","delete"];new Set(vO);const k$=["get",...vO];new Set(k$);/**
 * React Router v6.22.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ul(){return Ul=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ul.apply(this,arguments)}const pE=ie.createContext(null),A$=ie.createContext(null),Sa=ie.createContext(null),Yd=ie.createContext(null),Si=ie.createContext({outlet:null,matches:[],isDataRoute:!1}),pO=ie.createContext(null);function P$(t,e){let{relative:r}=e===void 0?{}:e;Ko()||St(!1);let{basename:n,navigator:i}=ie.useContext(Sa),{hash:a,pathname:s,search:o}=yO(t,{relative:r}),u=s;return n!=="/"&&(u=s==="/"?n:ra([n,s])),i.createHref({pathname:u,search:o,hash:a})}function Ko(){return ie.useContext(Yd)!=null}function xc(){return Ko()||St(!1),ie.useContext(Yd).location}function gO(t){ie.useContext(Sa).static||ie.useLayoutEffect(t)}function Ia(){let{isDataRoute:t}=ie.useContext(Si);return t?j$():D$()}function D$(){Ko()||St(!1);let t=ie.useContext(pE),{basename:e,future:r,navigator:n}=ie.useContext(Sa),{matches:i}=ie.useContext(Si),{pathname:a}=xc(),s=JSON.stringify(dE(i,r.v7_relativeSplatPath)),o=ie.useRef(!1);return gO(()=>{o.current=!0}),ie.useCallback(function(l,c){if(c===void 0&&(c={}),!o.current)return;if(typeof l=="number"){n.go(l);return}let f=vE(l,JSON.parse(s),a,c.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:ra([e,f.pathname])),(c.replace?n.replace:n.push)(f,c.state,c)},[e,n,s,a,t])}function mO(){let{matches:t}=ie.useContext(Si),e=t[t.length-1];return e?e.params:{}}function yO(t,e){let{relative:r}=e===void 0?{}:e,{future:n}=ie.useContext(Sa),{matches:i}=ie.useContext(Si),{pathname:a}=xc(),s=JSON.stringify(dE(i,n.v7_relativeSplatPath));return ie.useMemo(()=>vE(t,JSON.parse(s),a,r==="path"),[t,s,a,r])}function O$(t,e){return N$(t,e)}function N$(t,e,r,n){Ko()||St(!1);let{navigator:i}=ie.useContext(Sa),{matches:a}=ie.useContext(Si),s=a[a.length-1],o=s?s.params:{};s&&s.pathname;let u=s?s.pathnameBase:"/";s&&s.route;let l=xc(),c;if(e){var f;let m=typeof e=="string"?Go(e):e;u==="/"||(f=m.pathname)!=null&&f.startsWith(u)||St(!1),c=m}else c=l;let h=c.pathname||"/",d=u==="/"?h:h.slice(u.length)||"/",v=o$(t,{pathname:d}),w=B$(v&&v.map(m=>Object.assign({},m,{params:Object.assign({},o,m.params),pathname:ra([u,i.encodeLocation?i.encodeLocation(m.pathname).pathname:m.pathname]),pathnameBase:m.pathnameBase==="/"?u:ra([u,i.encodeLocation?i.encodeLocation(m.pathnameBase).pathname:m.pathnameBase])})),a,r,n);return e&&w?ie.createElement(Yd.Provider,{value:{location:Ul({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:Wi.Pop}},w):w}function L$(){let t=U$(),e=R$(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return ie.createElement(ie.Fragment,null,ie.createElement("h2",null,"Unexpected Application Error!"),ie.createElement("h3",{style:{fontStyle:"italic"}},e),r?ie.createElement("pre",{style:i},r):null,null)}const M$=ie.createElement(L$,null);class V$ extends ie.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?ie.createElement(Si.Provider,{value:this.props.routeContext},ie.createElement(pO.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function F$(t){let{routeContext:e,match:r,children:n}=t,i=ie.useContext(pE);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),ie.createElement(Si.Provider,{value:e},n)}function B$(t,e,r,n){var i;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var a;if((a=r)!=null&&a.errors)t=r.matches;else return null}let s=t,o=(i=r)==null?void 0:i.errors;if(o!=null){let c=s.findIndex(f=>f.route.id&&(o==null?void 0:o[f.route.id]));c>=0||St(!1),s=s.slice(0,Math.min(s.length,c+1))}let u=!1,l=-1;if(r&&n&&n.v7_partialHydration)for(let c=0;c<s.length;c++){let f=s[c];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(l=c),f.route.id){let{loaderData:h,errors:d}=r,v=f.route.loader&&h[f.route.id]===void 0&&(!d||d[f.route.id]===void 0);if(f.route.lazy||v){u=!0,l>=0?s=s.slice(0,l+1):s=[s[0]];break}}}return s.reduceRight((c,f,h)=>{let d,v=!1,w=null,m=null;r&&(d=o&&f.route.id?o[f.route.id]:void 0,w=f.route.errorElement||M$,u&&(l<0&&h===0?(W$("route-fallback",!1),v=!0,m=null):l===h&&(v=!0,m=f.route.hydrateFallbackElement||null)));let p=e.concat(s.slice(0,h+1)),g=()=>{let y;return d?y=w:v?y=m:f.route.Component?y=ie.createElement(f.route.Component,null):f.route.element?y=f.route.element:y=c,ie.createElement(F$,{match:f,routeContext:{outlet:c,matches:p,isDataRoute:r!=null},children:y})};return r&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?ie.createElement(V$,{location:r.location,revalidation:r.revalidation,component:w,error:d,children:g(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):g()},null)}var wO=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(wO||{}),ed=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(ed||{});function q$(t){let e=ie.useContext(pE);return e||St(!1),e}function $$(t){let e=ie.useContext(A$);return e||St(!1),e}function z$(t){let e=ie.useContext(Si);return e||St(!1),e}function _O(t){let e=z$(),r=e.matches[e.matches.length-1];return r.route.id||St(!1),r.route.id}function U$(){var t;let e=ie.useContext(pO),r=$$(ed.UseRouteError),n=_O(ed.UseRouteError);return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function j$(){let{router:t}=q$(wO.UseNavigateStable),e=_O(ed.UseNavigateStable),r=ie.useRef(!1);return gO(()=>{r.current=!0}),ie.useCallback(function(i,a){a===void 0&&(a={}),r.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Ul({fromRouteId:e},a)))},[t,e])}const zS={};function W$(t,e,r){!e&&!zS[t]&&(zS[t]=!0)}function gE(t){let{to:e,replace:r,state:n,relative:i}=t;Ko()||St(!1);let{future:a,static:s}=ie.useContext(Sa),{matches:o}=ie.useContext(Si),{pathname:u}=xc(),l=Ia(),c=vE(e,dE(o,a.v7_relativeSplatPath),u,i==="path"),f=JSON.stringify(c);return ie.useEffect(()=>l(JSON.parse(f),{replace:r,state:n,relative:i}),[l,f,i,r,n]),null}function an(t){St(!1)}function H$(t){let{basename:e="/",children:r=null,location:n,navigationType:i=Wi.Pop,navigator:a,static:s=!1,future:o}=t;Ko()&&St(!1);let u=e.replace(/^\/*/,"/"),l=ie.useMemo(()=>({basename:u,navigator:a,static:s,future:Ul({v7_relativeSplatPath:!1},o)}),[u,o,a,s]);typeof n=="string"&&(n=Go(n));let{pathname:c="/",search:f="",hash:h="",state:d=null,key:v="default"}=n,w=ie.useMemo(()=>{let m=hE(c,u);return m==null?null:{location:{pathname:m,search:f,hash:h,state:d,key:v},navigationType:i}},[u,c,f,h,d,v,i]);return w==null?null:ie.createElement(Sa.Provider,{value:l},ie.createElement(Yd.Provider,{children:r,value:w}))}function mE(t){let{children:e,location:r}=t;return O$(Sw(e),r)}new Promise(()=>{});function Sw(t,e){e===void 0&&(e=[]);let r=[];return ie.Children.forEach(t,(n,i)=>{if(!ie.isValidElement(n))return;let a=[...e,i];if(n.type===ie.Fragment){r.push.apply(r,Sw(n.props.children,a));return}n.type!==an&&St(!1),!n.props.index||!n.props.children||St(!1);let s={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(s.children=Sw(n.props.children,a)),r.push(s)}),r}/**
 * React Router DOM v6.22.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Iw(){return Iw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Iw.apply(this,arguments)}function G$(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,a;for(a=0;a<n.length;a++)i=n[a],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function K$(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Q$(t,e){return t.button===0&&(!e||e==="_self")&&!K$(t)}const Y$=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],X$="6";try{window.__reactRouterVersion=X$}catch{}const J$="startTransition",US=GB[J$];function Z$(t){let{basename:e,children:r,future:n,window:i}=t,a=ie.useRef();a.current==null&&(a.current=i$({window:i,v5Compat:!0}));let s=a.current,[o,u]=ie.useState({action:s.action,location:s.location}),{v7_startTransition:l}=n||{},c=ie.useCallback(f=>{l&&US?US(()=>u(f)):u(f)},[u,l]);return ie.useLayoutEffect(()=>s.listen(c),[s,c]),ie.createElement(H$,{basename:e,children:r,location:o.location,navigationType:o.action,navigator:s,future:n})}const ez=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",tz=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,rz=ie.forwardRef(function(e,r){let{onClick:n,relative:i,reloadDocument:a,replace:s,state:o,target:u,to:l,preventScrollReset:c,unstable_viewTransition:f}=e,h=G$(e,Y$),{basename:d}=ie.useContext(Sa),v,w=!1;if(typeof l=="string"&&tz.test(l)&&(v=l,ez))try{let y=new URL(window.location.href),_=l.startsWith("//")?new URL(y.protocol+l):new URL(l),T=hE(_.pathname,d);_.origin===y.origin&&T!=null?l=T+_.search+_.hash:w=!0}catch{}let m=P$(l,{relative:i}),p=nz(l,{replace:s,state:o,target:u,preventScrollReset:c,relative:i,unstable_viewTransition:f});function g(y){n&&n(y),y.defaultPrevented||p(y)}return ie.createElement("a",Iw({},h,{href:v||m,onClick:w||a?n:g,ref:r,target:u}))});var jS;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(jS||(jS={}));var WS;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(WS||(WS={}));function nz(t,e){let{target:r,replace:n,state:i,preventScrollReset:a,relative:s,unstable_viewTransition:o}=e===void 0?{}:e,u=Ia(),l=xc(),c=yO(t,{relative:s});return ie.useCallback(f=>{if(Q$(f,r)){f.preventDefault();let h=n!==void 0?n:Zh(l)===Zh(c);u(t,{replace:h,state:i,preventScrollReset:a,relative:s,unstable_viewTransition:o})}},[l,u,c,n,i,r,t,a,s,o])}var HS={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EO=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);i<128?e[r++]=i:i<2048?(e[r++]=i>>6|192,e[r++]=i&63|128):(i&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=i>>18|240,e[r++]=i>>12&63|128,e[r++]=i>>6&63|128,e[r++]=i&63|128):(e[r++]=i>>12|224,e[r++]=i>>6&63|128,e[r++]=i&63|128)}return e},iz=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const i=t[r++];if(i<128)e[n++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[r++];e[n++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[r++],s=t[r++],o=t[r++],u=((i&7)<<18|(a&63)<<12|(s&63)<<6|o&63)-65536;e[n++]=String.fromCharCode(55296+(u>>10)),e[n++]=String.fromCharCode(56320+(u&1023))}else{const a=t[r++],s=t[r++];e[n++]=String.fromCharCode((i&15)<<12|(a&63)<<6|s&63)}}return e.join("")},TO={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let i=0;i<t.length;i+=3){const a=t[i],s=i+1<t.length,o=s?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,c=a>>2,f=(a&3)<<4|o>>4;let h=(o&15)<<2|l>>6,d=l&63;u||(d=64,s||(h=64)),n.push(r[c],r[f],r[h],r[d])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(EO(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):iz(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let i=0;i<t.length;){const a=r[t.charAt(i++)],o=i<t.length?r[t.charAt(i)]:0;++i;const l=i<t.length?r[t.charAt(i)]:64;++i;const f=i<t.length?r[t.charAt(i)]:64;if(++i,a==null||o==null||l==null||f==null)throw new az;const h=a<<2|o>>4;if(n.push(h),l!==64){const d=o<<4&240|l>>2;if(n.push(d),f!==64){const v=l<<6&192|f;n.push(v)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class az extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const sz=function(t){const e=EO(t);return TO.encodeByteArray(e,!0)},td=function(t){return sz(t).replace(/\./g,"")},bO=function(t){try{return TO.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oz(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uz=()=>oz().__FIREBASE_DEFAULTS__,lz=()=>{if(typeof process>"u"||typeof HS>"u")return;const t=HS.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},cz=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&bO(t[1]);return e&&JSON.parse(e)},Xd=()=>{try{return uz()||lz()||cz()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},SO=t=>{var e,r;return(r=(e=Xd())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},fz=t=>{const e=SO(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},IO=()=>{var t;return(t=Xd())===null||t===void 0?void 0:t.config},CO=t=>{var e;return(e=Xd())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hz{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dz(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",i=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[td(JSON.stringify(r)),td(JSON.stringify(s)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function At(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function vz(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(At())}function pz(){var t;const e=(t=Xd())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function gz(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function mz(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function yz(){const t=At();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function wz(){return!pz()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function xO(){try{return typeof indexedDB=="object"}catch{return!1}}function _z(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},i.onupgradeneeded=()=>{r=!1},i.onerror=()=>{var a;e(((a=i.error)===null||a===void 0?void 0:a.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ez="FirebaseError";class Zn extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=Ez,Object.setPrototypeOf(this,Zn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Rc.prototype.create)}}class Rc{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},i=`${this.service}/${e}`,a=this.errors[e],s=a?Tz(a,n):"Error",o=`${this.serviceName}: ${s} (${i}).`;return new Zn(i,o,n)}}function Tz(t,e){return t.replace(bz,(r,n)=>{const i=e[n];return i!=null?String(i):`<${n}?>`})}const bz=/\{\$([^}]+)}/g;function Sz(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function rd(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const i of r){if(!n.includes(i))return!1;const a=t[i],s=e[i];if(GS(a)&&GS(s)){if(!rd(a,s))return!1}else if(a!==s)return!1}for(const i of n)if(!r.includes(i))return!1;return!0}function GS(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kc(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(i=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function Hu(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[i,a]=n.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function Gu(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function Iz(t,e){const r=new Cz(t,e);return r.subscribe.bind(r)}class Cz{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let i;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");xz(e,["next","error","complete"])?i=e:i={next:e,error:r,complete:n},i.next===void 0&&(i.next=$p),i.error===void 0&&(i.error=$p),i.complete===void 0&&(i.complete=$p);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function xz(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function $p(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vt(t){return t&&t._delegate?t._delegate:t}class is{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Va="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rz{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new hz;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:r});i&&n.resolve(i)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Az(e))try{this.getOrInitializeService({instanceIdentifier:Va})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(r);try{const a=this.getOrInitializeService({instanceIdentifier:i});n.resolve(a)}catch{}}}}clearInstance(e=Va){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Va){return this.instances.has(e)}getOptions(e=Va){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[a,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(a);n===o&&s.resolve(i)}return i}onInit(e,r){var n;const i=this.normalizeInstanceIdentifier(r),a=(n=this.onInitCallbacks.get(i))!==null&&n!==void 0?n:new Set;a.add(e),this.onInitCallbacks.set(i,a);const s=this.instances.get(i);return s&&e(s,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const i of n)try{i(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:kz(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Va){return this.component?this.component.multipleInstances?e:Va:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function kz(t){return t===Va?void 0:t}function Az(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pz{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new Rz(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $e;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})($e||($e={}));const Dz={debug:$e.DEBUG,verbose:$e.VERBOSE,info:$e.INFO,warn:$e.WARN,error:$e.ERROR,silent:$e.SILENT},Oz=$e.INFO,Nz={[$e.DEBUG]:"log",[$e.VERBOSE]:"log",[$e.INFO]:"info",[$e.WARN]:"warn",[$e.ERROR]:"error"},Lz=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),i=Nz[e];if(i)console[i](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class yE{constructor(e){this.name=e,this._logLevel=Oz,this._logHandler=Lz,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in $e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Dz[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,$e.DEBUG,...e),this._logHandler(this,$e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,$e.VERBOSE,...e),this._logHandler(this,$e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,$e.INFO,...e),this._logHandler(this,$e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,$e.WARN,...e),this._logHandler(this,$e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,$e.ERROR,...e),this._logHandler(this,$e.ERROR,...e)}}const Mz=(t,e)=>e.some(r=>t instanceof r);let KS,QS;function Vz(){return KS||(KS=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Fz(){return QS||(QS=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const RO=new WeakMap,Cw=new WeakMap,kO=new WeakMap,zp=new WeakMap,wE=new WeakMap;function Bz(t){const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",s)},a=()=>{r(na(t.result)),i()},s=()=>{n(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",s)});return e.then(r=>{r instanceof IDBCursor&&RO.set(r,t)}).catch(()=>{}),wE.set(e,t),e}function qz(t){if(Cw.has(t))return;const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",s),t.removeEventListener("abort",s)},a=()=>{r(),i()},s=()=>{n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",s),t.addEventListener("abort",s)});Cw.set(t,e)}let xw={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return Cw.get(t);if(e==="objectStoreNames")return t.objectStoreNames||kO.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return na(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function $z(t){xw=t(xw)}function zz(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(Up(this),e,...r);return kO.set(n,e.sort?e.sort():[e]),na(n)}:Fz().includes(t)?function(...e){return t.apply(Up(this),e),na(RO.get(this))}:function(...e){return na(t.apply(Up(this),e))}}function Uz(t){return typeof t=="function"?zz(t):(t instanceof IDBTransaction&&qz(t),Mz(t,Vz())?new Proxy(t,xw):t)}function na(t){if(t instanceof IDBRequest)return Bz(t);if(zp.has(t))return zp.get(t);const e=Uz(t);return e!==t&&(zp.set(t,e),wE.set(e,t)),e}const Up=t=>wE.get(t);function jz(t,e,{blocked:r,upgrade:n,blocking:i,terminated:a}={}){const s=indexedDB.open(t,e),o=na(s);return n&&s.addEventListener("upgradeneeded",u=>{n(na(s.result),u.oldVersion,u.newVersion,na(s.transaction),u)}),r&&s.addEventListener("blocked",u=>r(u.oldVersion,u.newVersion,u)),o.then(u=>{a&&u.addEventListener("close",()=>a()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),o}const Wz=["get","getKey","getAll","getAllKeys","count"],Hz=["put","add","delete","clear"],jp=new Map;function YS(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(jp.get(e))return jp.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,i=Hz.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(i||Wz.includes(r)))return;const a=async function(s,...o){const u=this.transaction(s,i?"readwrite":"readonly");let l=u.store;return n&&(l=l.index(o.shift())),(await Promise.all([l[r](...o),i&&u.done]))[0]};return jp.set(e,a),a}$z(t=>({...t,get:(e,r,n)=>YS(e,r)||t.get(e,r,n),has:(e,r)=>!!YS(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gz{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(Kz(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function Kz(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Rw="@firebase/app",XS="0.9.27";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const as=new yE("@firebase/app"),Qz="@firebase/app-compat",Yz="@firebase/analytics-compat",Xz="@firebase/analytics",Jz="@firebase/app-check-compat",Zz="@firebase/app-check",e5="@firebase/auth",t5="@firebase/auth-compat",r5="@firebase/database",n5="@firebase/database-compat",i5="@firebase/functions",a5="@firebase/functions-compat",s5="@firebase/installations",o5="@firebase/installations-compat",u5="@firebase/messaging",l5="@firebase/messaging-compat",c5="@firebase/performance",f5="@firebase/performance-compat",h5="@firebase/remote-config",d5="@firebase/remote-config-compat",v5="@firebase/storage",p5="@firebase/storage-compat",g5="@firebase/firestore",m5="@firebase/firestore-compat",y5="firebase",w5="10.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kw="[DEFAULT]",_5={[Rw]:"fire-core",[Qz]:"fire-core-compat",[Xz]:"fire-analytics",[Yz]:"fire-analytics-compat",[Zz]:"fire-app-check",[Jz]:"fire-app-check-compat",[e5]:"fire-auth",[t5]:"fire-auth-compat",[r5]:"fire-rtdb",[n5]:"fire-rtdb-compat",[i5]:"fire-fn",[a5]:"fire-fn-compat",[s5]:"fire-iid",[o5]:"fire-iid-compat",[u5]:"fire-fcm",[l5]:"fire-fcm-compat",[c5]:"fire-perf",[f5]:"fire-perf-compat",[h5]:"fire-rc",[d5]:"fire-rc-compat",[v5]:"fire-gcs",[p5]:"fire-gcs-compat",[g5]:"fire-fst",[m5]:"fire-fst-compat","fire-js":"fire-js",[y5]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nd=new Map,Aw=new Map;function E5(t,e){try{t.container.addComponent(e)}catch(r){as.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function Ao(t){const e=t.name;if(Aw.has(e))return as.debug(`There were multiple attempts to register component ${e}.`),!1;Aw.set(e,t);for(const r of nd.values())E5(r,t);return!0}function _E(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T5={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},ia=new Rc("app","Firebase",T5);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b5{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new is("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ia.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qo=w5;function AO(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:kw,automaticDataCollectionEnabled:!1},e),i=n.name;if(typeof i!="string"||!i)throw ia.create("bad-app-name",{appName:String(i)});if(r||(r=IO()),!r)throw ia.create("no-options");const a=nd.get(i);if(a){if(rd(r,a.options)&&rd(n,a.config))return a;throw ia.create("duplicate-app",{appName:i})}const s=new Pz(i);for(const u of Aw.values())s.addComponent(u);const o=new b5(r,n,s);return nd.set(i,o),o}function PO(t=kw){const e=nd.get(t);if(!e&&t===kw&&IO())return AO();if(!e)throw ia.create("no-app",{appName:t});return e}function aa(t,e,r){var n;let i=(n=_5[t])!==null&&n!==void 0?n:t;r&&(i+=`-${r}`);const a=i.match(/\s|\//),s=e.match(/\s|\//);if(a||s){const o=[`Unable to register library "${i}" with version "${e}":`];a&&o.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),as.warn(o.join(" "));return}Ao(new is(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S5="firebase-heartbeat-database",I5=1,jl="firebase-heartbeat-store";let Wp=null;function DO(){return Wp||(Wp=jz(S5,I5,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(jl)}catch(r){console.warn(r)}}}}).catch(t=>{throw ia.create("idb-open",{originalErrorMessage:t.message})})),Wp}async function C5(t){try{const r=(await DO()).transaction(jl),n=await r.objectStore(jl).get(OO(t));return await r.done,n}catch(e){if(e instanceof Zn)as.warn(e.message);else{const r=ia.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});as.warn(r.message)}}}async function JS(t,e){try{const n=(await DO()).transaction(jl,"readwrite");await n.objectStore(jl).put(e,OO(t)),await n.done}catch(r){if(r instanceof Zn)as.warn(r.message);else{const n=ia.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});as.warn(n.message)}}}function OO(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x5=1024,R5=30*24*60*60*1e3;class k5{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new P5(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=ZS();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(s=>s.date===a)))return this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const o=new Date(s.date).valueOf();return Date.now()-o<=R5}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=ZS(),{heartbeatsToSend:n,unsentEntries:i}=A5(this._heartbeatsCache.heartbeats),a=td(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}}function ZS(){return new Date().toISOString().substring(0,10)}function A5(t,e=x5){const r=[];let n=t.slice();for(const i of t){const a=r.find(s=>s.agent===i.agent);if(a){if(a.dates.push(i.date),eI(r)>e){a.dates.pop();break}}else if(r.push({agent:i.agent,dates:[i.date]}),eI(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class P5{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return xO()?_z().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await C5(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const i=await this.read();return JS(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const i=await this.read();return JS(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function eI(t){return td(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D5(t){Ao(new is("platform-logger",e=>new Gz(e),"PRIVATE")),Ao(new is("heartbeat",e=>new k5(e),"PRIVATE")),aa(Rw,XS,t),aa(Rw,XS,"esm2017"),aa("fire-js","")}D5("");function EE(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function NO(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const O5=NO,LO=new Rc("auth","Firebase",NO());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const id=new yE("@firebase/auth");function N5(t,...e){id.logLevel<=$e.WARN&&id.warn(`Auth (${Qo}): ${t}`,...e)}function dh(t,...e){id.logLevel<=$e.ERROR&&id.error(`Auth (${Qo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function An(t,...e){throw TE(t,...e)}function Hn(t,...e){return TE(t,...e)}function L5(t,e,r){const n=Object.assign(Object.assign({},O5()),{[e]:r});return new Rc("auth","Firebase",n).create(e,{appName:t.name})}function TE(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return LO.create(t,...e)}function Re(t,e,...r){if(!t)throw TE(e,...r)}function ui(t){const e="INTERNAL ASSERTION FAILED: "+t;throw dh(e),new Error(e)}function mi(t,e){t||ui(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pw(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function M5(){return tI()==="http:"||tI()==="https:"}function tI(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V5(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(M5()||gz()||"connection"in navigator)?navigator.onLine:!0}function F5(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(e,r){this.shortDelay=e,this.longDelay=r,mi(r>e,"Short delay should be less than long delay!"),this.isMobile=vz()||mz()}get(){return V5()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bE(t,e){mi(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MO{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ui("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ui("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ui("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B5={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q5=new Ac(3e4,6e4);function ys(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ca(t,e,r,n,i={}){return VO(t,i,async()=>{let a={},s={};n&&(e==="GET"?s=n:a={body:JSON.stringify(n)});const o=kc(Object.assign({key:t.config.apiKey},s)).slice(1),u=await t._getAdditionalHeaders();return u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode),MO.fetch()(FO(t,t.config.apiHost,r,o),Object.assign({method:e,headers:u,referrerPolicy:"no-referrer"},a))})}async function VO(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},B5),e);try{const i=new z5(t),a=await Promise.race([r(),i.promise]);i.clearNetworkTimeout();const s=await a.json();if("needConfirmation"in s)throw Pf(t,"account-exists-with-different-credential",s);if(a.ok&&!("errorMessage"in s))return s;{const o=a.ok?s.errorMessage:s.error.message,[u,l]=o.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Pf(t,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw Pf(t,"email-already-in-use",s);if(u==="USER_DISABLED")throw Pf(t,"user-disabled",s);const c=n[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw L5(t,c,l);An(t,c)}}catch(i){if(i instanceof Zn)throw i;An(t,"network-request-failed",{message:String(i)})}}async function Jd(t,e,r,n,i={}){const a=await Ca(t,e,r,n,i);return"mfaPendingCredential"in a&&An(t,"multi-factor-auth-required",{_serverResponse:a}),a}function FO(t,e,r,n){const i=`${e}${r}?${n}`;return t.config.emulator?bE(t.config,i):`${t.config.apiScheme}://${i}`}function $5(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class z5{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(Hn(this.auth,"network-request-failed")),q5.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Pf(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const i=Hn(t,e,n);return i.customData._tokenResponse=r,i}function rI(t){return t!==void 0&&t.enterprise!==void 0}class U5{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return $5(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function j5(t,e){return Ca(t,"GET","/v2/recaptchaConfig",ys(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W5(t,e){return Ca(t,"POST","/v1/accounts:delete",e)}async function H5(t,e){return Ca(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function G5(t,e=!1){const r=Vt(t),n=await r.getIdToken(e),i=SE(n);Re(i&&i.exp&&i.auth_time&&i.iat,r.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,s=a==null?void 0:a.sign_in_provider;return{claims:i,token:n,authTime:gl(Hp(i.auth_time)),issuedAtTime:gl(Hp(i.iat)),expirationTime:gl(Hp(i.exp)),signInProvider:s||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Hp(t){return Number(t)*1e3}function SE(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return dh("JWT malformed, contained fewer than 3 sections"),null;try{const i=bO(r);return i?JSON.parse(i):(dh("Failed to decode base64 JWT payload"),null)}catch(i){return dh("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function K5(t){const e=SE(t);return Re(e,"internal-error"),Re(typeof e.exp<"u","internal-error"),Re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wl(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof Zn&&Q5(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function Q5({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y5{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BO{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=gl(this.lastLoginAt),this.creationTime=gl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ad(t){var e;const r=t.auth,n=await t.getIdToken(),i=await Wl(t,H5(r,{idToken:n}));Re(i==null?void 0:i.users.length,r,"internal-error");const a=i.users[0];t._notifyReloadListener(a);const s=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?Z5(a.providerUserInfo):[],o=J5(t.providerData,s),u=t.isAnonymous,l=!(t.email&&a.passwordHash)&&!(o!=null&&o.length),c=u?l:!1,f={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:o,metadata:new BO(a.createdAt,a.lastLoginAt),isAnonymous:c};Object.assign(t,f)}async function X5(t){const e=Vt(t);await ad(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function J5(t,e){return[...t.filter(n=>!e.some(i=>i.providerId===n.providerId)),...e]}function Z5(t){return t.map(e=>{var{providerId:r}=e,n=EE(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eU(t,e){const r=await VO(t,{},async()=>{const n=kc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=t.config,s=FO(t,i,"/v1/token",`key=${a}`),o=await t._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",MO.fetch()(s,{method:"POST",headers:o,body:n})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function tU(t,e){return Ca(t,"POST","/v2/accounts:revokeToken",ys(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Re(e.idToken,"internal-error"),Re(typeof e.idToken<"u","internal-error"),Re(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):K5(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}async getToken(e,r=!1){return Re(!this.accessToken||this.refreshToken,e,"user-token-expired"),!r&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:i,expiresIn:a}=await eU(e,r);this.updateTokensAndExpiration(n,i,Number(a))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:i,expirationTime:a}=r,s=new Hl;return n&&(Re(typeof n=="string","internal-error",{appName:e}),s.refreshToken=n),i&&(Re(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),a&&(Re(typeof a=="number","internal-error",{appName:e}),s.expirationTime=a),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Hl,this.toJSON())}_performRefresh(){return ui("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pi(t,e){Re(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Xa{constructor(e){var{uid:r,auth:n,stsTokenManager:i}=e,a=EE(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Y5(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new BO(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const r=await Wl(this,this.stsTokenManager.getToken(this.auth,e));return Re(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return G5(this,e)}reload(){return X5(this)}_assign(e){this!==e&&(Re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new Xa(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){Re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await ad(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Wl(this,W5(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,i,a,s,o,u,l,c;const f=(n=r.displayName)!==null&&n!==void 0?n:void 0,h=(i=r.email)!==null&&i!==void 0?i:void 0,d=(a=r.phoneNumber)!==null&&a!==void 0?a:void 0,v=(s=r.photoURL)!==null&&s!==void 0?s:void 0,w=(o=r.tenantId)!==null&&o!==void 0?o:void 0,m=(u=r._redirectEventId)!==null&&u!==void 0?u:void 0,p=(l=r.createdAt)!==null&&l!==void 0?l:void 0,g=(c=r.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:y,emailVerified:_,isAnonymous:T,providerData:b,stsTokenManager:E}=r;Re(y&&E,e,"internal-error");const I=Hl.fromJSON(this.name,E);Re(typeof y=="string",e,"internal-error"),Pi(f,e.name),Pi(h,e.name),Re(typeof _=="boolean",e,"internal-error"),Re(typeof T=="boolean",e,"internal-error"),Pi(d,e.name),Pi(v,e.name),Pi(w,e.name),Pi(m,e.name),Pi(p,e.name),Pi(g,e.name);const S=new Xa({uid:y,auth:e,email:h,emailVerified:_,displayName:f,isAnonymous:T,photoURL:v,phoneNumber:d,tenantId:w,stsTokenManager:I,createdAt:p,lastLoginAt:g});return b&&Array.isArray(b)&&(S.providerData=b.map(C=>Object.assign({},C))),m&&(S._redirectEventId=m),S}static async _fromIdTokenResponse(e,r,n=!1){const i=new Hl;i.updateFromServerResponse(r);const a=new Xa({uid:r.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await ad(a),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nI=new Map;function li(t){mi(t instanceof Function,"Expected a class definition");let e=nI.get(t);return e?(mi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,nI.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qO{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}qO.type="NONE";const iI=qO;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vh(t,e,r){return`firebase:${t}:${e}:${r}`}class vo{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:i,name:a}=this.auth;this.fullUserKey=vh(this.userKey,i.apiKey,a),this.fullPersistenceKey=vh("persistence",i.apiKey,a),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Xa._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new vo(li(iI),e,n);const i=(await Promise.all(r.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l);let a=i[0]||li(iI);const s=vh(n,e.config.apiKey,e.name);let o=null;for(const l of r)try{const c=await l._get(s);if(c){const f=Xa._fromJSON(e,c);l!==a&&(o=f),a=l;break}}catch{}const u=i.filter(l=>l._shouldAllowMigration);return!a._shouldAllowMigration||!u.length?new vo(a,e,n):(a=u[0],o&&await a._set(s,o.toJSON()),await Promise.all(r.map(async l=>{if(l!==a)try{await l._remove(s)}catch{}})),new vo(a,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aI(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(UO(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if($O(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(WO(e))return"Blackberry";if(HO(e))return"Webos";if(IE(e))return"Safari";if((e.includes("chrome/")||zO(e))&&!e.includes("edge/"))return"Chrome";if(jO(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function $O(t=At()){return/firefox\//i.test(t)}function IE(t=At()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function zO(t=At()){return/crios\//i.test(t)}function UO(t=At()){return/iemobile/i.test(t)}function jO(t=At()){return/android/i.test(t)}function WO(t=At()){return/blackberry/i.test(t)}function HO(t=At()){return/webos/i.test(t)}function Zd(t=At()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function rU(t=At()){var e;return Zd(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function nU(){return yz()&&document.documentMode===10}function GO(t=At()){return Zd(t)||jO(t)||HO(t)||WO(t)||/windows phone/i.test(t)||UO(t)}function iU(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KO(t,e=[]){let r;switch(t){case"Browser":r=aI(At());break;case"Worker":r=`${aI(At())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${Qo}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aU{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=a=>new Promise((s,o)=>{try{const u=e(a);s(u)}catch(u){o(u)}});n.onAbort=r,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const i of r)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sU(t,e={}){return Ca(t,"GET","/v2/passwordPolicy",ys(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oU=6;class uU{constructor(e){var r,n,i,a;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=s.minPasswordLength)!==null&&r!==void 0?r:oU,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,n,i,a,s,o;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(r=u.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(n=u.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(a=u.containsUppercaseLetter)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(s=u.containsNumericCharacter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNonAlphanumericCharacter)!==null&&o!==void 0?o:!0),u}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),i&&(r.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let i=0;i<e.length;i++)n=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lU{constructor(e,r,n,i){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new sI(this),this.idTokenSubscription=new sI(this),this.beforeStateQueue=new aU(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=LO,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=li(r)),this._initializationPromise=this.queue(async()=>{var n,i;if(!this._deleted&&(this.persistenceManager=await vo.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var r;const n=await this.assertedPersistence.getCurrentUser();let i=n,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,o=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(e);(!s||s===o)&&(u!=null&&u.user)&&(i=u.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Re(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await ad(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=F5()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const r=e?Vt(e):null;return r&&Re(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&Re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(li(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await sU(this),r=new uU(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Rc("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await tU(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&li(e)||this._popupRedirectResolver;Re(r,this,"argument-error"),this.redirectPersistenceManager=await vo.create(this,[li(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,i){if(this._deleted)return()=>{};const a=typeof r=="function"?r:r.next.bind(r);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Re(o,this,"internal-error"),o.then(()=>{s||a(this.currentUser)}),typeof r=="function"){const u=e.addObserver(r,n,i);return()=>{s=!0,u()}}else{const u=e.addObserver(r);return()=>{s=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=KO(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(r["X-Firebase-AppCheck"]=i),r}async _getAppCheckToken(){var e;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r!=null&&r.error&&N5(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function Yo(t){return Vt(t)}class sI{constructor(e){this.auth=e,this.observer=null,this.addObserver=Iz(r=>this.observer=r)}get next(){return Re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ev={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function cU(t){ev=t}function QO(t){return ev.loadJS(t)}function fU(){return ev.recaptchaEnterpriseScript}function hU(){return ev.gapiScript}function dU(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const vU="recaptcha-enterprise",pU="NO_RECAPTCHA";class gU{constructor(e){this.type=vU,this.auth=Yo(e)}async verify(e="verify",r=!1){async function n(a){if(!r){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(s,o)=>{j5(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const l=new U5(u);return a.tenantId==null?a._agentRecaptchaConfig=l:a._tenantRecaptchaConfigs[a.tenantId]=l,s(l.siteKey)}}).catch(u=>{o(u)})})}function i(a,s,o){const u=window.grecaptcha;rI(u)?u.enterprise.ready(()=>{u.enterprise.execute(a,{action:e}).then(l=>{s(l)}).catch(()=>{s(pU)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((a,s)=>{n(this.auth).then(o=>{if(!r&&rI(window.grecaptcha))i(o,a,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let u=fU();u.length!==0&&(u+=o),QO(u).then(()=>{i(o,a,s)}).catch(l=>{s(l)})}}).catch(o=>{s(o)})})}}async function oI(t,e,r,n=!1){const i=new gU(t);let a;try{a=await i.verify(r)}catch{a=await i.verify(r,!0)}const s=Object.assign({},e);return n?Object.assign(s,{captchaResp:a}):Object.assign(s,{captchaResponse:a}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),s}async function uI(t,e,r,n){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await oI(t,e,r,r==="getOobCode");return n(t,a)}else return n(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const s=await oI(t,e,r,r==="getOobCode");return n(t,s)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mU(t,e){const r=_E(t,"auth");if(r.isInitialized()){const i=r.getImmediate(),a=r.getOptions();if(rd(a,e??{}))return i;An(i,"already-initialized")}return r.initialize({options:e})}function yU(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(li);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function wU(t,e,r){const n=Yo(t);Re(n._canInitEmulator,n,"emulator-config-failed"),Re(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const i=!!(r!=null&&r.disableWarnings),a=YO(e),{host:s,port:o}=_U(e),u=o===null?"":`:${o}`;n.config.emulator={url:`${a}//${s}${u}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:s,port:o,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||EU()}function YO(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function _U(t){const e=YO(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(n);if(i){const a=i[1];return{host:a,port:lI(n.substr(a.length+1))}}else{const[a,s]=n.split(":");return{host:a,port:lI(s)}}}function lI(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function EU(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CE{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return ui("not implemented")}_getIdTokenResponse(e){return ui("not implemented")}_linkToIdToken(e,r){return ui("not implemented")}_getReauthenticationResolver(e){return ui("not implemented")}}async function TU(t,e){return Ca(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bU(t,e){return Jd(t,"POST","/v1/accounts:signInWithPassword",ys(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SU(t,e){return Jd(t,"POST","/v1/accounts:signInWithEmailLink",ys(t,e))}async function IU(t,e){return Jd(t,"POST","/v1/accounts:signInWithEmailLink",ys(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl extends CE{constructor(e,r,n,i=null){super("password",n),this._email=e,this._password=r,this._tenantId=i}static _fromEmailAndPassword(e,r){return new Gl(e,r,"password")}static _fromEmailAndCode(e,r,n=null){return new Gl(e,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return uI(e,r,"signInWithPassword",bU);case"emailLink":return SU(e,{email:this._email,oobCode:this._password});default:An(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return uI(e,n,"signUpPassword",TU);case"emailLink":return IU(e,{idToken:r,email:this._email,oobCode:this._password});default:An(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function po(t,e){return Jd(t,"POST","/v1/accounts:signInWithIdp",ys(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CU="http://localhost";class ss extends CE{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new ss(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):An("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:i}=r,a=EE(r,["providerId","signInMethod"]);if(!n||!i)return null;const s=new ss(n,i);return s.idToken=a.idToken||void 0,s.accessToken=a.accessToken||void 0,s.secret=a.secret,s.nonce=a.nonce,s.pendingToken=a.pendingToken||null,s}_getIdTokenResponse(e){const r=this.buildRequest();return po(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,po(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,po(e,r)}buildRequest(){const e={requestUri:CU,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=kc(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xU(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function RU(t){const e=Hu(Gu(t)).link,r=e?Hu(Gu(e)).deep_link_id:null,n=Hu(Gu(t)).deep_link_id;return(n?Hu(Gu(n)).link:null)||n||r||e||t}class xE{constructor(e){var r,n,i,a,s,o;const u=Hu(Gu(e)),l=(r=u.apiKey)!==null&&r!==void 0?r:null,c=(n=u.oobCode)!==null&&n!==void 0?n:null,f=xU((i=u.mode)!==null&&i!==void 0?i:null);Re(l&&c&&f,"argument-error"),this.apiKey=l,this.operation=f,this.code=c,this.continueUrl=(a=u.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(s=u.languageCode)!==null&&s!==void 0?s:null,this.tenantId=(o=u.tenantId)!==null&&o!==void 0?o:null}static parseLink(e){const r=RU(e);try{return new xE(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(){this.providerId=Xo.PROVIDER_ID}static credential(e,r){return Gl._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const n=xE.parseLink(r);return Re(n,"argument-error"),Gl._fromEmailAndCode(e,n.code,n.tenantId)}}Xo.PROVIDER_ID="password";Xo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Xo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XO{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc extends XO{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi extends Pc{constructor(){super("facebook.com")}static credential(e){return ss._fromParams({providerId:Fi.PROVIDER_ID,signInMethod:Fi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Fi.credentialFromTaggedObject(e)}static credentialFromError(e){return Fi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Fi.credential(e.oauthAccessToken)}catch{return null}}}Fi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Fi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi extends Pc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return ss._fromParams({providerId:Bi.PROVIDER_ID,signInMethod:Bi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return Bi.credentialFromTaggedObject(e)}static credentialFromError(e){return Bi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return Bi.credential(r,n)}catch{return null}}}Bi.GOOGLE_SIGN_IN_METHOD="google.com";Bi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi extends Pc{constructor(){super("github.com")}static credential(e){return ss._fromParams({providerId:qi.PROVIDER_ID,signInMethod:qi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return qi.credentialFromTaggedObject(e)}static credentialFromError(e){return qi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return qi.credential(e.oauthAccessToken)}catch{return null}}}qi.GITHUB_SIGN_IN_METHOD="github.com";qi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i extends Pc{constructor(){super("twitter.com")}static credential(e,r){return ss._fromParams({providerId:$i.PROVIDER_ID,signInMethod:$i.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return $i.credentialFromTaggedObject(e)}static credentialFromError(e){return $i.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return $i.credential(r,n)}catch{return null}}}$i.TWITTER_SIGN_IN_METHOD="twitter.com";$i.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,i=!1){const a=await Xa._fromIdTokenResponse(e,n,i),s=cI(n);return new Po({user:a,providerId:s,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const i=cI(n);return new Po({user:e,providerId:i,_tokenResponse:n,operationType:r})}}function cI(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd extends Zn{constructor(e,r,n,i){var a;super(r.code,r.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,sd.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,i){return new sd(e,r,n,i)}}function JO(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?sd._fromErrorAndOperation(t,a,e,n):a})}async function kU(t,e,r=!1){const n=await Wl(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return Po._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AU(t,e,r=!1){const{auth:n}=t,i="reauthenticate";try{const a=await Wl(t,JO(n,i,e,t),r);Re(a.idToken,n,"internal-error");const s=SE(a.idToken);Re(s,n,"internal-error");const{sub:o}=s;return Re(t.uid===o,n,"user-mismatch"),Po._forOperation(t,i,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&An(n,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZO(t,e,r=!1){const n="signIn",i=await JO(t,n,e),a=await Po._fromIdTokenResponse(t,n,i);return r||await t._updateCurrentUser(a.user),a}async function PU(t,e){return ZO(Yo(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DU(t){const e=Yo(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function OU(t,e,r){return PU(Vt(t),Xo.credential(e,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&DU(t),n})}function NU(t,e,r,n){return Vt(t).onIdTokenChanged(e,r,n)}function LU(t,e,r){return Vt(t).beforeAuthStateChanged(e,r)}function MU(t,e,r,n){return Vt(t).onAuthStateChanged(e,r,n)}function VU(t){return Vt(t).signOut()}const od="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(od,"1"),this.storage.removeItem(od),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FU(){const t=At();return IE(t)||Zd(t)}const BU=1e3,qU=10;class tN extends eN{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=FU()&&iU(),this.fallbackToPolling=GO(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),i=this.localCache[r];n!==i&&e(r,i,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((s,o,u)=>{this.notifyListeners(s,u)});return}const n=e.key;if(r?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const s=this.storage.getItem(n);if(e.newValue!==s)e.newValue!==null?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!r)return}const i=()=>{const s=this.storage.getItem(n);!r&&this.localCache[n]===s||this.notifyListeners(n,s)},a=this.storage.getItem(n);nU()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,qU):i()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},BU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}tN.type="LOCAL";const $U=tN;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rN extends eN{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}rN.type="SESSION";const nN=rN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zU(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tv{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(i=>i.isListeningto(e));if(r)return r;const n=new tv(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:i,data:a}=r.data,s=this.handlersMap[i];if(!(s!=null&&s.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const o=Array.from(s).map(async l=>l(r.origin,a)),u=await zU(o);r.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:u})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}tv.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RE(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UU{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,s;return new Promise((o,u)=>{const l=RE("",20);i.port1.start();const c=setTimeout(()=>{u(new Error("unsupported_event"))},n);s={messageChannel:i,onMessage(f){const h=f;if(h.data.eventId===l)switch(h.data.status){case"ack":clearTimeout(c),a=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),o(h.data.response);break;default:clearTimeout(c),clearTimeout(a),u(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:r},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gn(){return window}function jU(t){Gn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iN(){return typeof Gn().WorkerGlobalScope<"u"&&typeof Gn().importScripts=="function"}async function WU(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function HU(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function GU(){return iN()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aN="firebaseLocalStorageDb",KU=1,ud="firebaseLocalStorage",sN="fbase_key";class Dc{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function rv(t,e){return t.transaction([ud],e?"readwrite":"readonly").objectStore(ud)}function QU(){const t=indexedDB.deleteDatabase(aN);return new Dc(t).toPromise()}function Dw(){const t=indexedDB.open(aN,KU);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(ud,{keyPath:sN})}catch(i){r(i)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(ud)?e(n):(n.close(),await QU(),e(await Dw()))})})}async function fI(t,e,r){const n=rv(t,!0).put({[sN]:e,value:r});return new Dc(n).toPromise()}async function YU(t,e){const r=rv(t,!1).get(e),n=await new Dc(r).toPromise();return n===void 0?null:n.value}function hI(t,e){const r=rv(t,!0).delete(e);return new Dc(r).toPromise()}const XU=800,JU=3;class oN{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Dw(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>JU)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return iN()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=tv._getInstance(GU()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await WU(),!this.activeServiceWorker)return;this.sender=new UU(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||HU()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Dw();return await fI(e,od,"1"),await hI(e,od),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>fI(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>YU(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>hI(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=rv(i,!1).getAll();return new Dc(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),r.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),r.push(i));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),XU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}oN.type="LOCAL";const ZU=oN;new Ac(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e3(t,e){return e?li(e):(Re(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE extends CE{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return po(e,this._buildIdpRequest())}_linkToIdToken(e,r){return po(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return po(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function t3(t){return ZO(t.auth,new kE(t),t.bypassAuthState)}function r3(t){const{auth:e,user:r}=t;return Re(r,e,"internal-error"),AU(r,new kE(t),t.bypassAuthState)}async function n3(t){const{auth:e,user:r}=t;return Re(r,e,"internal-error"),kU(r,new kE(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{constructor(e,r,n,i,a=!1){this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:i,tenantId:a,error:s,type:o}=e;if(s){this.reject(s);return}const u={auth:this.auth,requestUri:r,sessionId:n,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(u))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return t3;case"linkViaPopup":case"linkViaRedirect":return n3;case"reauthViaPopup":case"reauthViaRedirect":return r3;default:An(this.auth,"internal-error")}}resolve(e){mi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){mi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i3=new Ac(2e3,1e4);class ro extends uN{constructor(e,r,n,i,a){super(e,r,i,a),this.provider=n,this.authWindow=null,this.pollId=null,ro.currentPopupAction&&ro.currentPopupAction.cancel(),ro.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Re(e,this.auth,"internal-error"),e}async onExecution(){mi(this.filter.length===1,"Popup operations only handle one event");const e=RE();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Hn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Hn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ro.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Hn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,i3.get())};e()}}ro.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a3="pendingRedirect",ph=new Map;class s3 extends uN{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=ph.get(this.auth._key());if(!e){try{const n=await o3(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}ph.set(this.auth._key(),e)}return this.bypassAuthState||ph.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function o3(t,e){const r=c3(e),n=l3(t);if(!await n._isAvailable())return!1;const i=await n._get(r)==="true";return await n._remove(r),i}function u3(t,e){ph.set(t._key(),e)}function l3(t){return li(t._redirectPersistence)}function c3(t){return vh(a3,t.config.apiKey,t.name)}async function f3(t,e,r=!1){const n=Yo(t),i=e3(n,e),s=await new s3(n,i,r).execute();return s&&!r&&(delete s.user._redirectEventId,await n._persistUserIfCurrent(s.user),await n._setRedirectUser(null,e)),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h3=10*60*1e3;class d3{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!v3(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!lN(e)){const i=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(Hn(this.auth,i))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=h3&&this.cachedEventUids.clear(),this.cachedEventUids.has(dI(e))}saveEventToCache(e){this.cachedEventUids.add(dI(e)),this.lastProcessedEventTime=Date.now()}}function dI(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function lN({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function v3(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return lN(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p3(t,e={}){return Ca(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g3=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,m3=/^https?/;async function y3(t){if(t.config.emulator)return;const{authorizedDomains:e}=await p3(t);for(const r of e)try{if(w3(r))return}catch{}An(t,"unauthorized-domain")}function w3(t){const e=Pw(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const s=new URL(t);return s.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&s.hostname===n}if(!m3.test(r))return!1;if(g3.test(t))return n===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _3=new Ac(3e4,6e4);function vI(){const t=Gn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function E3(t){return new Promise((e,r)=>{var n,i,a;function s(){vI(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{vI(),r(Hn(t,"network-request-failed"))},timeout:_3.get()})}if(!((i=(n=Gn().gapi)===null||n===void 0?void 0:n.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((a=Gn().gapi)===null||a===void 0)&&a.load)s();else{const o=dU("iframefcb");return Gn()[o]=()=>{gapi.load?s():r(Hn(t,"network-request-failed"))},QO(`${hU()}?onload=${o}`).catch(u=>r(u))}}).catch(e=>{throw gh=null,e})}let gh=null;function T3(t){return gh=gh||E3(t),gh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b3=new Ac(5e3,15e3),S3="__/auth/iframe",I3="emulator/auth/iframe",C3={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},x3=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function R3(t){const e=t.config;Re(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?bE(e,I3):`https://${t.config.authDomain}/${S3}`,n={apiKey:e.apiKey,appName:t.name,v:Qo},i=x3.get(t.config.apiHost);i&&(n.eid=i);const a=t._getFrameworks();return a.length&&(n.fw=a.join(",")),`${r}?${kc(n).slice(1)}`}async function k3(t){const e=await T3(t),r=Gn().gapi;return Re(r,t,"internal-error"),e.open({where:document.body,url:R3(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:C3,dontclear:!0},n=>new Promise(async(i,a)=>{await n.restyle({setHideOnLeave:!1});const s=Hn(t,"network-request-failed"),o=Gn().setTimeout(()=>{a(s)},b3.get());function u(){Gn().clearTimeout(o),i(n)}n.ping(u).then(u,()=>{a(s)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A3={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},P3=500,D3=600,O3="_blank",N3="http://localhost";class pI{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function L3(t,e,r,n=P3,i=D3){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-n)/2,0).toString();let o="";const u=Object.assign(Object.assign({},A3),{width:n.toString(),height:i.toString(),top:a,left:s}),l=At().toLowerCase();r&&(o=zO(l)?O3:r),$O(l)&&(e=e||N3,u.scrollbars="yes");const c=Object.entries(u).reduce((h,[d,v])=>`${h}${d}=${v},`,"");if(rU(l)&&o!=="_self")return M3(e||"",o),new pI(null);const f=window.open(e||"",o,c);Re(f,t,"popup-blocked");try{f.focus()}catch{}return new pI(f)}function M3(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V3="__/auth/handler",F3="emulator/auth/handler",B3=encodeURIComponent("fac");async function gI(t,e,r,n,i,a){Re(t.config.authDomain,t,"auth-domain-config-required"),Re(t.config.apiKey,t,"invalid-api-key");const s={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:Qo,eventId:i};if(e instanceof XO){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",Sz(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[c,f]of Object.entries(a||{}))s[c]=f}if(e instanceof Pc){const c=e.getScopes().filter(f=>f!=="");c.length>0&&(s.scopes=c.join(","))}t.tenantId&&(s.tid=t.tenantId);const o=s;for(const c of Object.keys(o))o[c]===void 0&&delete o[c];const u=await t._getAppCheckToken(),l=u?`#${B3}=${encodeURIComponent(u)}`:"";return`${q3(t)}?${kc(o).slice(1)}${l}`}function q3({config:t}){return t.emulator?bE(t,F3):`https://${t.authDomain}/${V3}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gp="webStorageSupport";class $3{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=nN,this._completeRedirectFn=f3,this._overrideRedirectResult=u3}async _openPopup(e,r,n,i){var a;mi((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const s=await gI(e,r,n,Pw(),i);return L3(e,s,RE())}async _openRedirect(e,r,n,i){await this._originValidation(e);const a=await gI(e,r,n,Pw(),i);return jU(a),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:i,promise:a}=this.eventManagers[r];return i?Promise.resolve(i):(mi(a,"If manager is not set, promise should be"),a)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await k3(e),n=new d3(e);return r.register("authEvent",i=>(Re(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:n.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(Gp,{type:Gp},i=>{var a;const s=(a=i==null?void 0:i[0])===null||a===void 0?void 0:a[Gp];s!==void 0&&r(!!s),An(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=y3(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return GO()||IE()||Zd()}}const z3=$3;var mI="@firebase/auth",yI="1.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U3{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){Re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j3(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function W3(t){Ao(new is("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:s,authDomain:o}=n.options;Re(s&&!s.includes(":"),"invalid-api-key",{appName:n.name});const u={apiKey:s,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:KO(t)},l=new lU(n,i,a,u);return yU(l,r),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),Ao(new is("auth-internal",e=>{const r=Yo(e.getProvider("auth").getImmediate());return(n=>new U3(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),aa(mI,yI,j3(t)),aa(mI,yI,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H3=5*60,G3=CO("authIdTokenMaxAge")||H3;let wI=null;const K3=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>G3)return;const i=r==null?void 0:r.token;wI!==i&&(wI=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Q3(t=PO()){const e=_E(t,"auth");if(e.isInitialized())return e.getImmediate();const r=mU(t,{popupRedirectResolver:z3,persistence:[ZU,$U,nN]}),n=CO("authTokenSyncURL");if(n){const a=K3(n);LU(r,a,()=>a(r.currentUser)),NU(r,s=>a(s))}const i=SO("auth");return i&&wU(r,`http://${i}`),r}function Y3(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}cU({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=i=>{const a=Hn("internal-error");a.customData=i,r(a)},n.type="text/javascript",n.charset="UTF-8",Y3().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});W3("Browser");var X3="firebase",J3="10.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */aa(X3,J3,"app");var Z3=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},fe,AE=AE||{},Oe=Z3||self;function nv(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Oc(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function e9(t){return Object.prototype.hasOwnProperty.call(t,Kp)&&t[Kp]||(t[Kp]=++t9)}var Kp="closure_uid_"+(1e9*Math.random()>>>0),t9=0;function r9(t,e,r){return t.call.apply(t.bind,arguments)}function n9(t,e,r){if(!t)throw Error();if(2<arguments.length){var n=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,n),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function vr(t,e,r){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?vr=r9:vr=n9,vr.apply(null,arguments)}function Df(t,e){var r=Array.prototype.slice.call(arguments,1);return function(){var n=r.slice();return n.push.apply(n,arguments),t.apply(this,n)}}function Wt(t,e){function r(){}r.prototype=e.prototype,t.$=e.prototype,t.prototype=new r,t.prototype.constructor=t,t.ac=function(n,i,a){for(var s=Array(arguments.length-2),o=2;o<arguments.length;o++)s[o-2]=arguments[o];return e.prototype[i].apply(n,s)}}function xa(){this.s=this.s,this.o=this.o}var i9=0;xa.prototype.s=!1;xa.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),i9!=0)&&e9(this)};xa.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const cN=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let r=0;r<t.length;r++)if(r in t&&t[r]===e)return r;return-1};function PE(t){const e=t.length;if(0<e){const r=Array(e);for(let n=0;n<e;n++)r[n]=t[n];return r}return[]}function _I(t,e){for(let r=1;r<arguments.length;r++){const n=arguments[r];if(nv(n)){const i=t.length||0,a=n.length||0;t.length=i+a;for(let s=0;s<a;s++)t[i+s]=n[s]}else t.push(n)}}function pr(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}pr.prototype.h=function(){this.defaultPrevented=!0};var a9=function(){if(!Oe.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{const r=()=>{};Oe.addEventListener("test",r,e),Oe.removeEventListener("test",r,e)}catch{}return t}();function Kl(t){return/^[\s\xa0]*$/.test(t)}function iv(){var t=Oe.navigator;return t&&(t=t.userAgent)?t:""}function Bn(t){return iv().indexOf(t)!=-1}function DE(t){return DE[" "](t),t}DE[" "]=function(){};function s9(t,e){var r=J9;return Object.prototype.hasOwnProperty.call(r,t)?r[t]:r[t]=e(t)}var o9=Bn("Opera"),Do=Bn("Trident")||Bn("MSIE"),fN=Bn("Edge"),Ow=fN||Do,hN=Bn("Gecko")&&!(iv().toLowerCase().indexOf("webkit")!=-1&&!Bn("Edge"))&&!(Bn("Trident")||Bn("MSIE"))&&!Bn("Edge"),u9=iv().toLowerCase().indexOf("webkit")!=-1&&!Bn("Edge");function dN(){var t=Oe.document;return t?t.documentMode:void 0}var Nw;e:{var Qp="",Yp=function(){var t=iv();if(hN)return/rv:([^\);]+)(\)|;)/.exec(t);if(fN)return/Edge\/([\d\.]+)/.exec(t);if(Do)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(u9)return/WebKit\/(\S+)/.exec(t);if(o9)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(Yp&&(Qp=Yp?Yp[1]:""),Do){var Xp=dN();if(Xp!=null&&Xp>parseFloat(Qp)){Nw=String(Xp);break e}}Nw=Qp}var Lw;if(Oe.document&&Do){var EI=dN();Lw=EI||parseInt(Nw,10)||void 0}else Lw=void 0;var l9=Lw;function Ql(t,e){if(pr.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var r=this.type=t.type,n=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(hN){e:{try{DE(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else r=="mouseover"?e=t.fromElement:r=="mouseout"&&(e=t.toElement);this.relatedTarget=e,n?(this.clientX=n.clientX!==void 0?n.clientX:n.pageX,this.clientY=n.clientY!==void 0?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:c9[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Ql.$.h.call(this)}}Wt(Ql,pr);var c9={2:"touch",3:"pen",4:"mouse"};Ql.prototype.h=function(){Ql.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Nc="closure_listenable_"+(1e6*Math.random()|0),f9=0;function h9(t,e,r,n,i){this.listener=t,this.proxy=null,this.src=e,this.type=r,this.capture=!!n,this.la=i,this.key=++f9,this.fa=this.ia=!1}function av(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function OE(t,e,r){for(const n in t)e.call(r,t[n],n,t)}function d9(t,e){for(const r in t)e.call(void 0,t[r],r,t)}function vN(t){const e={};for(const r in t)e[r]=t[r];return e}const TI="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function pN(t,e){let r,n;for(let i=1;i<arguments.length;i++){n=arguments[i];for(r in n)t[r]=n[r];for(let a=0;a<TI.length;a++)r=TI[a],Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}}function sv(t){this.src=t,this.g={},this.h=0}sv.prototype.add=function(t,e,r,n,i){var a=t.toString();t=this.g[a],t||(t=this.g[a]=[],this.h++);var s=Vw(t,e,n,i);return-1<s?(e=t[s],r||(e.ia=!1)):(e=new h9(e,this.src,a,!!n,i),e.ia=r,t.push(e)),e};function Mw(t,e){var r=e.type;if(r in t.g){var n=t.g[r],i=cN(n,e),a;(a=0<=i)&&Array.prototype.splice.call(n,i,1),a&&(av(e),t.g[r].length==0&&(delete t.g[r],t.h--))}}function Vw(t,e,r,n){for(var i=0;i<t.length;++i){var a=t[i];if(!a.fa&&a.listener==e&&a.capture==!!r&&a.la==n)return i}return-1}var NE="closure_lm_"+(1e6*Math.random()|0),Jp={};function gN(t,e,r,n,i){if(n&&n.once)return yN(t,e,r,n,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)gN(t,e[a],r,n,i);return null}return r=VE(r),t&&t[Nc]?t.O(e,r,Oc(n)?!!n.capture:!!n,i):mN(t,e,r,!1,n,i)}function mN(t,e,r,n,i,a){if(!e)throw Error("Invalid event type");var s=Oc(i)?!!i.capture:!!i,o=ME(t);if(o||(t[NE]=o=new sv(t)),r=o.add(e,r,n,s,a),r.proxy)return r;if(n=v9(),r.proxy=n,n.src=t,n.listener=r,t.addEventListener)a9||(i=s),i===void 0&&(i=!1),t.addEventListener(e.toString(),n,i);else if(t.attachEvent)t.attachEvent(_N(e.toString()),n);else if(t.addListener&&t.removeListener)t.addListener(n);else throw Error("addEventListener and attachEvent are unavailable.");return r}function v9(){function t(r){return e.call(t.src,t.listener,r)}const e=p9;return t}function yN(t,e,r,n,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)yN(t,e[a],r,n,i);return null}return r=VE(r),t&&t[Nc]?t.P(e,r,Oc(n)?!!n.capture:!!n,i):mN(t,e,r,!0,n,i)}function wN(t,e,r,n,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)wN(t,e[a],r,n,i);else n=Oc(n)?!!n.capture:!!n,r=VE(r),t&&t[Nc]?(t=t.i,e=String(e).toString(),e in t.g&&(a=t.g[e],r=Vw(a,r,n,i),-1<r&&(av(a[r]),Array.prototype.splice.call(a,r,1),a.length==0&&(delete t.g[e],t.h--)))):t&&(t=ME(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Vw(e,r,n,i)),(r=-1<t?e[t]:null)&&LE(r))}function LE(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[Nc])Mw(e.i,t);else{var r=t.type,n=t.proxy;e.removeEventListener?e.removeEventListener(r,n,t.capture):e.detachEvent?e.detachEvent(_N(r),n):e.addListener&&e.removeListener&&e.removeListener(n),(r=ME(e))?(Mw(r,t),r.h==0&&(r.src=null,e[NE]=null)):av(t)}}}function _N(t){return t in Jp?Jp[t]:Jp[t]="on"+t}function p9(t,e){if(t.fa)t=!0;else{e=new Ql(e,this);var r=t.listener,n=t.la||t.src;t.ia&&LE(t),t=r.call(n,e)}return t}function ME(t){return t=t[NE],t instanceof sv?t:null}var Zp="__closure_events_fn_"+(1e9*Math.random()>>>0);function VE(t){return typeof t=="function"?t:(t[Zp]||(t[Zp]=function(e){return t.handleEvent(e)}),t[Zp])}function jt(){xa.call(this),this.i=new sv(this),this.S=this,this.J=null}Wt(jt,xa);jt.prototype[Nc]=!0;jt.prototype.removeEventListener=function(t,e,r,n){wN(this,t,e,r,n)};function er(t,e){var r,n=t.J;if(n)for(r=[];n;n=n.J)r.push(n);if(t=t.S,n=e.type||e,typeof e=="string")e=new pr(e,t);else if(e instanceof pr)e.target=e.target||t;else{var i=e;e=new pr(n,t),pN(e,i)}if(i=!0,r)for(var a=r.length-1;0<=a;a--){var s=e.g=r[a];i=Of(s,n,!0,e)&&i}if(s=e.g=t,i=Of(s,n,!0,e)&&i,i=Of(s,n,!1,e)&&i,r)for(a=0;a<r.length;a++)s=e.g=r[a],i=Of(s,n,!1,e)&&i}jt.prototype.N=function(){if(jt.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var r=t.g[e],n=0;n<r.length;n++)av(r[n]);delete t.g[e],t.h--}}this.J=null};jt.prototype.O=function(t,e,r,n){return this.i.add(String(t),e,!1,r,n)};jt.prototype.P=function(t,e,r,n){return this.i.add(String(t),e,!0,r,n)};function Of(t,e,r,n){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var s=e[a];if(s&&!s.fa&&s.capture==r){var o=s.listener,u=s.la||s.src;s.ia&&Mw(t.i,s),i=o.call(u,n)!==!1&&i}}return i&&!n.defaultPrevented}var FE=Oe.JSON.stringify;class g9{constructor(e,r){this.i=e,this.j=r,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function m9(){var t=BE;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class y9{constructor(){this.h=this.g=null}add(e,r){const n=EN.get();n.set(e,r),this.h?this.h.next=n:this.g=n,this.h=n}}var EN=new g9(()=>new w9,t=>t.reset());class w9{constructor(){this.next=this.g=this.h=null}set(e,r){this.h=e,this.g=r,this.next=null}reset(){this.next=this.g=this.h=null}}function _9(t){var e=1;t=t.split(":");const r=[];for(;0<e&&t.length;)r.push(t.shift()),e--;return t.length&&r.push(t.join(":")),r}function E9(t){Oe.setTimeout(()=>{throw t},0)}let Yl,Xl=!1,BE=new y9,TN=()=>{const t=Oe.Promise.resolve(void 0);Yl=()=>{t.then(T9)}};var T9=()=>{for(var t;t=m9();){try{t.h.call(t.g)}catch(r){E9(r)}var e=EN;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Xl=!1};function ov(t,e){jt.call(this),this.h=t||1,this.g=e||Oe,this.j=vr(this.qb,this),this.l=Date.now()}Wt(ov,jt);fe=ov.prototype;fe.ga=!1;fe.T=null;fe.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),er(this,"tick"),this.ga&&(qE(this),this.start()))}};fe.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function qE(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}fe.N=function(){ov.$.N.call(this),qE(this),delete this.g};function $E(t,e,r){if(typeof t=="function")r&&(t=vr(t,r));else if(t&&typeof t.handleEvent=="function")t=vr(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:Oe.setTimeout(t,e||0)}function bN(t){t.g=$E(()=>{t.g=null,t.i&&(t.i=!1,bN(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class b9 extends xa{constructor(e,r){super(),this.m=e,this.j=r,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:bN(this)}N(){super.N(),this.g&&(Oe.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Jl(t){xa.call(this),this.h=t,this.g={}}Wt(Jl,xa);var bI=[];function SN(t,e,r,n){Array.isArray(r)||(r&&(bI[0]=r.toString()),r=bI);for(var i=0;i<r.length;i++){var a=gN(e,r[i],n||t.handleEvent,!1,t.h||t);if(!a)break;t.g[a.key]=a}}function IN(t){OE(t.g,function(e,r){this.g.hasOwnProperty(r)&&LE(e)},t),t.g={}}Jl.prototype.N=function(){Jl.$.N.call(this),IN(this)};Jl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function uv(){this.g=!0}uv.prototype.Ea=function(){this.g=!1};function S9(t,e,r,n,i,a){t.info(function(){if(t.g)if(a)for(var s="",o=a.split("&"),u=0;u<o.length;u++){var l=o[u].split("=");if(1<l.length){var c=l[0];l=l[1];var f=c.split("_");s=2<=f.length&&f[1]=="type"?s+(c+"="+l+"&"):s+(c+"=redacted&")}}else s=null;else s=a;return"XMLHTTP REQ ("+n+") [attempt "+i+"]: "+e+`
`+r+`
`+s})}function I9(t,e,r,n,i,a,s){t.info(function(){return"XMLHTTP RESP ("+n+") [ attempt "+i+"]: "+e+`
`+r+`
`+a+" "+s})}function no(t,e,r,n){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+x9(t,r)+(n?" "+n:"")})}function C9(t,e){t.info(function(){return"TIMEOUT: "+e})}uv.prototype.info=function(){};function x9(t,e){if(!t.g)return e;if(!e)return null;try{var r=JSON.parse(e);if(r){for(t=0;t<r.length;t++)if(Array.isArray(r[t])){var n=r[t];if(!(2>n.length)){var i=n[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if(a!="noop"&&a!="stop"&&a!="close")for(var s=1;s<i.length;s++)i[s]=""}}}}return FE(r)}catch{return e}}var ws={},SI=null;function lv(){return SI=SI||new jt}ws.Ta="serverreachability";function CN(t){pr.call(this,ws.Ta,t)}Wt(CN,pr);function Zl(t){const e=lv();er(e,new CN(e))}ws.STAT_EVENT="statevent";function xN(t,e){pr.call(this,ws.STAT_EVENT,t),this.stat=e}Wt(xN,pr);function Cr(t){const e=lv();er(e,new xN(e,t))}ws.Ua="timingevent";function RN(t,e){pr.call(this,ws.Ua,t),this.size=e}Wt(RN,pr);function Lc(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return Oe.setTimeout(function(){t()},e)}var cv={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},kN={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function zE(){}zE.prototype.h=null;function II(t){return t.h||(t.h=t.i())}function AN(){}var Mc={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function UE(){pr.call(this,"d")}Wt(UE,pr);function jE(){pr.call(this,"c")}Wt(jE,pr);var Fw;function fv(){}Wt(fv,zE);fv.prototype.g=function(){return new XMLHttpRequest};fv.prototype.i=function(){return{}};Fw=new fv;function Vc(t,e,r,n){this.l=t,this.j=e,this.m=r,this.W=n||1,this.U=new Jl(this),this.P=R9,t=Ow?125:void 0,this.V=new ov(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new PN}function PN(){this.i=null,this.g="",this.h=!1}var R9=45e3,DN={},Bw={};fe=Vc.prototype;fe.setTimeout=function(t){this.P=t};function qw(t,e,r){t.L=1,t.A=dv(yi(e)),t.u=r,t.S=!0,ON(t,null)}function ON(t,e){t.G=Date.now(),Fc(t),t.B=yi(t.A);var r=t.B,n=t.W;Array.isArray(n)||(n=[String(n)]),$N(r.i,"t",n),t.o=0,r=t.l.J,t.h=new PN,t.g=uL(t.l,r?e:null,!t.u),0<t.O&&(t.M=new b9(vr(t.Pa,t,t.g),t.O)),SN(t.U,t.g,"readystatechange",t.nb),e=t.I?vN(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),Zl(),S9(t.j,t.v,t.B,t.m,t.W,t.u)}fe.nb=function(t){t=t.target;const e=this.M;e&&qn(t)==3?e.l():this.Pa(t)};fe.Pa=function(t){try{if(t==this.g)e:{const c=qn(this.g);var e=this.g.Ia();const f=this.g.da();if(!(3>c)&&(c!=3||Ow||this.g&&(this.h.h||this.g.ja()||kI(this.g)))){this.J||c!=4||e==7||(e==8||0>=f?Zl(3):Zl(2)),hv(this);var r=this.g.da();this.ca=r;t:if(NN(this)){var n=kI(this.g);t="";var i=n.length,a=qn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ja(this),ml(this);var s="";break t}this.h.i=new Oe.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(n[e],{stream:a&&e==i-1});n.length=0,this.h.g+=t,this.o=0,s=this.h.g}else s=this.g.ja();if(this.i=r==200,I9(this.j,this.v,this.B,this.m,this.W,c,r),this.i){if(this.aa&&!this.K){t:{if(this.g){var o,u=this.g;if((o=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Kl(o)){var l=o;break t}}l=null}if(r=l)no(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,$w(this,r);else{this.i=!1,this.s=3,Cr(12),ja(this),ml(this);break e}}this.S?(LN(this,c,s),Ow&&this.i&&c==3&&(SN(this.U,this.V,"tick",this.mb),this.V.start())):(no(this.j,this.m,s,null),$w(this,s)),c==4&&ja(this),this.i&&!this.J&&(c==4?iL(this.l,this):(this.i=!1,Fc(this)))}else Q9(this.g),r==400&&0<s.indexOf("Unknown SID")?(this.s=3,Cr(12)):(this.s=0,Cr(13)),ja(this),ml(this)}}}catch{}finally{}};function NN(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function LN(t,e,r){let n=!0,i;for(;!t.J&&t.o<r.length;)if(i=k9(t,r),i==Bw){e==4&&(t.s=4,Cr(14),n=!1),no(t.j,t.m,null,"[Incomplete Response]");break}else if(i==DN){t.s=4,Cr(15),no(t.j,t.m,r,"[Invalid Chunk]"),n=!1;break}else no(t.j,t.m,i,null),$w(t,i);NN(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||r.length!=0||t.h.h||(t.s=1,Cr(16),n=!1),t.i=t.i&&n,n?0<r.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+r.length),YE(e),e.M=!0,Cr(11))):(no(t.j,t.m,r,"[Invalid Chunked Response]"),ja(t),ml(t))}fe.mb=function(){if(this.g){var t=qn(this.g),e=this.g.ja();this.o<e.length&&(hv(this),LN(this,t,e),this.i&&t!=4&&Fc(this))}};function k9(t,e){var r=t.o,n=e.indexOf(`
`,r);return n==-1?Bw:(r=Number(e.substring(r,n)),isNaN(r)?DN:(n+=1,n+r>e.length?Bw:(e=e.slice(n,n+r),t.o=n+r,e)))}fe.cancel=function(){this.J=!0,ja(this)};function Fc(t){t.Y=Date.now()+t.P,MN(t,t.P)}function MN(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=Lc(vr(t.lb,t),e)}function hv(t){t.C&&(Oe.clearTimeout(t.C),t.C=null)}fe.lb=function(){this.C=null;const t=Date.now();0<=t-this.Y?(C9(this.j,this.B),this.L!=2&&(Zl(),Cr(17)),ja(this),this.s=2,ml(this)):MN(this,this.Y-t)};function ml(t){t.l.H==0||t.J||iL(t.l,t)}function ja(t){hv(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,qE(t.V),IN(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function $w(t,e){try{var r=t.l;if(r.H!=0&&(r.g==t||zw(r.i,t))){if(!t.K&&zw(r.i,t)&&r.H==3){try{var n=r.Ja.g.parse(e)}catch{n=null}if(Array.isArray(n)&&n.length==3){var i=n;if(i[0]==0){e:if(!r.u){if(r.g)if(r.g.G+3e3<t.G)fd(r),mv(r);else break e;QE(r),Cr(18)}}else r.Fa=i[1],0<r.Fa-r.V&&37500>i[2]&&r.G&&r.A==0&&!r.v&&(r.v=Lc(vr(r.ib,r),6e3));if(1>=jN(r.i)&&r.oa){try{r.oa()}catch{}r.oa=void 0}}else Wa(r,11)}else if((t.K||r.g==t)&&fd(r),!Kl(e))for(i=r.Ja.g.parse(e),e=0;e<i.length;e++){let l=i[e];if(r.V=l[0],l=l[1],r.H==2)if(l[0]=="c"){r.K=l[1],r.pa=l[2];const c=l[3];c!=null&&(r.ra=c,r.l.info("VER="+r.ra));const f=l[4];f!=null&&(r.Ga=f,r.l.info("SVER="+r.Ga));const h=l[5];h!=null&&typeof h=="number"&&0<h&&(n=1.5*h,r.L=n,r.l.info("backChannelRequestTimeoutMs_="+n)),n=r;const d=t.g;if(d){const v=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(v){var a=n.i;a.g||v.indexOf("spdy")==-1&&v.indexOf("quic")==-1&&v.indexOf("h2")==-1||(a.j=a.l,a.g=new Set,a.h&&(WE(a,a.h),a.h=null))}if(n.F){const w=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;w&&(n.Da=w,ot(n.I,n.F,w))}}r.H=3,r.h&&r.h.Ba(),r.ca&&(r.S=Date.now()-t.G,r.l.info("Handshake RTT: "+r.S+"ms")),n=r;var s=t;if(n.wa=oL(n,n.J?n.pa:null,n.Y),s.K){WN(n.i,s);var o=s,u=n.L;u&&o.setTimeout(u),o.C&&(hv(o),Fc(o)),n.g=s}else rL(n);0<r.j.length&&yv(r)}else l[0]!="stop"&&l[0]!="close"||Wa(r,7);else r.H==3&&(l[0]=="stop"||l[0]=="close"?l[0]=="stop"?Wa(r,7):KE(r):l[0]!="noop"&&r.h&&r.h.Aa(l),r.A=0)}}Zl(4)}catch{}}function A9(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(nv(t)){for(var e=[],r=t.length,n=0;n<r;n++)e.push(t[n]);return e}e=[],r=0;for(n in t)e[r++]=t[n];return e}function P9(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(nv(t)||typeof t=="string"){var e=[];t=t.length;for(var r=0;r<t;r++)e.push(r);return e}e=[],r=0;for(const n in t)e[r++]=n;return e}}}function VN(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(nv(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var r=P9(t),n=A9(t),i=n.length,a=0;a<i;a++)e.call(void 0,n[a],r&&r[a],t)}var FN=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function D9(t,e){if(t){t=t.split("&");for(var r=0;r<t.length;r++){var n=t[r].indexOf("="),i=null;if(0<=n){var a=t[r].substring(0,n);i=t[r].substring(n+1)}else a=t[r];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Ja(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Ja){this.h=t.h,ld(this,t.j),this.s=t.s,this.g=t.g,cd(this,t.m),this.l=t.l;var e=t.i,r=new ec;r.i=e.i,e.g&&(r.g=new Map(e.g),r.h=e.h),CI(this,r),this.o=t.o}else t&&(e=String(t).match(FN))?(this.h=!1,ld(this,e[1]||"",!0),this.s=Ku(e[2]||""),this.g=Ku(e[3]||"",!0),cd(this,e[4]),this.l=Ku(e[5]||"",!0),CI(this,e[6]||"",!0),this.o=Ku(e[7]||"")):(this.h=!1,this.i=new ec(null,this.h))}Ja.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Qu(e,xI,!0),":");var r=this.g;return(r||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Qu(e,xI,!0),"@"),t.push(encodeURIComponent(String(r)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),r=this.m,r!=null&&t.push(":",String(r))),(r=this.l)&&(this.g&&r.charAt(0)!="/"&&t.push("/"),t.push(Qu(r,r.charAt(0)=="/"?L9:N9,!0))),(r=this.i.toString())&&t.push("?",r),(r=this.o)&&t.push("#",Qu(r,V9)),t.join("")};function yi(t){return new Ja(t)}function ld(t,e,r){t.j=r?Ku(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function cd(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function CI(t,e,r){e instanceof ec?(t.i=e,F9(t.i,t.h)):(r||(e=Qu(e,M9)),t.i=new ec(e,t.h))}function ot(t,e,r){t.i.set(e,r)}function dv(t){return ot(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Ku(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Qu(t,e,r){return typeof t=="string"?(t=encodeURI(t).replace(e,O9),r&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function O9(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var xI=/[#\/\?@]/g,N9=/[#\?:]/g,L9=/[#\?]/g,M9=/[#\?@]/g,V9=/#/g;function ec(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Ra(t){t.g||(t.g=new Map,t.h=0,t.i&&D9(t.i,function(e,r){t.add(decodeURIComponent(e.replace(/\+/g," ")),r)}))}fe=ec.prototype;fe.add=function(t,e){Ra(this),this.i=null,t=Jo(this,t);var r=this.g.get(t);return r||this.g.set(t,r=[]),r.push(e),this.h+=1,this};function BN(t,e){Ra(t),e=Jo(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function qN(t,e){return Ra(t),e=Jo(t,e),t.g.has(e)}fe.forEach=function(t,e){Ra(this),this.g.forEach(function(r,n){r.forEach(function(i){t.call(e,i,n,this)},this)},this)};fe.ta=function(){Ra(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),r=[];for(let n=0;n<e.length;n++){const i=t[n];for(let a=0;a<i.length;a++)r.push(e[n])}return r};fe.Z=function(t){Ra(this);let e=[];if(typeof t=="string")qN(this,t)&&(e=e.concat(this.g.get(Jo(this,t))));else{t=Array.from(this.g.values());for(let r=0;r<t.length;r++)e=e.concat(t[r])}return e};fe.set=function(t,e){return Ra(this),this.i=null,t=Jo(this,t),qN(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};fe.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function $N(t,e,r){BN(t,e),0<r.length&&(t.i=null,t.g.set(Jo(t,e),PE(r)),t.h+=r.length)}fe.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var r=0;r<e.length;r++){var n=e[r];const a=encodeURIComponent(String(n)),s=this.Z(n);for(n=0;n<s.length;n++){var i=a;s[n]!==""&&(i+="="+encodeURIComponent(String(s[n]))),t.push(i)}}return this.i=t.join("&")};function Jo(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function F9(t,e){e&&!t.j&&(Ra(t),t.i=null,t.g.forEach(function(r,n){var i=n.toLowerCase();n!=i&&(BN(this,n),$N(this,i,r))},t)),t.j=e}var B9=class{constructor(t,e){this.g=t,this.map=e}};function zN(t){this.l=t||q9,Oe.PerformanceNavigationTiming?(t=Oe.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(Oe.g&&Oe.g.Ka&&Oe.g.Ka()&&Oe.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var q9=10;function UN(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function jN(t){return t.h?1:t.g?t.g.size:0}function zw(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function WE(t,e){t.g?t.g.add(e):t.h=e}function WN(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}zN.prototype.cancel=function(){if(this.i=HN(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function HN(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const r of t.g.values())e=e.concat(r.F);return e}return PE(t.i)}var $9=class{stringify(t){return Oe.JSON.stringify(t,void 0)}parse(t){return Oe.JSON.parse(t,void 0)}};function z9(){this.g=new $9}function U9(t,e,r){const n=r||"";try{VN(t,function(i,a){let s=i;Oc(i)&&(s=FE(i)),e.push(n+a+"="+encodeURIComponent(s))})}catch(i){throw e.push(n+"type="+encodeURIComponent("_badmap")),i}}function j9(t,e){const r=new uv;if(Oe.Image){const n=new Image;n.onload=Df(Nf,r,n,"TestLoadImage: loaded",!0,e),n.onerror=Df(Nf,r,n,"TestLoadImage: error",!1,e),n.onabort=Df(Nf,r,n,"TestLoadImage: abort",!1,e),n.ontimeout=Df(Nf,r,n,"TestLoadImage: timeout",!1,e),Oe.setTimeout(function(){n.ontimeout&&n.ontimeout()},1e4),n.src=t}else e(!1)}function Nf(t,e,r,n,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(n)}catch{}}function vv(t){this.l=t.ec||null,this.j=t.ob||!1}Wt(vv,zE);vv.prototype.g=function(){return new pv(this.l,this.j)};vv.prototype.i=function(t){return function(){return t}}({});function pv(t,e){jt.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=HE,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Wt(pv,jt);var HE=0;fe=pv.prototype;fe.open=function(t,e){if(this.readyState!=HE)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,tc(this)};fe.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||Oe).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};fe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Bc(this)),this.readyState=HE};fe.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,tc(this)),this.g&&(this.readyState=3,tc(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Oe.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;GN(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function GN(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}fe.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Bc(this):tc(this),this.readyState==3&&GN(this)}};fe.Za=function(t){this.g&&(this.response=this.responseText=t,Bc(this))};fe.Ya=function(t){this.g&&(this.response=t,Bc(this))};fe.ka=function(){this.g&&Bc(this)};function Bc(t){t.readyState=4,t.l=null,t.j=null,t.A=null,tc(t)}fe.setRequestHeader=function(t,e){this.v.append(t,e)};fe.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};fe.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var r=e.next();!r.done;)r=r.value,t.push(r[0]+": "+r[1]),r=e.next();return t.join(`\r
`)};function tc(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(pv.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var W9=Oe.JSON.parse;function Et(t){jt.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=KN,this.L=this.M=!1}Wt(Et,jt);var KN="",H9=/^https?$/i,G9=["POST","PUT"];fe=Et.prototype;fe.Oa=function(t){this.M=t};fe.ha=function(t,e,r,n){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Fw.g(),this.C=this.u?II(this.u):II(Fw),this.g.onreadystatechange=vr(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(a){RI(this,a);return}if(t=r||"",r=new Map(this.headers),n)if(Object.getPrototypeOf(n)===Object.prototype)for(var i in n)r.set(i,n[i]);else if(typeof n.keys=="function"&&typeof n.get=="function")for(const a of n.keys())r.set(a,n.get(a));else throw Error("Unknown input type for opt_headers: "+String(n));n=Array.from(r.keys()).find(a=>a.toLowerCase()=="content-type"),i=Oe.FormData&&t instanceof Oe.FormData,!(0<=cN(G9,e))||n||i||r.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[a,s]of r)this.g.setRequestHeader(a,s);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{XN(this),0<this.B&&((this.L=K9(this.g))?(this.g.timeout=this.B,this.g.ontimeout=vr(this.ua,this)):this.A=$E(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(a){RI(this,a)}};function K9(t){return Do&&typeof t.timeout=="number"&&t.ontimeout!==void 0}fe.ua=function(){typeof AE<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,er(this,"timeout"),this.abort(8))};function RI(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,QN(t),gv(t)}function QN(t){t.F||(t.F=!0,er(t,"complete"),er(t,"error"))}fe.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,er(this,"complete"),er(this,"abort"),gv(this))};fe.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),gv(this,!0)),Et.$.N.call(this)};fe.La=function(){this.s||(this.G||this.v||this.l?YN(this):this.kb())};fe.kb=function(){YN(this)};function YN(t){if(t.h&&typeof AE<"u"&&(!t.C[1]||qn(t)!=4||t.da()!=2)){if(t.v&&qn(t)==4)$E(t.La,0,t);else if(er(t,"readystatechange"),qn(t)==4){t.h=!1;try{const s=t.da();e:switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var r;if(!(r=e)){var n;if(n=s===0){var i=String(t.I).match(FN)[1]||null;!i&&Oe.self&&Oe.self.location&&(i=Oe.self.location.protocol.slice(0,-1)),n=!H9.test(i?i.toLowerCase():"")}r=n}if(r)er(t,"complete"),er(t,"success");else{t.m=6;try{var a=2<qn(t)?t.g.statusText:""}catch{a=""}t.j=a+" ["+t.da()+"]",QN(t)}}finally{gv(t)}}}}function gv(t,e){if(t.g){XN(t);const r=t.g,n=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||er(t,"ready");try{r.onreadystatechange=n}catch{}}}function XN(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(Oe.clearTimeout(t.A),t.A=null)}fe.isActive=function(){return!!this.g};function qn(t){return t.g?t.g.readyState:0}fe.da=function(){try{return 2<qn(this)?this.g.status:-1}catch{return-1}};fe.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};fe.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),W9(e)}};function kI(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case KN:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function Q9(t){const e={};t=(t.g&&2<=qn(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let n=0;n<t.length;n++){if(Kl(t[n]))continue;var r=_9(t[n]);const i=r[0];if(r=r[1],typeof r!="string")continue;r=r.trim();const a=e[i]||[];e[i]=a,a.push(r)}d9(e,function(n){return n.join(", ")})}fe.Ia=function(){return this.m};fe.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function JN(t){let e="";return OE(t,function(r,n){e+=n,e+=":",e+=r,e+=`\r
`}),e}function GE(t,e,r){e:{for(n in r){var n=!1;break e}n=!0}n||(r=JN(r),typeof t=="string"?r!=null&&encodeURIComponent(String(r)):ot(t,e,r))}function Du(t,e,r){return r&&r.internalChannelParams&&r.internalChannelParams[t]||e}function ZN(t){this.Ga=0,this.j=[],this.l=new uv,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Du("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Du("baseRetryDelayMs",5e3,t),this.hb=Du("retryDelaySeedMs",1e4,t),this.eb=Du("forwardChannelMaxRetries",2,t),this.xa=Du("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new zN(t&&t.concurrentRequestLimit),this.Ja=new z9,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}fe=ZN.prototype;fe.ra=8;fe.H=1;function KE(t){if(eL(t),t.H==3){var e=t.W++,r=yi(t.I);if(ot(r,"SID",t.K),ot(r,"RID",e),ot(r,"TYPE","terminate"),qc(t,r),e=new Vc(t,t.l,e),e.L=2,e.A=dv(yi(r)),r=!1,Oe.navigator&&Oe.navigator.sendBeacon)try{r=Oe.navigator.sendBeacon(e.A.toString(),"")}catch{}!r&&Oe.Image&&(new Image().src=e.A,r=!0),r||(e.g=uL(e.l,null),e.g.ha(e.A)),e.G=Date.now(),Fc(e)}sL(t)}function mv(t){t.g&&(YE(t),t.g.cancel(),t.g=null)}function eL(t){mv(t),t.u&&(Oe.clearTimeout(t.u),t.u=null),fd(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&Oe.clearTimeout(t.m),t.m=null)}function yv(t){if(!UN(t.i)&&!t.m){t.m=!0;var e=t.Na;Yl||TN(),Xl||(Yl(),Xl=!0),BE.add(e,t),t.C=0}}function Y9(t,e){return jN(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=Lc(vr(t.Na,t,e),aL(t,t.C)),t.C++,!0)}fe.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new Vc(this,this.l,t);let a=this.s;if(this.U&&(a?(a=vN(a),pN(a,this.U)):a=this.U),this.o!==null||this.O||(i.I=a,a=null),this.P)e:{for(var e=0,r=0;r<this.j.length;r++){t:{var n=this.j[r];if("__data__"in n.map&&(n=n.map.__data__,typeof n=="string")){n=n.length;break t}n=void 0}if(n===void 0)break;if(e+=n,4096<e){e=r;break e}if(e===4096||r===this.j.length-1){e=r+1;break e}}e=1e3}else e=1e3;e=tL(this,i,e),r=yi(this.I),ot(r,"RID",t),ot(r,"CVER",22),this.F&&ot(r,"X-HTTP-Session-Id",this.F),qc(this,r),a&&(this.O?e="headers="+encodeURIComponent(String(JN(a)))+"&"+e:this.o&&GE(r,this.o,a)),WE(this.i,i),this.bb&&ot(r,"TYPE","init"),this.P?(ot(r,"$req",e),ot(r,"SID","null"),i.aa=!0,qw(i,r,null)):qw(i,r,e),this.H=2}}else this.H==3&&(t?AI(this,t):this.j.length==0||UN(this.i)||AI(this))};function AI(t,e){var r;e?r=e.m:r=t.W++;const n=yi(t.I);ot(n,"SID",t.K),ot(n,"RID",r),ot(n,"AID",t.V),qc(t,n),t.o&&t.s&&GE(n,t.o,t.s),r=new Vc(t,t.l,r,t.C+1),t.o===null&&(r.I=t.s),e&&(t.j=e.F.concat(t.j)),e=tL(t,r,1e3),r.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),WE(t.i,r),qw(r,n,e)}function qc(t,e){t.na&&OE(t.na,function(r,n){ot(e,n,r)}),t.h&&VN({},function(r,n){ot(e,n,r)})}function tL(t,e,r){r=Math.min(t.j.length,r);var n=t.h?vr(t.h.Va,t.h,t):null;e:{var i=t.j;let a=-1;for(;;){const s=["count="+r];a==-1?0<r?(a=i[0].g,s.push("ofs="+a)):a=0:s.push("ofs="+a);let o=!0;for(let u=0;u<r;u++){let l=i[u].g;const c=i[u].map;if(l-=a,0>l)a=Math.max(0,i[u].g-100),o=!1;else try{U9(c,s,"req"+l+"_")}catch{n&&n(c)}}if(o){n=s.join("&");break e}}}return t=t.j.splice(0,r),e.F=t,n}function rL(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Yl||TN(),Xl||(Yl(),Xl=!0),BE.add(e,t),t.A=0}}function QE(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=Lc(vr(t.Ma,t),aL(t,t.A)),t.A++,!0)}fe.Ma=function(){if(this.u=null,nL(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Lc(vr(this.jb,this),t)}};fe.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Cr(10),mv(this),nL(this))};function YE(t){t.B!=null&&(Oe.clearTimeout(t.B),t.B=null)}function nL(t){t.g=new Vc(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=yi(t.wa);ot(e,"RID","rpc"),ot(e,"SID",t.K),ot(e,"AID",t.V),ot(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&ot(e,"TO",t.qa),ot(e,"TYPE","xmlhttp"),qc(t,e),t.o&&t.s&&GE(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var r=t.g;t=t.pa,r.L=1,r.A=dv(yi(e)),r.u=null,r.S=!0,ON(r,t)}fe.ib=function(){this.v!=null&&(this.v=null,mv(this),QE(this),Cr(19))};function fd(t){t.v!=null&&(Oe.clearTimeout(t.v),t.v=null)}function iL(t,e){var r=null;if(t.g==e){fd(t),YE(t),t.g=null;var n=2}else if(zw(t.i,e))r=e.F,WN(t.i,e),n=1;else return;if(t.H!=0){if(e.i)if(n==1){r=e.u?e.u.length:0,e=Date.now()-e.G;var i=t.C;n=lv(),er(n,new RN(n,r)),yv(t)}else rL(t);else if(i=e.s,i==3||i==0&&0<e.ca||!(n==1&&Y9(t,e)||n==2&&QE(t)))switch(r&&0<r.length&&(e=t.i,e.i=e.i.concat(r)),i){case 1:Wa(t,5);break;case 4:Wa(t,10);break;case 3:Wa(t,6);break;default:Wa(t,2)}}}function aL(t,e){let r=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(r*=2),r*e}function Wa(t,e){if(t.l.info("Error code "+e),e==2){var r=null;t.h&&(r=null);var n=vr(t.pb,t);r||(r=new Ja("//www.google.com/images/cleardot.gif"),Oe.location&&Oe.location.protocol=="http"||ld(r,"https"),dv(r)),j9(r.toString(),n)}else Cr(2);t.H=0,t.h&&t.h.za(e),sL(t),eL(t)}fe.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Cr(2)):(this.l.info("Failed to ping google.com"),Cr(1))};function sL(t){if(t.H=0,t.ma=[],t.h){const e=HN(t.i);(e.length!=0||t.j.length!=0)&&(_I(t.ma,e),_I(t.ma,t.j),t.i.i.length=0,PE(t.j),t.j.length=0),t.h.ya()}}function oL(t,e,r){var n=r instanceof Ja?yi(r):new Ja(r);if(n.g!="")e&&(n.g=e+"."+n.g),cd(n,n.m);else{var i=Oe.location;n=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var a=new Ja(null);n&&ld(a,n),e&&(a.g=e),i&&cd(a,i),r&&(a.l=r),n=a}return r=t.F,e=t.Da,r&&e&&ot(n,r,e),ot(n,"VER",t.ra),qc(t,n),n}function uL(t,e,r){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new Et(new vv({ob:r})):new Et(t.va),e.Oa(t.J),e}fe.isActive=function(){return!!this.h&&this.h.isActive(this)};function lL(){}fe=lL.prototype;fe.Ba=function(){};fe.Aa=function(){};fe.za=function(){};fe.ya=function(){};fe.isActive=function(){return!0};fe.Va=function(){};function hd(){if(Do&&!(10<=Number(l9)))throw Error("Environmental error: no available transport.")}hd.prototype.g=function(t,e){return new Qr(t,e)};function Qr(t,e){jt.call(this),this.g=new ZN(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Kl(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Kl(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Zo(this)}Wt(Qr,jt);Qr.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,r=this.h||void 0;Cr(0),t.Y=e,t.na=r||{},t.G=t.aa,t.I=oL(t,null,t.Y),yv(t)};Qr.prototype.close=function(){KE(this.g)};Qr.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var r={};r.__data__=t,t=r}else this.v&&(r={},r.__data__=FE(t),t=r);e.j.push(new B9(e.fb++,t)),e.H==3&&yv(e)};Qr.prototype.N=function(){this.g.h=null,delete this.j,KE(this.g),delete this.g,Qr.$.N.call(this)};function cL(t){UE.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const r in e){t=r;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}Wt(cL,UE);function fL(){jE.call(this),this.status=1}Wt(fL,jE);function Zo(t){this.g=t}Wt(Zo,lL);Zo.prototype.Ba=function(){er(this.g,"a")};Zo.prototype.Aa=function(t){er(this.g,new cL(t))};Zo.prototype.za=function(t){er(this.g,new fL)};Zo.prototype.ya=function(){er(this.g,"b")};function X9(){this.blockSize=-1}function Pn(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}Wt(Pn,X9);Pn.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function eg(t,e,r){r||(r=0);var n=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)n[i]=e.charCodeAt(r++)|e.charCodeAt(r++)<<8|e.charCodeAt(r++)<<16|e.charCodeAt(r++)<<24;else for(i=0;16>i;++i)n[i]=e[r++]|e[r++]<<8|e[r++]<<16|e[r++]<<24;e=t.g[0],r=t.g[1],i=t.g[2];var a=t.g[3],s=e+(a^r&(i^a))+n[0]+3614090360&4294967295;e=r+(s<<7&4294967295|s>>>25),s=a+(i^e&(r^i))+n[1]+3905402710&4294967295,a=e+(s<<12&4294967295|s>>>20),s=i+(r^a&(e^r))+n[2]+606105819&4294967295,i=a+(s<<17&4294967295|s>>>15),s=r+(e^i&(a^e))+n[3]+3250441966&4294967295,r=i+(s<<22&4294967295|s>>>10),s=e+(a^r&(i^a))+n[4]+4118548399&4294967295,e=r+(s<<7&4294967295|s>>>25),s=a+(i^e&(r^i))+n[5]+1200080426&4294967295,a=e+(s<<12&4294967295|s>>>20),s=i+(r^a&(e^r))+n[6]+2821735955&4294967295,i=a+(s<<17&4294967295|s>>>15),s=r+(e^i&(a^e))+n[7]+4249261313&4294967295,r=i+(s<<22&4294967295|s>>>10),s=e+(a^r&(i^a))+n[8]+1770035416&4294967295,e=r+(s<<7&4294967295|s>>>25),s=a+(i^e&(r^i))+n[9]+2336552879&4294967295,a=e+(s<<12&4294967295|s>>>20),s=i+(r^a&(e^r))+n[10]+4294925233&4294967295,i=a+(s<<17&4294967295|s>>>15),s=r+(e^i&(a^e))+n[11]+2304563134&4294967295,r=i+(s<<22&4294967295|s>>>10),s=e+(a^r&(i^a))+n[12]+1804603682&4294967295,e=r+(s<<7&4294967295|s>>>25),s=a+(i^e&(r^i))+n[13]+4254626195&4294967295,a=e+(s<<12&4294967295|s>>>20),s=i+(r^a&(e^r))+n[14]+2792965006&4294967295,i=a+(s<<17&4294967295|s>>>15),s=r+(e^i&(a^e))+n[15]+1236535329&4294967295,r=i+(s<<22&4294967295|s>>>10),s=e+(i^a&(r^i))+n[1]+4129170786&4294967295,e=r+(s<<5&4294967295|s>>>27),s=a+(r^i&(e^r))+n[6]+3225465664&4294967295,a=e+(s<<9&4294967295|s>>>23),s=i+(e^r&(a^e))+n[11]+643717713&4294967295,i=a+(s<<14&4294967295|s>>>18),s=r+(a^e&(i^a))+n[0]+3921069994&4294967295,r=i+(s<<20&4294967295|s>>>12),s=e+(i^a&(r^i))+n[5]+3593408605&4294967295,e=r+(s<<5&4294967295|s>>>27),s=a+(r^i&(e^r))+n[10]+38016083&4294967295,a=e+(s<<9&4294967295|s>>>23),s=i+(e^r&(a^e))+n[15]+3634488961&4294967295,i=a+(s<<14&4294967295|s>>>18),s=r+(a^e&(i^a))+n[4]+3889429448&4294967295,r=i+(s<<20&4294967295|s>>>12),s=e+(i^a&(r^i))+n[9]+568446438&4294967295,e=r+(s<<5&4294967295|s>>>27),s=a+(r^i&(e^r))+n[14]+3275163606&4294967295,a=e+(s<<9&4294967295|s>>>23),s=i+(e^r&(a^e))+n[3]+4107603335&4294967295,i=a+(s<<14&4294967295|s>>>18),s=r+(a^e&(i^a))+n[8]+1163531501&4294967295,r=i+(s<<20&4294967295|s>>>12),s=e+(i^a&(r^i))+n[13]+2850285829&4294967295,e=r+(s<<5&4294967295|s>>>27),s=a+(r^i&(e^r))+n[2]+4243563512&4294967295,a=e+(s<<9&4294967295|s>>>23),s=i+(e^r&(a^e))+n[7]+1735328473&4294967295,i=a+(s<<14&4294967295|s>>>18),s=r+(a^e&(i^a))+n[12]+2368359562&4294967295,r=i+(s<<20&4294967295|s>>>12),s=e+(r^i^a)+n[5]+4294588738&4294967295,e=r+(s<<4&4294967295|s>>>28),s=a+(e^r^i)+n[8]+2272392833&4294967295,a=e+(s<<11&4294967295|s>>>21),s=i+(a^e^r)+n[11]+1839030562&4294967295,i=a+(s<<16&4294967295|s>>>16),s=r+(i^a^e)+n[14]+4259657740&4294967295,r=i+(s<<23&4294967295|s>>>9),s=e+(r^i^a)+n[1]+2763975236&4294967295,e=r+(s<<4&4294967295|s>>>28),s=a+(e^r^i)+n[4]+1272893353&4294967295,a=e+(s<<11&4294967295|s>>>21),s=i+(a^e^r)+n[7]+4139469664&4294967295,i=a+(s<<16&4294967295|s>>>16),s=r+(i^a^e)+n[10]+3200236656&4294967295,r=i+(s<<23&4294967295|s>>>9),s=e+(r^i^a)+n[13]+681279174&4294967295,e=r+(s<<4&4294967295|s>>>28),s=a+(e^r^i)+n[0]+3936430074&4294967295,a=e+(s<<11&4294967295|s>>>21),s=i+(a^e^r)+n[3]+3572445317&4294967295,i=a+(s<<16&4294967295|s>>>16),s=r+(i^a^e)+n[6]+76029189&4294967295,r=i+(s<<23&4294967295|s>>>9),s=e+(r^i^a)+n[9]+3654602809&4294967295,e=r+(s<<4&4294967295|s>>>28),s=a+(e^r^i)+n[12]+3873151461&4294967295,a=e+(s<<11&4294967295|s>>>21),s=i+(a^e^r)+n[15]+530742520&4294967295,i=a+(s<<16&4294967295|s>>>16),s=r+(i^a^e)+n[2]+3299628645&4294967295,r=i+(s<<23&4294967295|s>>>9),s=e+(i^(r|~a))+n[0]+4096336452&4294967295,e=r+(s<<6&4294967295|s>>>26),s=a+(r^(e|~i))+n[7]+1126891415&4294967295,a=e+(s<<10&4294967295|s>>>22),s=i+(e^(a|~r))+n[14]+2878612391&4294967295,i=a+(s<<15&4294967295|s>>>17),s=r+(a^(i|~e))+n[5]+4237533241&4294967295,r=i+(s<<21&4294967295|s>>>11),s=e+(i^(r|~a))+n[12]+1700485571&4294967295,e=r+(s<<6&4294967295|s>>>26),s=a+(r^(e|~i))+n[3]+2399980690&4294967295,a=e+(s<<10&4294967295|s>>>22),s=i+(e^(a|~r))+n[10]+4293915773&4294967295,i=a+(s<<15&4294967295|s>>>17),s=r+(a^(i|~e))+n[1]+2240044497&4294967295,r=i+(s<<21&4294967295|s>>>11),s=e+(i^(r|~a))+n[8]+1873313359&4294967295,e=r+(s<<6&4294967295|s>>>26),s=a+(r^(e|~i))+n[15]+4264355552&4294967295,a=e+(s<<10&4294967295|s>>>22),s=i+(e^(a|~r))+n[6]+2734768916&4294967295,i=a+(s<<15&4294967295|s>>>17),s=r+(a^(i|~e))+n[13]+1309151649&4294967295,r=i+(s<<21&4294967295|s>>>11),s=e+(i^(r|~a))+n[4]+4149444226&4294967295,e=r+(s<<6&4294967295|s>>>26),s=a+(r^(e|~i))+n[11]+3174756917&4294967295,a=e+(s<<10&4294967295|s>>>22),s=i+(e^(a|~r))+n[2]+718787259&4294967295,i=a+(s<<15&4294967295|s>>>17),s=r+(a^(i|~e))+n[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+a&4294967295}Pn.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var r=e-this.blockSize,n=this.m,i=this.h,a=0;a<e;){if(i==0)for(;a<=r;)eg(this,t,a),a+=this.blockSize;if(typeof t=="string"){for(;a<e;)if(n[i++]=t.charCodeAt(a++),i==this.blockSize){eg(this,n),i=0;break}}else for(;a<e;)if(n[i++]=t[a++],i==this.blockSize){eg(this,n),i=0;break}}this.h=i,this.i+=e};Pn.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var r=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=r&255,r/=256;for(this.j(t),t=Array(16),e=r=0;4>e;++e)for(var n=0;32>n;n+=8)t[r++]=this.g[e]>>>n&255;return t};function Ze(t,e){this.h=e;for(var r=[],n=!0,i=t.length-1;0<=i;i--){var a=t[i]|0;n&&a==e||(r[i]=a,n=!1)}this.g=r}var J9={};function XE(t){return-128<=t&&128>t?s9(t,function(e){return new Ze([e|0],0>e?-1:0)}):new Ze([t|0],0>t?-1:0)}function $n(t){if(isNaN(t)||!isFinite(t))return go;if(0>t)return Xt($n(-t));for(var e=[],r=1,n=0;t>=r;n++)e[n]=t/r|0,r*=Uw;return new Ze(e,0)}function hL(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return Xt(hL(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=$n(Math.pow(e,8)),n=go,i=0;i<t.length;i+=8){var a=Math.min(8,t.length-i),s=parseInt(t.substring(i,i+a),e);8>a?(a=$n(Math.pow(e,a)),n=n.R(a).add($n(s))):(n=n.R(r),n=n.add($n(s)))}return n}var Uw=4294967296,go=XE(0),jw=XE(1),PI=XE(16777216);fe=Ze.prototype;fe.ea=function(){if(sn(this))return-Xt(this).ea();for(var t=0,e=1,r=0;r<this.g.length;r++){var n=this.D(r);t+=(0<=n?n:Uw+n)*e,e*=Uw}return t};fe.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(ci(this))return"0";if(sn(this))return"-"+Xt(this).toString(t);for(var e=$n(Math.pow(t,6)),r=this,n="";;){var i=vd(r,e).g;r=dd(r,i.R(e));var a=((0<r.g.length?r.g[0]:r.h)>>>0).toString(t);if(r=i,ci(r))return a+n;for(;6>a.length;)a="0"+a;n=a+n}};fe.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function ci(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function sn(t){return t.h==-1}fe.X=function(t){return t=dd(this,t),sn(t)?-1:ci(t)?0:1};function Xt(t){for(var e=t.g.length,r=[],n=0;n<e;n++)r[n]=~t.g[n];return new Ze(r,~t.h).add(jw)}fe.abs=function(){return sn(this)?Xt(this):this};fe.add=function(t){for(var e=Math.max(this.g.length,t.g.length),r=[],n=0,i=0;i<=e;i++){var a=n+(this.D(i)&65535)+(t.D(i)&65535),s=(a>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);n=s>>>16,a&=65535,s&=65535,r[i]=s<<16|a}return new Ze(r,r[r.length-1]&-2147483648?-1:0)};function dd(t,e){return t.add(Xt(e))}fe.R=function(t){if(ci(this)||ci(t))return go;if(sn(this))return sn(t)?Xt(this).R(Xt(t)):Xt(Xt(this).R(t));if(sn(t))return Xt(this.R(Xt(t)));if(0>this.X(PI)&&0>t.X(PI))return $n(this.ea()*t.ea());for(var e=this.g.length+t.g.length,r=[],n=0;n<2*e;n++)r[n]=0;for(n=0;n<this.g.length;n++)for(var i=0;i<t.g.length;i++){var a=this.D(n)>>>16,s=this.D(n)&65535,o=t.D(i)>>>16,u=t.D(i)&65535;r[2*n+2*i]+=s*u,Lf(r,2*n+2*i),r[2*n+2*i+1]+=a*u,Lf(r,2*n+2*i+1),r[2*n+2*i+1]+=s*o,Lf(r,2*n+2*i+1),r[2*n+2*i+2]+=a*o,Lf(r,2*n+2*i+2)}for(n=0;n<e;n++)r[n]=r[2*n+1]<<16|r[2*n];for(n=e;n<2*e;n++)r[n]=0;return new Ze(r,0)};function Lf(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Ou(t,e){this.g=t,this.h=e}function vd(t,e){if(ci(e))throw Error("division by zero");if(ci(t))return new Ou(go,go);if(sn(t))return e=vd(Xt(t),e),new Ou(Xt(e.g),Xt(e.h));if(sn(e))return e=vd(t,Xt(e)),new Ou(Xt(e.g),e.h);if(30<t.g.length){if(sn(t)||sn(e))throw Error("slowDivide_ only works with positive integers.");for(var r=jw,n=e;0>=n.X(t);)r=DI(r),n=DI(n);var i=Os(r,1),a=Os(n,1);for(n=Os(n,2),r=Os(r,2);!ci(n);){var s=a.add(n);0>=s.X(t)&&(i=i.add(r),a=s),n=Os(n,1),r=Os(r,1)}return e=dd(t,i.R(e)),new Ou(i,e)}for(i=go;0<=t.X(e);){for(r=Math.max(1,Math.floor(t.ea()/e.ea())),n=Math.ceil(Math.log(r)/Math.LN2),n=48>=n?1:Math.pow(2,n-48),a=$n(r),s=a.R(e);sn(s)||0<s.X(t);)r-=n,a=$n(r),s=a.R(e);ci(a)&&(a=jw),i=i.add(a),t=dd(t,s)}return new Ou(i,t)}fe.gb=function(t){return vd(this,t).h};fe.and=function(t){for(var e=Math.max(this.g.length,t.g.length),r=[],n=0;n<e;n++)r[n]=this.D(n)&t.D(n);return new Ze(r,this.h&t.h)};fe.or=function(t){for(var e=Math.max(this.g.length,t.g.length),r=[],n=0;n<e;n++)r[n]=this.D(n)|t.D(n);return new Ze(r,this.h|t.h)};fe.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),r=[],n=0;n<e;n++)r[n]=this.D(n)^t.D(n);return new Ze(r,this.h^t.h)};function DI(t){for(var e=t.g.length+1,r=[],n=0;n<e;n++)r[n]=t.D(n)<<1|t.D(n-1)>>>31;return new Ze(r,t.h)}function Os(t,e){var r=e>>5;e%=32;for(var n=t.g.length-r,i=[],a=0;a<n;a++)i[a]=0<e?t.D(a+r)>>>e|t.D(a+r+1)<<32-e:t.D(a+r);return new Ze(i,t.h)}hd.prototype.createWebChannel=hd.prototype.g;Qr.prototype.send=Qr.prototype.u;Qr.prototype.open=Qr.prototype.m;Qr.prototype.close=Qr.prototype.close;cv.NO_ERROR=0;cv.TIMEOUT=8;cv.HTTP_ERROR=6;kN.COMPLETE="complete";AN.EventType=Mc;Mc.OPEN="a";Mc.CLOSE="b";Mc.ERROR="c";Mc.MESSAGE="d";jt.prototype.listen=jt.prototype.O;Et.prototype.listenOnce=Et.prototype.P;Et.prototype.getLastError=Et.prototype.Sa;Et.prototype.getLastErrorCode=Et.prototype.Ia;Et.prototype.getStatus=Et.prototype.da;Et.prototype.getResponseJson=Et.prototype.Wa;Et.prototype.getResponseText=Et.prototype.ja;Et.prototype.send=Et.prototype.ha;Et.prototype.setWithCredentials=Et.prototype.Oa;Pn.prototype.digest=Pn.prototype.l;Pn.prototype.reset=Pn.prototype.reset;Pn.prototype.update=Pn.prototype.j;Ze.prototype.add=Ze.prototype.add;Ze.prototype.multiply=Ze.prototype.R;Ze.prototype.modulo=Ze.prototype.gb;Ze.prototype.compare=Ze.prototype.X;Ze.prototype.toNumber=Ze.prototype.ea;Ze.prototype.toString=Ze.prototype.toString;Ze.prototype.getBits=Ze.prototype.D;Ze.fromNumber=$n;Ze.fromString=hL;var Z9=function(){return new hd},ej=function(){return lv()},tg=cv,tj=kN,rj=ws,OI={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Mf=AN,nj=Et,ij=Pn,mo=Ze;const NI="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}fr.UNAUTHENTICATED=new fr(null),fr.GOOGLE_CREDENTIALS=new fr("google-credentials-uid"),fr.FIRST_PARTY=new fr("first-party-uid"),fr.MOCK_USER=new fr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eu="10.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const os=new yE("@firebase/firestore");function Nu(){return os.logLevel}function ce(t,...e){if(os.logLevel<=$e.DEBUG){const r=e.map(JE);os.debug(`Firestore (${eu}): ${t}`,...r)}}function Yn(t,...e){if(os.logLevel<=$e.ERROR){const r=e.map(JE);os.error(`Firestore (${eu}): ${t}`,...r)}}function Oo(t,...e){if(os.logLevel<=$e.WARN){const r=e.map(JE);os.warn(`Firestore (${eu}): ${t}`,...r)}}function JE(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ke(t="Unexpected state"){const e=`FIRESTORE (${eu}) INTERNAL ASSERTION FAILED: `+t;throw Yn(e),new Error(e)}function it(t,e){t||ke()}function Me(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class de extends Zn{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dL{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class aj{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(fr.UNAUTHENTICATED))}shutdown(){}}class sj{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class oj{constructor(e){this.t=e,this.currentUser=fr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){let n=this.i;const i=u=>this.i!==n?(n=this.i,r(u)):Promise.resolve();let a=new sa;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new sa,e.enqueueRetryable(()=>i(this.currentUser))};const s=()=>{const u=a;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},o=u=>{ce("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit(u=>o(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?o(u):(ce("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new sa)}},0),s()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(ce("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(it(typeof n.accessToken=="string"),new dL(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return it(e===null||typeof e=="string"),new fr(e)}}class uj{constructor(e,r,n){this.l=e,this.h=r,this.P=n,this.type="FirstParty",this.user=fr.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class lj{constructor(e,r,n){this.l=e,this.h=r,this.P=n}getToken(){return Promise.resolve(new uj(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable(()=>r(fr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class cj{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class fj{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){const n=a=>{a.error!=null&&ce("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const s=a.token!==this.R;return this.R=a.token,ce("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?r(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>n(a))};const i=a=>{ce("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.A.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?i(a):ce("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(it(typeof r.token=="string"),this.R=r.token,new cj(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hj(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vL{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const i=hj(40);for(let a=0;a<i.length;++a)n.length<20&&i[a]<r&&(n+=e.charAt(i[a]%e.length))}return n}}function Qe(t,e){return t<e?-1:t>e?1:0}function No(t,e,r){return t.length===e.length&&t.every((n,i)=>r(n,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new de(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new de(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new de(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new de(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Mt.fromMillis(Date.now())}static fromDate(e){return Mt.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*r));return new Mt(r,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Qe(this.nanoseconds,e.nanoseconds):Qe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ne(e)}static min(){return new Ne(new Mt(0,0))}static max(){return new Ne(new Mt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(e,r,n){r===void 0?r=0:r>e.length&&ke(),n===void 0?n=e.length-r:n>e.length-r&&ke(),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return rc.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof rc?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let i=0;i<n;i++){const a=e.get(i),s=r.get(i);if(a<s)return-1;if(a>s)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class ut extends rc{construct(e,r,n){return new ut(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new de(re.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(i=>i.length>0))}return new ut(r)}static emptyPath(){return new ut([])}}const dj=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Jt extends rc{construct(e,r,n){return new Jt(e,r,n)}static isValidIdentifier(e){return dj.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Jt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Jt(["__name__"])}static fromServerFormat(e){const r=[];let n="",i=0;const a=()=>{if(n.length===0)throw new de(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let s=!1;for(;i<e.length;){const o=e[i];if(o==="\\"){if(i+1===e.length)throw new de(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new de(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=u,i+=2}else o==="`"?(s=!s,i++):o!=="."||s?(n+=o,i++):(a(),i++)}if(a(),s)throw new de(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Jt(r)}static emptyPath(){return new Jt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(e){this.path=e}static fromPath(e){return new Ie(ut.fromString(e))}static fromName(e){return new Ie(ut.fromString(e).popFirst(5))}static empty(){return new Ie(ut.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ut.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return ut.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ie(new ut(e.slice()))}}function vj(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,i=Ne.fromTimestamp(n===1e9?new Mt(r+1,0):new Mt(r,n));return new da(i,Ie.empty(),e)}function pj(t){return new da(t.readTime,t.key,-1)}class da{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new da(Ne.min(),Ie.empty(),-1)}static max(){return new da(Ne.max(),Ie.empty(),-1)}}function gj(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=Ie.comparator(t.documentKey,e.documentKey),r!==0?r:Qe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mj="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class yj{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $c(t){if(t.code!==re.FAILED_PRECONDITION||t.message!==mj)throw t;ce("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&ke(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new ne((n,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(n,i)},this.catchCallback=a=>{this.wrapFailure(r,a).next(n,i)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof ne?r:ne.resolve(r)}catch(r){return ne.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):ne.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):ne.reject(r)}static resolve(e){return new ne((r,n)=>{r(e)})}static reject(e){return new ne((r,n)=>{n(e)})}static waitFor(e){return new ne((r,n)=>{let i=0,a=0,s=!1;e.forEach(o=>{++i,o.next(()=>{++a,s&&a===i&&r()},u=>n(u))}),s=!0,a===i&&r()})}static or(e){let r=ne.resolve(!1);for(const n of e)r=r.next(i=>i?ne.resolve(i):n());return r}static forEach(e,r){const n=[];return e.forEach((i,a)=>{n.push(r.call(this,i,a))}),this.waitFor(n)}static mapArray(e,r){return new ne((n,i)=>{const a=e.length,s=new Array(a);let o=0;for(let u=0;u<a;u++){const l=u;r(e[l]).next(c=>{s[l]=c,++o,o===a&&n(s)},c=>i(c))}})}static doWhile(e,r){return new ne((n,i)=>{const a=()=>{e()===!0?r().next(()=>{a()},i):n()};a()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZE{constructor(e,r){this.action=e,this.transaction=r,this.aborted=!1,this.V=new sa,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{r.error?this.V.reject(new yl(e,r.error)):this.V.resolve()},this.transaction.onerror=n=>{const i=eT(n.target.error);this.V.reject(new yl(e,i))}}static open(e,r,n,i){try{return new ZE(r,e.transaction(i,n))}catch(a){throw new yl(r,a)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(ce("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const r=this.transaction.objectStore(e);return new _j(r)}}class Ha{constructor(e,r,n){this.name=e,this.version=r,this.p=n,Ha.S(At())===12.2&&Yn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ce("SimpleDb","Removing database:",e),qa(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!xO())return!1;if(Ha.C())return!0;const e=At(),r=Ha.S(e),n=0<r&&r<10,i=Ha.v(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||a)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,r){return e.store(r)}static S(e){const r=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static v(e){const r=e.match(/Android ([\d.]+)/i),n=r?r[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async O(e){return this.db||(ce("SimpleDb","Opening database:",this.name),this.db=await new Promise((r,n)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=a=>{const s=a.target.result;r(s)},i.onblocked=()=>{n(new yl(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=a=>{const s=a.target.error;s.name==="VersionError"?n(new de(re.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?n(new de(re.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):n(new yl(e,s))},i.onupgradeneeded=a=>{ce("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',a.oldVersion);const s=a.target.result;this.p.N(s,i.transaction,a.oldVersion,this.version).next(()=>{ce("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.B&&(this.db.onversionchange=r=>this.B(r)),this.db}L(e){this.B=e,this.db&&(this.db.onversionchange=r=>e(r))}async runTransaction(e,r,n,i){const a=r==="readonly";let s=0;for(;;){++s;try{this.db=await this.O(e);const o=ZE.open(this.db,e,a?"readonly":"readwrite",n),u=i(o).next(l=>(o.g(),l)).catch(l=>(o.abort(l),ne.reject(l))).toPromise();return u.catch(()=>{}),await o.m,u}catch(o){const u=o,l=u.name!=="FirebaseError"&&s<3;if(ce("SimpleDb","Transaction failed with error:",u.message,"Retrying:",l),this.close(),!l)return Promise.reject(u)}}}close(){this.db&&this.db.close(),this.db=void 0}}class wj{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return qa(this.k.delete())}}class yl extends de{constructor(e,r){super(re.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function zc(t){return t.name==="IndexedDbTransactionError"}class _j{constructor(e){this.store=e}put(e,r){let n;return r!==void 0?(ce("SimpleDb","PUT",this.store.name,e,r),n=this.store.put(r,e)):(ce("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),qa(n)}add(e){return ce("SimpleDb","ADD",this.store.name,e,e),qa(this.store.add(e))}get(e){return qa(this.store.get(e)).next(r=>(r===void 0&&(r=null),ce("SimpleDb","GET",this.store.name,e,r),r))}delete(e){return ce("SimpleDb","DELETE",this.store.name,e),qa(this.store.delete(e))}count(){return ce("SimpleDb","COUNT",this.store.name),qa(this.store.count())}W(e,r){const n=this.options(e,r),i=n.index?this.store.index(n.index):this.store;if(typeof i.getAll=="function"){const a=i.getAll(n.range);return new ne((s,o)=>{a.onerror=u=>{o(u.target.error)},a.onsuccess=u=>{s(u.target.result)}})}{const a=this.cursor(n),s=[];return this.G(a,(o,u)=>{s.push(u)}).next(()=>s)}}j(e,r){const n=this.store.getAll(e,r===null?void 0:r);return new ne((i,a)=>{n.onerror=s=>{a(s.target.error)},n.onsuccess=s=>{i(s.target.result)}})}H(e,r){ce("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,r);n.J=!1;const i=this.cursor(n);return this.G(i,(a,s,o)=>o.delete())}Y(e,r){let n;r?n=e:(n={},r=e);const i=this.cursor(n);return this.G(i,r)}Z(e){const r=this.cursor({});return new ne((n,i)=>{r.onerror=a=>{const s=eT(a.target.error);i(s)},r.onsuccess=a=>{const s=a.target.result;s?e(s.primaryKey,s.value).next(o=>{o?s.continue():n()}):n()}})}G(e,r){const n=[];return new ne((i,a)=>{e.onerror=s=>{a(s.target.error)},e.onsuccess=s=>{const o=s.target.result;if(!o)return void i();const u=new wj(o),l=r(o.primaryKey,o.value,u);if(l instanceof ne){const c=l.catch(f=>(u.done(),ne.reject(f)));n.push(c)}u.isDone?i():u.$===null?o.continue():o.continue(u.$)}}).next(()=>ne.waitFor(n))}options(e,r){let n;return e!==void 0&&(typeof e=="string"?n=e:r=e),{index:n,range:r}}cursor(e){let r="next";if(e.reverse&&(r="prev"),e.index){const n=this.store.index(e.index);return e.J?n.openKeyCursor(e.range,r):n.openCursor(e.range,r)}return this.store.openCursor(e.range,r)}}function qa(t){return new ne((e,r)=>{t.onsuccess=n=>{const i=n.target.result;e(i)},t.onerror=n=>{const i=eT(n.target.error);r(i)}})}let LI=!1;function eT(t){const e=Ha.S(At());if(e>=12.2&&e<13){const r="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(r)>=0){const n=new de("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return LI||(LI=!0,setTimeout(()=>{throw n},0)),n}}return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tT{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.se(n),this.oe=n=>r.writeSequenceNumber(n))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}tT._e=-1;function wv(t){return t==null}function pd(t){return t===0&&1/t==-1/0}function Ej(t){return typeof t=="number"&&Number.isInteger(t)&&!pd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MI(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function _s(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function pL(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e,r){this.comparator=e,this.root=r||Yt.EMPTY}insert(e,r){return new mt(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,Yt.BLACK,null,null))}remove(e){return new mt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Yt.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return r+n.left.size;i<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Vf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Vf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Vf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Vf(this.root,e,this.comparator,!0)}}class Vf{constructor(e,r,n,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=r?n(e.key,r):1,r&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Yt{constructor(e,r,n,i,a){this.key=e,this.value=r,this.color=n??Yt.RED,this.left=i??Yt.EMPTY,this.right=a??Yt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,i,a){return new Yt(e??this.key,r??this.value,n??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let i=this;const a=n(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,r,n),null):a===0?i.copy(null,r,null,null,null):i.copy(null,null,null,null,i.right.insert(e,r,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Yt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,i=this;if(r(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,r),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),r(e,i.key)===0){if(i.right.isEmpty())return Yt.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,r))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Yt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Yt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ke();const e=this.left.check();if(e!==this.right.check())throw ke();return e+(this.isRed()?0:1)}}Yt.EMPTY=null,Yt.RED=!0,Yt.BLACK=!1;Yt.EMPTY=new class{constructor(){this.size=0}get key(){throw ke()}get value(){throw ke()}get color(){throw ke()}get left(){throw ke()}get right(){throw ke()}copy(e,r,n,i,a){return this}insert(e,r,n){return new Yt(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(e){this.comparator=e,this.data=new mt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;r(i.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new VI(this.data.getIterator())}getIteratorFrom(e){return new VI(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof tr)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const i=r.getNext().key,a=n.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new tr(this.comparator);return r.data=e,r}}class VI{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(e){this.fields=e,e.sort(Jt.comparator)}static empty(){return new Wr([])}unionWith(e){let r=new tr(Jt.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new Wr(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return No(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gL extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new gL("Invalid base64 string: "+a):a}}(e);return new yr(r)}static fromUint8Array(e){const r=function(i){let a="";for(let s=0;s<i.length;++s)a+=String.fromCharCode(i[s]);return a}(e);return new yr(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let i=0;i<r.length;i++)n[i]=r.charCodeAt(i);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Qe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}yr.EMPTY_BYTE_STRING=new yr("");const Tj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function va(t){if(it(!!t),typeof t=="string"){let e=0;const r=Tj.exec(t);if(it(!!r),r[1]){let i=r[1];i=(i+"000000000").substr(0,9),e=Number(i)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:xt(t.seconds),nanos:xt(t.nanos)}}function xt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function us(t){return typeof t=="string"?yr.fromBase64String(t):yr.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rT(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function nT(t){const e=t.mapValue.fields.__previous_value__;return rT(e)?nT(e):e}function nc(t){const e=va(t.mapValue.fields.__local_write_time__.timestampValue);return new Mt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bj{constructor(e,r,n,i,a,s,o,u,l){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=i,this.ssl=a,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=u,this.useFetchStreams=l}}class ic{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new ic("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof ic&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ff={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ls(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?rT(t)?4:Sj(t)?9007199254740991:10:ke()}function Xn(t,e){if(t===e)return!0;const r=ls(t);if(r!==ls(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return nc(t).isEqual(nc(e));case 3:return function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const s=va(i.timestampValue),o=va(a.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,a){return us(i.bytesValue).isEqual(us(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,a){return xt(i.geoPointValue.latitude)===xt(a.geoPointValue.latitude)&&xt(i.geoPointValue.longitude)===xt(a.geoPointValue.longitude)}(t,e);case 2:return function(i,a){if("integerValue"in i&&"integerValue"in a)return xt(i.integerValue)===xt(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const s=xt(i.doubleValue),o=xt(a.doubleValue);return s===o?pd(s)===pd(o):isNaN(s)&&isNaN(o)}return!1}(t,e);case 9:return No(t.arrayValue.values||[],e.arrayValue.values||[],Xn);case 10:return function(i,a){const s=i.mapValue.fields||{},o=a.mapValue.fields||{};if(MI(s)!==MI(o))return!1;for(const u in s)if(s.hasOwnProperty(u)&&(o[u]===void 0||!Xn(s[u],o[u])))return!1;return!0}(t,e);default:return ke()}}function ac(t,e){return(t.values||[]).find(r=>Xn(r,e))!==void 0}function Lo(t,e){if(t===e)return 0;const r=ls(t),n=ls(e);if(r!==n)return Qe(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return Qe(t.booleanValue,e.booleanValue);case 2:return function(a,s){const o=xt(a.integerValue||a.doubleValue),u=xt(s.integerValue||s.doubleValue);return o<u?-1:o>u?1:o===u?0:isNaN(o)?isNaN(u)?0:-1:1}(t,e);case 3:return FI(t.timestampValue,e.timestampValue);case 4:return FI(nc(t),nc(e));case 5:return Qe(t.stringValue,e.stringValue);case 6:return function(a,s){const o=us(a),u=us(s);return o.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(a,s){const o=a.split("/"),u=s.split("/");for(let l=0;l<o.length&&l<u.length;l++){const c=Qe(o[l],u[l]);if(c!==0)return c}return Qe(o.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,s){const o=Qe(xt(a.latitude),xt(s.latitude));return o!==0?o:Qe(xt(a.longitude),xt(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(a,s){const o=a.values||[],u=s.values||[];for(let l=0;l<o.length&&l<u.length;++l){const c=Lo(o[l],u[l]);if(c)return c}return Qe(o.length,u.length)}(t.arrayValue,e.arrayValue);case 10:return function(a,s){if(a===Ff.mapValue&&s===Ff.mapValue)return 0;if(a===Ff.mapValue)return 1;if(s===Ff.mapValue)return-1;const o=a.fields||{},u=Object.keys(o),l=s.fields||{},c=Object.keys(l);u.sort(),c.sort();for(let f=0;f<u.length&&f<c.length;++f){const h=Qe(u[f],c[f]);if(h!==0)return h;const d=Lo(o[u[f]],l[c[f]]);if(d!==0)return d}return Qe(u.length,c.length)}(t.mapValue,e.mapValue);default:throw ke()}}function FI(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Qe(t,e);const r=va(t),n=va(e),i=Qe(r.seconds,n.seconds);return i!==0?i:Qe(r.nanos,n.nanos)}function Mo(t){return Ww(t)}function Ww(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=va(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return us(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return Ie.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",i=!0;for(const a of r.values||[])i?i=!1:n+=",",n+=Ww(a);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let i="{",a=!0;for(const s of n)a?a=!1:i+=",",i+=`${s}:${Ww(r.fields[s])}`;return i+"}"}(t.mapValue):ke()}function BI(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Hw(t){return!!t&&"integerValue"in t}function iT(t){return!!t&&"arrayValue"in t}function qI(t){return!!t&&"nullValue"in t}function $I(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function mh(t){return!!t&&"mapValue"in t}function wl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return _s(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=wl(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=wl(t.arrayValue.values[r]);return e}return Object.assign({},t)}function Sj(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(e){this.value=e}static empty(){return new Nr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!mh(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=wl(r)}setAll(e){let r=Jt.emptyPath(),n={},i=[];e.forEach((s,o)=>{if(!r.isImmediateParentOf(o)){const u=this.getFieldsMap(r);this.applyChanges(u,n,i),n={},i=[],r=o.popLast()}s?n[o.lastSegment()]=wl(s):i.push(o.lastSegment())});const a=this.getFieldsMap(r);this.applyChanges(a,n,i)}delete(e){const r=this.field(e.popLast());mh(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Xn(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=r.mapValue.fields[e.get(n)];mh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=i),r=i}return r.mapValue.fields}applyChanges(e,r,n){_s(r,(i,a)=>e[i]=a);for(const i of n)delete e[i]}clone(){return new Nr(wl(this.value))}}function mL(t){const e=[];return _s(t.fields,(r,n)=>{const i=new Jt([r]);if(mh(n)){const a=mL(n.mapValue).fields;if(a.length===0)e.push(i);else for(const s of a)e.push(i.child(s))}else e.push(i)}),new Wr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(e,r,n,i,a,s,o){this.key=e,this.documentType=r,this.version=n,this.readTime=i,this.createTime=a,this.data=s,this.documentState=o}static newInvalidDocument(e){return new dr(e,0,Ne.min(),Ne.min(),Ne.min(),Nr.empty(),0)}static newFoundDocument(e,r,n,i){return new dr(e,1,r,Ne.min(),n,i,0)}static newNoDocument(e,r){return new dr(e,2,r,Ne.min(),Ne.min(),Nr.empty(),0)}static newUnknownDocument(e,r){return new dr(e,3,r,Ne.min(),Ne.min(),Nr.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(Ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Nr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Nr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof dr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new dr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(e,r){this.position=e,this.inclusive=r}}function zI(t,e,r){let n=0;for(let i=0;i<t.position.length;i++){const a=e[i],s=t.position[i];if(a.field.isKeyField()?n=Ie.comparator(Ie.fromName(s.referenceValue),r.key):n=Lo(s,r.data.field(a.field)),a.dir==="desc"&&(n*=-1),n!==0)break}return n}function UI(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!Xn(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc{constructor(e,r="asc"){this.field=e,this.dir=r}}function Ij(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yL{}class kt extends yL{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new xj(e,r,n):r==="array-contains"?new Aj(e,n):r==="in"?new Pj(e,n):r==="not-in"?new Dj(e,n):r==="array-contains-any"?new Oj(e,n):new kt(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new Rj(e,n):new kj(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(Lo(r,this.value)):r!==null&&ls(this.value)===ls(r)&&this.matchesComparison(Lo(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ke()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Dn extends yL{constructor(e,r){super(),this.filters=e,this.op=r,this.ue=null}static create(e,r){return new Dn(e,r)}matches(e){return wL(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function wL(t){return t.op==="and"}function _L(t){return Cj(t)&&wL(t)}function Cj(t){for(const e of t.filters)if(e instanceof Dn)return!1;return!0}function Gw(t){if(t instanceof kt)return t.field.canonicalString()+t.op.toString()+Mo(t.value);if(_L(t))return t.filters.map(e=>Gw(e)).join(",");{const e=t.filters.map(r=>Gw(r)).join(",");return`${t.op}(${e})`}}function EL(t,e){return t instanceof kt?function(n,i){return i instanceof kt&&n.op===i.op&&n.field.isEqual(i.field)&&Xn(n.value,i.value)}(t,e):t instanceof Dn?function(n,i){return i instanceof Dn&&n.op===i.op&&n.filters.length===i.filters.length?n.filters.reduce((a,s,o)=>a&&EL(s,i.filters[o]),!0):!1}(t,e):void ke()}function TL(t){return t instanceof kt?function(r){return`${r.field.canonicalString()} ${r.op} ${Mo(r.value)}`}(t):t instanceof Dn?function(r){return r.op.toString()+" {"+r.getFilters().map(TL).join(" ,")+"}"}(t):"Filter"}class xj extends kt{constructor(e,r,n){super(e,r,n),this.key=Ie.fromName(n.referenceValue)}matches(e){const r=Ie.comparator(e.key,this.key);return this.matchesComparison(r)}}class Rj extends kt{constructor(e,r){super(e,"in",r),this.keys=bL("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class kj extends kt{constructor(e,r){super(e,"not-in",r),this.keys=bL("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function bL(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(n=>Ie.fromName(n.referenceValue))}class Aj extends kt{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return iT(r)&&ac(r.arrayValue,this.value)}}class Pj extends kt{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&ac(this.value.arrayValue,r)}}class Dj extends kt{constructor(e,r){super(e,"not-in",r)}matches(e){if(ac(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!ac(this.value.arrayValue,r)}}class Oj extends kt{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!iT(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>ac(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nj{constructor(e,r=null,n=[],i=[],a=null,s=null,o=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=i,this.limit=a,this.startAt=s,this.endAt=o,this.ce=null}}function jI(t,e=null,r=[],n=[],i=null,a=null,s=null){return new Nj(t,e,r,n,i,a,s)}function aT(t){const e=Me(t);if(e.ce===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>Gw(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(a){return a.field.canonicalString()+a.dir}(n)).join(","),wv(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>Mo(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>Mo(n)).join(",")),e.ce=r}return e.ce}function sT(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!Ij(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!EL(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!UI(t.startAt,e.startAt)&&UI(t.endAt,e.endAt)}function Kw(t){return Ie.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(e,r=null,n=[],i=[],a=null,s="F",o=null,u=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=i,this.limit=a,this.limitType=s,this.startAt=o,this.endAt=u,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function Lj(t,e,r,n,i,a,s,o){return new tu(t,e,r,n,i,a,s,o)}function oT(t){return new tu(t)}function WI(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function SL(t){return t.collectionGroup!==null}function _l(t){const e=Me(t);if(e.le===null){e.le=[];const r=new Set;for(const a of e.explicitOrderBy)e.le.push(a),r.add(a.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let o=new tr(Jt.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(o=o.add(l.field))})}),o})(e).forEach(a=>{r.has(a.canonicalString())||a.isKeyField()||e.le.push(new sc(a,n))}),r.has(Jt.keyField().canonicalString())||e.le.push(new sc(Jt.keyField(),n))}return e.le}function Kn(t){const e=Me(t);return e.he||(e.he=Mj(e,_l(t))),e.he}function Mj(t,e){if(t.limitType==="F")return jI(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const a=i.dir==="desc"?"asc":"desc";return new sc(i.field,a)});const r=t.endAt?new gd(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new gd(t.startAt.position,t.startAt.inclusive):null;return jI(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function Qw(t,e){const r=t.filters.concat([e]);return new tu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function Yw(t,e,r){return new tu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function _v(t,e){return sT(Kn(t),Kn(e))&&t.limitType===e.limitType}function IL(t){return`${aT(Kn(t))}|lt:${t.limitType}`}function qs(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(i=>TL(i)).join(", ")}]`),wv(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(i=>Mo(i)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(i=>Mo(i)).join(",")),`Target(${n})`}(Kn(t))}; limitType=${t.limitType})`}function Ev(t,e){return e.isFoundDocument()&&function(n,i){const a=i.key.path;return n.collectionGroup!==null?i.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(a):Ie.isDocumentKey(n.path)?n.path.isEqual(a):n.path.isImmediateParentOf(a)}(t,e)&&function(n,i){for(const a of _l(n))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0}(t,e)&&function(n,i){for(const a of n.filters)if(!a.matches(i))return!1;return!0}(t,e)&&function(n,i){return!(n.startAt&&!function(s,o,u){const l=zI(s,o,u);return s.inclusive?l<=0:l<0}(n.startAt,_l(n),i)||n.endAt&&!function(s,o,u){const l=zI(s,o,u);return s.inclusive?l>=0:l>0}(n.endAt,_l(n),i))}(t,e)}function Vj(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function CL(t){return(e,r)=>{let n=!1;for(const i of _l(t)){const a=Fj(i,e,r);if(a!==0)return a;n=n||i.field.isKeyField()}return 0}}function Fj(t,e,r){const n=t.field.isKeyField()?Ie.comparator(e.key,r.key):function(a,s,o){const u=s.data.field(a),l=o.data.field(a);return u!==null&&l!==null?Lo(u,l):ke()}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return ke()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ru=class{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[i,a]of n)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,r]);i.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return n.length===1?delete this.inner[r]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){_s(this.inner,(r,n)=>{for(const[i,a]of n)e(i,a)})}isEmpty(){return pL(this.inner)}size(){return this.innerSize}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bj=new mt(Ie.comparator);function wi(){return Bj}const xL=new mt(Ie.comparator);function Yu(...t){let e=xL;for(const r of t)e=e.insert(r.key,r);return e}function RL(t){let e=xL;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function Ga(){return El()}function kL(){return El()}function El(){return new ru(t=>t.toString(),(t,e)=>t.isEqual(e))}const qj=new mt(Ie.comparator),$j=new tr(Ie.comparator);function Be(...t){let e=$j;for(const r of t)e=e.add(r);return e}const zj=new tr(Qe);function Uj(){return zj}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AL(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pd(e)?"-0":e}}function PL(t){return{integerValue:""+t}}function jj(t,e){return Ej(e)?PL(e):AL(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tv{constructor(){this._=void 0}}function Wj(t,e,r){return t instanceof oc?function(i,a){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&rT(a)&&(a=nT(a)),a&&(s.fields.__previous_value__=a),{mapValue:s}}(r,e):t instanceof uc?OL(t,e):t instanceof lc?NL(t,e):function(i,a){const s=DL(i,a),o=HI(s)+HI(i.Ie);return Hw(s)&&Hw(i.Ie)?PL(o):AL(i.serializer,o)}(t,e)}function Hj(t,e,r){return t instanceof uc?OL(t,e):t instanceof lc?NL(t,e):r}function DL(t,e){return t instanceof md?function(n){return Hw(n)||function(a){return!!a&&"doubleValue"in a}(n)}(e)?e:{integerValue:0}:null}class oc extends Tv{}class uc extends Tv{constructor(e){super(),this.elements=e}}function OL(t,e){const r=LL(e);for(const n of t.elements)r.some(i=>Xn(i,n))||r.push(n);return{arrayValue:{values:r}}}class lc extends Tv{constructor(e){super(),this.elements=e}}function NL(t,e){let r=LL(e);for(const n of t.elements)r=r.filter(i=>!Xn(i,n));return{arrayValue:{values:r}}}class md extends Tv{constructor(e,r){super(),this.serializer=e,this.Ie=r}}function HI(t){return xt(t.integerValue||t.doubleValue)}function LL(t){return iT(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gj{constructor(e,r){this.field=e,this.transform=r}}function Kj(t,e){return t.field.isEqual(e.field)&&function(n,i){return n instanceof uc&&i instanceof uc||n instanceof lc&&i instanceof lc?No(n.elements,i.elements,Xn):n instanceof md&&i instanceof md?Xn(n.Ie,i.Ie):n instanceof oc&&i instanceof oc}(t.transform,e.transform)}class Qj{constructor(e,r){this.version=e,this.transformResults=r}}class xn{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new xn}static exists(e){return new xn(void 0,e)}static updateTime(e){return new xn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function yh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class bv{}function ML(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new uT(t.key,xn.none()):new Uc(t.key,t.data,xn.none());{const r=t.data,n=Nr.empty();let i=new tr(Jt.comparator);for(let a of e.fields)if(!i.has(a)){let s=r.field(a);s===null&&a.length>1&&(a=a.popLast(),s=r.field(a)),s===null?n.delete(a):n.set(a,s),i=i.add(a)}return new ka(t.key,n,new Wr(i.toArray()),xn.none())}}function Yj(t,e,r){t instanceof Uc?function(i,a,s){const o=i.value.clone(),u=KI(i.fieldTransforms,a,s.transformResults);o.setAll(u),a.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(t,e,r):t instanceof ka?function(i,a,s){if(!yh(i.precondition,a))return void a.convertToUnknownDocument(s.version);const o=KI(i.fieldTransforms,a,s.transformResults),u=a.data;u.setAll(VL(i)),u.setAll(o),a.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(t,e,r):function(i,a,s){a.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,r)}function Tl(t,e,r,n){return t instanceof Uc?function(a,s,o,u){if(!yh(a.precondition,s))return o;const l=a.value.clone(),c=QI(a.fieldTransforms,u,s);return l.setAll(c),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(t,e,r,n):t instanceof ka?function(a,s,o,u){if(!yh(a.precondition,s))return o;const l=QI(a.fieldTransforms,u,s),c=s.data;return c.setAll(VL(a)),c.setAll(l),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),o===null?null:o.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(f=>f.field))}(t,e,r,n):function(a,s,o){return yh(a.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o}(t,e,r)}function Xj(t,e){let r=null;for(const n of t.fieldTransforms){const i=e.data.field(n.field),a=DL(n.transform,i||null);a!=null&&(r===null&&(r=Nr.empty()),r.set(n.field,a))}return r||null}function GI(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,i){return n===void 0&&i===void 0||!(!n||!i)&&No(n,i,(a,s)=>Kj(a,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Uc extends bv{constructor(e,r,n,i=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ka extends bv{constructor(e,r,n,i,a=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function VL(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function KI(t,e,r){const n=new Map;it(t.length===r.length);for(let i=0;i<r.length;i++){const a=t[i],s=a.transform,o=e.data.field(a.field);n.set(a.field,Hj(s,o,r[i]))}return n}function QI(t,e,r){const n=new Map;for(const i of t){const a=i.transform,s=r.data.field(i.field);n.set(i.field,Wj(a,s,e))}return n}class uT extends bv{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Jj extends bv{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zj{constructor(e,r,n,i){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&Yj(a,e,n[i])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=Tl(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=Tl(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=kL();return this.mutations.forEach(i=>{const a=e.get(i.key),s=a.overlayedDocument;let o=this.applyToLocalView(s,a.mutatedFields);o=r.has(i.key)?null:o;const u=ML(s,o);u!==null&&n.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(Ne.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),Be())}isEqual(e){return this.batchId===e.batchId&&No(this.mutations,e.mutations,(r,n)=>GI(r,n))&&No(this.baseMutations,e.baseMutations,(r,n)=>GI(r,n))}}class lT{constructor(e,r,n,i){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=i}static from(e,r,n){it(e.mutations.length===n.length);let i=function(){return qj}();const a=e.mutations;for(let s=0;s<a.length;s++)i=i.insert(a[s].key,n[s].version);return new lT(e,r,n,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e6{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t6{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ct,ze;function r6(t){switch(t){default:return ke();case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0}}function FL(t){if(t===void 0)return Yn("GRPC error has no .code"),re.UNKNOWN;switch(t){case Ct.OK:return re.OK;case Ct.CANCELLED:return re.CANCELLED;case Ct.UNKNOWN:return re.UNKNOWN;case Ct.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case Ct.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case Ct.INTERNAL:return re.INTERNAL;case Ct.UNAVAILABLE:return re.UNAVAILABLE;case Ct.UNAUTHENTICATED:return re.UNAUTHENTICATED;case Ct.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case Ct.NOT_FOUND:return re.NOT_FOUND;case Ct.ALREADY_EXISTS:return re.ALREADY_EXISTS;case Ct.PERMISSION_DENIED:return re.PERMISSION_DENIED;case Ct.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case Ct.ABORTED:return re.ABORTED;case Ct.OUT_OF_RANGE:return re.OUT_OF_RANGE;case Ct.UNIMPLEMENTED:return re.UNIMPLEMENTED;case Ct.DATA_LOSS:return re.DATA_LOSS;default:return ke()}}(ze=Ct||(Ct={}))[ze.OK=0]="OK",ze[ze.CANCELLED=1]="CANCELLED",ze[ze.UNKNOWN=2]="UNKNOWN",ze[ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ze[ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ze[ze.NOT_FOUND=5]="NOT_FOUND",ze[ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",ze[ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",ze[ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",ze[ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ze[ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ze[ze.ABORTED=10]="ABORTED",ze[ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",ze[ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",ze[ze.INTERNAL=13]="INTERNAL",ze[ze.UNAVAILABLE=14]="UNAVAILABLE",ze[ze.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n6(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i6=new mo([4294967295,4294967295],0);function YI(t){const e=n6().encode(t),r=new ij;return r.update(e),new Uint8Array(r.digest())}function XI(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new mo([r,n],0),new mo([i,a],0)]}class cT{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new Xu(`Invalid padding: ${r}`);if(n<0)throw new Xu(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new Xu(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new Xu(`Invalid padding when bitmap length is 0: ${r}`);this.Te=8*e.length-r,this.Ee=mo.fromNumber(this.Te)}de(e,r,n){let i=e.add(r.multiply(mo.fromNumber(n)));return i.compare(i6)===1&&(i=new mo([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const r=YI(e),[n,i]=XI(r);for(let a=0;a<this.hashCount;a++){const s=this.de(n,i,a);if(!this.Ae(s))return!1}return!0}static create(e,r,n){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),s=new cT(a,i,r);return n.forEach(o=>s.insert(o)),s}insert(e){if(this.Te===0)return;const r=YI(e),[n,i]=XI(r);for(let a=0;a<this.hashCount;a++){const s=this.de(n,i,a);this.Re(s)}}Re(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class Xu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sv{constructor(e,r,n,i,a){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const i=new Map;return i.set(e,jc.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new Sv(Ne.min(),i,new mt(Qe),wi(),Be())}}class jc{constructor(e,r,n,i,a){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new jc(n,r,Be(),Be(),Be())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(e,r,n,i){this.Ve=e,this.removedTargetIds=r,this.key=n,this.me=i}}class BL{constructor(e,r){this.targetId=e,this.fe=r}}class qL{constructor(e,r,n=yr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=i}}class JI{constructor(){this.ge=0,this.pe=eC(),this.ye=yr.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=Be(),r=Be(),n=Be();return this.pe.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:r=r.add(i);break;case 1:n=n.add(i);break;default:ke()}}),new jc(this.ye,this.we,e,r,n)}Fe(){this.Se=!1,this.pe=eC()}Me(e,r){this.Se=!0,this.pe=this.pe.insert(e,r)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,it(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class a6{constructor(e){this.Le=e,this.ke=new Map,this.qe=wi(),this.Qe=ZI(),this.Ke=new mt(Qe)}$e(e){for(const r of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(r,e.me):this.We(r,e.key,e.me);for(const r of e.removedTargetIds)this.We(r,e.key,e.me)}Ge(e){this.forEachTarget(e,r=>{const n=this.ze(r);switch(e.state){case 0:this.je(r)&&n.Ce(e.resumeToken);break;case 1:n.Ne(),n.be||n.Fe(),n.Ce(e.resumeToken);break;case 2:n.Ne(),n.be||this.removeTarget(r);break;case 3:this.je(r)&&(n.Be(),n.Ce(e.resumeToken));break;case 4:this.je(r)&&(this.He(r),n.Ce(e.resumeToken));break;default:ke()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.ke.forEach((n,i)=>{this.je(i)&&r(i)})}Je(e){const r=e.targetId,n=e.fe.count,i=this.Ye(r);if(i){const a=i.target;if(Kw(a))if(n===0){const s=new Ie(a.path);this.We(r,s,dr.newNoDocument(s,Ne.min()))}else it(n===1);else{const s=this.Ze(r);if(s!==n){const o=this.Xe(e),u=o?this.et(o,e,s):1;if(u!==0){this.He(r);const l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(r,l)}}}}}Xe(e){const r=e.fe.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:i=0},hashCount:a=0}=r;let s,o;try{s=us(n).toUint8Array()}catch(u){if(u instanceof gL)return Oo("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{o=new cT(s,i,a)}catch(u){return Oo(u instanceof Xu?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return o.Te===0?null:o}et(e,r,n){return r.fe.count===n-this.rt(e,r.targetId)?0:2}rt(e,r){const n=this.Le.getRemoteKeysForTarget(r);let i=0;return n.forEach(a=>{const s=this.Le.nt(),o=`projects/${s.projectId}/databases/${s.database}/documents/${a.path.canonicalString()}`;e.mightContain(o)||(this.We(r,a,null),i++)}),i}it(e){const r=new Map;this.ke.forEach((a,s)=>{const o=this.Ye(s);if(o){if(a.current&&Kw(o.target)){const u=new Ie(o.target.path);this.qe.get(u)!==null||this.st(s,u)||this.We(s,u,dr.newNoDocument(u,e))}a.De&&(r.set(s,a.ve()),a.Fe())}});let n=Be();this.Qe.forEach((a,s)=>{let o=!0;s.forEachWhile(u=>{const l=this.Ye(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(n=n.add(a))}),this.qe.forEach((a,s)=>s.setReadTime(e));const i=new Sv(e,r,this.Ke,this.qe,n);return this.qe=wi(),this.Qe=ZI(),this.Ke=new mt(Qe),i}Ue(e,r){if(!this.je(e))return;const n=this.st(e,r.key)?2:0;this.ze(e).Me(r.key,n),this.qe=this.qe.insert(r.key,r),this.Qe=this.Qe.insert(r.key,this.ot(r.key).add(e))}We(e,r,n){if(!this.je(e))return;const i=this.ze(e);this.st(e,r)?i.Me(r,1):i.xe(r),this.Qe=this.Qe.insert(r,this.ot(r).delete(e)),n&&(this.qe=this.qe.insert(r,n))}removeTarget(e){this.ke.delete(e)}Ze(e){const r=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let r=this.ke.get(e);return r||(r=new JI,this.ke.set(e,r)),r}ot(e){let r=this.Qe.get(e);return r||(r=new tr(Qe),this.Qe=this.Qe.insert(e,r)),r}je(e){const r=this.Ye(e)!==null;return r||ce("WatchChangeAggregator","Detected inactive target",e),r}Ye(e){const r=this.ke.get(e);return r&&r.be?null:this.Le._t(e)}He(e){this.ke.set(e,new JI),this.Le.getRemoteKeysForTarget(e).forEach(r=>{this.We(e,r,null)})}st(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function ZI(){return new mt(Ie.comparator)}function eC(){return new mt(Ie.comparator)}const s6={asc:"ASCENDING",desc:"DESCENDING"},o6={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},u6={and:"AND",or:"OR"};class l6{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function Xw(t,e){return t.useProto3Json||wv(e)?e:{value:e}}function yd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function $L(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function c6(t,e){return yd(t,e.toTimestamp())}function Qn(t){return it(!!t),Ne.fromTimestamp(function(r){const n=va(r);return new Mt(n.seconds,n.nanos)}(t))}function fT(t,e){return Jw(t,e).canonicalString()}function Jw(t,e){const r=function(i){return new ut(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?r:r.child(e)}function zL(t){const e=ut.fromString(t);return it(GL(e)),e}function Zw(t,e){return fT(t.databaseId,e.path)}function rg(t,e){const r=zL(e);if(r.get(1)!==t.databaseId.projectId)throw new de(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new de(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new Ie(jL(r))}function UL(t,e){return fT(t.databaseId,e)}function f6(t){const e=zL(t);return e.length===4?ut.emptyPath():jL(e)}function e_(t){return new ut(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function jL(t){return it(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function tC(t,e,r){return{name:Zw(t,e),fields:r.value.mapValue.fields}}function h6(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:ke()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=function(l,c){return l.useProto3Json?(it(c===void 0||typeof c=="string"),yr.fromBase64String(c||"")):(it(c===void 0||c instanceof Uint8Array),yr.fromUint8Array(c||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,o=s&&function(l){const c=l.code===void 0?re.UNKNOWN:FL(l.code);return new de(c,l.message||"")}(s);r=new qL(n,i,a,o||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const i=rg(t,n.document.name),a=Qn(n.document.updateTime),s=n.document.createTime?Qn(n.document.createTime):Ne.min(),o=new Nr({mapValue:{fields:n.document.fields}}),u=dr.newFoundDocument(i,a,s,o),l=n.targetIds||[],c=n.removedTargetIds||[];r=new wh(l,c,u.key,u)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const i=rg(t,n.document),a=n.readTime?Qn(n.readTime):Ne.min(),s=dr.newNoDocument(i,a),o=n.removedTargetIds||[];r=new wh([],o,s.key,s)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const i=rg(t,n.document),a=n.removedTargetIds||[];r=new wh([],a,i,null)}else{if(!("filter"in e))return ke();{e.filter;const n=e.filter;n.targetId;const{count:i=0,unchangedNames:a}=n,s=new t6(i,a),o=n.targetId;r=new BL(o,s)}}return r}function d6(t,e){let r;if(e instanceof Uc)r={update:tC(t,e.key,e.value)};else if(e instanceof uT)r={delete:Zw(t,e.key)};else if(e instanceof ka)r={update:tC(t,e.key,e.data),updateMask:T6(e.fieldMask)};else{if(!(e instanceof Jj))return ke();r={verify:Zw(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(a,s){const o=s.transform;if(o instanceof oc)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof uc)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof lc)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof md)return{fieldPath:s.field.canonicalString(),increment:o.Ie};throw ke()}(0,n))),e.precondition.isNone||(r.currentDocument=function(i,a){return a.updateTime!==void 0?{updateTime:c6(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:ke()}(t,e.precondition)),r}function v6(t,e){return t&&t.length>0?(it(e!==void 0),t.map(r=>function(i,a){let s=i.updateTime?Qn(i.updateTime):Qn(a);return s.isEqual(Ne.min())&&(s=Qn(a)),new Qj(s,i.transformResults||[])}(r,e))):[]}function p6(t,e){return{documents:[UL(t,e.path)]}}function g6(t,e){const r={structuredQuery:{}},n=e.path;let i;e.collectionGroup!==null?(i=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=UL(t,i);const a=function(l){if(l.length!==0)return HL(Dn.create(l,"and"))}(e.filters);a&&(r.structuredQuery.where=a);const s=function(l){if(l.length!==0)return l.map(c=>function(h){return{field:$s(h.field),direction:w6(h.dir)}}(c))}(e.orderBy);s&&(r.structuredQuery.orderBy=s);const o=Xw(t,e.limit);return o!==null&&(r.structuredQuery.limit=o),e.startAt&&(r.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{ut:r,parent:i}}function m6(t){let e=f6(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let i=null;if(n>0){it(n===1);const c=r.from[0];c.allDescendants?i=c.collectionId:e=e.child(c.collectionId)}let a=[];r.where&&(a=function(f){const h=WL(f);return h instanceof Dn&&_L(h)?h.getFilters():[h]}(r.where));let s=[];r.orderBy&&(s=function(f){return f.map(h=>function(v){return new sc(zs(v.field),function(m){switch(m){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(h))}(r.orderBy));let o=null;r.limit&&(o=function(f){let h;return h=typeof f=="object"?f.value:f,wv(h)?null:h}(r.limit));let u=null;r.startAt&&(u=function(f){const h=!!f.before,d=f.values||[];return new gd(d,h)}(r.startAt));let l=null;return r.endAt&&(l=function(f){const h=!f.before,d=f.values||[];return new gd(d,h)}(r.endAt)),Lj(e,i,s,a,o,"F",u,l)}function y6(t,e){const r=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ke()}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function WL(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=zs(r.unaryFilter.field);return kt.create(n,"==",{doubleValue:NaN});case"IS_NULL":const i=zs(r.unaryFilter.field);return kt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=zs(r.unaryFilter.field);return kt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=zs(r.unaryFilter.field);return kt.create(s,"!=",{nullValue:"NULL_VALUE"});default:return ke()}}(t):t.fieldFilter!==void 0?function(r){return kt.create(zs(r.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ke()}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return Dn.create(r.compositeFilter.filters.map(n=>WL(n)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ke()}}(r.compositeFilter.op))}(t):ke()}function w6(t){return s6[t]}function _6(t){return o6[t]}function E6(t){return u6[t]}function $s(t){return{fieldPath:t.canonicalString()}}function zs(t){return Jt.fromServerFormat(t.fieldPath)}function HL(t){return t instanceof kt?function(r){if(r.op==="=="){if($I(r.value))return{unaryFilter:{field:$s(r.field),op:"IS_NAN"}};if(qI(r.value))return{unaryFilter:{field:$s(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if($I(r.value))return{unaryFilter:{field:$s(r.field),op:"IS_NOT_NAN"}};if(qI(r.value))return{unaryFilter:{field:$s(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$s(r.field),op:_6(r.op),value:r.value}}}(t):t instanceof Dn?function(r){const n=r.getFilters().map(i=>HL(i));return n.length===1?n[0]:{compositeFilter:{op:E6(r.op),filters:n}}}(t):ke()}function T6(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function GL(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(e,r,n,i,a=Ne.min(),s=Ne.min(),o=yr.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=u}withSequenceNumber(e){return new Hi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new Hi(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Hi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Hi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b6{constructor(e){this.ct=e}}function S6(t){const e=m6({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Yw(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I6{constructor(){this._n=new C6}addToCollectionParentIndex(e,r){return this._n.add(r),ne.resolve()}getCollectionParents(e,r){return ne.resolve(this._n.getEntries(r))}addFieldIndex(e,r){return ne.resolve()}deleteFieldIndex(e,r){return ne.resolve()}deleteAllFieldIndexes(e){return ne.resolve()}createTargetIndexes(e,r){return ne.resolve()}getDocumentsMatchingTarget(e,r){return ne.resolve(null)}getIndexType(e,r){return ne.resolve(0)}getFieldIndexes(e,r){return ne.resolve([])}getNextCollectionGroupToUpdate(e){return ne.resolve(null)}getMinOffset(e,r){return ne.resolve(da.min())}getMinOffsetFromCollectionGroup(e,r){return ne.resolve(da.min())}updateCollectionGroup(e,r,n){return ne.resolve()}updateIndexEntries(e,r){return ne.resolve()}}class C6{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),i=this.index[r]||new tr(ut.comparator),a=!i.has(n);return this.index[r]=i.add(n),a}has(e){const r=e.lastSegment(),n=e.popLast(),i=this.index[r];return i&&i.has(n)}getEntries(e){return(this.index[e]||new tr(ut.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new Vo(0)}static Bn(){return new Vo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x6{constructor(){this.changes=new ru(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,dr.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?ne.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R6{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k6{constructor(e,r,n,i){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=i}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(i=>(n=i,this.remoteDocumentCache.getEntry(e,r))).next(i=>(n!==null&&Tl(n.mutation,i,Wr.empty(),Mt.now()),i))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,Be()).next(()=>n))}getLocalViewOfDocuments(e,r,n=Be()){const i=Ga();return this.populateOverlays(e,i,r).next(()=>this.computeViews(e,r,i,n).next(a=>{let s=Yu();return a.forEach((o,u)=>{s=s.insert(o,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,r){const n=Ga();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,Be()))}populateOverlays(e,r,n){const i=[];return n.forEach(a=>{r.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((s,o)=>{r.set(s,o)})})}computeViews(e,r,n,i){let a=wi();const s=El(),o=function(){return El()}();return r.forEach((u,l)=>{const c=n.get(l.key);i.has(l.key)&&(c===void 0||c.mutation instanceof ka)?a=a.insert(l.key,l):c!==void 0?(s.set(l.key,c.mutation.getFieldMask()),Tl(c.mutation,l,c.mutation.getFieldMask(),Mt.now())):s.set(l.key,Wr.empty())}),this.recalculateAndSaveOverlays(e,a).next(u=>(u.forEach((l,c)=>s.set(l,c)),r.forEach((l,c)=>{var f;return o.set(l,new R6(c,(f=s.get(l))!==null&&f!==void 0?f:null))}),o))}recalculateAndSaveOverlays(e,r){const n=El();let i=new mt((s,o)=>s-o),a=Be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(s=>{for(const o of s)o.keys().forEach(u=>{const l=r.get(u);if(l===null)return;let c=n.get(u)||Wr.empty();c=o.applyToLocalView(l,c),n.set(u,c);const f=(i.get(o.batchId)||Be()).add(u);i=i.insert(o.batchId,f)})}).next(()=>{const s=[],o=i.getReverseIterator();for(;o.hasNext();){const u=o.getNext(),l=u.key,c=u.value,f=kL();c.forEach(h=>{if(!a.has(h)){const d=ML(r.get(h),n.get(h));d!==null&&f.set(h,d),a=a.add(h)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,f))}return ne.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,i){return function(s){return Ie.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):SL(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,i):this.getDocumentsMatchingCollectionQuery(e,r,n,i)}getNextDocuments(e,r,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,i).next(a=>{const s=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,i-a.size):ne.resolve(Ga());let o=-1,u=a;return s.next(l=>ne.forEach(l,(c,f)=>(o<f.largestBatchId&&(o=f.largestBatchId),a.get(c)?ne.resolve():this.remoteDocumentCache.getEntry(e,c).next(h=>{u=u.insert(c,h)}))).next(()=>this.populateOverlays(e,l,a)).next(()=>this.computeViews(e,u,l,Be())).next(c=>({batchId:o,changes:RL(c)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new Ie(r)).next(n=>{let i=Yu();return n.isFoundDocument()&&(i=i.insert(n.key,n)),i})}getDocumentsMatchingCollectionGroupQuery(e,r,n,i){const a=r.collectionGroup;let s=Yu();return this.indexManager.getCollectionParents(e,a).next(o=>ne.forEach(o,u=>{const l=function(f,h){return new tu(h,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(r,u.child(a));return this.getDocumentsMatchingCollectionQuery(e,l,n,i).next(c=>{c.forEach((f,h)=>{s=s.insert(f,h)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,r,n,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(s=>(a=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,a,i))).next(s=>{a.forEach((u,l)=>{const c=l.getKey();s.get(c)===null&&(s=s.insert(c,dr.newInvalidDocument(c)))});let o=Yu();return s.forEach((u,l)=>{const c=a.get(u);c!==void 0&&Tl(c.mutation,l,Wr.empty(),Mt.now()),Ev(r,l)&&(o=o.insert(u,l))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A6{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,r){return ne.resolve(this.cr.get(r))}saveBundleMetadata(e,r){return this.cr.set(r.id,function(i){return{id:i.id,version:i.version,createTime:Qn(i.createTime)}}(r)),ne.resolve()}getNamedQuery(e,r){return ne.resolve(this.lr.get(r))}saveNamedQuery(e,r){return this.lr.set(r.name,function(i){return{name:i.name,query:S6(i.bundledQuery),readTime:Qn(i.readTime)}}(r)),ne.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P6{constructor(){this.overlays=new mt(Ie.comparator),this.hr=new Map}getOverlay(e,r){return ne.resolve(this.overlays.get(r))}getOverlays(e,r){const n=Ga();return ne.forEach(r,i=>this.getOverlay(e,i).next(a=>{a!==null&&n.set(i,a)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((i,a)=>{this.ht(e,r,a)}),ne.resolve()}removeOverlaysForBatchId(e,r,n){const i=this.hr.get(n);return i!==void 0&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.hr.delete(n)),ne.resolve()}getOverlaysForCollection(e,r,n){const i=Ga(),a=r.length+1,s=new Ie(r.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const u=o.getNext().value,l=u.getKey();if(!r.isPrefixOf(l.path))break;l.path.length===a&&u.largestBatchId>n&&i.set(u.getKey(),u)}return ne.resolve(i)}getOverlaysForCollectionGroup(e,r,n,i){let a=new mt((l,c)=>l-c);const s=this.overlays.getIterator();for(;s.hasNext();){const l=s.getNext().value;if(l.getKey().getCollectionGroup()===r&&l.largestBatchId>n){let c=a.get(l.largestBatchId);c===null&&(c=Ga(),a=a.insert(l.largestBatchId,c)),c.set(l.getKey(),l)}}const o=Ga(),u=a.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,c)=>o.set(l,c)),!(o.size()>=i)););return ne.resolve(o)}ht(e,r,n){const i=this.overlays.get(n.key);if(i!==null){const s=this.hr.get(i.largestBatchId).delete(n.key);this.hr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(n.key,new e6(r,n));let a=this.hr.get(r);a===void 0&&(a=Be(),this.hr.set(r,a)),this.hr.set(r,a.add(n.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{constructor(){this.Pr=new tr($t.Ir),this.Tr=new tr($t.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,r){const n=new $t(e,r);this.Pr=this.Pr.add(n),this.Tr=this.Tr.add(n)}dr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Ar(new $t(e,r))}Rr(e,r){e.forEach(n=>this.removeReference(n,r))}Vr(e){const r=new Ie(new ut([])),n=new $t(r,e),i=new $t(r,e+1),a=[];return this.Tr.forEachInRange([n,i],s=>{this.Ar(s),a.push(s.key)}),a}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const r=new Ie(new ut([])),n=new $t(r,e),i=new $t(r,e+1);let a=Be();return this.Tr.forEachInRange([n,i],s=>{a=a.add(s.key)}),a}containsKey(e){const r=new $t(e,0),n=this.Pr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class $t{constructor(e,r){this.key=e,this.pr=r}static Ir(e,r){return Ie.comparator(e.key,r.key)||Qe(e.pr,r.pr)}static Er(e,r){return Qe(e.pr,r.pr)||Ie.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D6{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.yr=1,this.wr=new tr($t.Ir)}checkEmpty(e){return ne.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,i){const a=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Zj(a,r,n,i);this.mutationQueue.push(s);for(const o of i)this.wr=this.wr.add(new $t(o.key,a)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return ne.resolve(s)}lookupMutationBatch(e,r){return ne.resolve(this.Sr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,i=this.br(n),a=i<0?0:i;return ne.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ne.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new $t(r,0),i=new $t(r,Number.POSITIVE_INFINITY),a=[];return this.wr.forEachInRange([n,i],s=>{const o=this.Sr(s.pr);a.push(o)}),ne.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new tr(Qe);return r.forEach(i=>{const a=new $t(i,0),s=new $t(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([a,s],o=>{n=n.add(o.pr)})}),ne.resolve(this.Dr(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,i=n.length+1;let a=n;Ie.isDocumentKey(a)||(a=a.child(""));const s=new $t(new Ie(a),0);let o=new tr(Qe);return this.wr.forEachWhile(u=>{const l=u.key.path;return!!n.isPrefixOf(l)&&(l.length===i&&(o=o.add(u.pr)),!0)},s),ne.resolve(this.Dr(o))}Dr(e){const r=[];return e.forEach(n=>{const i=this.Sr(n);i!==null&&r.push(i)}),r}removeMutationBatch(e,r){it(this.Cr(r.batchId,"removed")===0),this.mutationQueue.shift();let n=this.wr;return ne.forEach(r.mutations,i=>{const a=new $t(i.key,r.batchId);return n=n.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=n})}Mn(e){}containsKey(e,r){const n=new $t(r,0),i=this.wr.firstAfterOrEqual(n);return ne.resolve(r.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,ne.resolve()}Cr(e,r){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){const r=this.br(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O6{constructor(e){this.vr=e,this.docs=function(){return new mt(Ie.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,i=this.docs.get(n),a=i?i.size:0,s=this.vr(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:s}),this.size+=s-a,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return ne.resolve(n?n.document.mutableCopy():dr.newInvalidDocument(r))}getEntries(e,r){let n=wi();return r.forEach(i=>{const a=this.docs.get(i);n=n.insert(i,a?a.document.mutableCopy():dr.newInvalidDocument(i))}),ne.resolve(n)}getDocumentsMatchingQuery(e,r,n,i){let a=wi();const s=r.path,o=new Ie(s.child("")),u=this.docs.getIteratorFrom(o);for(;u.hasNext();){const{key:l,value:{document:c}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||gj(pj(c),n)<=0||(i.has(c.key)||Ev(r,c))&&(a=a.insert(c.key,c.mutableCopy()))}return ne.resolve(a)}getAllFromCollectionGroup(e,r,n,i){ke()}Fr(e,r){return ne.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new N6(this)}getSize(e){return ne.resolve(this.size)}}class N6 extends x6{constructor(e){super(),this.ar=e}applyChanges(e){const r=[];return this.changes.forEach((n,i)=>{i.isValidDocument()?r.push(this.ar.addEntry(e,i)):this.ar.removeEntry(n)}),ne.waitFor(r)}getFromCache(e,r){return this.ar.getEntry(e,r)}getAllFromCache(e,r){return this.ar.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L6{constructor(e){this.persistence=e,this.Mr=new ru(r=>aT(r),sT),this.lastRemoteSnapshotVersion=Ne.min(),this.highestTargetId=0,this.Or=0,this.Nr=new hT,this.targetCount=0,this.Br=Vo.Nn()}forEachTarget(e,r){return this.Mr.forEach((n,i)=>r(i)),ne.resolve()}getLastRemoteSnapshotVersion(e){return ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ne.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),ne.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.Or&&(this.Or=r),ne.resolve()}qn(e){this.Mr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.Br=new Vo(r),this.highestTargetId=r),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,r){return this.qn(r),this.targetCount+=1,ne.resolve()}updateTargetData(e,r){return this.qn(r),ne.resolve()}removeTargetData(e,r){return this.Mr.delete(r.target),this.Nr.Vr(r.targetId),this.targetCount-=1,ne.resolve()}removeTargets(e,r,n){let i=0;const a=[];return this.Mr.forEach((s,o)=>{o.sequenceNumber<=r&&n.get(o.targetId)===null&&(this.Mr.delete(s),a.push(this.removeMatchingKeysForTargetId(e,o.targetId)),i++)}),ne.waitFor(a).next(()=>i)}getTargetCount(e){return ne.resolve(this.targetCount)}getTargetData(e,r){const n=this.Mr.get(r)||null;return ne.resolve(n)}addMatchingKeys(e,r,n){return this.Nr.dr(r,n),ne.resolve()}removeMatchingKeys(e,r,n){this.Nr.Rr(r,n);const i=this.persistence.referenceDelegate,a=[];return i&&r.forEach(s=>{a.push(i.markPotentiallyOrphaned(e,s))}),ne.waitFor(a)}removeMatchingKeysForTargetId(e,r){return this.Nr.Vr(r),ne.resolve()}getMatchingKeysForTargetId(e,r){const n=this.Nr.gr(r);return ne.resolve(n)}containsKey(e,r){return ne.resolve(this.Nr.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M6{constructor(e,r){this.Lr={},this.overlays={},this.kr=new tT(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new L6(this),this.indexManager=new I6,this.remoteDocumentCache=function(i){return new O6(i)}(n=>this.referenceDelegate.Kr(n)),this.serializer=new b6(r),this.$r=new A6(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new P6,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.Lr[e.toKey()];return n||(n=new D6(r,this.referenceDelegate),this.Lr[e.toKey()]=n),n}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,r,n){ce("MemoryPersistence","Starting transaction:",e);const i=new V6(this.kr.next());return this.referenceDelegate.Ur(),n(i).next(a=>this.referenceDelegate.Wr(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Gr(e,r){return ne.or(Object.values(this.Lr).map(n=>()=>n.containsKey(e,r)))}}class V6 extends yj{constructor(e){super(),this.currentSequenceNumber=e}}class dT{constructor(e){this.persistence=e,this.zr=new hT,this.jr=null}static Hr(e){return new dT(e)}get Jr(){if(this.jr)return this.jr;throw ke()}addReference(e,r,n){return this.zr.addReference(n,r),this.Jr.delete(n.toString()),ne.resolve()}removeReference(e,r,n){return this.zr.removeReference(n,r),this.Jr.add(n.toString()),ne.resolve()}markPotentiallyOrphaned(e,r){return this.Jr.add(r.toString()),ne.resolve()}removeTarget(e,r){this.zr.Vr(r.targetId).forEach(i=>this.Jr.add(i.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(i=>{i.forEach(a=>this.Jr.add(a.toString()))}).next(()=>n.removeTargetData(e,r))}Ur(){this.jr=new Set}Wr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ne.forEach(this.Jr,n=>{const i=Ie.fromPath(n);return this.Yr(e,i).next(a=>{a||r.removeEntry(i,Ne.min())})}).next(()=>(this.jr=null,r.apply(e)))}updateLimboDocument(e,r){return this.Yr(e,r).next(n=>{n?this.Jr.delete(r.toString()):this.Jr.add(r.toString())})}Kr(e){return 0}Yr(e,r){return ne.or([()=>ne.resolve(this.zr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Gr(e,r)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vT{constructor(e,r,n,i){this.targetId=e,this.fromCache=r,this.qi=n,this.Qi=i}static Ki(e,r){let n=Be(),i=Be();for(const a of r.docChanges)switch(a.type){case 0:n=n.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new vT(e,r.fromCache,n,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F6{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B6{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return wz()?8:Ha.v(At())>0?6:4}()}initialize(e,r){this.zi=e,this.indexManager=r,this.$i=!0}getDocumentsMatchingQuery(e,r,n,i){const a={result:null};return this.ji(e,r).next(s=>{a.result=s}).next(()=>{if(!a.result)return this.Hi(e,r,i,n).next(s=>{a.result=s})}).next(()=>{if(a.result)return;const s=new F6;return this.Ji(e,r,s).next(o=>{if(a.result=o,this.Ui)return this.Yi(e,r,s,o.size)})}).next(()=>a.result)}Yi(e,r,n,i){return n.documentReadCount<this.Wi?(Nu()<=$e.DEBUG&&ce("QueryEngine","SDK will not create cache indexes for query:",qs(r),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),ne.resolve()):(Nu()<=$e.DEBUG&&ce("QueryEngine","Query:",qs(r),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.Gi*i?(Nu()<=$e.DEBUG&&ce("QueryEngine","The SDK decides to create cache indexes for query:",qs(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Kn(r))):ne.resolve())}ji(e,r){if(WI(r))return ne.resolve(null);let n=Kn(r);return this.indexManager.getIndexType(e,n).next(i=>i===0?null:(r.limit!==null&&i===1&&(r=Yw(r,null,"F"),n=Kn(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(a=>{const s=Be(...a);return this.zi.getDocuments(e,s).next(o=>this.indexManager.getMinOffset(e,n).next(u=>{const l=this.Zi(r,o);return this.Xi(r,l,s,u.readTime)?this.ji(e,Yw(r,null,"F")):this.es(e,l,r,u)}))})))}Hi(e,r,n,i){return WI(r)||i.isEqual(Ne.min())?ne.resolve(null):this.zi.getDocuments(e,n).next(a=>{const s=this.Zi(r,a);return this.Xi(r,s,n,i)?ne.resolve(null):(Nu()<=$e.DEBUG&&ce("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),qs(r)),this.es(e,s,r,vj(i,-1)).next(o=>o))})}Zi(e,r){let n=new tr(CL(e));return r.forEach((i,a)=>{Ev(e,a)&&(n=n.add(a))}),n}Xi(e,r,n,i){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const a=e.limitType==="F"?r.last():r.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Ji(e,r,n){return Nu()<=$e.DEBUG&&ce("QueryEngine","Using full collection scan to execute query:",qs(r)),this.zi.getDocumentsMatchingQuery(e,r,da.min(),n)}es(e,r,n,i){return this.zi.getDocumentsMatchingQuery(e,n,i).next(a=>(r.forEach(s=>{a=a.insert(s.key,s)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q6{constructor(e,r,n,i){this.persistence=e,this.ts=r,this.serializer=i,this.ns=new mt(Qe),this.rs=new ru(a=>aT(a),sT),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(n)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new k6(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.ns))}}function $6(t,e,r,n){return new q6(t,e,r,n)}async function KL(t,e){const r=Me(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let i;return r.mutationQueue.getAllMutationBatches(n).next(a=>(i=a,r._s(e),r.mutationQueue.getAllMutationBatches(n))).next(a=>{const s=[],o=[];let u=Be();for(const l of i){s.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}for(const l of a){o.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}return r.localDocuments.getDocuments(n,u).next(l=>({us:l,removedBatchIds:s,addedBatchIds:o}))})})}function z6(t,e){const r=Me(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const i=e.batch.keys(),a=r.os.newChangeBuffer({trackRemovals:!0});return function(o,u,l,c){const f=l.batch,h=f.keys();let d=ne.resolve();return h.forEach(v=>{d=d.next(()=>c.getEntry(u,v)).next(w=>{const m=l.docVersions.get(v);it(m!==null),w.version.compareTo(m)<0&&(f.applyToRemoteDocument(w,l),w.isValidDocument()&&(w.setReadTime(l.commitVersion),c.addEntry(w)))})}),d.next(()=>o.mutationQueue.removeMutationBatch(u,f))}(r,n,e,a).next(()=>a.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,i,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(o){let u=Be();for(let l=0;l<o.mutationResults.length;++l)o.mutationResults[l].transformResults.length>0&&(u=u.add(o.batch.mutations[l].key));return u}(e))).next(()=>r.localDocuments.getDocuments(n,i))})}function QL(t){const e=Me(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Qr.getLastRemoteSnapshotVersion(r))}function U6(t,e){const r=Me(t),n=e.snapshotVersion;let i=r.ns;return r.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const s=r.os.newChangeBuffer({trackRemovals:!0});i=r.ns;const o=[];e.targetChanges.forEach((c,f)=>{const h=i.get(f);if(!h)return;o.push(r.Qr.removeMatchingKeys(a,c.removedDocuments,f).next(()=>r.Qr.addMatchingKeys(a,c.addedDocuments,f)));let d=h.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(f)!==null?d=d.withResumeToken(yr.EMPTY_BYTE_STRING,Ne.min()).withLastLimboFreeSnapshotVersion(Ne.min()):c.resumeToken.approximateByteSize()>0&&(d=d.withResumeToken(c.resumeToken,n)),i=i.insert(f,d),function(w,m,p){return w.resumeToken.approximateByteSize()===0||m.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=3e8?!0:p.addedDocuments.size+p.modifiedDocuments.size+p.removedDocuments.size>0}(h,d,c)&&o.push(r.Qr.updateTargetData(a,d))});let u=wi(),l=Be();if(e.documentUpdates.forEach(c=>{e.resolvedLimboDocuments.has(c)&&o.push(r.persistence.referenceDelegate.updateLimboDocument(a,c))}),o.push(j6(a,s,e.documentUpdates).next(c=>{u=c.cs,l=c.ls})),!n.isEqual(Ne.min())){const c=r.Qr.getLastRemoteSnapshotVersion(a).next(f=>r.Qr.setTargetsMetadata(a,a.currentSequenceNumber,n));o.push(c)}return ne.waitFor(o).next(()=>s.apply(a)).next(()=>r.localDocuments.getLocalViewOfDocuments(a,u,l)).next(()=>u)}).then(a=>(r.ns=i,a))}function j6(t,e,r){let n=Be(),i=Be();return r.forEach(a=>n=n.add(a)),e.getEntries(t,n).next(a=>{let s=wi();return r.forEach((o,u)=>{const l=a.get(o);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(o)),u.isNoDocument()&&u.version.isEqual(Ne.min())?(e.removeEntry(o,u.readTime),s=s.insert(o,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(o,u)):ce("LocalStore","Ignoring outdated watch update for ",o,". Current version:",l.version," Watch version:",u.version)}),{cs:s,ls:i}})}function W6(t,e){const r=Me(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function H6(t,e){const r=Me(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let i;return r.Qr.getTargetData(n,e).next(a=>a?(i=a,ne.resolve(i)):r.Qr.allocateTargetId(n).next(s=>(i=new Hi(e,s,"TargetPurposeListen",n.currentSequenceNumber),r.Qr.addTargetData(n,i).next(()=>i))))}).then(n=>{const i=r.ns.get(n.targetId);return(i===null||n.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(r.ns=r.ns.insert(n.targetId,n),r.rs.set(e,n.targetId)),n})}async function t_(t,e,r){const n=Me(t),i=n.ns.get(e),a=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",a,s=>n.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!zc(s))throw s;ce("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}n.ns=n.ns.remove(e),n.rs.delete(i.target)}function rC(t,e,r){const n=Me(t);let i=Ne.min(),a=Be();return n.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,c){const f=Me(u),h=f.rs.get(c);return h!==void 0?ne.resolve(f.ns.get(h)):f.Qr.getTargetData(l,c)}(n,s,Kn(e)).next(o=>{if(o)return i=o.lastLimboFreeSnapshotVersion,n.Qr.getMatchingKeysForTargetId(s,o.targetId).next(u=>{a=u})}).next(()=>n.ts.getDocumentsMatchingQuery(s,e,r?i:Ne.min(),r?a:Be())).next(o=>(G6(n,Vj(e),o),{documents:o,hs:a})))}function G6(t,e,r){let n=t.ss.get(e)||Ne.min();r.forEach((i,a)=>{a.readTime.compareTo(n)>0&&(n=a.readTime)}),t.ss.set(e,n)}class nC{constructor(){this.activeTargetIds=Uj()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class K6{constructor(){this.no=new nC,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,r,n){this.ro[e]=r}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new nC,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q6{io(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){ce("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){ce("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bf=null;function ng(){return Bf===null?Bf=function(){return 268435456+Math.round(2147483648*Math.random())}():Bf++,"0x"+Bf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X6{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cr="WebChannelConnection";class J6 extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const n=r.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.fo=n+"://"+r.host,this.po=`projects/${i}/databases/${a}`,this.yo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${a}`}get wo(){return!1}So(r,n,i,a,s){const o=ng(),u=this.bo(r,n.toUriEncodedString());ce("RestConnection",`Sending RPC '${r}' ${o}:`,u,i);const l={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(l,a,s),this.Co(r,u,l,i).then(c=>(ce("RestConnection",`Received RPC '${r}' ${o}: `,c),c),c=>{throw Oo("RestConnection",`RPC '${r}' ${o} failed with error: `,c,"url: ",u,"request:",i),c})}vo(r,n,i,a,s,o){return this.So(r,n,i,a,s)}Do(r,n,i){r["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+eu}(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((a,s)=>r[s]=a),i&&i.headers.forEach((a,s)=>r[s]=a)}bo(r,n){const i=Y6[r];return`${this.fo}/v1/${n}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,r,n,i){const a=ng();return new Promise((s,o)=>{const u=new nj;u.setWithCredentials(!0),u.listenOnce(tj.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case tg.NO_ERROR:const c=u.getResponseJson();ce(cr,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(c)),s(c);break;case tg.TIMEOUT:ce(cr,`RPC '${e}' ${a} timed out`),o(new de(re.DEADLINE_EXCEEDED,"Request time out"));break;case tg.HTTP_ERROR:const f=u.getStatus();if(ce(cr,`RPC '${e}' ${a} failed with status:`,f,"response text:",u.getResponseText()),f>0){let h=u.getResponseJson();Array.isArray(h)&&(h=h[0]);const d=h==null?void 0:h.error;if(d&&d.status&&d.message){const v=function(m){const p=m.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(p)>=0?p:re.UNKNOWN}(d.status);o(new de(v,d.message))}else o(new de(re.UNKNOWN,"Server responded with status "+u.getStatus()))}else o(new de(re.UNAVAILABLE,"Connection failed."));break;default:ke()}}finally{ce(cr,`RPC '${e}' ${a} completed.`)}});const l=JSON.stringify(i);ce(cr,`RPC '${e}' ${a} sending request:`,i),u.send(r,"POST",l,n,15)})}Fo(e,r,n){const i=ng(),a=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Z9(),o=ej(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Do(u.initMessageHeaders,r,n),u.encodeInitMessageHeaders=!0;const c=a.join("");ce(cr,`Creating RPC '${e}' stream ${i}: ${c}`,u);const f=s.createWebChannel(c,u);let h=!1,d=!1;const v=new X6({lo:m=>{d?ce(cr,`Not sending because RPC '${e}' stream ${i} is closed:`,m):(h||(ce(cr,`Opening RPC '${e}' stream ${i} transport.`),f.open(),h=!0),ce(cr,`RPC '${e}' stream ${i} sending:`,m),f.send(m))},ho:()=>f.close()}),w=(m,p,g)=>{m.listen(p,y=>{try{g(y)}catch(_){setTimeout(()=>{throw _},0)}})};return w(f,Mf.EventType.OPEN,()=>{d||ce(cr,`RPC '${e}' stream ${i} transport opened.`)}),w(f,Mf.EventType.CLOSE,()=>{d||(d=!0,ce(cr,`RPC '${e}' stream ${i} transport closed`),v.Vo())}),w(f,Mf.EventType.ERROR,m=>{d||(d=!0,Oo(cr,`RPC '${e}' stream ${i} transport errored:`,m),v.Vo(new de(re.UNAVAILABLE,"The operation could not be completed")))}),w(f,Mf.EventType.MESSAGE,m=>{var p;if(!d){const g=m.data[0];it(!!g);const y=g,_=y.error||((p=y[0])===null||p===void 0?void 0:p.error);if(_){ce(cr,`RPC '${e}' stream ${i} received error:`,_);const T=_.status;let b=function(S){const C=Ct[S];if(C!==void 0)return FL(C)}(T),E=_.message;b===void 0&&(b=re.INTERNAL,E="Unknown error status: "+T+" with message "+_.message),d=!0,v.Vo(new de(b,E)),f.close()}else ce(cr,`RPC '${e}' stream ${i} received:`,g),v.mo(g)}}),w(o,rj.STAT_EVENT,m=>{m.stat===OI.PROXY?ce(cr,`RPC '${e}' stream ${i} detected buffering proxy`):m.stat===OI.NOPROXY&&ce(cr,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{v.Ro()},0),v}}function ig(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iv(t){return new l6(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YL{constructor(e,r,n=1e3,i=1.5,a=6e4){this.oi=e,this.timerId=r,this.Mo=n,this.xo=i,this.Oo=a,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const r=Math.floor(this.No+this.Qo()),n=Math.max(0,Date.now()-this.Lo),i=Math.max(0,r-n);i>0&&ce("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.No} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.Bo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Lo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Bo!==null&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){this.Bo!==null&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XL{constructor(e,r,n,i,a,s,o,u){this.oi=e,this.$o=n,this.Uo=i,this.connection=a,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=u,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new YL(e,r)}Ho(){return this.state===1||this.state===5||this.Jo()}Jo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&this.Go===null&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(e,r){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,e!==4?this.jo.reset():r&&r.code===re.RESOURCE_EXHAUSTED?(Yn(r.toString()),Yn("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):r&&r.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.To(r)}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),r=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,i])=>{this.Wo===r&&this.o_(n,i)},n=>{e(()=>{const i=new de(re.UNKNOWN,"Fetching auth token failed: "+n.message);return this.__(i)})})}o_(e,r){const n=this.s_(this.Wo);this.stream=this.a_(e,r),this.stream.Po(()=>{n(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(i=>{n(()=>this.__(i))}),this.stream.onMessage(i=>{n(()=>this.onMessage(i))})}Yo(){this.state=5,this.jo.qo(async()=>{this.state=0,this.start()})}__(e){return ce("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return r=>{this.oi.enqueueAndForget(()=>this.Wo===e?r():(ce("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Z6 extends XL{constructor(e,r,n,i,a,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,i,s),this.serializer=a}a_(e,r){return this.connection.Fo("Listen",e,r)}onMessage(e){this.jo.reset();const r=h6(this.serializer,e),n=function(a){if(!("targetChange"in a))return Ne.min();const s=a.targetChange;return s.targetIds&&s.targetIds.length?Ne.min():s.readTime?Qn(s.readTime):Ne.min()}(e);return this.listener.u_(r,n)}c_(e){const r={};r.database=e_(this.serializer),r.addTarget=function(a,s){let o;const u=s.target;if(o=Kw(u)?{documents:p6(a,u)}:{query:g6(a,u).ut},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){o.resumeToken=$L(a,s.resumeToken);const l=Xw(a,s.expectedCount);l!==null&&(o.expectedCount=l)}else if(s.snapshotVersion.compareTo(Ne.min())>0){o.readTime=yd(a,s.snapshotVersion.toTimestamp());const l=Xw(a,s.expectedCount);l!==null&&(o.expectedCount=l)}return o}(this.serializer,e);const n=y6(this.serializer,e);n&&(r.labels=n),this.t_(r)}l_(e){const r={};r.database=e_(this.serializer),r.removeTarget=e,this.t_(r)}}class eW extends XL{constructor(e,r,n,i,a,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,i,s),this.serializer=a,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,r){return this.connection.Fo("Write",e,r)}onMessage(e){if(it(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();const r=v6(e.writeResults,e.commitTime),n=Qn(e.commitTime);return this.listener.T_(n,r)}return it(!e.writeResults||e.writeResults.length===0),this.h_=!0,this.listener.E_()}d_(){const e={};e.database=e_(this.serializer),this.t_(e)}I_(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>d6(this.serializer,n))};this.t_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tW extends class{}{constructor(e,r,n,i){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=i,this.A_=!1}R_(){if(this.A_)throw new de(re.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,r,n,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,s])=>this.connection.So(e,Jw(r,n),i,a,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new de(re.UNKNOWN,a.toString())})}vo(e,r,n,i,a){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.vo(e,Jw(r,n),i,s,o,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new de(re.UNKNOWN,s.toString())})}terminate(){this.A_=!0,this.connection.terminate()}}class rW{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){this.m_===0&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){this.state==="Online"?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,e==="Online"&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(Yn(r),this.g_=!1):ce("OnlineStateTracker",r)}b_(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nW{constructor(e,r,n,i,a){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=a,this.M_.io(s=>{n.enqueueAndForget(async()=>{Es(this)&&(ce("RemoteStore","Restarting streams for network reachability change."),await async function(u){const l=Me(u);l.v_.add(4),await Wc(l),l.x_.set("Unknown"),l.v_.delete(4),await Cv(l)}(this))})}),this.x_=new rW(n,i)}}async function Cv(t){if(Es(t))for(const e of t.F_)await e(!0)}async function Wc(t){for(const e of t.F_)await e(!1)}function JL(t,e){const r=Me(t);r.C_.has(e.targetId)||(r.C_.set(e.targetId,e),mT(r)?gT(r):nu(r).Jo()&&pT(r,e))}function ZL(t,e){const r=Me(t),n=nu(r);r.C_.delete(e),n.Jo()&&eM(r,e),r.C_.size===0&&(n.Jo()?n.Xo():Es(r)&&r.x_.set("Unknown"))}function pT(t,e){if(t.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ne.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}nu(t).c_(e)}function eM(t,e){t.O_.Oe(e),nu(t).l_(e)}function gT(t){t.O_=new a6({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.C_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),nu(t).start(),t.x_.p_()}function mT(t){return Es(t)&&!nu(t).Ho()&&t.C_.size>0}function Es(t){return Me(t).v_.size===0}function tM(t){t.O_=void 0}async function iW(t){t.C_.forEach((e,r)=>{pT(t,e)})}async function aW(t,e){tM(t),mT(t)?(t.x_.S_(e),gT(t)):t.x_.set("Unknown")}async function sW(t,e,r){if(t.x_.set("Online"),e instanceof qL&&e.state===2&&e.cause)try{await async function(i,a){const s=a.cause;for(const o of a.targetIds)i.C_.has(o)&&(await i.remoteSyncer.rejectListen(o,s),i.C_.delete(o),i.O_.removeTarget(o))}(t,e)}catch(n){ce("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await wd(t,n)}else if(e instanceof wh?t.O_.$e(e):e instanceof BL?t.O_.Je(e):t.O_.Ge(e),!r.isEqual(Ne.min()))try{const n=await QL(t.localStore);r.compareTo(n)>=0&&await function(a,s){const o=a.O_.it(s);return o.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){const c=a.C_.get(l);c&&a.C_.set(l,c.withResumeToken(u.resumeToken,s))}}),o.targetMismatches.forEach((u,l)=>{const c=a.C_.get(u);if(!c)return;a.C_.set(u,c.withResumeToken(yr.EMPTY_BYTE_STRING,c.snapshotVersion)),eM(a,u);const f=new Hi(c.target,u,l,c.sequenceNumber);pT(a,f)}),a.remoteSyncer.applyRemoteEvent(o)}(t,r)}catch(n){ce("RemoteStore","Failed to raise snapshot:",n),await wd(t,n)}}async function wd(t,e,r){if(!zc(e))throw e;t.v_.add(1),await Wc(t),t.x_.set("Offline"),r||(r=()=>QL(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ce("RemoteStore","Retrying IndexedDB access"),await r(),t.v_.delete(1),await Cv(t)})}function rM(t,e){return e().catch(r=>wd(t,r,e))}async function xv(t){const e=Me(t),r=pa(e);let n=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;oW(e);)try{const i=await W6(e.localStore,n);if(i===null){e.D_.length===0&&r.Xo();break}n=i.batchId,uW(e,i)}catch(i){await wd(e,i)}nM(e)&&iM(e)}function oW(t){return Es(t)&&t.D_.length<10}function uW(t,e){t.D_.push(e);const r=pa(t);r.Jo()&&r.P_&&r.I_(e.mutations)}function nM(t){return Es(t)&&!pa(t).Ho()&&t.D_.length>0}function iM(t){pa(t).start()}async function lW(t){pa(t).d_()}async function cW(t){const e=pa(t);for(const r of t.D_)e.I_(r.mutations)}async function fW(t,e,r){const n=t.D_.shift(),i=lT.from(n,e,r);await rM(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await xv(t)}async function hW(t,e){e&&pa(t).P_&&await async function(n,i){if(function(s){return r6(s)&&s!==re.ABORTED}(i.code)){const a=n.D_.shift();pa(n).Zo(),await rM(n,()=>n.remoteSyncer.rejectFailedWrite(a.batchId,i)),await xv(n)}}(t,e),nM(t)&&iM(t)}async function aC(t,e){const r=Me(t);r.asyncQueue.verifyOperationInProgress(),ce("RemoteStore","RemoteStore received new credentials");const n=Es(r);r.v_.add(3),await Wc(r),n&&r.x_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.v_.delete(3),await Cv(r)}async function dW(t,e){const r=Me(t);e?(r.v_.delete(2),await Cv(r)):e||(r.v_.add(2),await Wc(r),r.x_.set("Unknown"))}function nu(t){return t.N_||(t.N_=function(r,n,i){const a=Me(r);return a.R_(),new Z6(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(t.datastore,t.asyncQueue,{Po:iW.bind(null,t),To:aW.bind(null,t),u_:sW.bind(null,t)}),t.F_.push(async e=>{e?(t.N_.Zo(),mT(t)?gT(t):t.x_.set("Unknown")):(await t.N_.stop(),tM(t))})),t.N_}function pa(t){return t.B_||(t.B_=function(r,n,i){const a=Me(r);return a.R_(),new eW(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(t.datastore,t.asyncQueue,{Po:lW.bind(null,t),To:hW.bind(null,t),E_:cW.bind(null,t),T_:fW.bind(null,t)}),t.F_.push(async e=>{e?(t.B_.Zo(),await xv(t)):(await t.B_.stop(),t.D_.length>0&&(ce("RemoteStore",`Stopping write stream with ${t.D_.length} pending writes`),t.D_=[]))})),t.B_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yT{constructor(e,r,n,i,a){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=i,this.removalCallback=a,this.deferred=new sa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,i,a){const s=Date.now()+n,o=new yT(e,r,s,i,a);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new de(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function wT(t,e){if(Yn("AsyncQueue",`${e}: ${t}`),zc(t))return new de(re.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(e){this.comparator=e?(r,n)=>e(r,n)||Ie.comparator(r.key,n.key):(r,n)=>Ie.comparator(r.key,n.key),this.keyedMap=Yu(),this.sortedSet=new mt(this.comparator)}static emptySet(e){return new yo(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof yo)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const i=r.getNext().key,a=n.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new yo;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(){this.L_=new mt(Ie.comparator)}track(e){const r=e.doc.key,n=this.L_.get(r);n?e.type!==0&&n.type===3?this.L_=this.L_.insert(r,e):e.type===3&&n.type!==1?this.L_=this.L_.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.L_=this.L_.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.L_=this.L_.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.L_=this.L_.remove(r):e.type===1&&n.type===2?this.L_=this.L_.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.L_=this.L_.insert(r,{type:2,doc:e.doc}):ke():this.L_=this.L_.insert(r,e)}k_(){const e=[];return this.L_.inorderTraversal((r,n)=>{e.push(n)}),e}}class Fo{constructor(e,r,n,i,a,s,o,u,l){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=a,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,r,n,i,a){const s=[];return r.forEach(o=>{s.push({type:0,doc:o})}),new Fo(e,r,yo.emptySet(r),s,n,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&_v(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let i=0;i<r.length;i++)if(r[i].type!==n[i].type||!r[i].doc.isEqual(n[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vW{constructor(){this.q_=void 0,this.Q_=[]}}class pW{constructor(){this.queries=new ru(e=>IL(e),_v),this.onlineState="Unknown",this.K_=new Set}}async function gW(t,e){const r=Me(t),n=e.query;let i=!1,a=r.queries.get(n);if(a||(i=!0,a=new vW),i)try{a.q_=await r.onListen(n)}catch(s){const o=wT(s,`Initialization of query '${qs(e.query)}' failed`);return void e.onError(o)}r.queries.set(n,a),a.Q_.push(e),e.U_(r.onlineState),a.q_&&e.W_(a.q_)&&_T(r)}async function mW(t,e){const r=Me(t),n=e.query;let i=!1;const a=r.queries.get(n);if(a){const s=a.Q_.indexOf(e);s>=0&&(a.Q_.splice(s,1),i=a.Q_.length===0)}if(i)return r.queries.delete(n),r.onUnlisten(n)}function yW(t,e){const r=Me(t);let n=!1;for(const i of e){const a=i.query,s=r.queries.get(a);if(s){for(const o of s.Q_)o.W_(i)&&(n=!0);s.q_=i}}n&&_T(r)}function wW(t,e,r){const n=Me(t),i=n.queries.get(e);if(i)for(const a of i.Q_)a.onError(r);n.queries.delete(e)}function _T(t){t.K_.forEach(e=>{e.next()})}class _W{constructor(e,r,n){this.query=e,this.G_=r,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=n||{}}W_(e){if(!this.options.includeMetadataChanges){const n=[];for(const i of e.docChanges)i.type!==3&&n.push(i);e=new Fo(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.z_?this.H_(e)&&(this.G_.next(e),r=!0):this.J_(e,this.onlineState)&&(this.Y_(e),r=!0),this.j_=e,r}onError(e){this.G_.error(e)}U_(e){this.onlineState=e;let r=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),r=!0),r}J_(e,r){if(!e.fromCache)return!0;const n=r!=="Offline";return(!this.options.Z_||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}H_(e){if(e.docChanges.length>0)return!0;const r=this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}Y_(e){e=Fo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aM{constructor(e){this.key=e}}class sM{constructor(e){this.key=e}}class EW{constructor(e,r){this.query=e,this.oa=r,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=Be(),this.mutatedKeys=Be(),this.ua=CL(e),this.ca=new yo(this.ua)}get la(){return this.oa}ha(e,r){const n=r?r.Pa:new sC,i=r?r.ca:this.ca;let a=r?r.mutatedKeys:this.mutatedKeys,s=i,o=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((c,f)=>{const h=i.get(c),d=Ev(this.query,f)?f:null,v=!!h&&this.mutatedKeys.has(h.key),w=!!d&&(d.hasLocalMutations||this.mutatedKeys.has(d.key)&&d.hasCommittedMutations);let m=!1;h&&d?h.data.isEqual(d.data)?v!==w&&(n.track({type:3,doc:d}),m=!0):this.Ia(h,d)||(n.track({type:2,doc:d}),m=!0,(u&&this.ua(d,u)>0||l&&this.ua(d,l)<0)&&(o=!0)):!h&&d?(n.track({type:0,doc:d}),m=!0):h&&!d&&(n.track({type:1,doc:h}),m=!0,(u||l)&&(o=!0)),m&&(d?(s=s.add(d),a=w?a.add(c):a.delete(c)):(s=s.delete(c),a=a.delete(c)))}),this.query.limit!==null)for(;s.size>this.query.limit;){const c=this.query.limitType==="F"?s.last():s.first();s=s.delete(c.key),a=a.delete(c.key),n.track({type:1,doc:c})}return{ca:s,Pa:n,Xi:o,mutatedKeys:a}}Ia(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,i){const a=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;const s=e.Pa.k_();s.sort((c,f)=>function(d,v){const w=m=>{switch(m){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ke()}};return w(d)-w(v)}(c.type,f.type)||this.ua(c.doc,f.doc)),this.Ta(n),i=i!=null&&i;const o=r&&!i?this.Ea():[],u=this.aa.size===0&&this.current&&!i?1:0,l=u!==this._a;return this._a=u,s.length!==0||l?{snapshot:new Fo(this.query,e.ca,a,s,e.mutatedKeys,u===0,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),da:o}:{da:o}}U_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new sC,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}Ta(e){e&&(e.addedDocuments.forEach(r=>this.oa=this.oa.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.oa=this.oa.delete(r)),this.current=e.current)}Ea(){if(!this.current)return[];const e=this.aa;this.aa=Be(),this.ca.forEach(n=>{this.Aa(n.key)&&(this.aa=this.aa.add(n.key))});const r=[];return e.forEach(n=>{this.aa.has(n)||r.push(new sM(n))}),this.aa.forEach(n=>{e.has(n)||r.push(new aM(n))}),r}Ra(e){this.oa=e.hs,this.aa=Be();const r=this.ha(e.documents);return this.applyChanges(r,!0)}Va(){return Fo.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,this._a===0,this.hasCachedResults)}}class TW{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class bW{constructor(e){this.key=e,this.ma=!1}}class SW{constructor(e,r,n,i,a,s){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=s,this.fa={},this.ga=new ru(o=>IL(o),_v),this.pa=new Map,this.ya=new Set,this.wa=new mt(Ie.comparator),this.Sa=new Map,this.ba=new hT,this.Da={},this.Ca=new Map,this.va=Vo.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return this.Fa===!0}}async function IW(t,e){const r=LW(t);let n,i;const a=r.ga.get(e);if(a)n=a.targetId,r.sharedClientState.addLocalQueryTarget(n),i=a.view.Va();else{const s=await H6(r.localStore,Kn(e)),o=r.sharedClientState.addLocalQueryTarget(s.targetId);n=s.targetId,i=await CW(r,e,n,o==="current",s.resumeToken),r.isPrimaryClient&&JL(r.remoteStore,s)}return i}async function CW(t,e,r,n,i){t.Ma=(f,h,d)=>async function(w,m,p,g){let y=m.view.ha(p);y.Xi&&(y=await rC(w.localStore,m.query,!1).then(({documents:E})=>m.view.ha(E,y)));const _=g&&g.targetChanges.get(m.targetId),T=g&&g.targetMismatches.get(m.targetId)!=null,b=m.view.applyChanges(y,w.isPrimaryClient,_,T);return uC(w,m.targetId,b.da),b.snapshot}(t,f,h,d);const a=await rC(t.localStore,e,!0),s=new EW(e,a.hs),o=s.ha(a.documents),u=jc.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",i),l=s.applyChanges(o,t.isPrimaryClient,u);uC(t,r,l.da);const c=new TW(e,r,s);return t.ga.set(e,c),t.pa.has(r)?t.pa.get(r).push(e):t.pa.set(r,[e]),l.snapshot}async function xW(t,e){const r=Me(t),n=r.ga.get(e),i=r.pa.get(n.targetId);if(i.length>1)return r.pa.set(n.targetId,i.filter(a=>!_v(a,e))),void r.ga.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(n.targetId),r.sharedClientState.isActiveQueryTarget(n.targetId)||await t_(r.localStore,n.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(n.targetId),ZL(r.remoteStore,n.targetId),r_(r,n.targetId)}).catch($c)):(r_(r,n.targetId),await t_(r.localStore,n.targetId,!0))}async function RW(t,e,r){const n=MW(t);try{const i=await function(s,o){const u=Me(s),l=Mt.now(),c=o.reduce((d,v)=>d.add(v.key),Be());let f,h;return u.persistence.runTransaction("Locally write mutations","readwrite",d=>{let v=wi(),w=Be();return u.os.getEntries(d,c).next(m=>{v=m,v.forEach((p,g)=>{g.isValidDocument()||(w=w.add(p))})}).next(()=>u.localDocuments.getOverlayedDocuments(d,v)).next(m=>{f=m;const p=[];for(const g of o){const y=Xj(g,f.get(g.key).overlayedDocument);y!=null&&p.push(new ka(g.key,y,mL(y.value.mapValue),xn.exists(!0)))}return u.mutationQueue.addMutationBatch(d,l,p,o)}).next(m=>{h=m;const p=m.applyToLocalDocumentSet(f,w);return u.documentOverlayCache.saveOverlays(d,m.batchId,p)})}).then(()=>({batchId:h.batchId,changes:RL(f)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(i.batchId),function(s,o,u){let l=s.Da[s.currentUser.toKey()];l||(l=new mt(Qe)),l=l.insert(o,u),s.Da[s.currentUser.toKey()]=l}(n,i.batchId,r),await Hc(n,i.changes),await xv(n.remoteStore)}catch(i){const a=wT(i,"Failed to persist write");r.reject(a)}}async function oM(t,e){const r=Me(t);try{const n=await U6(r.localStore,e);e.targetChanges.forEach((i,a)=>{const s=r.Sa.get(a);s&&(it(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.ma=!0:i.modifiedDocuments.size>0?it(s.ma):i.removedDocuments.size>0&&(it(s.ma),s.ma=!1))}),await Hc(r,n,e)}catch(n){await $c(n)}}function oC(t,e,r){const n=Me(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const i=[];n.ga.forEach((a,s)=>{const o=s.view.U_(e);o.snapshot&&i.push(o.snapshot)}),function(s,o){const u=Me(s);u.onlineState=o;let l=!1;u.queries.forEach((c,f)=>{for(const h of f.Q_)h.U_(o)&&(l=!0)}),l&&_T(u)}(n.eventManager,e),i.length&&n.fa.u_(i),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function kW(t,e,r){const n=Me(t);n.sharedClientState.updateQueryState(e,"rejected",r);const i=n.Sa.get(e),a=i&&i.key;if(a){let s=new mt(Ie.comparator);s=s.insert(a,dr.newNoDocument(a,Ne.min()));const o=Be().add(a),u=new Sv(Ne.min(),new Map,new mt(Qe),s,o);await oM(n,u),n.wa=n.wa.remove(a),n.Sa.delete(e),ET(n)}else await t_(n.localStore,e,!1).then(()=>r_(n,e,r)).catch($c)}async function AW(t,e){const r=Me(t),n=e.batch.batchId;try{const i=await z6(r.localStore,e);lM(r,n,null),uM(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await Hc(r,i)}catch(i){await $c(i)}}async function PW(t,e,r){const n=Me(t);try{const i=await function(s,o){const u=Me(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let c;return u.mutationQueue.lookupMutationBatch(l,o).next(f=>(it(f!==null),c=f.keys(),u.mutationQueue.removeMutationBatch(l,f))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,c,o)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,c)).next(()=>u.localDocuments.getDocuments(l,c))})}(n.localStore,e);lM(n,e,r),uM(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await Hc(n,i)}catch(i){await $c(i)}}function uM(t,e){(t.Ca.get(e)||[]).forEach(r=>{r.resolve()}),t.Ca.delete(e)}function lM(t,e,r){const n=Me(t);let i=n.Da[n.currentUser.toKey()];if(i){const a=i.get(e);a&&(r?a.reject(r):a.resolve(),i=i.remove(e)),n.Da[n.currentUser.toKey()]=i}}function r_(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.pa.get(e))t.ga.delete(n),r&&t.fa.xa(n,r);t.pa.delete(e),t.isPrimaryClient&&t.ba.Vr(e).forEach(n=>{t.ba.containsKey(n)||cM(t,n)})}function cM(t,e){t.ya.delete(e.path.canonicalString());const r=t.wa.get(e);r!==null&&(ZL(t.remoteStore,r),t.wa=t.wa.remove(e),t.Sa.delete(r),ET(t))}function uC(t,e,r){for(const n of r)n instanceof aM?(t.ba.addReference(n.key,e),DW(t,n)):n instanceof sM?(ce("SyncEngine","Document no longer in limbo: "+n.key),t.ba.removeReference(n.key,e),t.ba.containsKey(n.key)||cM(t,n.key)):ke()}function DW(t,e){const r=e.key,n=r.path.canonicalString();t.wa.get(r)||t.ya.has(n)||(ce("SyncEngine","New document in limbo: "+r),t.ya.add(n),ET(t))}function ET(t){for(;t.ya.size>0&&t.wa.size<t.maxConcurrentLimboResolutions;){const e=t.ya.values().next().value;t.ya.delete(e);const r=new Ie(ut.fromString(e)),n=t.va.next();t.Sa.set(n,new bW(r)),t.wa=t.wa.insert(r,n),JL(t.remoteStore,new Hi(Kn(oT(r.path)),n,"TargetPurposeLimboResolution",tT._e))}}async function Hc(t,e,r){const n=Me(t),i=[],a=[],s=[];n.ga.isEmpty()||(n.ga.forEach((o,u)=>{s.push(n.Ma(u,e,r).then(l=>{if((l||r)&&n.isPrimaryClient&&n.sharedClientState.updateQueryState(u.targetId,l!=null&&l.fromCache?"not-current":"current"),l){i.push(l);const c=vT.Ki(u.targetId,l);a.push(c)}}))}),await Promise.all(s),n.fa.u_(i),await async function(u,l){const c=Me(u);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>ne.forEach(l,h=>ne.forEach(h.qi,d=>c.persistence.referenceDelegate.addReference(f,h.targetId,d)).next(()=>ne.forEach(h.Qi,d=>c.persistence.referenceDelegate.removeReference(f,h.targetId,d)))))}catch(f){if(!zc(f))throw f;ce("LocalStore","Failed to update sequence numbers: "+f)}for(const f of l){const h=f.targetId;if(!f.fromCache){const d=c.ns.get(h),v=d.snapshotVersion,w=d.withLastLimboFreeSnapshotVersion(v);c.ns=c.ns.insert(h,w)}}}(n.localStore,a))}async function OW(t,e){const r=Me(t);if(!r.currentUser.isEqual(e)){ce("SyncEngine","User change. New user:",e.toKey());const n=await KL(r.localStore,e);r.currentUser=e,function(a,s){a.Ca.forEach(o=>{o.forEach(u=>{u.reject(new de(re.CANCELLED,s))})}),a.Ca.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Hc(r,n.us)}}function NW(t,e){const r=Me(t),n=r.Sa.get(e);if(n&&n.ma)return Be().add(n.key);{let i=Be();const a=r.pa.get(e);if(!a)return i;for(const s of a){const o=r.ga.get(s);i=i.unionWith(o.view.la)}return i}}function LW(t){const e=Me(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=oM.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=NW.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=kW.bind(null,e),e.fa.u_=yW.bind(null,e.eventManager),e.fa.xa=wW.bind(null,e.eventManager),e}function MW(t){const e=Me(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=AW.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=PW.bind(null,e),e}class lC{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Iv(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,r){return null}createIndexBackfillerScheduler(e,r){return null}createLocalStore(e){return $6(this.persistence,new B6,e.initialUser,this.serializer)}createPersistence(e){return new M6(dT.Hr,this.serializer)}createSharedClientState(e){return new K6}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class VW{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>oC(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=OW.bind(null,this.syncEngine),await dW(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new pW}()}createDatastore(e){const r=Iv(e.databaseInfo.databaseId),n=function(a){return new J6(a)}(e.databaseInfo);return function(a,s,o,u){return new tW(a,s,o,u)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,i,a,s,o){return new nW(n,i,a,s,o)}(this.localStore,this.datastore,e.asyncQueue,r=>oC(this.syncEngine,r,0),function(){return iC.D()?new iC:new Q6}())}createSyncEngine(e,r){return function(i,a,s,o,u,l,c){const f=new SW(i,a,s,o,u,l);return c&&(f.Fa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e;await async function(n){const i=Me(n);ce("RemoteStore","RemoteStore shutting down."),i.v_.add(5),await Wc(i),i.M_.shutdown(),i.x_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FW{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ba(this.observer.next,e)}error(e){this.observer.error?this.Ba(this.observer.error,e):Yn("Uncaught Error in snapshot listener:",e.toString())}La(){this.muted=!0}Ba(e,r){this.muted||setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BW{constructor(e,r,n,i){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=i,this.user=fr.UNAUTHENTICATED,this.clientId=vL.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,async a=>{ce("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(n,a=>(ce("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new de(re.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new sa;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=wT(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function ag(t,e){t.asyncQueue.verifyOperationInProgress(),ce("FirestoreClient","Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async i=>{n.isEqual(i)||(await KL(e.localStore,i),n=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function cC(t,e){t.asyncQueue.verifyOperationInProgress();const r=await $W(t);ce("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>aC(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,i)=>aC(e.remoteStore,i)),t._onlineComponents=e}function qW(t){return t.name==="FirebaseError"?t.code===re.FAILED_PRECONDITION||t.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function $W(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ce("FirestoreClient","Using user provided OfflineComponentProvider");try{await ag(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!qW(r))throw r;Oo("Error using user provided cache. Falling back to memory cache: "+r),await ag(t,new lC)}}else ce("FirestoreClient","Using default OfflineComponentProvider"),await ag(t,new lC);return t._offlineComponents}async function fM(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ce("FirestoreClient","Using user provided OnlineComponentProvider"),await cC(t,t._uninitializedComponentsProvider._online)):(ce("FirestoreClient","Using default OnlineComponentProvider"),await cC(t,new VW))),t._onlineComponents}function zW(t){return fM(t).then(e=>e.syncEngine)}async function fC(t){const e=await fM(t),r=e.eventManager;return r.onListen=IW.bind(null,e.syncEngine),r.onUnlisten=xW.bind(null,e.syncEngine),r}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hM(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hC=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dM(t,e,r){if(!r)throw new de(re.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function UW(t,e,r,n){if(e===!0&&n===!0)throw new de(re.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function dC(t){if(!Ie.isDocumentKey(t))throw new de(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function vC(t){if(Ie.isDocumentKey(t))throw new de(re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Rv(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ke()}function oa(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new de(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=Rv(t);throw new de(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new de(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new de(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}UW("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=hM((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new de(re.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new de(re.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new de(re.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,i){return n.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class kv{constructor(e,r,n,i){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new pC({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new de(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new de(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new pC(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new aj;switch(n.type){case"firstParty":return new lj(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new de(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=hC.get(r);n&&(ce("ComponentProvider","Removing Datastore"),hC.delete(r),n.terminate())}(this),Promise.resolve()}}function jW(t,e,r,n={}){var i;const a=(t=oa(t,kv))._getSettings(),s=`${e}:${r}`;if(a.host!=="firestore.googleapis.com"&&a.host!==s&&Oo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},a),{host:s,ssl:!1})),n.mockUserToken){let o,u;if(typeof n.mockUserToken=="string")o=n.mockUserToken,u=fr.MOCK_USER;else{o=dz(n.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const l=n.mockUserToken.sub||n.mockUserToken.user_id;if(!l)throw new de(re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new fr(l)}t._authCredentials=new sj(new dL(o,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Ts(this.firestore,e,this._query)}}class Br{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ua(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Br(this.firestore,e,this._key)}}class ua extends Ts{constructor(e,r,n){super(e,r,oT(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Br(this.firestore,null,new Ie(e))}withConverter(e){return new ua(this.firestore,e,this._path)}}function TT(t,e,...r){if(t=Vt(t),dM("collection","path",e),t instanceof kv){const n=ut.fromString(e,...r);return vC(n),new ua(t,null,n)}{if(!(t instanceof Br||t instanceof ua))throw new de(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(ut.fromString(e,...r));return vC(n),new ua(t.firestore,null,n)}}function Av(t,e,...r){if(t=Vt(t),arguments.length===1&&(e=vL.newId()),dM("doc","path",e),t instanceof kv){const n=ut.fromString(e,...r);return dC(n),new Br(t,null,new Ie(n))}{if(!(t instanceof Br||t instanceof ua))throw new de(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(ut.fromString(e,...r));return dC(n),new Br(t.firestore,t instanceof ua?t.converter:null,new Ie(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WW{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new YL(this,"async_queue_retry"),this._u=()=>{const r=ig();r&&ce("AsyncQueue","Visibility state changed to "+r.visibilityState),this.jo.Ko()};const e=ig();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.au(),this.uu(e)}enterRestrictedMode(e){if(!this.tu){this.tu=!0,this.su=e||!1;const r=ig();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this._u)}}enqueue(e){if(this.au(),this.tu)return new Promise(()=>{});const r=new sa;return this.uu(()=>this.tu&&this.su?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.eu.push(e),this.cu()))}async cu(){if(this.eu.length!==0){try{await this.eu[0](),this.eu.shift(),this.jo.reset()}catch(e){if(!zc(e))throw e;ce("AsyncQueue","Operation failed with retryable error: "+e)}this.eu.length>0&&this.jo.qo(()=>this.cu())}}uu(e){const r=this.Xa.then(()=>(this.iu=!0,e().catch(n=>{this.ru=n,this.iu=!1;const i=function(s){let o=s.message||"";return s.stack&&(o=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),o}(n);throw Yn("INTERNAL UNHANDLED ERROR: ",i),n}).then(n=>(this.iu=!1,n))));return this.Xa=r,r}enqueueAfterDelay(e,r,n){this.au(),this.ou.indexOf(e)>-1&&(r=0);const i=yT.createAndSchedule(this,e,r,n,a=>this.lu(a));return this.nu.push(i),i}au(){this.ru&&ke()}verifyOperationInProgress(){}async hu(){let e;do e=this.Xa,await e;while(e!==this.Xa)}Pu(e){for(const r of this.nu)if(r.timerId===e)return!0;return!1}Iu(e){return this.hu().then(()=>{this.nu.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.nu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.hu()})}Tu(e){this.ou.push(e)}lu(e){const r=this.nu.indexOf(e);this.nu.splice(r,1)}}function gC(t){return function(r,n){if(typeof r!="object"||r===null)return!1;const i=r;for(const a of n)if(a in i&&typeof i[a]=="function")return!0;return!1}(t,["next","error","complete"])}class Bo extends kv{constructor(e,r,n,i){super(e,r,n,i),this.type="firestore",this._queue=function(){return new WW}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||pM(this),this._firestoreClient.terminate()}}function HW(t,e){const r=typeof t=="object"?t:PO(),n=typeof t=="string"?t:e||"(default)",i=_E(r,"firestore").getImmediate({identifier:n});if(!i._initialized){const a=fz("firestore");a&&jW(i,...a)}return i}function vM(t){return t._firestoreClient||pM(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function pM(t){var e,r,n;const i=t._freezeSettings(),a=function(o,u,l,c){return new bj(o,u,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,hM(c.experimentalLongPollingOptions),c.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new BW(t._authCredentials,t._appCheckCredentials,t._queue,a),!((r=i.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=i.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new qo(yr.fromBase64String(e))}catch(r){throw new de(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new qo(yr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pv{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new de(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Jt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dv{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new de(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new de(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Qe(this._lat,e._lat)||Qe(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GW=/^__.*__$/;class KW{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new ka(e,this.data,this.fieldMask,r,this.fieldTransforms):new Uc(e,this.data,r,this.fieldTransforms)}}class gM{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new ka(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function mM(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ke()}}class ST{constructor(e,r,n,i,a,s){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=i,a===void 0&&this.Eu(),this.fieldTransforms=a||[],this.fieldMask=s||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(e){return new ST(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),i=this.Au({path:n,Vu:!1});return i.mu(e),i}fu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),i=this.Au({path:n,Vu:!1});return i.Eu(),i}gu(e){return this.Au({path:void 0,Vu:!0})}pu(e){return _d(e,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}Eu(){if(this.path)for(let e=0;e<this.path.length;e++)this.mu(this.path.get(e))}mu(e){if(e.length===0)throw this.pu("Document fields must not be empty");if(mM(this.du)&&GW.test(e))throw this.pu('Document fields cannot begin and end with "__"')}}class QW{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||Iv(e)}Su(e,r,n,i=!1){return new ST({du:e,methodName:r,wu:n,path:Jt.emptyPath(),Vu:!1,yu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function IT(t){const e=t._freezeSettings(),r=Iv(t._databaseId);return new QW(t._databaseId,!!e.ignoreUndefinedProperties,r)}function YW(t,e,r,n,i,a={}){const s=t.Su(a.merge||a.mergeFields?2:0,e,r,i);xT("Data must be an object, but it was:",s,n);const o=yM(n,s);let u,l;if(a.merge)u=new Wr(s.fieldMask),l=s.fieldTransforms;else if(a.mergeFields){const c=[];for(const f of a.mergeFields){const h=n_(e,f,r);if(!s.contains(h))throw new de(re.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);_M(c,h)||c.push(h)}u=new Wr(c),l=s.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,l=s.fieldTransforms;return new KW(new Nr(o),u,l)}class Ov extends Dv{_toFieldTransform(e){if(e.du!==2)throw e.du===1?e.pu(`${this._methodName}() can only appear at the top level of your update data`):e.pu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ov}}class CT extends Dv{_toFieldTransform(e){return new Gj(e.path,new oc)}isEqual(e){return e instanceof CT}}function XW(t,e,r,n){const i=t.Su(1,e,r);xT("Data must be an object, but it was:",i,n);const a=[],s=Nr.empty();_s(n,(u,l)=>{const c=RT(e,u,r);l=Vt(l);const f=i.fu(c);if(l instanceof Ov)a.push(c);else{const h=Gc(l,f);h!=null&&(a.push(c),s.set(c,h))}});const o=new Wr(a);return new gM(s,o,i.fieldTransforms)}function JW(t,e,r,n,i,a){const s=t.Su(1,e,r),o=[n_(e,n,r)],u=[i];if(a.length%2!=0)throw new de(re.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<a.length;h+=2)o.push(n_(e,a[h])),u.push(a[h+1]);const l=[],c=Nr.empty();for(let h=o.length-1;h>=0;--h)if(!_M(l,o[h])){const d=o[h];let v=u[h];v=Vt(v);const w=s.fu(d);if(v instanceof Ov)l.push(d);else{const m=Gc(v,w);m!=null&&(l.push(d),c.set(d,m))}}const f=new Wr(l);return new gM(c,f,s.fieldTransforms)}function ZW(t,e,r,n=!1){return Gc(r,t.Su(n?4:3,e))}function Gc(t,e){if(wM(t=Vt(t)))return xT("Unsupported field value:",e,t),yM(t,e);if(t instanceof Dv)return function(n,i){if(!mM(i.du))throw i.pu(`${n._methodName}() can only be used with update() and set()`);if(!i.path)throw i.pu(`${n._methodName}() is not currently supported inside arrays`);const a=n._toFieldTransform(i);a&&i.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Vu&&e.du!==4)throw e.pu("Nested arrays are not supported");return function(n,i){const a=[];let s=0;for(const o of n){let u=Gc(o,i.gu(s));u==null&&(u={nullValue:"NULL_VALUE"}),a.push(u),s++}return{arrayValue:{values:a}}}(t,e)}return function(n,i){if((n=Vt(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return jj(i.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const a=Mt.fromDate(n);return{timestampValue:yd(i.serializer,a)}}if(n instanceof Mt){const a=new Mt(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:yd(i.serializer,a)}}if(n instanceof bT)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof qo)return{bytesValue:$L(i.serializer,n._byteString)};if(n instanceof Br){const a=i.databaseId,s=n.firestore._databaseId;if(!s.isEqual(a))throw i.pu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:fT(n.firestore._databaseId||i.databaseId,n._key.path)}}throw i.pu(`Unsupported field value: ${Rv(n)}`)}(t,e)}function yM(t,e){const r={};return pL(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):_s(t,(n,i)=>{const a=Gc(i,e.Ru(n));a!=null&&(r[n]=a)}),{mapValue:{fields:r}}}function wM(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Mt||t instanceof bT||t instanceof qo||t instanceof Br||t instanceof Dv)}function xT(t,e,r){if(!wM(r)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(r)){const n=Rv(r);throw n==="an object"?e.pu(t+" a custom object"):e.pu(t+" "+n)}}function n_(t,e,r){if((e=Vt(e))instanceof Pv)return e._internalPath;if(typeof e=="string")return RT(t,e);throw _d("Field path arguments must be of type string or ",t,!1,void 0,r)}const eH=new RegExp("[~\\*/\\[\\]]");function RT(t,e,r){if(e.search(eH)>=0)throw _d(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new Pv(...e.split("."))._internalPath}catch{throw _d(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function _d(t,e,r,n,i){const a=n&&!n.isEmpty(),s=i!==void 0;let o=`Function ${e}() called with invalid data`;r&&(o+=" (via `toFirestore()`)"),o+=". ";let u="";return(a||s)&&(u+=" (found",a&&(u+=` in field ${n}`),s&&(u+=` in document ${i}`),u+=")"),new de(re.INVALID_ARGUMENT,o+t+u)}function _M(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EM{constructor(e,r,n,i,a){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Br(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new tH(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(Nv("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class tH extends EM{data(){return super.data()}}function Nv(t,e){return typeof e=="string"?RT(t,e):e instanceof Pv?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rH(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new de(re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class kT{}class TM extends kT{}function nH(t,e,...r){let n=[];e instanceof kT&&n.push(e),n=n.concat(r),function(a){const s=a.filter(u=>u instanceof AT).length,o=a.filter(u=>u instanceof Lv).length;if(s>1||s>0&&o>0)throw new de(re.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const i of n)t=i._apply(t);return t}class Lv extends TM{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new Lv(e,r,n)}_apply(e){const r=this._parse(e);return bM(e._query,r),new Ts(e.firestore,e.converter,Qw(e._query,r))}_parse(e){const r=IT(e.firestore);return function(a,s,o,u,l,c,f){let h;if(l.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new de(re.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){yC(f,c);const d=[];for(const v of f)d.push(mC(u,a,v));h={arrayValue:{values:d}}}else h=mC(u,a,f)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||yC(f,c),h=ZW(o,s,f,c==="in"||c==="not-in");return kt.create(l,c,h)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function iH(t,e,r){const n=e,i=Nv("where",t);return Lv._create(i,n,r)}class AT extends kT{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new AT(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:Dn.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(i,a){let s=i;const o=a.getFlattenedFilters();for(const u of o)bM(s,u),s=Qw(s,u)}(e._query,r),new Ts(e.firestore,e.converter,Qw(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class PT extends TM{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new PT(e,r)}_apply(e){const r=function(i,a,s){if(i.startAt!==null)throw new de(re.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new de(re.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new sc(a,s)}(e._query,this._field,this._direction);return new Ts(e.firestore,e.converter,function(i,a){const s=i.explicitOrderBy.concat([a]);return new tu(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}function aH(t,e="asc"){const r=e,n=Nv("orderBy",t);return PT._create(n,r)}function mC(t,e,r){if(typeof(r=Vt(r))=="string"){if(r==="")throw new de(re.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!SL(e)&&r.indexOf("/")!==-1)throw new de(re.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(ut.fromString(r));if(!Ie.isDocumentKey(n))throw new de(re.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return BI(t,new Ie(n))}if(r instanceof Br)return BI(t,r._key);throw new de(re.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Rv(r)}.`)}function yC(t,e){if(!Array.isArray(t)||t.length===0)throw new de(re.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function bM(t,e){const r=function(i,a){for(const s of i)for(const o of s.getFlattenedFilters())if(a.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new de(re.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new de(re.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class sH{convertValue(e,r="none"){switch(ls(e)){case 0:return null;case 1:return e.booleanValue;case 2:return xt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(us(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 10:return this.convertObject(e.mapValue,r);default:throw ke()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return _s(e,(i,a)=>{n[i]=this.convertValue(a,r)}),n}convertGeoPoint(e){return new bT(xt(e.latitude),xt(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=nT(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(nc(e));default:return null}}convertTimestamp(e){const r=va(e);return new Mt(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=ut.fromString(e);it(GL(n));const i=new ic(n.get(1),n.get(3)),a=new Ie(n.popFirst(5));return i.isEqual(r)||Yn(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oH(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class SM extends EM{constructor(e,r,n,i,a,s){super(e,r,n,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new _h(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(Nv("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class _h extends SM{data(e={}){return super.data(e)}}class uH{constructor(e,r,n,i){this._firestore=e,this._userDataWriter=r,this._snapshot=i,this.metadata=new Ju(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new _h(this._firestore,this._userDataWriter,n.key,n,new Ju(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new de(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(i,a){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(o=>{const u=new _h(i._firestore,i._userDataWriter,o.doc.key,o.doc,new Ju(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);return o.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(o=>a||o.type!==3).map(o=>{const u=new _h(i._firestore,i._userDataWriter,o.doc.key,o.doc,new Ju(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,c=-1;return o.type!==0&&(l=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),o.type!==1&&(s=s.add(o.doc),c=s.indexOf(o.doc.key)),{type:lH(o.type),doc:u,oldIndex:l,newIndex:c}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function lH(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ke()}}class IM extends sH{constructor(e){super(),this.firestore=e}convertBytes(e){return new qo(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Br(this.firestore,null,r)}}function cH(t,e,r,...n){t=oa(t,Br);const i=oa(t.firestore,Bo),a=IT(i);let s;return s=typeof(e=Vt(e))=="string"||e instanceof Pv?JW(a,"updateDoc",t._key,e,r,n):XW(a,"updateDoc",t._key,e),DT(i,[s.toMutation(t._key,xn.exists(!0))])}function CM(t){return DT(oa(t.firestore,Bo),[new uT(t._key,xn.none())])}function xM(t,e){const r=oa(t.firestore,Bo),n=Av(t),i=oH(t.converter,e);return DT(r,[YW(IT(t.firestore),"addDoc",n._key,i,t.converter!==null,{}).toMutation(n._key,xn.exists(!1))]).then(()=>n)}function fH(t,...e){var r,n,i;t=Vt(t);let a={includeMetadataChanges:!1},s=0;typeof e[s]!="object"||gC(e[s])||(a=e[s],s++);const o={includeMetadataChanges:a.includeMetadataChanges};if(gC(e[s])){const f=e[s];e[s]=(r=f.next)===null||r===void 0?void 0:r.bind(f),e[s+1]=(n=f.error)===null||n===void 0?void 0:n.bind(f),e[s+2]=(i=f.complete)===null||i===void 0?void 0:i.bind(f)}let u,l,c;if(t instanceof Br)l=oa(t.firestore,Bo),c=oT(t._key.path),u={next:f=>{e[s]&&e[s](hH(l,t,f))},error:e[s+1],complete:e[s+2]};else{const f=oa(t,Ts);l=oa(f.firestore,Bo),c=f._query;const h=new IM(l);u={next:d=>{e[s]&&e[s](new uH(l,h,f,d))},error:e[s+1],complete:e[s+2]},rH(t._query)}return function(h,d,v,w){const m=new FW(w),p=new _W(d,m,v);return h.asyncQueue.enqueueAndForget(async()=>gW(await fC(h),p)),()=>{m.La(),h.asyncQueue.enqueueAndForget(async()=>mW(await fC(h),p))}}(vM(l),c,o,u)}function DT(t,e){return function(n,i){const a=new sa;return n.asyncQueue.enqueueAndForget(async()=>RW(await zW(n),i,a)),a.promise}(vM(t),e)}function hH(t,e,r){const n=r.docs.get(e._key),i=new IM(t);return new SM(t,i,e._key,n,new Ju(r.hasPendingWrites,r.fromCache),e.converter)}function RM(){return new CT("serverTimestamp")}(function(e,r=!0){(function(i){eu=i})(Qo),Ao(new is("firestore",(n,{instanceIdentifier:i,options:a})=>{const s=n.getProvider("app").getImmediate(),o=new Bo(new oj(n.getProvider("auth-internal")),new fj(n.getProvider("app-check-internal")),function(l,c){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new de(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ic(l.options.projectId,c)}(s,i),s);return a=Object.assign({useFetchStreams:r},a),o._setSettings(a),o},"PUBLIC").setMultipleInstances(!0)),aa(NI,"4.4.2",e),aa(NI,"4.4.2","esm2017")})();const dH={apiKey:"AIzaSyBCTr3eFaR0F_chJUfDz0R6F1mWM02ONRg",authDomain:"desk-d2f81.firebaseapp.com",projectId:"desk-d2f81",storageBucket:"desk-d2f81.appspot.com",messagingSenderId:"535586869733",appId:"1:535586869733:web:e604fff3c1cc15ee2a9f0c",measurementId:"G-BLE1W3PJVF"},kM=AO(dH),OT=Q3(kM),iu=HW(kM),NT=()=>{const[t,e]=ie.useState({initialized:!1,user:null});return ie.useEffect(()=>MU(OT,r=>e({initialized:!0,user:r})),[]),t},Nt=({className:t,type:e,...r})=>U.jsx("button",{className:`${t} Button ButtonShared`,type:e??"button",...r}),cc=({className:t,...e})=>U.jsx("input",{className:`${t} TextInput`,...e}),vH=()=>{const[t,e]=ie.useState(""),[r,n]=ie.useState(""),[i,a]=ie.useState(null),s=async()=>{try{await OU(OT,t,r)}catch(o){if(!(o instanceof Zn))throw o;a(o)}};return U.jsxs(U.Fragment,{children:[U.jsx("h1",{children:"Sign In"}),i==null?void 0:i.message,U.jsxs("form",{className:"SignInPage__form",onSubmit:o=>{o.preventDefault(),s()},children:[U.jsx(cc,{value:t,onChange:o=>e(o.target.value),required:!0,placeholder:"Email"}),U.jsx(cc,{type:"password",value:r,onChange:o=>n(o.target.value),required:!0,placeholder:"Password"}),U.jsx(Nt,{type:"submit",children:"Sign In"})]})]})},au=()=>{const{user:t}=NT();return ie.useMemo(()=>t&&["users",t.uid],[t])},pH=t=>{const[e,r]=ie.useState(null);return ie.useEffect(()=>{if(t!==null)return fH(t,n=>{const i=[];n.forEach(a=>{i.push({...a.data(),id:a.id})}),r(i)})},[t]),e},AM=(t,e)=>{const r=au(),n=ie.useMemo(()=>r&&nH(TT(iu,...r,...t),...e),[r,t,e]);return pH(n)},PM=ie.createContext(null),gH=["capture-items"],mH=[aH("createdAt","desc")];function yH({children:t}){const e=AM(gH,mH);return U.jsx(PM.Provider,{value:e,children:t})}const LT=ie.createContext({get showDoneTasks(){throw new Error("TasksFiltersContext not initialized")},get toggleShowDoneTasks(){throw new Error("TaskFiltersContext not initialized")}});function wH({children:t}){const[e,r]=ie.useState(!1),n=ie.useCallback(()=>r(i=>!i),[]);return U.jsx(LT.Provider,{value:{showDoneTasks:e,toggleShowDoneTasks:n},children:t})}const _H=()=>{const{showDoneTasks:t}=ie.useContext(LT);return ie.useMemo(()=>t?[]:[iH("status","!=","done")],[t])},DM=ie.createContext(null),EH=["tasks"];function TH({children:t}){const e=_H(),r=AM(EH,e),n=ie.useMemo(()=>r&&r.sort((i,a)=>i.createdAt===null||a.createdAt===null?0:i.createdAt.seconds-a.createdAt.seconds),[r]);return U.jsx(DM.Provider,{value:n,children:t})}const OM=()=>ie.useContext(PM),NM=()=>{const t=OM();return t===null?null:t.length},bH=()=>{const t=au();return ie.useCallback(e=>t&&xM(TT(iu,...t,"capture-items"),{...e,createdAt:RM()}),[t])},SH=()=>{const[t,e]=ie.useState(""),r=NM(),n=bH();return r===null?U.jsx(U.Fragment,{children:"Loading..."}):U.jsxs(U.Fragment,{children:[U.jsx("h1",{children:"Capture"}),U.jsxs("form",{className:"Capture__form",onSubmit:i=>{i.preventDefault(),t.trim()!==""&&(n({value:t}),e(""))},children:[U.jsx(cc,{autoFocus:!0,value:t,onChange:i=>e(i.target.value)}),U.jsx(Nt,{type:"submit",children:"OK"})]}),U.jsxs("p",{children:["Capture Items: ",r]})]})},MT=t=>{const e=Ia();return U.jsx(Nt,{onClick:()=>e(-1),...t})},fi=({className:t,...e})=>U.jsx(rz,{className:`${t} ButtonShared ButtonLink`,...e}),Kc=({className:t,children:e})=>U.jsx("ul",{className:`${t} ButtonGroup`,children:ie.Children.map(e,r=>U.jsx("li",{children:r}))}),fc=({tags:t,onTagClick:e})=>U.jsx("ul",{className:"TagList",children:t.map(r=>U.jsx("li",{children:U.jsx(Nt,{className:"TagList__Tag",onClick:e&&(()=>e(r)),children:r})},r))}),LM=()=>{const t=au();return ie.useCallback(async({id:e,...r})=>{t&&await cH(Av(iu,...t,"tasks",e),r)},[t])},IH=()=>{const t=au();return ie.useCallback(async e=>{t&&await CM(Av(iu,...t,"tasks",e))},[t])},su=()=>ie.useContext(DM),MM=t=>{const e=su();if(t!==void 0)return e===null?null:e.find(r=>r.id===t)},CH=({tags:t})=>t.length===0?null:U.jsxs(U.Fragment,{children:[U.jsx("label",{children:"Tags:"}),U.jsx(fc,{tags:t})]}),xH=({dependencies:t})=>t===void 0||t.length===0?null:U.jsxs(U.Fragment,{children:[U.jsx("label",{children:"Dependencies:"}),U.jsx(fc,{tags:t})]}),RH=({id:t})=>{const e=MM(t),r=LM(),n=IH();if(e===void 0)return U.jsx(gE,{to:".."});if(e===null)return U.jsx(U.Fragment,{children:"Loading..."});const{title:i,tags:a,dependencies:s}=e;return U.jsx(U.Fragment,{children:U.jsxs("div",{className:"Task__content",children:[U.jsx("p",{className:"Task__title",children:i}),U.jsxs("div",{className:"Task__fields",children:[U.jsx(CH,{tags:a}),U.jsx(xH,{dependencies:s})]}),U.jsxs(Kc,{children:[U.jsx(Nt,{onClick:()=>r({...e,status:"done"}),children:"Done"}),U.jsx(fi,{to:"edit",children:"Edit"}),U.jsx(Nt,{onClick:()=>n(t),children:"Delete"}),U.jsx(MT,{children:"Back"})]})]})})},kH=()=>{const{id:t}=mO();return t===void 0?U.jsx(gE,{to:".."}):U.jsx(RH,{id:t})},AH=({task:{id:t,title:e,tags:r,status:n}})=>U.jsx("li",{className:"TaskList__Task"+(n==="done"?" TaskList__Task--Done":""),children:U.jsxs(fi,{to:t,children:[e,r.length!==0&&U.jsx(fc,{tags:r})]})},t),PH=()=>{const t=su(),e=Ia(),{toggleShowDoneTasks:r}=ie.useContext(LT);return ie.useEffect(()=>{(t==null?void 0:t.length)===0&&e("/")},[e,t]),t===null?U.jsx(U.Fragment,{children:"Loading..."}):U.jsxs(U.Fragment,{children:[U.jsx(Nt,{onClick:r,children:"Show Done Tasks"}),U.jsx("ul",{className:"TaskList",children:t.map(n=>U.jsx(AH,{task:n},n.id))})]})},DH=()=>U.jsx(PH,{});function OH(){const t=su();return ie.useMemo(()=>{if(t===null)return null;const e=t.flatMap(r=>r.tags);return[...new Set(e)]},[t])}function NH({existingTags:t}){return U.jsx("datalist",{id:"existing-tags",children:t==null?void 0:t.map(e=>U.jsx("option",{children:e},e))})}const LH=({onNewTag:t})=>{const[e,r]=ie.useState(""),n=OH();return U.jsxs(U.Fragment,{children:[U.jsx(cc,{onKeyDown:i=>{i.key==="Enter"&&(i.preventDefault(),e!==""&&(t(e),r("")))},onChange:i=>{const{value:a}=i.target;if(n!=null&&n.some(s=>s===a)){t(a),r("");return}r(a)},value:e,id:"new-tag",list:"existing-tags"}),U.jsx(NH,{existingTags:n})]})},MH=({addDependency:t})=>{const e=su(),r=ie.useRef(null);return e===null?U.jsx(U.Fragment,{children:"Loading..."}):U.jsxs("div",{children:[U.jsx("select",{ref:r,id:"new-dependency",children:e.map(n=>U.jsx("option",{value:n.id,children:n.title},n.id))}),U.jsx(Nt,{onClick:()=>{var n;r.current!==null&&t((n=r.current)==null?void 0:n.value)},children:"Add"})]})},wC=(t=[])=>{const[e,r]=ie.useState(t),n=ie.useCallback(a=>r(s=>[...new Set([...s,a])]),[]),i=ie.useCallback(a=>r(s=>s.filter(o=>o!==a)),[]);return{set:e,add:n,remove:i}},VM=({task:t,onSubmit:e})=>{const[r,n]=ie.useState(t.title??""),{set:i,add:a,remove:s}=wC(t.tags),{set:o,add:u,remove:l}=wC(t.dependencies);return U.jsxs("form",{className:"TaskEdit__Form",onSubmit:c=>{c.preventDefault(),r!==""&&e({...t,title:r,tags:i,dependencies:o})},children:[U.jsx("label",{className:"TaskEdit__Label",htmlFor:"title",children:"Title:"}),U.jsx(cc,{id:"title",value:r,onChange:c=>n(c.target.value)}),U.jsx("label",{className:"TaskEdit__Label",htmlFor:"new-tag",children:"Add Tag:"}),U.jsx(LH,{onNewTag:a}),U.jsx("label",{className:"TaskEdit__Label",children:"Tags:"}),U.jsx(fc,{tags:i,onTagClick:s}),U.jsx("label",{className:"TaskEdit__Label",htmlFor:"new-dependency",children:"Add Dependency:"}),U.jsx(MH,{addDependency:u}),U.jsx("label",{className:"TaskEdit__Label",children:"Dependencies:"}),U.jsx(fc,{tags:o,onTagClick:l}),U.jsxs(Kc,{className:"TaskEdit__Buttons",children:[U.jsx(Nt,{type:"submit",children:"Confirm"}),U.jsx(MT,{children:"Cancel"})]})]})},VH=()=>{const{id:t}=mO(),e=MM(t),r=LM(),n=Ia();return t===void 0||e===void 0?U.jsx(gE,{to:".."}):e===null?U.jsx(U.Fragment,{children:"Loading..."}):U.jsx(VM,{task:e,onSubmit:i=>{r(i),n(-1)}})},FH=()=>U.jsxs(U.Fragment,{children:[U.jsx("h1",{children:"Engage"}),U.jsxs(mE,{children:[U.jsx(an,{path:"/:id/edit",element:U.jsx(VH,{})}),U.jsx(an,{path:"/:id",element:U.jsx(kH,{})}),U.jsx(an,{index:!0,element:U.jsx(DH,{})})]})]}),FM=()=>{const t=OM(),e=t===null,r=t===null||t.length===0?null:t[0];return{isLoading:e,latestCaptureItem:r}},VT=()=>{const{latestCaptureItem:t}=FM(),e=au();return ie.useCallback(async()=>{t===null||e===null||await CM(Av(iu,...e,"capture-items",t.id))},[e,t])},BH=()=>{const t=VT();return U.jsxs(Kc,{children:[U.jsx(Nt,{onClick:t,children:"Delete"}),U.jsx(fi,{to:"do",children:"Do"}),U.jsx(Nt,{disabled:!0,children:"Delegate"}),U.jsx(fi,{to:"defer",children:"Defer"}),U.jsx(Nt,{disabled:!0,children:"Archive"}),U.jsx(Nt,{disabled:!0,children:"Incubate"})]})},qH=(t,e,r=!0)=>{ie.useEffect(()=>{if(!r)return;const n=setInterval(t,e);return()=>clearInterval(n)},[t,r,e])},$H=t=>{const[e,r]=ie.useState(t);return qH(()=>r(n=>n-1),1e3,e>0),e},_C=t=>Math.floor(t).toString().padStart(2,"0"),zH=t=>`${_C(t/60)}:${_C(t%60)}`,UH=()=>{const t=$H(120);return U.jsx("p",{children:zH(t)})},jH=()=>{const t=VT(),e=Ia();return U.jsxs("div",{children:[U.jsx(UH,{}),U.jsxs(Kc,{children:[U.jsx(Nt,{onClick:()=>{t(),e(-1)},children:"Done"}),U.jsx(MT,{children:"Cancel"})]})]})},WH=()=>{const t=au();return ie.useCallback(async e=>{if(!t)return;const r={...e,createdAt:RM(),status:"not started"};await xM(TT(iu,...t,"tasks"),r)},[t])},HH=({captureItem:t})=>{const e=Ia(),r=VT(),n=WH();return U.jsx(VM,{task:{title:t.value},onSubmit:i=>{n(i),r(),e(-1)}})},GH=()=>{const{isLoading:t,latestCaptureItem:e}=FM(),r=Ia();return ie.useEffect(()=>{!t&&e===null&&r("/")},[t,e,r]),t?U.jsx(U.Fragment,{children:"Loading..."}):e===null?null:U.jsxs("div",{children:[U.jsx("h1",{children:"Process"}),U.jsx("p",{children:e.value}),U.jsxs(mE,{children:[U.jsx(an,{index:!0,element:U.jsx(BH,{})}),U.jsx(an,{path:"do",element:U.jsx(jH,{})}),U.jsx(an,{path:"defer",element:U.jsx(HH,{captureItem:e})})]})]})};function KH(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Jr=KH,QH=typeof Us=="object"&&Us&&Us.Object===Object&&Us,BM=QH,YH=BM,XH=typeof self=="object"&&self&&self.Object===Object&&self,JH=YH||XH||Function("return this")(),Nn=JH,ZH=Nn,eG=function(){return ZH.Date.now()},qM=eG,tG=/\s/;function rG(t){for(var e=t.length;e--&&tG.test(t.charAt(e)););return e}var nG=rG,iG=nG,aG=/^\s+/;function sG(t){return t&&t.slice(0,iG(t)+1).replace(aG,"")}var oG=sG,uG=Nn,lG=uG.Symbol,ou=lG,EC=ou,$M=Object.prototype,cG=$M.hasOwnProperty,fG=$M.toString,Lu=EC?EC.toStringTag:void 0;function hG(t){var e=cG.call(t,Lu),r=t[Lu];try{t[Lu]=void 0;var n=!0}catch{}var i=fG.call(t);return n&&(e?t[Lu]=r:delete t[Lu]),i}var dG=hG,vG=Object.prototype,pG=vG.toString;function gG(t){return pG.call(t)}var mG=gG,TC=ou,yG=dG,wG=mG,_G="[object Null]",EG="[object Undefined]",bC=TC?TC.toStringTag:void 0;function TG(t){return t==null?t===void 0?EG:_G:bC&&bC in Object(t)?yG(t):wG(t)}var bs=TG;function bG(t){return t!=null&&typeof t=="object"}var ei=bG,SG=bs,IG=ei,CG="[object Symbol]";function xG(t){return typeof t=="symbol"||IG(t)&&SG(t)==CG}var Ss=xG,RG=oG,SC=Jr,kG=Ss,IC=NaN,AG=/^[-+]0x[0-9a-f]+$/i,PG=/^0b[01]+$/i,DG=/^0o[0-7]+$/i,OG=parseInt;function NG(t){if(typeof t=="number")return t;if(kG(t))return IC;if(SC(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=SC(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=RG(t);var r=PG.test(t);return r||DG.test(t)?OG(t.slice(2),r?2:8):AG.test(t)?IC:+t}var zM=NG,LG=Jr,sg=qM,CC=zM,MG="Expected a function",VG=Math.max,FG=Math.min;function BG(t,e,r){var n,i,a,s,o,u,l=0,c=!1,f=!1,h=!0;if(typeof t!="function")throw new TypeError(MG);e=CC(e)||0,LG(r)&&(c=!!r.leading,f="maxWait"in r,a=f?VG(CC(r.maxWait)||0,e):a,h="trailing"in r?!!r.trailing:h);function d(b){var E=n,I=i;return n=i=void 0,l=b,s=t.apply(I,E),s}function v(b){return l=b,o=setTimeout(p,e),c?d(b):s}function w(b){var E=b-u,I=b-l,S=e-E;return f?FG(S,a-I):S}function m(b){var E=b-u,I=b-l;return u===void 0||E>=e||E<0||f&&I>=a}function p(){var b=sg();if(m(b))return g(b);o=setTimeout(p,w(b))}function g(b){return o=void 0,h&&n?d(b):(n=i=void 0,s)}function y(){o!==void 0&&clearTimeout(o),l=0,n=u=i=o=void 0}function _(){return o===void 0?s:g(sg())}function T(){var b=sg(),E=m(b);if(n=arguments,i=this,u=b,E){if(o===void 0)return v(u);if(f)return clearTimeout(o),o=setTimeout(p,e),d(u)}return o===void 0&&(o=setTimeout(p,e)),s}return T.cancel=y,T.flush=_,T}var qG=BG,UM={exports:{}};(function(t,e){(function(){var r,n,i,a,s,o,u,l,c,f,h,d,v,w,m;i=Math.floor,f=Math.min,n=function(p,g){return p<g?-1:p>g?1:0},c=function(p,g,y,_,T){var b;if(y==null&&(y=0),T==null&&(T=n),y<0)throw new Error("lo must be non-negative");for(_==null&&(_=p.length);y<_;)b=i((y+_)/2),T(g,p[b])<0?_=b:y=b+1;return[].splice.apply(p,[y,y-y].concat(g)),g},o=function(p,g,y){return y==null&&(y=n),p.push(g),w(p,0,p.length-1,y)},s=function(p,g){var y,_;return g==null&&(g=n),y=p.pop(),p.length?(_=p[0],p[0]=y,m(p,0,g)):_=y,_},l=function(p,g,y){var _;return y==null&&(y=n),_=p[0],p[0]=g,m(p,0,y),_},u=function(p,g,y){var _;return y==null&&(y=n),p.length&&y(p[0],g)<0&&(_=[p[0],g],g=_[0],p[0]=_[1],m(p,0,y)),g},a=function(p,g){var y,_,T,b,E,I;for(g==null&&(g=n),b=(function(){I=[];for(var S=0,C=i(p.length/2);0<=C?S<C:S>C;0<=C?S++:S--)I.push(S);return I}).apply(this).reverse(),E=[],_=0,T=b.length;_<T;_++)y=b[_],E.push(m(p,y,g));return E},v=function(p,g,y){var _;if(y==null&&(y=n),_=p.indexOf(g),_!==-1)return w(p,0,_,y),m(p,_,y)},h=function(p,g,y){var _,T,b,E,I;if(y==null&&(y=n),T=p.slice(0,g),!T.length)return T;for(a(T,y),I=p.slice(g),b=0,E=I.length;b<E;b++)_=I[b],u(T,_,y);return T.sort(y).reverse()},d=function(p,g,y){var _,T,b,E,I,S,C,R,x;if(y==null&&(y=n),g*10<=p.length){if(b=p.slice(0,g).sort(y),!b.length)return b;for(T=b[b.length-1],C=p.slice(g),E=0,S=C.length;E<S;E++)_=C[E],y(_,T)<0&&(c(b,_,0,null,y),b.pop(),T=b[b.length-1]);return b}for(a(p,y),x=[],I=0,R=f(g,p.length);0<=R?I<R:I>R;0<=R?++I:--I)x.push(s(p,y));return x},w=function(p,g,y,_){var T,b,E;for(_==null&&(_=n),T=p[y];y>g;){if(E=y-1>>1,b=p[E],_(T,b)<0){p[y]=b,y=E;continue}break}return p[y]=T},m=function(p,g,y){var _,T,b,E,I;for(y==null&&(y=n),T=p.length,I=g,b=p[g],_=2*g+1;_<T;)E=_+1,E<T&&!(y(p[_],p[E])<0)&&(_=E),p[g]=p[_],g=_,_=2*g+1;return p[g]=b,w(p,I,g,y)},r=function(){p.push=o,p.pop=s,p.replace=l,p.pushpop=u,p.heapify=a,p.updateItem=v,p.nlargest=h,p.nsmallest=d;function p(g){this.cmp=g??n,this.nodes=[]}return p.prototype.push=function(g){return o(this.nodes,g,this.cmp)},p.prototype.pop=function(){return s(this.nodes,this.cmp)},p.prototype.peek=function(){return this.nodes[0]},p.prototype.contains=function(g){return this.nodes.indexOf(g)!==-1},p.prototype.replace=function(g){return l(this.nodes,g,this.cmp)},p.prototype.pushpop=function(g){return u(this.nodes,g,this.cmp)},p.prototype.heapify=function(){return a(this.nodes,this.cmp)},p.prototype.updateItem=function(g){return v(this.nodes,g,this.cmp)},p.prototype.clear=function(){return this.nodes=[]},p.prototype.empty=function(){return this.nodes.length===0},p.prototype.size=function(){return this.nodes.length},p.prototype.clone=function(){var g;return g=new p,g.nodes=this.nodes.slice(0),g},p.prototype.toArray=function(){return this.nodes.slice(0)},p.prototype.insert=p.prototype.push,p.prototype.top=p.prototype.peek,p.prototype.front=p.prototype.peek,p.prototype.has=p.prototype.contains,p.prototype.copy=p.prototype.clone,p}(),function(p,g){return t.exports=g()}(this,function(){return r})}).call(Us)})(UM);var $G=UM.exports,zG=$G,UG=Array.isArray,It=UG,jG=It,WG=Ss,HG=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,GG=/^\w*$/;function KG(t,e){if(jG(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||WG(t)?!0:GG.test(t)||!HG.test(t)||e!=null&&t in Object(e)}var FT=KG,og,xC;function Qc(){if(xC)return og;xC=1;var t=bs,e=Jr,r="[object AsyncFunction]",n="[object Function]",i="[object GeneratorFunction]",a="[object Proxy]";function s(o){if(!e(o))return!1;var u=t(o);return u==n||u==i||u==r||u==a}return og=s,og}var QG=Nn,YG=QG["__core-js_shared__"],XG=YG,ug=XG,RC=function(){var t=/[^.]+$/.exec(ug&&ug.keys&&ug.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function JG(t){return!!RC&&RC in t}var ZG=JG,lg,kC;function jM(){if(kC)return lg;kC=1;var t=Function.prototype,e=t.toString;function r(n){if(n!=null){try{return e.call(n)}catch{}try{return n+""}catch{}}return""}return lg=r,lg}var eK=Qc(),tK=ZG,rK=Jr,nK=jM(),iK=/[\\^$.*+?()[\]{}|]/g,aK=/^\[object .+?Constructor\]$/,sK=Function.prototype,oK=Object.prototype,uK=sK.toString,lK=oK.hasOwnProperty,cK=RegExp("^"+uK.call(lK).replace(iK,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function fK(t){if(!rK(t)||tK(t))return!1;var e=eK(t)?cK:aK;return e.test(nK(t))}var hK=fK;function dK(t,e){return t==null?void 0:t[e]}var vK=dK,pK=hK,gK=vK;function mK(t,e){var r=gK(t,e);return pK(r)?r:void 0}var Is=mK,yK=Is,wK=yK(Object,"create"),Mv=wK,AC=Mv;function _K(){this.__data__=AC?AC(null):{},this.size=0}var EK=_K;function TK(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var bK=TK,SK=Mv,IK="__lodash_hash_undefined__",CK=Object.prototype,xK=CK.hasOwnProperty;function RK(t){var e=this.__data__;if(SK){var r=e[t];return r===IK?void 0:r}return xK.call(e,t)?e[t]:void 0}var kK=RK,AK=Mv,PK=Object.prototype,DK=PK.hasOwnProperty;function OK(t){var e=this.__data__;return AK?e[t]!==void 0:DK.call(e,t)}var NK=OK,LK=Mv,MK="__lodash_hash_undefined__";function VK(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=LK&&e===void 0?MK:e,this}var FK=VK,BK=EK,qK=bK,$K=kK,zK=NK,UK=FK;function uu(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}uu.prototype.clear=BK;uu.prototype.delete=qK;uu.prototype.get=$K;uu.prototype.has=zK;uu.prototype.set=UK;var jK=uu;function WK(){this.__data__=[],this.size=0}var HK=WK;function GK(t,e){return t===e||t!==t&&e!==e}var lu=GK,KK=lu;function QK(t,e){for(var r=t.length;r--;)if(KK(t[r][0],e))return r;return-1}var Vv=QK,YK=Vv,XK=Array.prototype,JK=XK.splice;function ZK(t){var e=this.__data__,r=YK(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():JK.call(e,r,1),--this.size,!0}var e8=ZK,t8=Vv;function r8(t){var e=this.__data__,r=t8(e,t);return r<0?void 0:e[r][1]}var n8=r8,i8=Vv;function a8(t){return i8(this.__data__,t)>-1}var s8=a8,o8=Vv;function u8(t,e){var r=this.__data__,n=o8(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}var l8=u8,c8=HK,f8=e8,h8=n8,d8=s8,v8=l8;function cu(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}cu.prototype.clear=c8;cu.prototype.delete=f8;cu.prototype.get=h8;cu.prototype.has=d8;cu.prototype.set=v8;var Fv=cu,p8=Is,g8=Nn,m8=p8(g8,"Map"),BT=m8,PC=jK,y8=Fv,w8=BT;function _8(){this.size=0,this.__data__={hash:new PC,map:new(w8||y8),string:new PC}}var E8=_8;function T8(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var b8=T8,S8=b8;function I8(t,e){var r=t.__data__;return S8(e)?r[typeof e=="string"?"string":"hash"]:r.map}var Bv=I8,C8=Bv;function x8(t){var e=C8(this,t).delete(t);return this.size-=e?1:0,e}var R8=x8,k8=Bv;function A8(t){return k8(this,t).get(t)}var P8=A8,D8=Bv;function O8(t){return D8(this,t).has(t)}var N8=O8,L8=Bv;function M8(t,e){var r=L8(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}var V8=M8,F8=E8,B8=R8,q8=P8,$8=N8,z8=V8;function fu(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}fu.prototype.clear=F8;fu.prototype.delete=B8;fu.prototype.get=q8;fu.prototype.has=$8;fu.prototype.set=z8;var qT=fu,WM=qT,U8="Expected a function";function $T(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(U8);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],a=r.cache;if(a.has(i))return a.get(i);var s=t.apply(this,n);return r.cache=a.set(i,s)||a,s};return r.cache=new($T.Cache||WM),r}$T.Cache=WM;var j8=$T,W8=j8,H8=500;function G8(t){var e=W8(t,function(n){return r.size===H8&&r.clear(),n}),r=e.cache;return e}var K8=G8,Q8=K8,Y8=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,X8=/\\(\\)?/g,J8=Q8(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(Y8,function(r,n,i,a){e.push(i?a.replace(X8,"$1"):n||r)}),e}),HM=J8;function Z8(t,e){for(var r=-1,n=t==null?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}var Yc=Z8,DC=ou,e7=Yc,t7=It,r7=Ss,n7=1/0,OC=DC?DC.prototype:void 0,NC=OC?OC.toString:void 0;function GM(t){if(typeof t=="string")return t;if(t7(t))return e7(t,GM)+"";if(r7(t))return NC?NC.call(t):"";var e=t+"";return e=="0"&&1/t==-n7?"-0":e}var i7=GM,a7=i7;function s7(t){return t==null?"":a7(t)}var zT=s7,o7=It,u7=FT,l7=HM,c7=zT;function f7(t,e){return o7(t)?t:u7(t,e)?[t]:l7(c7(t))}var qv=f7,h7=Ss,d7=1/0;function v7(t){if(typeof t=="string"||h7(t))return t;var e=t+"";return e=="0"&&1/t==-d7?"-0":e}var hu=v7,p7=qv,g7=hu;function m7(t,e){e=p7(e,t);for(var r=0,n=e.length;t!=null&&r<n;)t=t[g7(e[r++])];return r&&r==n?t:void 0}var $v=m7,y7=$v;function w7(t,e,r){var n=t==null?void 0:y7(t,e);return n===void 0?r:n}var KM=w7,_7=Is,E7=function(){try{var t=_7(Object,"defineProperty");return t({},"",{}),t}catch{}}(),QM=E7,LC=QM;function T7(t,e,r){e=="__proto__"&&LC?LC(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}var zv=T7,b7=zv,S7=lu,I7=Object.prototype,C7=I7.hasOwnProperty;function x7(t,e,r){var n=t[e];(!(C7.call(t,e)&&S7(n,r))||r===void 0&&!(e in t))&&b7(t,e,r)}var Uv=x7,R7=9007199254740991,k7=/^(?:0|[1-9]\d*)$/;function A7(t,e){var r=typeof t;return e=e??R7,!!e&&(r=="number"||r!="symbol"&&k7.test(t))&&t>-1&&t%1==0&&t<e}var jv=A7,P7=Uv,D7=qv,O7=jv,MC=Jr,N7=hu;function L7(t,e,r,n){if(!MC(t))return t;e=D7(e,t);for(var i=-1,a=e.length,s=a-1,o=t;o!=null&&++i<a;){var u=N7(e[i]),l=r;if(u==="__proto__"||u==="constructor"||u==="prototype")return t;if(i!=s){var c=o[u];l=n?n(c,u,o):void 0,l===void 0&&(l=MC(c)?c:O7(e[i+1])?[]:{})}P7(o,u,l),o=o[u]}return t}var YM=L7,M7=YM;function V7(t,e,r){return t==null?t:M7(t,e,r)}var F7=V7;function B7(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}var UT=B7,q7=Yc,$7=UT,z7=It,U7=Ss,j7=HM,W7=hu,H7=zT;function G7(t){return z7(t)?q7(t,W7):U7(t)?[t]:$7(j7(H7(t)))}var K7=G7,Q7=qG,Y7=zG,X7=KM,J7=F7,Z7=K7;function Xc(t){return t&&typeof t=="object"&&"default"in t?t:{default:t}}var Wv=Xc(Q7),Jc=Xc(Y7),eQ=Xc(X7),tQ=Xc(J7),rQ=Xc(Z7);function Ft(t){"@babel/helpers - typeof";return Ft=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ft(t)}function jT(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function VC(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function WT(t,e,r){return e&&VC(t.prototype,e),r&&VC(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function XM(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function wn(t,e){return nQ(t)||iQ(t,e)||aQ(t,e)||sQ()}function nQ(t){if(Array.isArray(t))return t}function iQ(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n=[],i=!0,a=!1,s,o;try{for(r=r.call(t);!(i=(s=r.next()).done)&&(n.push(s.value),!(e&&n.length===e));i=!0);}catch(u){a=!0,o=u}finally{try{!i&&r.return!=null&&r.return()}finally{if(a)throw o}}return n}}function aQ(t,e){if(t){if(typeof t=="string")return FC(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return FC(t,e)}}function FC(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function sQ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Pt=typeof window>"u"?null:window,BC=Pt?Pt.navigator:null;Pt&&Pt.document;var oQ=Ft(""),JM=Ft({}),uQ=Ft(function(){}),lQ=typeof HTMLElement>"u"?"undefined":Ft(HTMLElement),Zc=function(e){return e&&e.instanceString&&pt(e.instanceString)?e.instanceString():null},Te=function(e){return e!=null&&Ft(e)==oQ},pt=function(e){return e!=null&&Ft(e)===uQ},tt=function(e){return!Gr(e)&&(Array.isArray?Array.isArray(e):e!=null&&e instanceof Array)},He=function(e){return e!=null&&Ft(e)===JM&&!tt(e)&&e.constructor===Object},cQ=function(e){return e!=null&&Ft(e)===JM},le=function(e){return e!=null&&Ft(e)===Ft(1)&&!isNaN(e)},fQ=function(e){return le(e)&&Math.floor(e)===e},Ed=function(e){if(lQ!=="undefined")return e!=null&&e instanceof HTMLElement},Gr=function(e){return ef(e)||ZM(e)},ef=function(e){return Zc(e)==="collection"&&e._private.single},ZM=function(e){return Zc(e)==="collection"&&!e._private.single},HT=function(e){return Zc(e)==="core"},eV=function(e){return Zc(e)==="stylesheet"},hQ=function(e){return Zc(e)==="event"},ga=function(e){return e==null?!0:!!(e===""||e.match(/^\s+$/))},dQ=function(e){return typeof HTMLElement>"u"?!1:e instanceof HTMLElement},vQ=function(e){return He(e)&&le(e.x1)&&le(e.x2)&&le(e.y1)&&le(e.y2)},pQ=function(e){return cQ(e)&&pt(e.then)},gQ=function(){return BC&&BC.userAgent.match(/msie|trident|edge/i)},hc=function(e,r){r||(r=function(){if(arguments.length===1)return arguments[0];if(arguments.length===0)return"undefined";for(var a=[],s=0;s<arguments.length;s++)a.push(arguments[s]);return a.join("$")});var n=function i(){var a=this,s=arguments,o,u=r.apply(a,s),l=i.cache;return(o=l[u])||(o=l[u]=e.apply(a,s)),o};return n.cache={},n},GT=hc(function(t){return t.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}),Hv=hc(function(t){return t.replace(/(-\w)/g,function(e){return e[1].toUpperCase()})}),tV=hc(function(t,e){return t+e[0].toUpperCase()+e.substring(1)},function(t,e){return t+"$"+e}),qC=function(e){return ga(e)?e:e.charAt(0).toUpperCase()+e.substring(1)},Lt="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",mQ="rgb[a]?\\(("+Lt+"[%]?)\\s*,\\s*("+Lt+"[%]?)\\s*,\\s*("+Lt+"[%]?)(?:\\s*,\\s*("+Lt+"))?\\)",yQ="rgb[a]?\\((?:"+Lt+"[%]?)\\s*,\\s*(?:"+Lt+"[%]?)\\s*,\\s*(?:"+Lt+"[%]?)(?:\\s*,\\s*(?:"+Lt+"))?\\)",wQ="hsl[a]?\\(("+Lt+")\\s*,\\s*("+Lt+"[%])\\s*,\\s*("+Lt+"[%])(?:\\s*,\\s*("+Lt+"))?\\)",_Q="hsl[a]?\\((?:"+Lt+")\\s*,\\s*(?:"+Lt+"[%])\\s*,\\s*(?:"+Lt+"[%])(?:\\s*,\\s*(?:"+Lt+"))?\\)",EQ="\\#[0-9a-fA-F]{3}",TQ="\\#[0-9a-fA-F]{6}",rV=function(e,r){return e<r?-1:e>r?1:0},bQ=function(e,r){return-1*rV(e,r)},xe=Object.assign!=null?Object.assign.bind(Object):function(t){for(var e=arguments,r=1;r<e.length;r++){var n=e[r];if(n!=null)for(var i=Object.keys(n),a=0;a<i.length;a++){var s=i[a];t[s]=n[s]}}return t},SQ=function(e){if(!(!(e.length===4||e.length===7)||e[0]!=="#")){var r=e.length===4,n,i,a,s=16;return r?(n=parseInt(e[1]+e[1],s),i=parseInt(e[2]+e[2],s),a=parseInt(e[3]+e[3],s)):(n=parseInt(e[1]+e[2],s),i=parseInt(e[3]+e[4],s),a=parseInt(e[5]+e[6],s)),[n,i,a]}},IQ=function(e){var r,n,i,a,s,o,u,l;function c(v,w,m){return m<0&&(m+=1),m>1&&(m-=1),m<1/6?v+(w-v)*6*m:m<1/2?w:m<2/3?v+(w-v)*(2/3-m)*6:v}var f=new RegExp("^"+wQ+"$").exec(e);if(f){if(n=parseInt(f[1]),n<0?n=(360- -1*n%360)%360:n>360&&(n=n%360),n/=360,i=parseFloat(f[2]),i<0||i>100||(i=i/100,a=parseFloat(f[3]),a<0||a>100)||(a=a/100,s=f[4],s!==void 0&&(s=parseFloat(s),s<0||s>1)))return;if(i===0)o=u=l=Math.round(a*255);else{var h=a<.5?a*(1+i):a+i-a*i,d=2*a-h;o=Math.round(255*c(d,h,n+1/3)),u=Math.round(255*c(d,h,n)),l=Math.round(255*c(d,h,n-1/3))}r=[o,u,l,s]}return r},CQ=function(e){var r,n=new RegExp("^"+mQ+"$").exec(e);if(n){r=[];for(var i=[],a=1;a<=3;a++){var s=n[a];if(s[s.length-1]==="%"&&(i[a]=!0),s=parseFloat(s),i[a]&&(s=s/100*255),s<0||s>255)return;r.push(Math.floor(s))}var o=i[1]||i[2]||i[3],u=i[1]&&i[2]&&i[3];if(o&&!u)return;var l=n[4];if(l!==void 0){if(l=parseFloat(l),l<0||l>1)return;r.push(l)}}return r},xQ=function(e){return kQ[e.toLowerCase()]},RQ=function(e){return(tt(e)?e:null)||xQ(e)||SQ(e)||CQ(e)||IQ(e)},kQ={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},nV=function(e){for(var r=e.map,n=e.keys,i=n.length,a=0;a<i;a++){var s=n[a];if(He(s))throw Error("Tried to set map with object key");a<n.length-1?(r[s]==null&&(r[s]={}),r=r[s]):r[s]=e.value}},iV=function(e){for(var r=e.map,n=e.keys,i=n.length,a=0;a<i;a++){var s=n[a];if(He(s))throw Error("Tried to get map with object key");if(r=r[s],r==null)return r}return r},cg=Pt?Pt.performance:null,aV=cg&&cg.now?function(){return cg.now()}:function(){return Date.now()},AQ=function(){if(Pt){if(Pt.requestAnimationFrame)return function(t){Pt.requestAnimationFrame(t)};if(Pt.mozRequestAnimationFrame)return function(t){Pt.mozRequestAnimationFrame(t)};if(Pt.webkitRequestAnimationFrame)return function(t){Pt.webkitRequestAnimationFrame(t)};if(Pt.msRequestAnimationFrame)return function(t){Pt.msRequestAnimationFrame(t)}}return function(t){t&&setTimeout(function(){t(aV())},1e3/60)}}(),Td=function(e){return AQ(e)},_i=aV,io=9261,sV=65599,Zu=5381,oV=function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:io,n=r,i;i=e.next(),!i.done;)n=n*sV+i.value|0;return n},dc=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:io;return r*sV+e|0},vc=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Zu;return(r<<5)+r+e|0},PQ=function(e,r){return e*2097152+r},Di=function(e){return e[0]*2097152+e[1]},qf=function(e,r){return[dc(e[0],r[0]),vc(e[1],r[1])]},DQ=function(e,r){var n={value:0,done:!1},i=0,a=e.length,s={next:function(){return i<a?n.value=e[i++]:n.done=!0,n}};return oV(s,r)},cs=function(e,r){var n={value:0,done:!1},i=0,a=e.length,s={next:function(){return i<a?n.value=e.charCodeAt(i++):n.done=!0,n}};return oV(s,r)},uV=function(){return OQ(arguments)},OQ=function(e){for(var r,n=0;n<e.length;n++){var i=e[n];n===0?r=cs(i):r=cs(i,r)}return r},$C=!0,NQ=console.warn!=null,LQ=console.trace!=null,KT=Number.MAX_SAFE_INTEGER||9007199254740991,lV=function(){return!0},bd=function(){return!1},zC=function(){return 0},QT=function(){},_t=function(e){throw new Error(e)},cV=function(e){if(e!==void 0)$C=!!e;else return $C},Xe=function(e){cV()&&(NQ?console.warn(e):(console.log(e),LQ&&console.trace()))},MQ=function(e){return xe({},e)},zn=function(e){return e==null?e:tt(e)?e.slice():He(e)?MQ(e):e},VQ=function(e){return e.slice()},fV=function(e,r){for(r=e="";e++<36;r+=e*51&52?(e^15?8^Math.random()*(e^20?16:4):4).toString(16):"-");return r},FQ={},hV=function(){return FQ},ar=function(e){var r=Object.keys(e);return function(n){for(var i={},a=0;a<r.length;a++){var s=r[a],o=n==null?void 0:n[s];i[s]=o===void 0?e[s]:o}return i}},ma=function(e,r,n){for(var i=e.length-1;i>=0&&!(e[i]===r&&(e.splice(i,1),n));i--);},YT=function(e){e.splice(0,e.length)},BQ=function(e,r){for(var n=0;n<r.length;n++){var i=r[n];e.push(i)}},Sn=function(e,r,n){return n&&(r=tV(n,r)),e[r]},zi=function(e,r,n,i){n&&(r=tV(n,r)),e[r]=i},qQ=function(){function t(){jT(this,t),this._obj={}}return WT(t,[{key:"set",value:function(r,n){return this._obj[r]=n,this}},{key:"delete",value:function(r){return this._obj[r]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(r){return this._obj[r]!==void 0}},{key:"get",value:function(r){return this._obj[r]}}]),t}(),Un=typeof Map<"u"?Map:qQ,$Q="undefined",zQ=function(){function t(e){if(jT(this,t),this._obj=Object.create(null),this.size=0,e!=null){var r;e.instanceString!=null&&e.instanceString()===this.instanceString()?r=e.toArray():r=e;for(var n=0;n<r.length;n++)this.add(r[n])}}return WT(t,[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(r){var n=this._obj;n[r]!==1&&(n[r]=1,this.size++)}},{key:"delete",value:function(r){var n=this._obj;n[r]===1&&(n[r]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(r){return this._obj[r]===1}},{key:"toArray",value:function(){var r=this;return Object.keys(this._obj).filter(function(n){return r.has(n)})}},{key:"forEach",value:function(r,n){return this.toArray().forEach(r,n)}}]),t}(),du=(typeof Set>"u"?"undefined":Ft(Set))!==$Q?Set:zQ,Gv=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(e===void 0||r===void 0||!HT(e)){_t("An element must have a core reference and parameters set");return}var i=r.group;if(i==null&&(r.data&&r.data.source!=null&&r.data.target!=null?i="edges":i="nodes"),i!=="nodes"&&i!=="edges"){_t("An element must be of type `nodes` or `edges`; you specified `"+i+"`");return}this.length=1,this[0]=this;var a=this._private={cy:e,single:!0,data:r.data||{},position:r.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:i,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!r.selected,selectable:r.selectable===void 0?!0:!!r.selectable,locked:!!r.locked,grabbed:!1,grabbable:r.grabbable===void 0?!0:!!r.grabbable,pannable:r.pannable===void 0?i==="edges":!!r.pannable,active:!1,classes:new du,animation:{current:[],queue:[]},rscratch:{},scratch:r.scratch||{},edges:[],children:[],parent:r.parent&&r.parent.isNode()?r.parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(a.position.x==null&&(a.position.x=0),a.position.y==null&&(a.position.y=0),r.renderedPosition){var s=r.renderedPosition,o=e.pan(),u=e.zoom();a.position={x:(s.x-o.x)/u,y:(s.y-o.y)/u}}var l=[];tt(r.classes)?l=r.classes:Te(r.classes)&&(l=r.classes.split(/\s+/));for(var c=0,f=l.length;c<f;c++){var h=l[c];!h||h===""||a.classes.add(h)}this.createEmitter();var d=r.style||r.css;d&&(Xe("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),this.style(d)),(n===void 0||n)&&this.restore()},UC=function(e){return e={bfs:e.bfs||!e.dfs,dfs:e.dfs||!e.bfs},function(n,i,a){var s;He(n)&&!Gr(n)&&(s=n,n=s.roots||s.root,i=s.visit,a=s.directed),a=arguments.length===2&&!pt(i)?i:a,i=pt(i)?i:function(){};for(var o=this._private.cy,u=n=Te(n)?this.filter(n):n,l=[],c=[],f={},h={},d={},v=0,w,m=this.byGroup(),p=m.nodes,g=m.edges,y=0;y<u.length;y++){var _=u[y],T=_.id();_.isNode()&&(l.unshift(_),e.bfs&&(d[T]=!0,c.push(_)),h[T]=0)}for(var b=function(){var P=e.bfs?l.shift():l.pop(),A=P.id();if(e.dfs){if(d[A])return"continue";d[A]=!0,c.push(P)}var F=h[A],O=f[A],L=O!=null?O.source():null,D=O!=null?O.target():null,$=O==null?void 0:P.same(L)?D[0]:L[0],z=void 0;if(z=i(P,O,$,v++,F),z===!0)return w=P,"break";if(z===!1)return"break";for(var B=P.connectedEdges().filter(function(q){return(!a||q.source().same(P))&&g.has(q)}),j=0;j<B.length;j++){var Q=B[j],N=Q.connectedNodes().filter(function(q){return!q.same(P)&&p.has(q)}),M=N.id();N.length!==0&&!d[M]&&(N=N[0],l.push(N),e.bfs&&(d[M]=!0,c.push(N)),f[M]=Q,h[M]=h[A]+1)}};l.length!==0;){var E=b();if(E!=="continue"&&E==="break")break}for(var I=o.collection(),S=0;S<c.length;S++){var C=c[S],R=f[C.id()];R!=null&&I.push(R),I.push(C)}return{path:o.collection(I),found:o.collection(w)}}},pc={breadthFirstSearch:UC({bfs:!0}),depthFirstSearch:UC({dfs:!0})};pc.bfs=pc.breadthFirstSearch;pc.dfs=pc.depthFirstSearch;var UQ=ar({root:null,weight:function(e){return 1},directed:!1}),jQ={dijkstra:function(e){if(!He(e)){var r=arguments;e={root:r[0],weight:r[1],directed:r[2]}}var n=UQ(e),i=n.root,a=n.weight,s=n.directed,o=this,u=a,l=Te(i)?this.filter(i)[0]:i[0],c={},f={},h={},d=this.byGroup(),v=d.nodes,w=d.edges;w.unmergeBy(function(F){return F.isLoop()});for(var m=function(O){return c[O.id()]},p=function(O,L){c[O.id()]=L,g.updateItem(O)},g=new Jc.default(function(F,O){return m(F)-m(O)}),y=0;y<v.length;y++){var _=v[y];c[_.id()]=_.same(l)?0:1/0,g.push(_)}for(var T=function(O,L){for(var D=(s?O.edgesTo(L):O.edgesWith(L)).intersect(w),$=1/0,z,B=0;B<D.length;B++){var j=D[B],Q=u(j);(Q<$||!z)&&($=Q,z=j)}return{edge:z,dist:$}};g.size()>0;){var b=g.pop(),E=m(b),I=b.id();if(h[I]=E,E!==1/0)for(var S=b.neighborhood().intersect(v),C=0;C<S.length;C++){var R=S[C],x=R.id(),P=T(b,R),A=E+P.dist;A<m(R)&&(p(R,A),f[x]={node:b,edge:P.edge})}}return{distanceTo:function(O){var L=Te(O)?v.filter(O)[0]:O[0];return h[L.id()]},pathTo:function(O){var L=Te(O)?v.filter(O)[0]:O[0],D=[],$=L,z=$.id();if(L.length>0)for(D.unshift(L);f[z];){var B=f[z];D.unshift(B.edge),D.unshift(B.node),$=B.node,z=$.id()}return o.spawn(D)}}}},WQ={kruskal:function(e){e=e||function(y){return 1};for(var r=this.byGroup(),n=r.nodes,i=r.edges,a=n.length,s=new Array(a),o=n,u=function(_){for(var T=0;T<s.length;T++){var b=s[T];if(b.has(_))return T}},l=0;l<a;l++)s[l]=this.spawn(n[l]);for(var c=i.sort(function(y,_){return e(y)-e(_)}),f=0;f<c.length;f++){var h=c[f],d=h.source()[0],v=h.target()[0],w=u(d),m=u(v),p=s[w],g=s[m];w!==m&&(o.merge(h),p.merge(g),s.splice(m,1))}return o}},HQ=ar({root:null,goal:null,weight:function(e){return 1},heuristic:function(e){return 0},directed:!1}),GQ={aStar:function(e){var r=this.cy(),n=HQ(e),i=n.root,a=n.goal,s=n.heuristic,o=n.directed,u=n.weight;i=r.collection(i)[0],a=r.collection(a)[0];var l=i.id(),c=a.id(),f={},h={},d={},v=new Jc.default(function(z,B){return h[z.id()]-h[B.id()]}),w=new du,m={},p={},g=function(B,j){v.push(B),w.add(j)},y,_,T=function(){y=v.pop(),_=y.id(),w.delete(_)},b=function(B){return w.has(B)};g(i,l),f[l]=0,h[l]=s(i);for(var E=0;v.size()>0;){if(T(),E++,_===c){for(var I=[],S=a,C=c,R=p[C];I.unshift(S),R!=null&&I.unshift(R),S=m[C],S!=null;)C=S.id(),R=p[C];return{found:!0,distance:f[_],path:this.spawn(I),steps:E}}d[_]=!0;for(var x=y._private.edges,P=0;P<x.length;P++){var A=x[P];if(this.hasElementWithId(A.id())&&!(o&&A.data("source")!==_)){var F=A.source(),O=A.target(),L=F.id()!==_?F:O,D=L.id();if(this.hasElementWithId(D)&&!d[D]){var $=f[_]+u(A);if(!b(D)){f[D]=$,h[D]=$+s(L),g(L,D),m[D]=y,p[D]=A;continue}$<f[D]&&(f[D]=$,h[D]=$+s(L),m[D]=y,p[D]=A)}}}}return{found:!1,distance:void 0,path:void 0,steps:E}}},KQ=ar({weight:function(e){return 1},directed:!1}),QQ={floydWarshall:function(e){for(var r=this.cy(),n=KQ(e),i=n.weight,a=n.directed,s=i,o=this.byGroup(),u=o.nodes,l=o.edges,c=u.length,f=c*c,h=function(Q){return u.indexOf(Q)},d=function(Q){return u[Q]},v=new Array(f),w=0;w<f;w++){var m=w%c,p=(w-m)/c;p===m?v[w]=0:v[w]=1/0}for(var g=new Array(f),y=new Array(f),_=0;_<l.length;_++){var T=l[_],b=T.source()[0],E=T.target()[0];if(b!==E){var I=h(b),S=h(E),C=I*c+S,R=s(T);if(v[C]>R&&(v[C]=R,g[C]=S,y[C]=T),!a){var x=S*c+I;!a&&v[x]>R&&(v[x]=R,g[x]=I,y[x]=T)}}}for(var P=0;P<c;P++)for(var A=0;A<c;A++)for(var F=A*c+P,O=0;O<c;O++){var L=A*c+O,D=P*c+O;v[F]+v[D]<v[L]&&(v[L]=v[F]+v[D],g[L]=g[F])}var $=function(Q){return(Te(Q)?r.filter(Q):Q)[0]},z=function(Q){return h($(Q))},B={distance:function(Q,N){var M=z(Q),q=z(N);return v[M*c+q]},path:function(Q,N){var M=z(Q),q=z(N),V=d(M);if(M===q)return V.collection();if(g[M*c+q]==null)return r.collection();var W=r.collection(),X=M,J;for(W.merge(V);M!==q;)X=M,M=g[M*c+q],J=y[X*c+M],W.merge(J),W.merge(d(M));return W}};return B}},YQ=ar({weight:function(e){return 1},directed:!1,root:null}),XQ={bellmanFord:function(e){var r=this,n=YQ(e),i=n.weight,a=n.directed,s=n.root,o=i,u=this,l=this.cy(),c=this.byGroup(),f=c.edges,h=c.nodes,d=h.length,v=new Un,w=!1,m=[];s=l.collection(s)[0],f.unmergeBy(function(ue){return ue.isLoop()});for(var p=f.length,g=function(he){var we=v.get(he.id());return we||(we={},v.set(he.id(),we)),we},y=function(he){return(Te(he)?l.$(he):he)[0]},_=function(he){return g(y(he)).dist},T=function(he){for(var we=arguments.length>1&&arguments[1]!==void 0?arguments[1]:s,Fe=y(he),Ae=[],be=Fe;;){if(be==null)return r.spawn();var Se=g(be),G=Se.edge,k=Se.pred;if(Ae.unshift(be[0]),be.same(we)&&Ae.length>0)break;G!=null&&Ae.unshift(G),be=k}return u.spawn(Ae)},b=0;b<d;b++){var E=h[b],I=g(E);E.same(s)?I.dist=0:I.dist=1/0,I.pred=null,I.edge=null}for(var S=!1,C=function(he,we,Fe,Ae,be,Se){var G=Ae.dist+Se;G<be.dist&&!Fe.same(Ae.edge)&&(be.dist=G,be.pred=he,be.edge=Fe,S=!0)},R=1;R<d;R++){S=!1;for(var x=0;x<p;x++){var P=f[x],A=P.source(),F=P.target(),O=o(P),L=g(A),D=g(F);C(A,F,P,L,D,O),a||C(F,A,P,D,L,O)}if(!S)break}if(S)for(var $=[],z=0;z<p;z++){var B=f[z],j=B.source(),Q=B.target(),N=o(B),M=g(j).dist,q=g(Q).dist;if(M+N<q||!a&&q+N<M)if(w||(Xe("Graph contains a negative weight cycle for Bellman-Ford"),w=!0),e.findNegativeWeightCycles!==!1){var V=[];M+N<q&&V.push(j),!a&&q+N<M&&V.push(Q);for(var W=V.length,X=0;X<W;X++){var J=V[X],ae=[J];ae.push(g(J).edge);for(var ve=g(J).pred;ae.indexOf(ve)===-1;)ae.push(ve),ae.push(g(ve).edge),ve=g(ve).pred;ae=ae.slice(ae.indexOf(ve));for(var _e=ae[0].id(),se=0,te=2;te<ae.length;te+=2)ae[te].id()<_e&&(_e=ae[te].id(),se=te);ae=ae.slice(se).concat(ae.slice(0,se)),ae.push(ae[0]);var me=ae.map(function(ue){return ue.id()}).join(",");$.indexOf(me)===-1&&(m.push(u.spawn(ae)),$.push(me))}}else break}return{distanceTo:_,pathTo:T,hasNegativeWeightCycle:w,negativeWeightCycles:m}}},JQ=Math.sqrt(2),ZQ=function(e,r,n){n.length===0&&_t("Karger-Stein must be run on a connected (sub)graph");for(var i=n[e],a=i[1],s=i[2],o=r[a],u=r[s],l=n,c=l.length-1;c>=0;c--){var f=l[c],h=f[1],d=f[2];(r[h]===o&&r[d]===u||r[h]===u&&r[d]===o)&&l.splice(c,1)}for(var v=0;v<l.length;v++){var w=l[v];w[1]===u?(l[v]=w.slice(),l[v][1]=o):w[2]===u&&(l[v]=w.slice(),l[v][2]=o)}for(var m=0;m<r.length;m++)r[m]===u&&(r[m]=o);return l},fg=function(e,r,n,i){for(;n>i;){var a=Math.floor(Math.random()*r.length);r=ZQ(a,e,r),n--}return r},eY={kargerStein:function(){var e=this,r=this.byGroup(),n=r.nodes,i=r.edges;i.unmergeBy(function(D){return D.isLoop()});var a=n.length,s=i.length,o=Math.ceil(Math.pow(Math.log(a)/Math.LN2,2)),u=Math.floor(a/JQ);if(a<2){_t("At least 2 nodes are required for Karger-Stein algorithm");return}for(var l=[],c=0;c<s;c++){var f=i[c];l.push([c,n.indexOf(f.source()),n.indexOf(f.target())])}for(var h=1/0,d=[],v=new Array(a),w=new Array(a),m=new Array(a),p=function($,z){for(var B=0;B<a;B++)z[B]=$[B]},g=0;g<=o;g++){for(var y=0;y<a;y++)w[y]=y;var _=fg(w,l.slice(),a,u),T=_.slice();p(w,m);var b=fg(w,_,u,2),E=fg(m,T,u,2);b.length<=E.length&&b.length<h?(h=b.length,d=b,p(w,v)):E.length<=b.length&&E.length<h&&(h=E.length,d=E,p(m,v))}for(var I=this.spawn(d.map(function(D){return i[D[0]]})),S=this.spawn(),C=this.spawn(),R=v[0],x=0;x<v.length;x++){var P=v[x],A=n[x];P===R?S.merge(A):C.merge(A)}var F=function($){var z=e.spawn();return $.forEach(function(B){z.merge(B),B.connectedEdges().forEach(function(j){e.contains(j)&&!I.contains(j)&&z.merge(j)})}),z},O=[F(S),F(C)],L={cut:I,components:O,partition1:S,partition2:C};return L}},tY=function(e){return{x:e.x,y:e.y}},Kv=function(e,r,n){return{x:e.x*r+n.x,y:e.y*r+n.y}},dV=function(e,r,n){return{x:(e.x-n.x)/r,y:(e.y-n.y)/r}},ao=function(e){return{x:e[0],y:e[1]}},rY=function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,i=1/0,a=r;a<n;a++){var s=e[a];isFinite(s)&&(i=Math.min(s,i))}return i},nY=function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,i=-1/0,a=r;a<n;a++){var s=e[a];isFinite(s)&&(i=Math.max(s,i))}return i},iY=function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,i=0,a=0,s=r;s<n;s++){var o=e[s];isFinite(o)&&(i+=o,a++)}return i/a},aY=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0;i?e=e.slice(r,n):(n<e.length&&e.splice(n,e.length-n),r>0&&e.splice(0,r));for(var o=0,u=e.length-1;u>=0;u--){var l=e[u];s?isFinite(l)||(e[u]=-1/0,o++):e.splice(u,1)}a&&e.sort(function(h,d){return h-d});var c=e.length,f=Math.floor(c/2);return c%2!==0?e[f+1+o]:(e[f-1+o]+e[f+o])/2},sY=function(e){return Math.PI*e/180},$f=function(e,r){return Math.atan2(r,e)-Math.PI/2},XT=Math.log2||function(t){return Math.log(t)/Math.log(2)},vV=function(e){return e>0?1:e<0?-1:0},fs=function(e,r){return Math.sqrt(Fa(e,r))},Fa=function(e,r){var n=r.x-e.x,i=r.y-e.y;return n*n+i*i},oY=function(e){for(var r=e.length,n=0,i=0;i<r;i++)n+=e[i];for(var a=0;a<r;a++)e[a]=e[a]/n;return e},qt=function(e,r,n,i){return(1-i)*(1-i)*e+2*(1-i)*i*r+i*i*n},wo=function(e,r,n,i){return{x:qt(e.x,r.x,n.x,i),y:qt(e.y,r.y,n.y,i)}},uY=function(e,r,n,i){var a={x:r.x-e.x,y:r.y-e.y},s=fs(e,r),o={x:a.x/s,y:a.y/s};return n=n??0,i=i??n*s,{x:e.x+o.x*i,y:e.y+o.y*i}},gc=function(e,r,n){return Math.max(e,Math.min(n,r))},$r=function(e){if(e==null)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(e.x1!=null&&e.y1!=null){if(e.x2!=null&&e.y2!=null&&e.x2>=e.x1&&e.y2>=e.y1)return{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,w:e.x2-e.x1,h:e.y2-e.y1};if(e.w!=null&&e.h!=null&&e.w>=0&&e.h>=0)return{x1:e.x1,y1:e.y1,x2:e.x1+e.w,y2:e.y1+e.h,w:e.w,h:e.h}}},lY=function(e){return{x1:e.x1,x2:e.x2,w:e.w,y1:e.y1,y2:e.y2,h:e.h}},cY=function(e){e.x1=1/0,e.y1=1/0,e.x2=-1/0,e.y2=-1/0,e.w=0,e.h=0},fY=function(e,r,n){return{x1:e.x1+r,x2:e.x2+r,y1:e.y1+n,y2:e.y2+n,w:e.w,h:e.h}},pV=function(e,r){e.x1=Math.min(e.x1,r.x1),e.x2=Math.max(e.x2,r.x2),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,r.y1),e.y2=Math.max(e.y2,r.y2),e.h=e.y2-e.y1},hY=function(e,r,n){e.x1=Math.min(e.x1,r),e.x2=Math.max(e.x2,r),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,n),e.y2=Math.max(e.y2,n),e.h=e.y2-e.y1},Eh=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.x1-=r,e.x2+=r,e.y1-=r,e.y2+=r,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},Th=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0],n,i,a,s;if(r.length===1)n=i=a=s=r[0];else if(r.length===2)n=a=r[0],s=i=r[1];else if(r.length===4){var o=wn(r,4);n=o[0],i=o[1],a=o[2],s=o[3]}return e.x1-=s,e.x2+=i,e.y1-=n,e.y2+=a,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},jC=function(e,r){e.x1=r.x1,e.y1=r.y1,e.x2=r.x2,e.y2=r.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1},JT=function(e,r){return!(e.x1>r.x2||r.x1>e.x2||e.x2<r.x1||r.x2<e.x1||e.y2<r.y1||r.y2<e.y1||e.y1>r.y2||r.y1>e.y2)},$o=function(e,r,n){return e.x1<=r&&r<=e.x2&&e.y1<=n&&n<=e.y2},dY=function(e,r){return $o(e,r.x,r.y)},gV=function(e,r){return $o(e,r.x1,r.y1)&&$o(e,r.x2,r.y2)},mV=function(e,r,n,i,a,s,o){var u=tf(a,s),l=a/2,c=s/2,f;{var h=n-l+u-o,d=i-c-o,v=n+l-u+o,w=d;if(f=Gi(e,r,n,i,h,d,v,w,!1),f.length>0)return f}{var m=n+l+o,p=i-c+u-o,g=m,y=i+c-u+o;if(f=Gi(e,r,n,i,m,p,g,y,!1),f.length>0)return f}{var _=n-l+u-o,T=i+c+o,b=n+l-u+o,E=T;if(f=Gi(e,r,n,i,_,T,b,E,!1),f.length>0)return f}{var I=n-l-o,S=i-c+u-o,C=I,R=i+c-u+o;if(f=Gi(e,r,n,i,I,S,C,R,!1),f.length>0)return f}var x;{var P=n-l+u,A=i-c+u;if(x=el(e,r,n,i,P,A,u+o),x.length>0&&x[0]<=P&&x[1]<=A)return[x[0],x[1]]}{var F=n+l-u,O=i-c+u;if(x=el(e,r,n,i,F,O,u+o),x.length>0&&x[0]>=F&&x[1]<=O)return[x[0],x[1]]}{var L=n+l-u,D=i+c-u;if(x=el(e,r,n,i,L,D,u+o),x.length>0&&x[0]>=L&&x[1]>=D)return[x[0],x[1]]}{var $=n-l+u,z=i+c-u;if(x=el(e,r,n,i,$,z,u+o),x.length>0&&x[0]<=$&&x[1]>=z)return[x[0],x[1]]}return[]},vY=function(e,r,n,i,a,s,o){var u=o,l=Math.min(n,a),c=Math.max(n,a),f=Math.min(i,s),h=Math.max(i,s);return l-u<=e&&e<=c+u&&f-u<=r&&r<=h+u},pY=function(e,r,n,i,a,s,o,u,l){var c={x1:Math.min(n,o,a)-l,x2:Math.max(n,o,a)+l,y1:Math.min(i,u,s)-l,y2:Math.max(i,u,s)+l};return!(e<c.x1||e>c.x2||r<c.y1||r>c.y2)},gY=function(e,r,n,i){n-=i;var a=r*r-4*e*n;if(a<0)return[];var s=Math.sqrt(a),o=2*e,u=(-r+s)/o,l=(-r-s)/o;return[u,l]},mY=function(e,r,n,i,a){var s=1e-5;e===0&&(e=s),r/=e,n/=e,i/=e;var o,u,l,c,f,h,d,v;if(u=(3*n-r*r)/9,l=-(27*i)+r*(9*n-2*(r*r)),l/=54,o=u*u*u+l*l,a[1]=0,d=r/3,o>0){f=l+Math.sqrt(o),f=f<0?-Math.pow(-f,1/3):Math.pow(f,1/3),h=l-Math.sqrt(o),h=h<0?-Math.pow(-h,1/3):Math.pow(h,1/3),a[0]=-d+f+h,d+=(f+h)/2,a[4]=a[2]=-d,d=Math.sqrt(3)*(-h+f)/2,a[3]=d,a[5]=-d;return}if(a[5]=a[3]=0,o===0){v=l<0?-Math.pow(-l,1/3):Math.pow(l,1/3),a[0]=-d+2*v,a[4]=a[2]=-(v+d);return}u=-u,c=u*u*u,c=Math.acos(l/Math.sqrt(c)),v=2*Math.sqrt(u),a[0]=-d+v*Math.cos(c/3),a[2]=-d+v*Math.cos((c+2*Math.PI)/3),a[4]=-d+v*Math.cos((c+4*Math.PI)/3)},yY=function(e,r,n,i,a,s,o,u){var l=1*n*n-4*n*a+2*n*o+4*a*a-4*a*o+o*o+i*i-4*i*s+2*i*u+4*s*s-4*s*u+u*u,c=1*9*n*a-3*n*n-3*n*o-6*a*a+3*a*o+9*i*s-3*i*i-3*i*u-6*s*s+3*s*u,f=1*3*n*n-6*n*a+n*o-n*e+2*a*a+2*a*e-o*e+3*i*i-6*i*s+i*u-i*r+2*s*s+2*s*r-u*r,h=1*n*a-n*n+n*e-a*e+i*s-i*i+i*r-s*r,d=[];mY(l,c,f,h,d);for(var v=1e-7,w=[],m=0;m<6;m+=2)Math.abs(d[m+1])<v&&d[m]>=0&&d[m]<=1&&w.push(d[m]);w.push(1),w.push(0);for(var p=-1,g,y,_,T=0;T<w.length;T++)g=Math.pow(1-w[T],2)*n+2*(1-w[T])*w[T]*a+w[T]*w[T]*o,y=Math.pow(1-w[T],2)*i+2*(1-w[T])*w[T]*s+w[T]*w[T]*u,_=Math.pow(g-e,2)+Math.pow(y-r,2),p>=0?_<p&&(p=_):p=_;return p},wY=function(e,r,n,i,a,s){var o=[e-n,r-i],u=[a-n,s-i],l=u[0]*u[0]+u[1]*u[1],c=o[0]*o[0]+o[1]*o[1],f=o[0]*u[0]+o[1]*u[1],h=f*f/l;return f<0?c:h>l?(e-a)*(e-a)+(r-s)*(r-s):c-h},Or=function(e,r,n){for(var i,a,s,o,u,l=0,c=0;c<n.length/2;c++)if(i=n[c*2],a=n[c*2+1],c+1<n.length/2?(s=n[(c+1)*2],o=n[(c+1)*2+1]):(s=n[(c+1-n.length/2)*2],o=n[(c+1-n.length/2)*2+1]),!(i==e&&s==e))if(i>=e&&e>=s||i<=e&&e<=s)u=(e-i)/(s-i)*(o-a)+a,u>r&&l++;else continue;return l%2!==0},Ei=function(e,r,n,i,a,s,o,u,l){var c=new Array(n.length),f;u[0]!=null?(f=Math.atan(u[1]/u[0]),u[0]<0?f=f+Math.PI/2:f=-f-Math.PI/2):f=u;for(var h=Math.cos(-f),d=Math.sin(-f),v=0;v<c.length/2;v++)c[v*2]=s/2*(n[v*2]*h-n[v*2+1]*d),c[v*2+1]=o/2*(n[v*2+1]*h+n[v*2]*d),c[v*2]+=i,c[v*2+1]+=a;var w;if(l>0){var m=Id(c,-l);w=Sd(m)}else w=c;return Or(e,r,w)},_Y=function(e,r,n,i,a,s,o){for(var u=new Array(n.length),l=s/2,c=o/2,f=ZT(s,o),h=f*f,d=0;d<n.length/4;d++){var v=void 0,w=void 0;d===0?v=n.length-2:v=d*4-2,w=d*4+2;var m=i+l*n[d*4],p=a+c*n[d*4+1],g=-n[v]*n[w]-n[v+1]*n[w+1],y=f/Math.tan(Math.acos(g)/2),_=m-y*n[v],T=p-y*n[v+1],b=m+y*n[w],E=p+y*n[w+1];u[d*4]=_,u[d*4+1]=T,u[d*4+2]=b,u[d*4+3]=E;var I=n[v+1],S=-n[v],C=I*n[w]+S*n[w+1];C<0&&(I*=-1,S*=-1);var R=_+I*f,x=T+S*f,P=Math.pow(R-e,2)+Math.pow(x-r,2);if(P<=h)return!0}return Or(e,r,u)},Sd=function(e){for(var r=new Array(e.length/2),n,i,a,s,o,u,l,c,f=0;f<e.length/4;f++){n=e[f*4],i=e[f*4+1],a=e[f*4+2],s=e[f*4+3],f<e.length/4-1?(o=e[(f+1)*4],u=e[(f+1)*4+1],l=e[(f+1)*4+2],c=e[(f+1)*4+3]):(o=e[0],u=e[1],l=e[2],c=e[3]);var h=Gi(n,i,a,s,o,u,l,c,!0);r[f*2]=h[0],r[f*2+1]=h[1]}return r},Id=function(e,r){for(var n=new Array(e.length*2),i,a,s,o,u=0;u<e.length/2;u++){i=e[u*2],a=e[u*2+1],u<e.length/2-1?(s=e[(u+1)*2],o=e[(u+1)*2+1]):(s=e[0],o=e[1]);var l=o-a,c=-(s-i),f=Math.sqrt(l*l+c*c),h=l/f,d=c/f;n[u*4]=i+h*r,n[u*4+1]=a+d*r,n[u*4+2]=s+h*r,n[u*4+3]=o+d*r}return n},EY=function(e,r,n,i,a,s){var o=n-e,u=i-r;o/=a,u/=s;var l=Math.sqrt(o*o+u*u),c=l-1;if(c<0)return[];var f=c/l;return[(n-e)*f+e,(i-r)*f+r]},Ka=function(e,r,n,i,a,s,o){return e-=a,r-=s,e/=n/2+o,r/=i/2+o,e*e+r*r<=1},el=function(e,r,n,i,a,s,o){var u=[n-e,i-r],l=[e-a,r-s],c=u[0]*u[0]+u[1]*u[1],f=2*(l[0]*u[0]+l[1]*u[1]),h=l[0]*l[0]+l[1]*l[1]-o*o,d=f*f-4*c*h;if(d<0)return[];var v=(-f+Math.sqrt(d))/(2*c),w=(-f-Math.sqrt(d))/(2*c),m=Math.min(v,w),p=Math.max(v,w),g=[];if(m>=0&&m<=1&&g.push(m),p>=0&&p<=1&&g.push(p),g.length===0)return[];var y=g[0]*u[0]+e,_=g[0]*u[1]+r;if(g.length>1){if(g[0]==g[1])return[y,_];var T=g[1]*u[0]+e,b=g[1]*u[1]+r;return[y,_,T,b]}else return[y,_]},hg=function(e,r,n){return r<=e&&e<=n||n<=e&&e<=r?e:e<=r&&r<=n||n<=r&&r<=e?r:n},Gi=function(e,r,n,i,a,s,o,u,l){var c=e-a,f=n-e,h=o-a,d=r-s,v=i-r,w=u-s,m=h*d-w*c,p=f*d-v*c,g=w*f-h*v;if(g!==0){var y=m/g,_=p/g,T=.001,b=0-T,E=1+T;return b<=y&&y<=E&&b<=_&&_<=E?[e+y*f,r+y*v]:l?[e+y*f,r+y*v]:[]}else return m===0||p===0?hg(e,n,o)===o?[o,u]:hg(e,n,a)===a?[a,s]:hg(a,o,n)===n?[n,i]:[]:[]},mc=function(e,r,n,i,a,s,o,u){var l=[],c,f=new Array(n.length),h=!0;s==null&&(h=!1);var d;if(h){for(var v=0;v<f.length/2;v++)f[v*2]=n[v*2]*s+i,f[v*2+1]=n[v*2+1]*o+a;if(u>0){var w=Id(f,-u);d=Sd(w)}else d=f}else d=n;for(var m,p,g,y,_=0;_<d.length/2;_++)m=d[_*2],p=d[_*2+1],_<d.length/2-1?(g=d[(_+1)*2],y=d[(_+1)*2+1]):(g=d[0],y=d[1]),c=Gi(e,r,i,a,m,p,g,y),c.length!==0&&l.push(c[0],c[1]);return l},TY=function(e,r,n,i,a,s,o,u){for(var l=[],c,f=new Array(n.length),h=s/2,d=o/2,v=ZT(s,o),w=0;w<n.length/4;w++){var m=void 0,p=void 0;w===0?m=n.length-2:m=w*4-2,p=w*4+2;var g=i+h*n[w*4],y=a+d*n[w*4+1],_=-n[m]*n[p]-n[m+1]*n[p+1],T=v/Math.tan(Math.acos(_)/2),b=g-T*n[m],E=y-T*n[m+1],I=g+T*n[p],S=y+T*n[p+1];w===0?(f[n.length-2]=b,f[n.length-1]=E):(f[w*4-2]=b,f[w*4-1]=E),f[w*4]=I,f[w*4+1]=S;var C=n[m+1],R=-n[m],x=C*n[p]+R*n[p+1];x<0&&(C*=-1,R*=-1);var P=b+C*v,A=E+R*v;c=el(e,r,i,a,P,A,v),c.length!==0&&l.push(c[0],c[1])}for(var F=0;F<f.length/4;F++)c=Gi(e,r,i,a,f[F*4],f[F*4+1],f[F*4+2],f[F*4+3],!1),c.length!==0&&l.push(c[0],c[1]);if(l.length>2){for(var O=[l[0],l[1]],L=Math.pow(O[0]-e,2)+Math.pow(O[1]-r,2),D=1;D<l.length/2;D++){var $=Math.pow(l[D*2]-e,2)+Math.pow(l[D*2+1]-r,2);$<=L&&(O[0]=l[D*2],O[1]=l[D*2+1],L=$)}return O}return l},zf=function(e,r,n){var i=[e[0]-r[0],e[1]-r[1]],a=Math.sqrt(i[0]*i[0]+i[1]*i[1]),s=(a-n)/a;return s<0&&(s=1e-5),[r[0]+s*i[0],r[1]+s*i[1]]},Sr=function(e,r){var n=i_(e,r);return n=yV(n),n},yV=function(e){for(var r,n,i=e.length/2,a=1/0,s=1/0,o=-1/0,u=-1/0,l=0;l<i;l++)r=e[2*l],n=e[2*l+1],a=Math.min(a,r),o=Math.max(o,r),s=Math.min(s,n),u=Math.max(u,n);for(var c=2/(o-a),f=2/(u-s),h=0;h<i;h++)r=e[2*h]=e[2*h]*c,n=e[2*h+1]=e[2*h+1]*f,a=Math.min(a,r),o=Math.max(o,r),s=Math.min(s,n),u=Math.max(u,n);if(s<-1)for(var d=0;d<i;d++)n=e[2*d+1]=e[2*d+1]+(-1-s);return e},i_=function(e,r){var n=1/e*2*Math.PI,i=e%2===0?Math.PI/2+n/2:Math.PI/2;i+=r;for(var a=new Array(e*2),s,o=0;o<e;o++)s=o*n+i,a[2*o]=Math.cos(s),a[2*o+1]=Math.sin(-s);return a},tf=function(e,r){return Math.min(e/4,r/4,8)},ZT=function(e,r){return Math.min(e/10,r/10,8)},wV=function(){return 8},bY=function(e,r,n){return[e-2*r+n,2*(r-e),e]},a_=function(e,r){return{heightOffset:Math.min(15,.05*r),widthOffset:Math.min(100,.25*e),ctrlPtOffsetPct:.05}},SY=ar({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(e){return 1}}),IY={pageRank:function(e){for(var r=SY(e),n=r.dampingFactor,i=r.precision,a=r.iterations,s=r.weight,o=this._private.cy,u=this.byGroup(),l=u.nodes,c=u.edges,f=l.length,h=f*f,d=c.length,v=new Array(h),w=new Array(f),m=(1-n)/f,p=0;p<f;p++){for(var g=0;g<f;g++){var y=p*f+g;v[y]=0}w[p]=0}for(var _=0;_<d;_++){var T=c[_],b=T.data("source"),E=T.data("target");if(b!==E){var I=l.indexOfId(b),S=l.indexOfId(E),C=s(T),R=S*f+I;v[R]+=C,w[I]+=C}}for(var x=1/f+m,P=0;P<f;P++)if(w[P]===0)for(var A=0;A<f;A++){var F=A*f+P;v[F]=x}else for(var O=0;O<f;O++){var L=O*f+P;v[L]=v[L]/w[P]+m}for(var D=new Array(f),$=new Array(f),z,B=0;B<f;B++)D[B]=1;for(var j=0;j<a;j++){for(var Q=0;Q<f;Q++)$[Q]=0;for(var N=0;N<f;N++)for(var M=0;M<f;M++){var q=N*f+M;$[N]+=v[q]*D[M]}oY($),z=D,D=$,$=z;for(var V=0,W=0;W<f;W++){var X=z[W]-D[W];V+=X*X}if(V<i)break}var J={rank:function(ve){return ve=o.collection(ve)[0],D[l.indexOf(ve)]}};return J}},WC=ar({root:null,weight:function(e){return 1},directed:!1,alpha:0}),_o={degreeCentralityNormalized:function(e){e=WC(e);var r=this.cy(),n=this.nodes(),i=n.length;if(e.directed){for(var c={},f={},h=0,d=0,v=0;v<i;v++){var w=n[v],m=w.id();e.root=w;var p=this.degreeCentrality(e);h<p.indegree&&(h=p.indegree),d<p.outdegree&&(d=p.outdegree),c[m]=p.indegree,f[m]=p.outdegree}return{indegree:function(y){return h==0?0:(Te(y)&&(y=r.filter(y)),c[y.id()]/h)},outdegree:function(y){return d===0?0:(Te(y)&&(y=r.filter(y)),f[y.id()]/d)}}}else{for(var a={},s=0,o=0;o<i;o++){var u=n[o];e.root=u;var l=this.degreeCentrality(e);s<l.degree&&(s=l.degree),a[u.id()]=l.degree}return{degree:function(y){return s===0?0:(Te(y)&&(y=r.filter(y)),a[y.id()]/s)}}}},degreeCentrality:function(e){e=WC(e);var r=this.cy(),n=this,i=e,a=i.root,s=i.weight,o=i.directed,u=i.alpha;if(a=r.collection(a)[0],o){for(var d=a.connectedEdges(),v=d.filter(function(b){return b.target().same(a)&&n.has(b)}),w=d.filter(function(b){return b.source().same(a)&&n.has(b)}),m=v.length,p=w.length,g=0,y=0,_=0;_<v.length;_++)g+=s(v[_]);for(var T=0;T<w.length;T++)y+=s(w[T]);return{indegree:Math.pow(m,1-u)*Math.pow(g,u),outdegree:Math.pow(p,1-u)*Math.pow(y,u)}}else{for(var l=a.connectedEdges().intersection(n),c=l.length,f=0,h=0;h<l.length;h++)f+=s(l[h]);return{degree:Math.pow(c,1-u)*Math.pow(f,u)}}}};_o.dc=_o.degreeCentrality;_o.dcn=_o.degreeCentralityNormalised=_o.degreeCentralityNormalized;var HC=ar({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),Eo={closenessCentralityNormalized:function(e){for(var r=HC(e),n=r.harmonic,i=r.weight,a=r.directed,s=this.cy(),o={},u=0,l=this.nodes(),c=this.floydWarshall({weight:i,directed:a}),f=0;f<l.length;f++){for(var h=0,d=l[f],v=0;v<l.length;v++)if(f!==v){var w=c.distance(d,l[v]);n?h+=1/w:h+=w}n||(h=1/h),u<h&&(u=h),o[d.id()]=h}return{closeness:function(p){return u==0?0:(Te(p)?p=s.filter(p)[0].id():p=p.id(),o[p]/u)}}},closenessCentrality:function(e){var r=HC(e),n=r.root,i=r.weight,a=r.directed,s=r.harmonic;n=this.filter(n)[0];for(var o=this.dijkstra({root:n,weight:i,directed:a}),u=0,l=this.nodes(),c=0;c<l.length;c++){var f=l[c];if(!f.same(n)){var h=o.distanceTo(f);s?u+=1/h:u+=h}}return s?u:1/u}};Eo.cc=Eo.closenessCentrality;Eo.ccn=Eo.closenessCentralityNormalised=Eo.closenessCentralityNormalized;var CY=ar({weight:null,directed:!1}),s_={betweennessCentrality:function(e){for(var r=CY(e),n=r.directed,i=r.weight,a=i!=null,s=this.cy(),o=this.nodes(),u={},l={},c=0,f={set:function(y,_){l[y]=_,_>c&&(c=_)},get:function(y){return l[y]}},h=0;h<o.length;h++){var d=o[h],v=d.id();n?u[v]=d.outgoers().nodes():u[v]=d.openNeighborhood().nodes(),f.set(v,0)}for(var w=function(y){for(var _=o[y].id(),T=[],b={},E={},I={},S=new Jc.default(function(M,q){return I[M]-I[q]}),C=0;C<o.length;C++){var R=o[C].id();b[R]=[],E[R]=0,I[R]=1/0}for(E[_]=1,I[_]=0,S.push(_);!S.empty();){var x=S.pop();if(T.push(x),a)for(var P=0;P<u[x].length;P++){var A=u[x][P],F=s.getElementById(x),O=void 0;F.edgesTo(A).length>0?O=F.edgesTo(A)[0]:O=A.edgesTo(F)[0];var L=i(O);A=A.id(),I[A]>I[x]+L&&(I[A]=I[x]+L,S.nodes.indexOf(A)<0?S.push(A):S.updateItem(A),E[A]=0,b[A]=[]),I[A]==I[x]+L&&(E[A]=E[A]+E[x],b[A].push(x))}else for(var D=0;D<u[x].length;D++){var $=u[x][D].id();I[$]==1/0&&(S.push($),I[$]=I[x]+1),I[$]==I[x]+1&&(E[$]=E[$]+E[x],b[$].push(x))}}for(var z={},B=0;B<o.length;B++)z[o[B].id()]=0;for(;T.length>0;){for(var j=T.pop(),Q=0;Q<b[j].length;Q++){var N=b[j][Q];z[N]=z[N]+E[N]/E[j]*(1+z[j])}j!=o[y].id()&&f.set(j,f.get(j)+z[j])}},m=0;m<o.length;m++)w(m);var p={betweenness:function(y){var _=s.collection(y).id();return f.get(_)},betweennessNormalized:function(y){if(c==0)return 0;var _=s.collection(y).id();return f.get(_)/c}};return p.betweennessNormalised=p.betweennessNormalized,p}};s_.bc=s_.betweennessCentrality;var xY=ar({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(t){return 1}]}),RY=function(e){return xY(e)},kY=function(e,r){for(var n=0,i=0;i<r.length;i++)n+=r[i](e);return n},AY=function(e,r,n){for(var i=0;i<r;i++)e[i*r+i]=n},_V=function(e,r){for(var n,i=0;i<r;i++){n=0;for(var a=0;a<r;a++)n+=e[a*r+i];for(var s=0;s<r;s++)e[s*r+i]=e[s*r+i]/n}},PY=function(e,r,n){for(var i=new Array(n*n),a=0;a<n;a++){for(var s=0;s<n;s++)i[a*n+s]=0;for(var o=0;o<n;o++)for(var u=0;u<n;u++)i[a*n+u]+=e[a*n+o]*r[o*n+u]}return i},DY=function(e,r,n){for(var i=e.slice(0),a=1;a<n;a++)e=PY(e,i,r);return e},OY=function(e,r,n){for(var i=new Array(r*r),a=0;a<r*r;a++)i[a]=Math.pow(e[a],n);return _V(i,r),i},NY=function(e,r,n,i){for(var a=0;a<n;a++){var s=Math.round(e[a]*Math.pow(10,i))/Math.pow(10,i),o=Math.round(r[a]*Math.pow(10,i))/Math.pow(10,i);if(s!==o)return!1}return!0},LY=function(e,r,n,i){for(var a=[],s=0;s<r;s++){for(var o=[],u=0;u<r;u++)Math.round(e[s*r+u]*1e3)/1e3>0&&o.push(n[u]);o.length!==0&&a.push(i.collection(o))}return a},MY=function(e,r){for(var n=0;n<e.length;n++)if(!r[n]||e[n].id()!==r[n].id())return!1;return!0},VY=function(e){for(var r=0;r<e.length;r++)for(var n=0;n<e.length;n++)r!=n&&MY(e[r],e[n])&&e.splice(n,1);return e},GC=function(e){for(var r=this.nodes(),n=this.edges(),i=this.cy(),a=RY(e),s={},o=0;o<r.length;o++)s[r[o].id()]=o;for(var u=r.length,l=u*u,c=new Array(l),f,h=0;h<l;h++)c[h]=0;for(var d=0;d<n.length;d++){var v=n[d],w=s[v.source().id()],m=s[v.target().id()],p=kY(v,a.attributes);c[w*u+m]+=p,c[m*u+w]+=p}AY(c,u,a.multFactor),_V(c,u);for(var g=!0,y=0;g&&y<a.maxIterations;)g=!1,f=DY(c,u,a.expandFactor),c=OY(f,u,a.inflateFactor),NY(c,f,l,4)||(g=!0),y++;var _=LY(c,u,r,i);return _=VY(_),_},FY={markovClustering:GC,mcl:GC},BY=function(e){return e},EV=function(e,r){return Math.abs(r-e)},KC=function(e,r,n){return e+EV(r,n)},QC=function(e,r,n){return e+Math.pow(n-r,2)},qY=function(e){return Math.sqrt(e)},$Y=function(e,r,n){return Math.max(e,EV(r,n))},Mu=function(e,r,n,i,a){for(var s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:BY,o=i,u,l,c=0;c<e;c++)u=r(c),l=n(c),o=a(o,u,l);return s(o)},zo={euclidean:function(e,r,n){return e>=2?Mu(e,r,n,0,QC,qY):Mu(e,r,n,0,KC)},squaredEuclidean:function(e,r,n){return Mu(e,r,n,0,QC)},manhattan:function(e,r,n){return Mu(e,r,n,0,KC)},max:function(e,r,n){return Mu(e,r,n,-1/0,$Y)}};zo["squared-euclidean"]=zo.squaredEuclidean;zo.squaredeuclidean=zo.squaredEuclidean;function Qv(t,e,r,n,i,a){var s;return pt(t)?s=t:s=zo[t]||zo.euclidean,e===0&&pt(t)?s(i,a):s(e,r,n,i,a)}var zY=ar({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),eb=function(e){return zY(e)},Cd=function(e,r,n,i,a){var s=a!=="kMedoids",o=s?function(f){return n[f]}:function(f){return i[f](n)},u=function(h){return i[h](r)},l=n,c=r;return Qv(e,i.length,o,u,l,c)},dg=function(e,r,n){for(var i=n.length,a=new Array(i),s=new Array(i),o=new Array(r),u=null,l=0;l<i;l++)a[l]=e.min(n[l]).value,s[l]=e.max(n[l]).value;for(var c=0;c<r;c++){u=[];for(var f=0;f<i;f++)u[f]=Math.random()*(s[f]-a[f])+a[f];o[c]=u}return o},TV=function(e,r,n,i,a){for(var s=1/0,o=0,u=0;u<r.length;u++){var l=Cd(n,e,r[u],i,a);l<s&&(s=l,o=u)}return o},bV=function(e,r,n){for(var i=[],a=null,s=0;s<r.length;s++)a=r[s],n[a.id()]===e&&i.push(a);return i},UY=function(e,r,n){return Math.abs(r-e)<=n},jY=function(e,r,n){for(var i=0;i<e.length;i++)for(var a=0;a<e[i].length;a++){var s=Math.abs(e[i][a]-r[i][a]);if(s>n)return!1}return!0},WY=function(e,r,n){for(var i=0;i<n;i++)if(e===r[i])return!0;return!1},YC=function(e,r){var n=new Array(r);if(e.length<50)for(var i=0;i<r;i++){for(var a=e[Math.floor(Math.random()*e.length)];WY(a,n,i);)a=e[Math.floor(Math.random()*e.length)];n[i]=a}else for(var s=0;s<r;s++)n[s]=e[Math.floor(Math.random()*e.length)];return n},XC=function(e,r,n){for(var i=0,a=0;a<r.length;a++)i+=Cd("manhattan",r[a],e,n,"kMedoids");return i},HY=function(e){var r=this.cy(),n=this.nodes(),i=null,a=eb(e),s=new Array(a.k),o={},u;a.testMode?typeof a.testCentroids=="number"?(a.testCentroids,u=dg(n,a.k,a.attributes)):Ft(a.testCentroids)==="object"?u=a.testCentroids:u=dg(n,a.k,a.attributes):u=dg(n,a.k,a.attributes);for(var l=!0,c=0;l&&c<a.maxIterations;){for(var f=0;f<n.length;f++)i=n[f],o[i.id()]=TV(i,u,a.distance,a.attributes,"kMeans");l=!1;for(var h=0;h<a.k;h++){var d=bV(h,n,o);if(d.length!==0){for(var v=a.attributes.length,w=u[h],m=new Array(v),p=new Array(v),g=0;g<v;g++){p[g]=0;for(var y=0;y<d.length;y++)i=d[y],p[g]+=a.attributes[g](i);m[g]=p[g]/d.length,UY(m[g],w[g],a.sensitivityThreshold)||(l=!0)}u[h]=m,s[h]=r.collection(d)}}c++}return s},GY=function(e){var r=this.cy(),n=this.nodes(),i=null,a=eb(e),s=new Array(a.k),o,u={},l,c=new Array(a.k);a.testMode?typeof a.testCentroids=="number"||(Ft(a.testCentroids)==="object"?o=a.testCentroids:o=YC(n,a.k)):o=YC(n,a.k);for(var f=!0,h=0;f&&h<a.maxIterations;){for(var d=0;d<n.length;d++)i=n[d],u[i.id()]=TV(i,o,a.distance,a.attributes,"kMedoids");f=!1;for(var v=0;v<o.length;v++){var w=bV(v,n,u);if(w.length!==0){c[v]=XC(o[v],w,a.attributes);for(var m=0;m<w.length;m++)l=XC(w[m],w,a.attributes),l<c[v]&&(c[v]=l,o[v]=w[m],f=!0);s[v]=r.collection(w)}}h++}return s},KY=function(e,r,n,i,a){for(var s,o,u=0;u<r.length;u++)for(var l=0;l<e.length;l++)i[u][l]=Math.pow(n[u][l],a.m);for(var c=0;c<e.length;c++)for(var f=0;f<a.attributes.length;f++){s=0,o=0;for(var h=0;h<r.length;h++)s+=i[h][c]*a.attributes[f](r[h]),o+=i[h][c];e[c][f]=s/o}},QY=function(e,r,n,i,a){for(var s=0;s<e.length;s++)r[s]=e[s].slice();for(var o,u,l,c=2/(a.m-1),f=0;f<n.length;f++)for(var h=0;h<i.length;h++){o=0;for(var d=0;d<n.length;d++)u=Cd(a.distance,i[h],n[f],a.attributes,"cmeans"),l=Cd(a.distance,i[h],n[d],a.attributes,"cmeans"),o+=Math.pow(u/l,c);e[h][f]=1/o}},YY=function(e,r,n,i){for(var a=new Array(n.k),s=0;s<a.length;s++)a[s]=[];for(var o,u,l=0;l<r.length;l++){o=-1/0,u=-1;for(var c=0;c<r[0].length;c++)r[l][c]>o&&(o=r[l][c],u=c);a[u].push(e[l])}for(var f=0;f<a.length;f++)a[f]=i.collection(a[f]);return a},JC=function(e){var r=this.cy(),n=this.nodes(),i=eb(e),a,s,o,u,l;u=new Array(n.length);for(var c=0;c<n.length;c++)u[c]=new Array(i.k);o=new Array(n.length);for(var f=0;f<n.length;f++)o[f]=new Array(i.k);for(var h=0;h<n.length;h++){for(var d=0,v=0;v<i.k;v++)o[h][v]=Math.random(),d+=o[h][v];for(var w=0;w<i.k;w++)o[h][w]=o[h][w]/d}s=new Array(i.k);for(var m=0;m<i.k;m++)s[m]=new Array(i.attributes.length);l=new Array(n.length);for(var p=0;p<n.length;p++)l[p]=new Array(i.k);for(var g=!0,y=0;g&&y<i.maxIterations;)g=!1,KY(s,n,o,l,i),QY(o,u,s,n,i),jY(o,u,i.sensitivityThreshold)||(g=!0),y++;return a=YY(n,o,i,r),{clusters:a,degreeOfMembership:o}},XY={kMeans:HY,kMedoids:GY,fuzzyCMeans:JC,fcm:JC},JY=ar({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),ZY={single:"min",complete:"max"},eX=function(e){var r=JY(e),n=ZY[r.linkage];return n!=null&&(r.linkage=n),r},ZC=function(e,r,n,i,a){for(var s=0,o=1/0,u,l=a.attributes,c=function(S,C){return Qv(a.distance,l.length,function(R){return l[R](S)},function(R){return l[R](C)},S,C)},f=0;f<e.length;f++){var h=e[f].key,d=n[h][i[h]];d<o&&(s=h,o=d)}if(a.mode==="threshold"&&o>=a.threshold||a.mode==="dendrogram"&&e.length===1)return!1;var v=r[s],w=r[i[s]],m;a.mode==="dendrogram"?m={left:v,right:w,key:v.key}:m={value:v.value.concat(w.value),key:v.key},e[v.index]=m,e.splice(w.index,1),r[v.key]=m;for(var p=0;p<e.length;p++){var g=e[p];v.key===g.key?u=1/0:a.linkage==="min"?(u=n[v.key][g.key],n[v.key][g.key]>n[w.key][g.key]&&(u=n[w.key][g.key])):a.linkage==="max"?(u=n[v.key][g.key],n[v.key][g.key]<n[w.key][g.key]&&(u=n[w.key][g.key])):a.linkage==="mean"?u=(n[v.key][g.key]*v.size+n[w.key][g.key]*w.size)/(v.size+w.size):a.mode==="dendrogram"?u=c(g.value,v.value):u=c(g.value[0],v.value[0]),n[v.key][g.key]=n[g.key][v.key]=u}for(var y=0;y<e.length;y++){var _=e[y].key;if(i[_]===v.key||i[_]===w.key){for(var T=_,b=0;b<e.length;b++){var E=e[b].key;n[_][E]<n[_][T]&&(T=E)}i[_]=T}e[y].index=y}return v.key=w.key=v.index=w.index=null,!0},Uf=function t(e,r,n){e&&(e.value?r.push(e.value):(e.left&&t(e.left,r),e.right&&t(e.right,r)))},tX=function t(e,r){if(!e)return"";if(e.left&&e.right){var n=t(e.left,r),i=t(e.right,r),a=r.add({group:"nodes",data:{id:n+","+i}});return r.add({group:"edges",data:{source:n,target:a.id()}}),r.add({group:"edges",data:{source:i,target:a.id()}}),a.id()}else if(e.value)return e.value.id()},rX=function t(e,r,n){if(!e)return[];var i=[],a=[],s=[];return r===0?(e.left&&Uf(e.left,i),e.right&&Uf(e.right,a),s=i.concat(a),[n.collection(s)]):r===1?e.value?[n.collection(e.value)]:(e.left&&Uf(e.left,i),e.right&&Uf(e.right,a),[n.collection(i),n.collection(a)]):e.value?[n.collection(e.value)]:(e.left&&(i=t(e.left,r-1,n)),e.right&&(a=t(e.right,r-1,n)),i.concat(a))},ex=function(e){for(var r=this.cy(),n=this.nodes(),i=eX(e),a=i.attributes,s=function(y,_){return Qv(i.distance,a.length,function(T){return a[T](y)},function(T){return a[T](_)},y,_)},o=[],u=[],l=[],c=[],f=0;f<n.length;f++){var h={value:i.mode==="dendrogram"?n[f]:[n[f]],key:f,index:f};o[f]=h,c[f]=h,u[f]=[],l[f]=0}for(var d=0;d<o.length;d++)for(var v=0;v<=d;v++){var w=void 0;i.mode==="dendrogram"?w=d===v?1/0:s(o[d].value,o[v].value):w=d===v?1/0:s(o[d].value[0],o[v].value[0]),u[d][v]=w,u[v][d]=w,w<u[d][l[d]]&&(l[d]=v)}for(var m=ZC(o,c,u,l,i);m;)m=ZC(o,c,u,l,i);var p;return i.mode==="dendrogram"?(p=rX(o[0],i.dendrogramDepth,r),i.addDendrogram&&tX(o[0],r)):(p=new Array(o.length),o.forEach(function(g,y){g.key=g.index=null,p[y]=r.collection(g.value)})),p},nX={hierarchicalClustering:ex,hca:ex},iX=ar({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),aX=function(e){var r=e.damping,n=e.preference;.5<=r&&r<1||_t("Damping must range on [0.5, 1).  Got: ".concat(r));var i=["median","mean","min","max"];return i.some(function(a){return a===n})||le(n)||_t("Preference must be one of [".concat(i.map(function(a){return"'".concat(a,"'")}).join(", "),"] or a number.  Got: ").concat(n)),iX(e)},sX=function(e,r,n,i){var a=function(o,u){return i[u](o)};return-Qv(e,i.length,function(s){return a(r,s)},function(s){return a(n,s)},r,n)},oX=function(e,r){var n=null;return r==="median"?n=aY(e):r==="mean"?n=iY(e):r==="min"?n=rY(e):r==="max"?n=nY(e):n=r,n},uX=function(e,r,n){for(var i=[],a=0;a<e;a++)r[a*e+a]+n[a*e+a]>0&&i.push(a);return i},tx=function(e,r,n){for(var i=[],a=0;a<e;a++){for(var s=-1,o=-1/0,u=0;u<n.length;u++){var l=n[u];r[a*e+l]>o&&(s=l,o=r[a*e+l])}s>0&&i.push(s)}for(var c=0;c<n.length;c++)i[n[c]]=n[c];return i},lX=function(e,r,n){for(var i=tx(e,r,n),a=0;a<n.length;a++){for(var s=[],o=0;o<i.length;o++)i[o]===n[a]&&s.push(o);for(var u=-1,l=-1/0,c=0;c<s.length;c++){for(var f=0,h=0;h<s.length;h++)f+=r[s[h]*e+s[c]];f>l&&(u=c,l=f)}n[a]=s[u]}return i=tx(e,r,n),i},rx=function(e){for(var r=this.cy(),n=this.nodes(),i=aX(e),a={},s=0;s<n.length;s++)a[n[s].id()]=s;var o,u,l,c,f,h;o=n.length,u=o*o,l=new Array(u);for(var d=0;d<u;d++)l[d]=-1/0;for(var v=0;v<o;v++)for(var w=0;w<o;w++)v!==w&&(l[v*o+w]=sX(i.distance,n[v],n[w],i.attributes));c=oX(l,i.preference);for(var m=0;m<o;m++)l[m*o+m]=c;f=new Array(u);for(var p=0;p<u;p++)f[p]=0;h=new Array(u);for(var g=0;g<u;g++)h[g]=0;for(var y=new Array(o),_=new Array(o),T=new Array(o),b=0;b<o;b++)y[b]=0,_[b]=0,T[b]=0;for(var E=new Array(o*i.minIterations),I=0;I<E.length;I++)E[I]=0;var S;for(S=0;S<i.maxIterations;S++){for(var C=0;C<o;C++){for(var R=-1/0,x=-1/0,P=-1,A=0,F=0;F<o;F++)y[F]=f[C*o+F],A=h[C*o+F]+l[C*o+F],A>=R?(x=R,R=A,P=F):A>x&&(x=A);for(var O=0;O<o;O++)f[C*o+O]=(1-i.damping)*(l[C*o+O]-R)+i.damping*y[O];f[C*o+P]=(1-i.damping)*(l[C*o+P]-x)+i.damping*y[P]}for(var L=0;L<o;L++){for(var D=0,$=0;$<o;$++)y[$]=h[$*o+L],_[$]=Math.max(0,f[$*o+L]),D+=_[$];D-=_[L],_[L]=f[L*o+L],D+=_[L];for(var z=0;z<o;z++)h[z*o+L]=(1-i.damping)*Math.min(0,D-_[z])+i.damping*y[z];h[L*o+L]=(1-i.damping)*(D-_[L])+i.damping*y[L]}for(var B=0,j=0;j<o;j++){var Q=h[j*o+j]+f[j*o+j]>0?1:0;E[S%i.minIterations*o+j]=Q,B+=Q}if(B>0&&(S>=i.minIterations-1||S==i.maxIterations-1)){for(var N=0,M=0;M<o;M++){T[M]=0;for(var q=0;q<i.minIterations;q++)T[M]+=E[q*o+M];(T[M]===0||T[M]===i.minIterations)&&N++}if(N===o)break}}for(var V=uX(o,f,h),W=lX(o,l,V),X={},J=0;J<V.length;J++)X[V[J]]=[];for(var ae=0;ae<n.length;ae++){var ve=a[n[ae].id()],_e=W[ve];_e!=null&&X[_e].push(n[ae])}for(var se=new Array(V.length),te=0;te<V.length;te++)se[te]=r.collection(X[V[te]]);return se},cX={affinityPropagation:rx,ap:rx},fX=ar({root:void 0,directed:!1}),hX={hierholzer:function(e){if(!He(e)){var r=arguments;e={root:r[0],directed:r[1]}}var n=fX(e),i=n.root,a=n.directed,s=this,o=!1,u,l,c;i&&(c=Te(i)?this.filter(i)[0].id():i[0].id());var f={},h={};a?s.forEach(function(g){var y=g.id();if(g.isNode()){var _=g.indegree(!0),T=g.outdegree(!0),b=_-T,E=T-_;b==1?u?o=!0:u=y:E==1?l?o=!0:l=y:(E>1||b>1)&&(o=!0),f[y]=[],g.outgoers().forEach(function(I){I.isEdge()&&f[y].push(I.id())})}else h[y]=[void 0,g.target().id()]}):s.forEach(function(g){var y=g.id();if(g.isNode()){var _=g.degree(!0);_%2&&(u?l?o=!0:l=y:u=y),f[y]=[],g.connectedEdges().forEach(function(T){return f[y].push(T.id())})}else h[y]=[g.source().id(),g.target().id()]});var d={found:!1,trail:void 0};if(o)return d;if(l&&u)if(a){if(c&&l!=c)return d;c=l}else{if(c&&l!=c&&u!=c)return d;c||(c=l)}else c||(c=s[0].id());var v=function(y){for(var _=y,T=[y],b,E,I;f[_].length;)b=f[_].shift(),E=h[b][0],I=h[b][1],_!=I?(f[I]=f[I].filter(function(S){return S!=b}),_=I):!a&&_!=E&&(f[E]=f[E].filter(function(S){return S!=b}),_=E),T.unshift(b),T.unshift(_);return T},w=[],m=[];for(m=v(c);m.length!=1;)f[m[0]].length==0?(w.unshift(s.getElementById(m.shift())),w.unshift(s.getElementById(m.shift()))):m=v(m.shift()).concat(m);w.unshift(s.getElementById(m.shift()));for(var p in f)if(f[p].length)return d;return d.found=!0,d.trail=this.spawn(w,!0),d}},jf=function(){var e=this,r={},n=0,i=0,a=[],s=[],o={},u=function(h,d){for(var v=s.length-1,w=[],m=e.spawn();s[v].x!=h||s[v].y!=d;)w.push(s.pop().edge),v--;w.push(s.pop().edge),w.forEach(function(p){var g=p.connectedNodes().intersection(e);m.merge(p),g.forEach(function(y){var _=y.id(),T=y.connectedEdges().intersection(e);m.merge(y),r[_].cutVertex?m.merge(T.filter(function(b){return b.isLoop()})):m.merge(T)})}),a.push(m)},l=function f(h,d,v){h===v&&(i+=1),r[d]={id:n,low:n++,cutVertex:!1};var w=e.getElementById(d).connectedEdges().intersection(e);if(w.size()===0)a.push(e.spawn(e.getElementById(d)));else{var m,p,g,y;w.forEach(function(_){m=_.source().id(),p=_.target().id(),g=m===d?p:m,g!==v&&(y=_.id(),o[y]||(o[y]=!0,s.push({x:d,y:g,edge:_})),g in r?r[d].low=Math.min(r[d].low,r[g].id):(f(h,g,d),r[d].low=Math.min(r[d].low,r[g].low),r[d].id<=r[g].low&&(r[d].cutVertex=!0,u(d,g))))})}};e.forEach(function(f){if(f.isNode()){var h=f.id();h in r||(i=0,l(h,h),r[h].cutVertex=i>1)}});var c=Object.keys(r).filter(function(f){return r[f].cutVertex}).map(function(f){return e.getElementById(f)});return{cut:e.spawn(c),components:a}},dX={hopcroftTarjanBiconnected:jf,htbc:jf,htb:jf,hopcroftTarjanBiconnectedComponents:jf},Wf=function(){var e=this,r={},n=0,i=[],a=[],s=e.spawn(e),o=function u(l){a.push(l),r[l]={index:n,low:n++,explored:!1};var c=e.getElementById(l).connectedEdges().intersection(e);if(c.forEach(function(w){var m=w.target().id();m!==l&&(m in r||u(m),r[m].explored||(r[l].low=Math.min(r[l].low,r[m].low)))}),r[l].index===r[l].low){for(var f=e.spawn();;){var h=a.pop();if(f.merge(e.getElementById(h)),r[h].low=r[l].index,r[h].explored=!0,h===l)break}var d=f.edgesWith(f),v=f.merge(d);i.push(v),s=s.difference(v)}};return e.forEach(function(u){if(u.isNode()){var l=u.id();l in r||o(l)}}),{cut:s,components:i}},vX={tarjanStronglyConnected:Wf,tsc:Wf,tscc:Wf,tarjanStronglyConnectedComponents:Wf},SV={};[pc,jQ,WQ,GQ,QQ,XQ,eY,IY,_o,Eo,s_,FY,XY,nX,cX,hX,dX,vX].forEach(function(t){xe(SV,t)});/*!
Embeddable Minimum Strictly-Compliant Promises/A+ 1.1.1 Thenable
Copyright (c) 2013-2014 Ralf S. Engelschall (http://engelschall.com)
Licensed under The MIT License (http://opensource.org/licenses/MIT)
*/var IV=0,CV=1,xV=2,Ti=function t(e){if(!(this instanceof t))return new t(e);this.id="Thenable/1.0.7",this.state=IV,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},typeof e=="function"&&e.call(this,this.fulfill.bind(this),this.reject.bind(this))};Ti.prototype={fulfill:function(e){return nx(this,CV,"fulfillValue",e)},reject:function(e){return nx(this,xV,"rejectReason",e)},then:function(e,r){var n=this,i=new Ti;return n.onFulfilled.push(ax(e,i,"fulfill")),n.onRejected.push(ax(r,i,"reject")),RV(n),i.proxy}};var nx=function(e,r,n,i){return e.state===IV&&(e.state=r,e[n]=i,RV(e)),e},RV=function(e){e.state===CV?ix(e,"onFulfilled",e.fulfillValue):e.state===xV&&ix(e,"onRejected",e.rejectReason)},ix=function(e,r,n){if(e[r].length!==0){var i=e[r];e[r]=[];var a=function(){for(var o=0;o<i.length;o++)i[o](n)};typeof setImmediate=="function"?setImmediate(a):setTimeout(a,0)}},ax=function(e,r,n){return function(i){if(typeof e!="function")r[n].call(r,i);else{var a;try{a=e(i)}catch(s){r.reject(s);return}pX(r,a)}}},pX=function t(e,r){if(e===r||e.proxy===r){e.reject(new TypeError("cannot resolve promise with itself"));return}var n;if(Ft(r)==="object"&&r!==null||typeof r=="function")try{n=r.then}catch(a){e.reject(a);return}if(typeof n=="function"){var i=!1;try{n.call(r,function(a){i||(i=!0,a===r?e.reject(new TypeError("circular thenable chain")):t(e,a))},function(a){i||(i=!0,e.reject(a))})}catch(a){i||e.reject(a)}return}e.fulfill(r)};Ti.all=function(t){return new Ti(function(e,r){for(var n=new Array(t.length),i=0,a=function(u,l){n[u]=l,i++,i===t.length&&e(n)},s=0;s<t.length;s++)(function(o){var u=t[o],l=u!=null&&u.then!=null;if(l)u.then(function(f){a(o,f)},function(f){r(f)});else{var c=u;a(o,c)}})(s)})};Ti.resolve=function(t){return new Ti(function(e,r){e(t)})};Ti.reject=function(t){return new Ti(function(e,r){r(t)})};var vu=typeof Promise<"u"?Promise:Ti,o_=function(e,r,n){var i=HT(e),a=!i,s=this._private=xe({duration:1e3},r,n);if(s.target=e,s.style=s.style||s.css,s.started=!1,s.playing=!1,s.hooked=!1,s.applying=!1,s.progress=0,s.completes=[],s.frames=[],s.complete&&pt(s.complete)&&s.completes.push(s.complete),a){var o=e.position();s.startPosition=s.startPosition||{x:o.x,y:o.y},s.startStyle=s.startStyle||e.cy().style().getAnimationStartStyle(e,s.style)}if(i){var u=e.pan();s.startPan={x:u.x,y:u.y},s.startZoom=e.zoom()}this.length=1,this[0]=this},hs=o_.prototype;xe(hs,{instanceString:function(){return"animation"},hook:function(){var e=this._private;if(!e.hooked){var r,n=e.target._private.animation;e.queue?r=n.queue:r=n.current,r.push(this),Gr(e.target)&&e.target.cy().addToAnimationPool(e.target),e.hooked=!0}return this},play:function(){var e=this._private;return e.progress===1&&(e.progress=0),e.playing=!0,e.started=!1,e.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var e=this._private;return e.applying=!0,e.started=!1,e.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var e=this._private;return e.playing=!1,e.started=!1,this},stop:function(){var e=this._private;return e.playing=!1,e.started=!1,e.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(e){var r=this._private;return e===void 0?r.progress*r.duration:this.progress(e/r.duration)},progress:function(e){var r=this._private,n=r.playing;return e===void 0?r.progress:(n&&this.pause(),r.progress=e,r.started=!1,n&&this.play(),this)},completed:function(){return this._private.progress===1},reverse:function(){var e=this._private,r=e.playing;r&&this.pause(),e.progress=1-e.progress,e.started=!1;var n=function(l,c){var f=e[l];f!=null&&(e[l]=e[c],e[c]=f)};if(n("zoom","startZoom"),n("pan","startPan"),n("position","startPosition"),e.style)for(var i=0;i<e.style.length;i++){var a=e.style[i],s=a.name,o=e.startStyle[s];e.startStyle[s]=a,e.style[i]=o}return r&&this.play(),this},promise:function(e){var r=this._private,n;switch(e){case"frame":n=r.frames;break;default:case"complete":case"completed":n=r.completes}return new vu(function(i,a){n.push(function(){i()})})}});hs.complete=hs.completed;hs.run=hs.play;hs.running=hs.playing;var gX={animated:function(){return function(){var r=this,n=r.length!==void 0,i=n?r:[r],a=this._private.cy||this;if(!a.styleEnabled())return!1;var s=i[0];if(s)return s._private.animation.current.length>0}},clearQueue:function(){return function(){var r=this,n=r.length!==void 0,i=n?r:[r],a=this._private.cy||this;if(!a.styleEnabled())return this;for(var s=0;s<i.length;s++){var o=i[s];o._private.animation.queue=[]}return this}},delay:function(){return function(r,n){var i=this._private.cy||this;return i.styleEnabled()?this.animate({delay:r,duration:r,complete:n}):this}},delayAnimation:function(){return function(r,n){var i=this._private.cy||this;return i.styleEnabled()?this.animation({delay:r,duration:r,complete:n}):this}},animation:function(){return function(r,n){var i=this,a=i.length!==void 0,s=a?i:[i],o=this._private.cy||this,u=!a,l=!u;if(!o.styleEnabled())return this;var c=o.style();r=xe({},r,n);var f=Object.keys(r).length===0;if(f)return new o_(s[0],r);switch(r.duration===void 0&&(r.duration=400),r.duration){case"slow":r.duration=600;break;case"fast":r.duration=200;break}if(l&&(r.style=c.getPropsList(r.style||r.css),r.css=void 0),l&&r.renderedPosition!=null){var h=r.renderedPosition,d=o.pan(),v=o.zoom();r.position=dV(h,v,d)}if(u&&r.panBy!=null){var w=r.panBy,m=o.pan();r.pan={x:m.x+w.x,y:m.y+w.y}}var p=r.center||r.centre;if(u&&p!=null){var g=o.getCenterPan(p.eles,r.zoom);g!=null&&(r.pan=g)}if(u&&r.fit!=null){var y=r.fit,_=o.getFitViewport(y.eles||y.boundingBox,y.padding);_!=null&&(r.pan=_.pan,r.zoom=_.zoom)}if(u&&He(r.zoom)){var T=o.getZoomedViewport(r.zoom);T!=null?(T.zoomed&&(r.zoom=T.zoom),T.panned&&(r.pan=T.pan)):r.zoom=null}return new o_(s[0],r)}},animate:function(){return function(r,n){var i=this,a=i.length!==void 0,s=a?i:[i],o=this._private.cy||this;if(!o.styleEnabled())return this;n&&(r=xe({},r,n));for(var u=0;u<s.length;u++){var l=s[u],c=l.animated()&&(r.queue===void 0||r.queue),f=l.animation(r,c?{queue:!0}:void 0);f.play()}return this}},stop:function(){return function(r,n){var i=this,a=i.length!==void 0,s=a?i:[i],o=this._private.cy||this;if(!o.styleEnabled())return this;for(var u=0;u<s.length;u++){for(var l=s[u],c=l._private,f=c.animation.current,h=0;h<f.length;h++){var d=f[h],v=d._private;n&&(v.duration=0)}r&&(c.animation.queue=[]),n||(c.animation.current=[])}return o.notify("draw"),this}}},mX={data:function(e){var r={field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(i){},beforeSet:function(i,a){},onSet:function(i){},canSet:function(i){return!0}};return e=xe({},r,e),function(i,a){var s=e,o=this,u=o.length!==void 0,l=u?o:[o],c=u?o[0]:o;if(Te(i)){var f=i.indexOf(".")!==-1,h=f&&rQ.default(i);if(s.allowGetting&&a===void 0){var d;return c&&(s.beforeGet(c),h&&c._private[s.field][i]===void 0?d=eQ.default(c._private[s.field],h):d=c._private[s.field][i]),d}else if(s.allowSetting&&a!==void 0){var v=!s.immutableKeys[i];if(v){var w=XM({},i,a);s.beforeSet(o,w);for(var m=0,p=l.length;m<p;m++){var g=l[m];s.canSet(g)&&(h&&c._private[s.field][i]===void 0?tQ.default(g._private[s.field],h,a):g._private[s.field][i]=a)}s.updateStyle&&o.updateStyle(),s.onSet(o),s.settingTriggersEvent&&o[s.triggerFnName](s.settingEvent)}}}else if(s.allowSetting&&He(i)){var y=i,_,T,b=Object.keys(y);s.beforeSet(o,y);for(var E=0;E<b.length;E++){_=b[E],T=y[_];var I=!s.immutableKeys[_];if(I)for(var S=0;S<l.length;S++){var C=l[S];s.canSet(C)&&(C._private[s.field][_]=T)}}s.updateStyle&&o.updateStyle(),s.onSet(o),s.settingTriggersEvent&&o[s.triggerFnName](s.settingEvent)}else if(s.allowBinding&&pt(i)){var R=i;o.on(s.bindingEvent,R)}else if(s.allowGetting&&i===void 0){var x;return c&&(s.beforeGet(c),x=c._private[s.field]),x}return o}},removeData:function(e){var r={field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}};return e=xe({},r,e),function(i){var a=e,s=this,o=s.length!==void 0,u=o?s:[s];if(Te(i)){for(var l=i.split(/\s+/),c=l.length,f=0;f<c;f++){var h=l[f];if(!ga(h)){var d=!a.immutableKeys[h];if(d)for(var v=0,w=u.length;v<w;v++)u[v]._private[a.field][h]=void 0}}a.triggerEvent&&s[a.triggerFnName](a.event)}else if(i===void 0){for(var m=0,p=u.length;m<p;m++)for(var g=u[m]._private[a.field],y=Object.keys(g),_=0;_<y.length;_++){var T=y[_],b=!a.immutableKeys[T];b&&(g[T]=void 0)}a.triggerEvent&&s[a.triggerFnName](a.event)}return s}}},yX={eventAliasesOn:function(e){var r=e;r.addListener=r.listen=r.bind=r.on,r.unlisten=r.unbind=r.off=r.removeListener,r.trigger=r.emit,r.pon=r.promiseOn=function(n,i){var a=this,s=Array.prototype.slice.call(arguments,0);return new vu(function(o,u){var l=function(d){a.off.apply(a,f),o(d)},c=s.concat([l]),f=c.concat([]);a.on.apply(a,c)})}}},Ye={};[gX,mX,yX].forEach(function(t){xe(Ye,t)});var wX={animate:Ye.animate(),animation:Ye.animation(),animated:Ye.animated(),clearQueue:Ye.clearQueue(),delay:Ye.delay(),delayAnimation:Ye.delayAnimation(),stop:Ye.stop()},bh={classes:function(e){var r=this;if(e===void 0){var n=[];return r[0]._private.classes.forEach(function(v){return n.push(v)}),n}else tt(e)||(e=(e||"").match(/\S+/g)||[]);for(var i=[],a=new du(e),s=0;s<r.length;s++){for(var o=r[s],u=o._private,l=u.classes,c=!1,f=0;f<e.length;f++){var h=e[f],d=l.has(h);if(!d){c=!0;break}}c||(c=l.size!==e.length),c&&(u.classes=a,i.push(o))}return i.length>0&&this.spawn(i).updateStyle().emit("class"),r},addClass:function(e){return this.toggleClass(e,!0)},hasClass:function(e){var r=this[0];return r!=null&&r._private.classes.has(e)},toggleClass:function(e,r){tt(e)||(e=e.match(/\S+/g)||[]);for(var n=this,i=r===void 0,a=[],s=0,o=n.length;s<o;s++)for(var u=n[s],l=u._private.classes,c=!1,f=0;f<e.length;f++){var h=e[f],d=l.has(h),v=!1;r||i&&!d?(l.add(h),v=!0):(!r||i&&d)&&(l.delete(h),v=!0),!c&&v&&(a.push(u),c=!0)}return a.length>0&&this.spawn(a).updateStyle().emit("class"),n},removeClass:function(e){return this.toggleClass(e,!1)},flashClass:function(e,r){var n=this;if(r==null)r=250;else if(r===0)return n;return n.addClass(e),setTimeout(function(){n.removeClass(e)},r),n}};bh.className=bh.classNames=bh.classes;var je={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:`"(?:\\\\"|[^"])*"|'(?:\\\\'|[^'])*'`,number:Lt,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};je.variable="(?:[\\w-.]|(?:\\\\"+je.metaChar+"))+";je.className="(?:[\\w-]|(?:\\\\"+je.metaChar+"))+";je.value=je.string+"|"+je.number;je.id=je.variable;(function(){var t,e,r;for(t=je.comparatorOp.split("|"),r=0;r<t.length;r++)e=t[r],je.comparatorOp+="|@"+e;for(t=je.comparatorOp.split("|"),r=0;r<t.length;r++)e=t[r],!(e.indexOf("!")>=0)&&e!=="="&&(je.comparatorOp+="|\\!"+e)})();var et=function(){return{checks:[]}},ge={GROUP:0,COLLECTION:1,FILTER:2,DATA_COMPARE:3,DATA_EXIST:4,DATA_BOOL:5,META_COMPARE:6,STATE:7,ID:8,CLASS:9,UNDIRECTED_EDGE:10,DIRECTED_EDGE:11,NODE_SOURCE:12,NODE_TARGET:13,NODE_NEIGHBOR:14,CHILD:15,DESCENDANT:16,PARENT:17,ANCESTOR:18,COMPOUND_SPLIT:19,TRUE:20},u_=[{selector:":selected",matches:function(e){return e.selected()}},{selector:":unselected",matches:function(e){return!e.selected()}},{selector:":selectable",matches:function(e){return e.selectable()}},{selector:":unselectable",matches:function(e){return!e.selectable()}},{selector:":locked",matches:function(e){return e.locked()}},{selector:":unlocked",matches:function(e){return!e.locked()}},{selector:":visible",matches:function(e){return e.visible()}},{selector:":hidden",matches:function(e){return!e.visible()}},{selector:":transparent",matches:function(e){return e.transparent()}},{selector:":grabbed",matches:function(e){return e.grabbed()}},{selector:":free",matches:function(e){return!e.grabbed()}},{selector:":removed",matches:function(e){return e.removed()}},{selector:":inside",matches:function(e){return!e.removed()}},{selector:":grabbable",matches:function(e){return e.grabbable()}},{selector:":ungrabbable",matches:function(e){return!e.grabbable()}},{selector:":animated",matches:function(e){return e.animated()}},{selector:":unanimated",matches:function(e){return!e.animated()}},{selector:":parent",matches:function(e){return e.isParent()}},{selector:":childless",matches:function(e){return e.isChildless()}},{selector:":child",matches:function(e){return e.isChild()}},{selector:":orphan",matches:function(e){return e.isOrphan()}},{selector:":nonorphan",matches:function(e){return e.isChild()}},{selector:":compound",matches:function(e){return e.isNode()?e.isParent():e.source().isParent()||e.target().isParent()}},{selector:":loop",matches:function(e){return e.isLoop()}},{selector:":simple",matches:function(e){return e.isSimple()}},{selector:":active",matches:function(e){return e.active()}},{selector:":inactive",matches:function(e){return!e.active()}},{selector:":backgrounding",matches:function(e){return e.backgrounding()}},{selector:":nonbackgrounding",matches:function(e){return!e.backgrounding()}}].sort(function(t,e){return bQ(t.selector,e.selector)}),_X=function(){for(var t={},e,r=0;r<u_.length;r++)e=u_[r],t[e.selector]=e.matches;return t}(),EX=function(e,r){return _X[e](r)},TX="("+u_.map(function(t){return t.selector}).join("|")+")",Ns=function(e){return e.replace(new RegExp("\\\\("+je.metaChar+")","g"),function(r,n){return n})},Oi=function(e,r,n){e[e.length-1]=n},l_=[{name:"group",query:!0,regex:"("+je.group+")",populate:function(e,r,n){var i=wn(n,1),a=i[0];r.checks.push({type:ge.GROUP,value:a==="*"?a:a+"s"})}},{name:"state",query:!0,regex:TX,populate:function(e,r,n){var i=wn(n,1),a=i[0];r.checks.push({type:ge.STATE,value:a})}},{name:"id",query:!0,regex:"\\#("+je.id+")",populate:function(e,r,n){var i=wn(n,1),a=i[0];r.checks.push({type:ge.ID,value:Ns(a)})}},{name:"className",query:!0,regex:"\\.("+je.className+")",populate:function(e,r,n){var i=wn(n,1),a=i[0];r.checks.push({type:ge.CLASS,value:Ns(a)})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+je.variable+")\\s*\\]",populate:function(e,r,n){var i=wn(n,1),a=i[0];r.checks.push({type:ge.DATA_EXIST,field:Ns(a)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+je.variable+")\\s*("+je.comparatorOp+")\\s*("+je.value+")\\s*\\]",populate:function(e,r,n){var i=wn(n,3),a=i[0],s=i[1],o=i[2],u=new RegExp("^"+je.string+"$").exec(o)!=null;u?o=o.substring(1,o.length-1):o=parseFloat(o),r.checks.push({type:ge.DATA_COMPARE,field:Ns(a),operator:s,value:o})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+je.boolOp+")\\s*("+je.variable+")\\s*\\]",populate:function(e,r,n){var i=wn(n,2),a=i[0],s=i[1];r.checks.push({type:ge.DATA_BOOL,field:Ns(s),operator:a})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+je.meta+")\\s*("+je.comparatorOp+")\\s*("+je.number+")\\s*\\]\\]",populate:function(e,r,n){var i=wn(n,3),a=i[0],s=i[1],o=i[2];r.checks.push({type:ge.META_COMPARE,field:Ns(a),operator:s,value:parseFloat(o)})}},{name:"nextQuery",separator:!0,regex:je.separator,populate:function(e,r){var n=e.currentSubject,i=e.edgeCount,a=e.compoundCount,s=e[e.length-1];n!=null&&(s.subject=n,e.currentSubject=null),s.edgeCount=i,s.compoundCount=a,e.edgeCount=0,e.compoundCount=0;var o=e[e.length++]=et();return o}},{name:"directedEdge",separator:!0,regex:je.directedEdge,populate:function(e,r){if(e.currentSubject==null){var n=et(),i=r,a=et();return n.checks.push({type:ge.DIRECTED_EDGE,source:i,target:a}),Oi(e,r,n),e.edgeCount++,a}else{var s=et(),o=r,u=et();return s.checks.push({type:ge.NODE_SOURCE,source:o,target:u}),Oi(e,r,s),e.edgeCount++,u}}},{name:"undirectedEdge",separator:!0,regex:je.undirectedEdge,populate:function(e,r){if(e.currentSubject==null){var n=et(),i=r,a=et();return n.checks.push({type:ge.UNDIRECTED_EDGE,nodes:[i,a]}),Oi(e,r,n),e.edgeCount++,a}else{var s=et(),o=r,u=et();return s.checks.push({type:ge.NODE_NEIGHBOR,node:o,neighbor:u}),Oi(e,r,s),u}}},{name:"child",separator:!0,regex:je.child,populate:function(e,r){if(e.currentSubject==null){var n=et(),i=et(),a=e[e.length-1];return n.checks.push({type:ge.CHILD,parent:a,child:i}),Oi(e,r,n),e.compoundCount++,i}else if(e.currentSubject===r){var s=et(),o=e[e.length-1],u=et(),l=et(),c=et(),f=et();return s.checks.push({type:ge.COMPOUND_SPLIT,left:o,right:u,subject:l}),l.checks=r.checks,r.checks=[{type:ge.TRUE}],f.checks.push({type:ge.TRUE}),u.checks.push({type:ge.PARENT,parent:f,child:c}),Oi(e,o,s),e.currentSubject=l,e.compoundCount++,c}else{var h=et(),d=et(),v=[{type:ge.PARENT,parent:h,child:d}];return h.checks=r.checks,r.checks=v,e.compoundCount++,d}}},{name:"descendant",separator:!0,regex:je.descendant,populate:function(e,r){if(e.currentSubject==null){var n=et(),i=et(),a=e[e.length-1];return n.checks.push({type:ge.DESCENDANT,ancestor:a,descendant:i}),Oi(e,r,n),e.compoundCount++,i}else if(e.currentSubject===r){var s=et(),o=e[e.length-1],u=et(),l=et(),c=et(),f=et();return s.checks.push({type:ge.COMPOUND_SPLIT,left:o,right:u,subject:l}),l.checks=r.checks,r.checks=[{type:ge.TRUE}],f.checks.push({type:ge.TRUE}),u.checks.push({type:ge.ANCESTOR,ancestor:f,descendant:c}),Oi(e,o,s),e.currentSubject=l,e.compoundCount++,c}else{var h=et(),d=et(),v=[{type:ge.ANCESTOR,ancestor:h,descendant:d}];return h.checks=r.checks,r.checks=v,e.compoundCount++,d}}},{name:"subject",modifier:!0,regex:je.subject,populate:function(e,r){if(e.currentSubject!=null&&e.currentSubject!==r)return Xe("Redefinition of subject in selector `"+e.toString()+"`"),!1;e.currentSubject=r;var n=e[e.length-1],i=n.checks[0],a=i==null?null:i.type;a===ge.DIRECTED_EDGE?i.type=ge.NODE_TARGET:a===ge.UNDIRECTED_EDGE&&(i.type=ge.NODE_NEIGHBOR,i.node=i.nodes[1],i.neighbor=i.nodes[0],i.nodes=null)}}];l_.forEach(function(t){return t.regexObj=new RegExp("^"+t.regex)});var bX=function(e){for(var r,n,i,a=0;a<l_.length;a++){var s=l_[a],o=s.name,u=e.match(s.regexObj);if(u!=null){n=u,r=s,i=o;var l=u[0];e=e.substring(l.length);break}}return{expr:r,match:n,name:i,remaining:e}},SX=function(e){var r=e.match(/^\s+/);if(r){var n=r[0];e=e.substring(n.length)}return e},IX=function(e){var r=this,n=r.inputText=e,i=r[0]=et();for(r.length=1,n=SX(n);;){var a=bX(n);if(a.expr==null)return Xe("The selector `"+e+"`is invalid"),!1;var s=a.match.slice(1),o=a.expr.populate(r,i,s);if(o===!1)return!1;if(o!=null&&(i=o),n=a.remaining,n.match(/^\s*$/))break}var u=r[r.length-1];r.currentSubject!=null&&(u.subject=r.currentSubject),u.edgeCount=r.edgeCount,u.compoundCount=r.compoundCount;for(var l=0;l<r.length;l++){var c=r[l];if(c.compoundCount>0&&c.edgeCount>0)return Xe("The selector `"+e+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(c.edgeCount>1)return Xe("The selector `"+e+"` is invalid because it uses multiple edge selectors"),!1;c.edgeCount===1&&Xe("The selector `"+e+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},CX=function(){if(this.toStringCache!=null)return this.toStringCache;for(var e=function(c){return c??""},r=function(c){return Te(c)?'"'+c+'"':e(c)},n=function(c){return" "+c+" "},i=function(c,f){var h=c.type,d=c.value;switch(h){case ge.GROUP:{var v=e(d);return v.substring(0,v.length-1)}case ge.DATA_COMPARE:{var w=c.field,m=c.operator;return"["+w+n(e(m))+r(d)+"]"}case ge.DATA_BOOL:{var p=c.operator,g=c.field;return"["+e(p)+g+"]"}case ge.DATA_EXIST:{var y=c.field;return"["+y+"]"}case ge.META_COMPARE:{var _=c.operator,T=c.field;return"[["+T+n(e(_))+r(d)+"]]"}case ge.STATE:return d;case ge.ID:return"#"+d;case ge.CLASS:return"."+d;case ge.PARENT:case ge.CHILD:return a(c.parent,f)+n(">")+a(c.child,f);case ge.ANCESTOR:case ge.DESCENDANT:return a(c.ancestor,f)+" "+a(c.descendant,f);case ge.COMPOUND_SPLIT:{var b=a(c.left,f),E=a(c.subject,f),I=a(c.right,f);return b+(b.length>0?" ":"")+E+I}case ge.TRUE:return""}},a=function(c,f){return c.checks.reduce(function(h,d,v){return h+(f===c&&v===0?"$":"")+i(d,f)},"")},s="",o=0;o<this.length;o++){var u=this[o];s+=a(u,u.subject),this.length>1&&o<this.length-1&&(s+=", ")}return this.toStringCache=s,s},xX={parse:IX,toString:CX},kV=function(e,r,n){var i,a=Te(e),s=le(e),o=Te(n),u,l,c=!1,f=!1,h=!1;switch(r.indexOf("!")>=0&&(r=r.replace("!",""),f=!0),r.indexOf("@")>=0&&(r=r.replace("@",""),c=!0),(a||o||c)&&(u=!a&&!s?"":""+e,l=""+n),c&&(e=u=u.toLowerCase(),n=l=l.toLowerCase()),r){case"*=":i=u.indexOf(l)>=0;break;case"$=":i=u.indexOf(l,u.length-l.length)>=0;break;case"^=":i=u.indexOf(l)===0;break;case"=":i=e===n;break;case">":h=!0,i=e>n;break;case">=":h=!0,i=e>=n;break;case"<":h=!0,i=e<n;break;case"<=":h=!0,i=e<=n;break;default:i=!1;break}return f&&(e!=null||!h)&&(i=!i),i},RX=function(e,r){switch(r){case"?":return!!e;case"!":return!e;case"^":return e===void 0}},kX=function(e){return e!==void 0},tb=function(e,r){return e.data(r)},AX=function(e,r){return e[r]()},Tt=[],ct=function(e,r){return e.checks.every(function(n){return Tt[n.type](n,r)})};Tt[ge.GROUP]=function(t,e){var r=t.value;return r==="*"||r===e.group()};Tt[ge.STATE]=function(t,e){var r=t.value;return EX(r,e)};Tt[ge.ID]=function(t,e){var r=t.value;return e.id()===r};Tt[ge.CLASS]=function(t,e){var r=t.value;return e.hasClass(r)};Tt[ge.META_COMPARE]=function(t,e){var r=t.field,n=t.operator,i=t.value;return kV(AX(e,r),n,i)};Tt[ge.DATA_COMPARE]=function(t,e){var r=t.field,n=t.operator,i=t.value;return kV(tb(e,r),n,i)};Tt[ge.DATA_BOOL]=function(t,e){var r=t.field,n=t.operator;return RX(tb(e,r),n)};Tt[ge.DATA_EXIST]=function(t,e){var r=t.field;return t.operator,kX(tb(e,r))};Tt[ge.UNDIRECTED_EDGE]=function(t,e){var r=t.nodes[0],n=t.nodes[1],i=e.source(),a=e.target();return ct(r,i)&&ct(n,a)||ct(n,i)&&ct(r,a)};Tt[ge.NODE_NEIGHBOR]=function(t,e){return ct(t.node,e)&&e.neighborhood().some(function(r){return r.isNode()&&ct(t.neighbor,r)})};Tt[ge.DIRECTED_EDGE]=function(t,e){return ct(t.source,e.source())&&ct(t.target,e.target())};Tt[ge.NODE_SOURCE]=function(t,e){return ct(t.source,e)&&e.outgoers().some(function(r){return r.isNode()&&ct(t.target,r)})};Tt[ge.NODE_TARGET]=function(t,e){return ct(t.target,e)&&e.incomers().some(function(r){return r.isNode()&&ct(t.source,r)})};Tt[ge.CHILD]=function(t,e){return ct(t.child,e)&&ct(t.parent,e.parent())};Tt[ge.PARENT]=function(t,e){return ct(t.parent,e)&&e.children().some(function(r){return ct(t.child,r)})};Tt[ge.DESCENDANT]=function(t,e){return ct(t.descendant,e)&&e.ancestors().some(function(r){return ct(t.ancestor,r)})};Tt[ge.ANCESTOR]=function(t,e){return ct(t.ancestor,e)&&e.descendants().some(function(r){return ct(t.descendant,r)})};Tt[ge.COMPOUND_SPLIT]=function(t,e){return ct(t.subject,e)&&ct(t.left,e)&&ct(t.right,e)};Tt[ge.TRUE]=function(){return!0};Tt[ge.COLLECTION]=function(t,e){var r=t.value;return r.has(e)};Tt[ge.FILTER]=function(t,e){var r=t.value;return r(e)};var PX=function(e){var r=this;if(r.length===1&&r[0].checks.length===1&&r[0].checks[0].type===ge.ID)return e.getElementById(r[0].checks[0].value).collection();var n=function(a){for(var s=0;s<r.length;s++){var o=r[s];if(ct(o,a))return!0}return!1};return r.text()==null&&(n=function(){return!0}),e.filter(n)},DX=function(e){for(var r=this,n=0;n<r.length;n++){var i=r[n];if(ct(i,e))return!0}return!1},OX={matches:DX,filter:PX},ya=function(e){this.inputText=e,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,e==null||Te(e)&&e.match(/^\s*$/)||(Gr(e)?this.addQuery({checks:[{type:ge.COLLECTION,value:e.collection()}]}):pt(e)?this.addQuery({checks:[{type:ge.FILTER,value:e}]}):Te(e)?this.parse(e)||(this.invalid=!0):_t("A selector must be created from a string; found "))},wa=ya.prototype;[xX,OX].forEach(function(t){return xe(wa,t)});wa.text=function(){return this.inputText};wa.size=function(){return this.length};wa.eq=function(t){return this[t]};wa.sameText=function(t){return!this.invalid&&!t.invalid&&this.text()===t.text()};wa.addQuery=function(t){this[this.length++]=t};wa.selector=wa.toString;var la={allAre:function(e){var r=new ya(e);return this.every(function(n){return r.matches(n)})},is:function(e){var r=new ya(e);return this.some(function(n){return r.matches(n)})},some:function(e,r){for(var n=0;n<this.length;n++){var i=r?e.apply(r,[this[n],n,this]):e(this[n],n,this);if(i)return!0}return!1},every:function(e,r){for(var n=0;n<this.length;n++){var i=r?e.apply(r,[this[n],n,this]):e(this[n],n,this);if(!i)return!1}return!0},same:function(e){if(this===e)return!0;e=this.cy().collection(e);var r=this.length,n=e.length;return r!==n?!1:r===1?this[0]===e[0]:this.every(function(i){return e.hasElementWithId(i.id())})},anySame:function(e){return e=this.cy().collection(e),this.some(function(r){return e.hasElementWithId(r.id())})},allAreNeighbors:function(e){e=this.cy().collection(e);var r=this.neighborhood();return e.every(function(n){return r.hasElementWithId(n.id())})},contains:function(e){e=this.cy().collection(e);var r=this;return e.every(function(n){return r.hasElementWithId(n.id())})}};la.allAreNeighbours=la.allAreNeighbors;la.has=la.contains;la.equal=la.equals=la.same;var un=function(e,r){return function(i,a,s,o){var u=i,l=this,c;if(u==null?c="":Gr(u)&&u.length===1&&(c=u.id()),l.length===1&&c){var f=l[0]._private,h=f.traversalCache=f.traversalCache||{},d=h[r]=h[r]||[],v=cs(c),w=d[v];return w||(d[v]=e.call(l,i,a,s,o))}else return e.call(l,i,a,s,o)}},Uo={parent:function(e){var r=[];if(this.length===1){var n=this[0]._private.parent;if(n)return n}for(var i=0;i<this.length;i++){var a=this[i],s=a._private.parent;s&&r.push(s)}return this.spawn(r,!0).filter(e)},parents:function(e){for(var r=[],n=this.parent();n.nonempty();){for(var i=0;i<n.length;i++){var a=n[i];r.push(a)}n=n.parent()}return this.spawn(r,!0).filter(e)},commonAncestors:function(e){for(var r,n=0;n<this.length;n++){var i=this[n],a=i.parents();r=r||a,r=r.intersect(a)}return r.filter(e)},orphans:function(e){return this.stdFilter(function(r){return r.isOrphan()}).filter(e)},nonorphans:function(e){return this.stdFilter(function(r){return r.isChild()}).filter(e)},children:un(function(t){for(var e=[],r=0;r<this.length;r++)for(var n=this[r],i=n._private.children,a=0;a<i.length;a++)e.push(i[a]);return this.spawn(e,!0).filter(t)},"children"),siblings:function(e){return this.parent().children().not(this).filter(e)},isParent:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length!==0},isChildless:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length===0},isChild:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent!=null},isOrphan:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent==null},descendants:function(e){var r=[];function n(i){for(var a=0;a<i.length;a++){var s=i[a];r.push(s),s.children().nonempty()&&n(s.children())}}return n(this.children()),this.spawn(r,!0).filter(e)}};function rb(t,e,r,n){for(var i=[],a=new du,s=t.cy(),o=s.hasCompoundNodes(),u=0;u<t.length;u++){var l=t[u];r?i.push(l):o&&n(i,a,l)}for(;i.length>0;){var c=i.shift();e(c),a.add(c.id()),o&&n(i,a,c)}return t}function AV(t,e,r){if(r.isParent())for(var n=r._private.children,i=0;i<n.length;i++){var a=n[i];e.has(a.id())||t.push(a)}}Uo.forEachDown=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return rb(this,t,e,AV)};function PV(t,e,r){if(r.isChild()){var n=r._private.parent;e.has(n.id())||t.push(n)}}Uo.forEachUp=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return rb(this,t,e,PV)};function NX(t,e,r){PV(t,e,r),AV(t,e,r)}Uo.forEachUpAndDown=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return rb(this,t,e,NX)};Uo.ancestors=Uo.parents;var yc,DV;yc=DV={data:Ye.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:Ye.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:Ye.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:Ye.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:Ye.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:Ye.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var e=this[0];if(e)return e._private.data.id}};yc.attr=yc.data;yc.removeAttr=yc.removeData;var LX=DV,Yv={};function vg(t){return function(e){var r=this;if(e===void 0&&(e=!0),r.length!==0)if(r.isNode()&&!r.removed()){for(var n=0,i=r[0],a=i._private.edges,s=0;s<a.length;s++){var o=a[s];!e&&o.isLoop()||(n+=t(i,o))}return n}else return}}xe(Yv,{degree:vg(function(t,e){return e.source().same(e.target())?2:1}),indegree:vg(function(t,e){return e.target().same(t)?1:0}),outdegree:vg(function(t,e){return e.source().same(t)?1:0})});function Ls(t,e){return function(r){for(var n,i=this.nodes(),a=0;a<i.length;a++){var s=i[a],o=s[t](r);o!==void 0&&(n===void 0||e(o,n))&&(n=o)}return n}}xe(Yv,{minDegree:Ls("degree",function(t,e){return t<e}),maxDegree:Ls("degree",function(t,e){return t>e}),minIndegree:Ls("indegree",function(t,e){return t<e}),maxIndegree:Ls("indegree",function(t,e){return t>e}),minOutdegree:Ls("outdegree",function(t,e){return t<e}),maxOutdegree:Ls("outdegree",function(t,e){return t>e})});xe(Yv,{totalDegree:function(e){for(var r=0,n=this.nodes(),i=0;i<n.length;i++)r+=n[i].degree(e);return r}});var Rn,OV,NV=function(e,r,n){for(var i=0;i<e.length;i++){var a=e[i];if(!a.locked()){var s=a._private.position,o={x:r.x!=null?r.x-s.x:0,y:r.y!=null?r.y-s.y:0};a.isParent()&&!(o.x===0&&o.y===0)&&a.children().shift(o,n),a.dirtyBoundingBoxCache()}}},sx={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(e){e.updateCompoundBounds()},beforeSet:function(e,r){NV(e,r,!1)},onSet:function(e){e.dirtyCompoundBoundsCache()},canSet:function(e){return!e.locked()}};Rn=OV={position:Ye.data(sx),silentPosition:Ye.data(xe({},sx,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(e,r){NV(e,r,!0)},onSet:function(e){e.dirtyCompoundBoundsCache()}})),positions:function(e,r){if(He(e))r?this.silentPosition(e):this.position(e);else if(pt(e)){var n=e,i=this.cy();i.startBatch();for(var a=0;a<this.length;a++){var s=this[a],o=void 0;(o=n(s,a))&&(r?s.silentPosition(o):s.position(o))}i.endBatch()}return this},silentPositions:function(e){return this.positions(e,!0)},shift:function(e,r,n){var i;if(He(e)?(i={x:le(e.x)?e.x:0,y:le(e.y)?e.y:0},n=r):Te(e)&&le(r)&&(i={x:0,y:0},i[e]=r),i!=null){var a=this.cy();a.startBatch();for(var s=0;s<this.length;s++){var o=this[s];if(!(a.hasCompoundNodes()&&o.isChild()&&o.ancestors().anySame(this))){var u=o.position(),l={x:u.x+i.x,y:u.y+i.y};n?o.silentPosition(l):o.position(l)}}a.endBatch()}return this},silentShift:function(e,r){return He(e)?this.shift(e,!0):Te(e)&&le(r)&&this.shift(e,r,!0),this},renderedPosition:function(e,r){var n=this[0],i=this.cy(),a=i.zoom(),s=i.pan(),o=He(e)?e:void 0,u=o!==void 0||r!==void 0&&Te(e);if(n&&n.isNode())if(u)for(var l=0;l<this.length;l++){var c=this[l];r!==void 0?c.position(e,(r-s[e])/a):o!==void 0&&c.position(dV(o,a,s))}else{var f=n.position();return o=Kv(f,a,s),e===void 0?o:o[e]}else if(!u)return;return this},relativePosition:function(e,r){var n=this[0],i=this.cy(),a=He(e)?e:void 0,s=a!==void 0||r!==void 0&&Te(e),o=i.hasCompoundNodes();if(n&&n.isNode())if(s)for(var u=0;u<this.length;u++){var l=this[u],c=o?l.parent():null,f=c&&c.length>0,h=f;f&&(c=c[0]);var d=h?c.position():{x:0,y:0};r!==void 0?l.position(e,r+d[e]):a!==void 0&&l.position({x:a.x+d.x,y:a.y+d.y})}else{var v=n.position(),w=o?n.parent():null,m=w&&w.length>0,p=m;m&&(w=w[0]);var g=p?w.position():{x:0,y:0};return a={x:v.x-g.x,y:v.y-g.y},e===void 0?a:a[e]}else if(!s)return;return this}};Rn.modelPosition=Rn.point=Rn.position;Rn.modelPositions=Rn.points=Rn.positions;Rn.renderedPoint=Rn.renderedPosition;Rn.relativePoint=Rn.relativePosition;var MX=OV,To,Aa;To=Aa={};Aa.renderedBoundingBox=function(t){var e=this.boundingBox(t),r=this.cy(),n=r.zoom(),i=r.pan(),a=e.x1*n+i.x,s=e.x2*n+i.x,o=e.y1*n+i.y,u=e.y2*n+i.y;return{x1:a,x2:s,y1:o,y2:u,w:s-a,h:u-o}};Aa.dirtyCompoundBoundsCache=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.cy();return!e.styleEnabled()||!e.hasCompoundNodes()?this:(this.forEachUp(function(r){if(r.isParent()){var n=r._private;n.compoundBoundsClean=!1,n.bbCache=null,t||r.emitAndNotify("bounds")}}),this)};Aa.updateCompoundBounds=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.cy();if(!e.styleEnabled()||!e.hasCompoundNodes())return this;if(!t&&e.batching())return this;function r(s){if(!s.isParent())return;var o=s._private,u=s.children(),l=s.pstyle("compound-sizing-wrt-labels").value==="include",c={width:{val:s.pstyle("min-width").pfValue,left:s.pstyle("min-width-bias-left"),right:s.pstyle("min-width-bias-right")},height:{val:s.pstyle("min-height").pfValue,top:s.pstyle("min-height-bias-top"),bottom:s.pstyle("min-height-bias-bottom")}},f=u.boundingBox({includeLabels:l,includeOverlays:!1,useCache:!1}),h=o.position;(f.w===0||f.h===0)&&(f={w:s.pstyle("width").pfValue,h:s.pstyle("height").pfValue},f.x1=h.x-f.w/2,f.x2=h.x+f.w/2,f.y1=h.y-f.h/2,f.y2=h.y+f.h/2);function d(S,C,R){var x=0,P=0,A=C+R;return S>0&&A>0&&(x=C/A*S,P=R/A*S),{biasDiff:x,biasComplementDiff:P}}function v(S,C,R,x){if(R.units==="%")switch(x){case"width":return S>0?R.pfValue*S:0;case"height":return C>0?R.pfValue*C:0;case"average":return S>0&&C>0?R.pfValue*(S+C)/2:0;case"min":return S>0&&C>0?S>C?R.pfValue*C:R.pfValue*S:0;case"max":return S>0&&C>0?S>C?R.pfValue*S:R.pfValue*C:0;default:return 0}else return R.units==="px"?R.pfValue:0}var w=c.width.left.value;c.width.left.units==="px"&&c.width.val>0&&(w=w*100/c.width.val);var m=c.width.right.value;c.width.right.units==="px"&&c.width.val>0&&(m=m*100/c.width.val);var p=c.height.top.value;c.height.top.units==="px"&&c.height.val>0&&(p=p*100/c.height.val);var g=c.height.bottom.value;c.height.bottom.units==="px"&&c.height.val>0&&(g=g*100/c.height.val);var y=d(c.width.val-f.w,w,m),_=y.biasDiff,T=y.biasComplementDiff,b=d(c.height.val-f.h,p,g),E=b.biasDiff,I=b.biasComplementDiff;o.autoPadding=v(f.w,f.h,s.pstyle("padding"),s.pstyle("padding-relative-to").value),o.autoWidth=Math.max(f.w,c.width.val),h.x=(-_+f.x1+f.x2+T)/2,o.autoHeight=Math.max(f.h,c.height.val),h.y=(-E+f.y1+f.y2+I)/2}for(var n=0;n<this.length;n++){var i=this[n],a=i._private;(!a.compoundBoundsClean||t)&&(r(i),e.batching()||(a.compoundBoundsClean=!0))}return this};var nn=function(e){return e===1/0||e===-1/0?0:e},Tn=function(e,r,n,i,a){i-r===0||a-n===0||r==null||n==null||i==null||a==null||(e.x1=r<e.x1?r:e.x1,e.x2=i>e.x2?i:e.x2,e.y1=n<e.y1?n:e.y1,e.y2=a>e.y2?a:e.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1)},Ba=function(e,r){return r==null?e:Tn(e,r.x1,r.y1,r.x2,r.y2)},Vu=function(e,r,n){return Sn(e,r,n)},Hf=function(e,r,n){if(!r.cy().headless()){var i=r._private,a=i.rstyle,s=a.arrowWidth/2,o=r.pstyle(n+"-arrow-shape").value,u,l;if(o!=="none"){n==="source"?(u=a.srcX,l=a.srcY):n==="target"?(u=a.tgtX,l=a.tgtY):(u=a.midX,l=a.midY);var c=i.arrowBounds=i.arrowBounds||{},f=c[n]=c[n]||{};f.x1=u-s,f.y1=l-s,f.x2=u+s,f.y2=l+s,f.w=f.x2-f.x1,f.h=f.y2-f.y1,Eh(f,1),Tn(e,f.x1,f.y1,f.x2,f.y2)}}},pg=function(e,r,n){if(!r.cy().headless()){var i;n?i=n+"-":i="";var a=r._private,s=a.rstyle,o=r.pstyle(i+"label").strValue;if(o){var u=r.pstyle("text-halign"),l=r.pstyle("text-valign"),c=Vu(s,"labelWidth",n),f=Vu(s,"labelHeight",n),h=Vu(s,"labelX",n),d=Vu(s,"labelY",n),v=r.pstyle(i+"text-margin-x").pfValue,w=r.pstyle(i+"text-margin-y").pfValue,m=r.isEdge(),p=r.pstyle(i+"text-rotation"),g=r.pstyle("text-outline-width").pfValue,y=r.pstyle("text-border-width").pfValue,_=y/2,T=r.pstyle("text-background-padding").pfValue,b=2,E=f,I=c,S=I/2,C=E/2,R,x,P,A;if(m)R=h-S,x=h+S,P=d-C,A=d+C;else{switch(u.value){case"left":R=h-I,x=h;break;case"center":R=h-S,x=h+S;break;case"right":R=h,x=h+I;break}switch(l.value){case"top":P=d-E,A=d;break;case"center":P=d-C,A=d+C;break;case"bottom":P=d,A=d+E;break}}R+=v-Math.max(g,_)-T-b,x+=v+Math.max(g,_)+T+b,P+=w-Math.max(g,_)-T-b,A+=w+Math.max(g,_)+T+b;var F=n||"main",O=a.labelBounds,L=O[F]=O[F]||{};L.x1=R,L.y1=P,L.x2=x,L.y2=A,L.w=x-R,L.h=A-P;var D=m&&p.strValue==="autorotate",$=p.pfValue!=null&&p.pfValue!==0;if(D||$){var z=D?Vu(a.rstyle,"labelAngle",n):p.pfValue,B=Math.cos(z),j=Math.sin(z),Q=(R+x)/2,N=(P+A)/2;if(!m){switch(u.value){case"left":Q=x;break;case"right":Q=R;break}switch(l.value){case"top":N=A;break;case"bottom":N=P;break}}var M=function(_e,se){return _e=_e-Q,se=se-N,{x:_e*B-se*j+Q,y:_e*j+se*B+N}},q=M(R,P),V=M(R,A),W=M(x,P),X=M(x,A);R=Math.min(q.x,V.x,W.x,X.x),x=Math.max(q.x,V.x,W.x,X.x),P=Math.min(q.y,V.y,W.y,X.y),A=Math.max(q.y,V.y,W.y,X.y)}var J=F+"Rot",ae=O[J]=O[J]||{};ae.x1=R,ae.y1=P,ae.x2=x,ae.y2=A,ae.w=x-R,ae.h=A-P,Tn(e,R,P,x,A),Tn(a.labelBounds.all,R,P,x,A)}return e}},VX=function(e,r){if(!r.cy().headless()){var n=r.pstyle("outline-opacity").value,i=r.pstyle("outline-width").value;if(n>0&&i>0){var a=r.pstyle("outline-offset").value,s=r.pstyle("shape").value,o=i+a,u=(e.w+o*2)/e.w,l=(e.h+o*2)/e.h,c=0,f=0;["diamond","pentagon","round-triangle"].includes(s)?(u=(e.w+o*2.4)/e.w,f=-o/3.6):["concave-hexagon","rhomboid","right-rhomboid"].includes(s)?u=(e.w+o*2.4)/e.w:s==="star"?(u=(e.w+o*2.8)/e.w,l=(e.h+o*2.6)/e.h,f=-o/3.8):s==="triangle"?(u=(e.w+o*2.8)/e.w,l=(e.h+o*2.4)/e.h,f=-o/1.4):s==="vee"&&(u=(e.w+o*4.4)/e.w,l=(e.h+o*3.8)/e.h,f=-o*.5);var h=e.h*l-e.h,d=e.w*u-e.w;if(Th(e,[Math.ceil(h/2),Math.ceil(d/2)]),c!=0||f!==0){var v=fY(e,c,f);pV(e,v)}}}},FX=function(e,r){var n=e._private.cy,i=n.styleEnabled(),a=n.headless(),s=$r(),o=e._private,u=e.isNode(),l=e.isEdge(),c,f,h,d,v,w,m=o.rstyle,p=u&&i?e.pstyle("bounds-expansion").pfValue:[0],g=function(me){return me.pstyle("display").value!=="none"},y=!i||g(e)&&(!l||g(e.source())&&g(e.target()));if(y){var _=0,T=0;i&&r.includeOverlays&&(_=e.pstyle("overlay-opacity").value,_!==0&&(T=e.pstyle("overlay-padding").value));var b=0,E=0;i&&r.includeUnderlays&&(b=e.pstyle("underlay-opacity").value,b!==0&&(E=e.pstyle("underlay-padding").value));var I=Math.max(T,E),S=0,C=0;if(i&&(S=e.pstyle("width").pfValue,C=S/2),u&&r.includeNodes){var R=e.position();v=R.x,w=R.y;var x=e.outerWidth(),P=x/2,A=e.outerHeight(),F=A/2;c=v-P,f=v+P,h=w-F,d=w+F,Tn(s,c,h,f,d),i&&r.includeOutlines&&VX(s,e)}else if(l&&r.includeEdges)if(i&&!a){var O=e.pstyle("curve-style").strValue;if(c=Math.min(m.srcX,m.midX,m.tgtX),f=Math.max(m.srcX,m.midX,m.tgtX),h=Math.min(m.srcY,m.midY,m.tgtY),d=Math.max(m.srcY,m.midY,m.tgtY),c-=C,f+=C,h-=C,d+=C,Tn(s,c,h,f,d),O==="haystack"){var L=m.haystackPts;if(L&&L.length===2){if(c=L[0].x,h=L[0].y,f=L[1].x,d=L[1].y,c>f){var D=c;c=f,f=D}if(h>d){var $=h;h=d,d=$}Tn(s,c-C,h-C,f+C,d+C)}}else if(O==="bezier"||O==="unbundled-bezier"||O==="segments"||O==="taxi"){var z;switch(O){case"bezier":case"unbundled-bezier":z=m.bezierPts;break;case"segments":case"taxi":z=m.linePts;break}if(z!=null)for(var B=0;B<z.length;B++){var j=z[B];c=j.x-C,f=j.x+C,h=j.y-C,d=j.y+C,Tn(s,c,h,f,d)}}}else{var Q=e.source(),N=Q.position(),M=e.target(),q=M.position();if(c=N.x,f=q.x,h=N.y,d=q.y,c>f){var V=c;c=f,f=V}if(h>d){var W=h;h=d,d=W}c-=C,f+=C,h-=C,d+=C,Tn(s,c,h,f,d)}if(i&&r.includeEdges&&l&&(Hf(s,e,"mid-source"),Hf(s,e,"mid-target"),Hf(s,e,"source"),Hf(s,e,"target")),i){var X=e.pstyle("ghost").value==="yes";if(X){var J=e.pstyle("ghost-offset-x").pfValue,ae=e.pstyle("ghost-offset-y").pfValue;Tn(s,s.x1+J,s.y1+ae,s.x2+J,s.y2+ae)}}var ve=o.bodyBounds=o.bodyBounds||{};jC(ve,s),Th(ve,p),Eh(ve,1),i&&(c=s.x1,f=s.x2,h=s.y1,d=s.y2,Tn(s,c-I,h-I,f+I,d+I));var _e=o.overlayBounds=o.overlayBounds||{};jC(_e,s),Th(_e,p),Eh(_e,1);var se=o.labelBounds=o.labelBounds||{};se.all!=null?cY(se.all):se.all=$r(),i&&r.includeLabels&&(r.includeMainLabels&&pg(s,e,null),l&&(r.includeSourceLabels&&pg(s,e,"source"),r.includeTargetLabels&&pg(s,e,"target")))}return s.x1=nn(s.x1),s.y1=nn(s.y1),s.x2=nn(s.x2),s.y2=nn(s.y2),s.w=nn(s.x2-s.x1),s.h=nn(s.y2-s.y1),s.w>0&&s.h>0&&y&&(Th(s,p),Eh(s,1)),s},LV=function(e){var r=0,n=function(s){return(s?1:0)<<r++},i=0;return i+=n(e.incudeNodes),i+=n(e.includeEdges),i+=n(e.includeLabels),i+=n(e.includeMainLabels),i+=n(e.includeSourceLabels),i+=n(e.includeTargetLabels),i+=n(e.includeOverlays),i+=n(e.includeOutlines),i},MV=function(e){if(e.isEdge()){var r=e.source().position(),n=e.target().position(),i=function(s){return Math.round(s)};return DQ([i(r.x),i(r.y),i(n.x),i(n.y)])}else return 0},ox=function(e,r){var n=e._private,i,a=e.isEdge(),s=r==null?ux:LV(r),o=s===ux,u=MV(e),l=n.bbCachePosKey===u,c=r.useCache&&l,f=function(w){return w._private.bbCache==null||w._private.styleDirty},h=!c||f(e)||a&&f(e.source())||f(e.target());if(h?(l||e.recalculateRenderedStyle(c),i=FX(e,wc),n.bbCache=i,n.bbCachePosKey=u):i=n.bbCache,!o){var d=e.isNode();i=$r(),(r.includeNodes&&d||r.includeEdges&&!d)&&(r.includeOverlays?Ba(i,n.overlayBounds):Ba(i,n.bodyBounds)),r.includeLabels&&(r.includeMainLabels&&(!a||r.includeSourceLabels&&r.includeTargetLabels)?Ba(i,n.labelBounds.all):(r.includeMainLabels&&Ba(i,n.labelBounds.mainRot),r.includeSourceLabels&&Ba(i,n.labelBounds.sourceRot),r.includeTargetLabels&&Ba(i,n.labelBounds.targetRot))),i.w=i.x2-i.x1,i.h=i.y2-i.y1}return i},wc={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,includeUnderlays:!0,includeOutlines:!0,useCache:!0},ux=LV(wc),lx=ar(wc);Aa.boundingBox=function(t){var e;if(this.length===1&&this[0]._private.bbCache!=null&&!this[0]._private.styleDirty&&(t===void 0||t.useCache===void 0||t.useCache===!0))t===void 0?t=wc:t=lx(t),e=ox(this[0],t);else{e=$r(),t=t||wc;var r=lx(t),n=this,i=n.cy(),a=i.styleEnabled();if(a)for(var s=0;s<n.length;s++){var o=n[s],u=o._private,l=MV(o),c=u.bbCachePosKey===l,f=r.useCache&&c&&!u.styleDirty;o.recalculateRenderedStyle(f)}this.updateCompoundBounds(!t.useCache);for(var h=0;h<n.length;h++){var d=n[h];Ba(e,ox(d,r))}}return e.x1=nn(e.x1),e.y1=nn(e.y1),e.x2=nn(e.x2),e.y2=nn(e.y2),e.w=nn(e.x2-e.x1),e.h=nn(e.y2-e.y1),e};Aa.dirtyBoundingBoxCache=function(){for(var t=0;t<this.length;t++){var e=this[t]._private;e.bbCache=null,e.bbCachePosKey=null,e.bodyBounds=null,e.overlayBounds=null,e.labelBounds.all=null,e.labelBounds.source=null,e.labelBounds.target=null,e.labelBounds.main=null,e.labelBounds.sourceRot=null,e.labelBounds.targetRot=null,e.labelBounds.mainRot=null,e.arrowBounds.source=null,e.arrowBounds.target=null,e.arrowBounds["mid-source"]=null,e.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this};Aa.boundingBoxAt=function(t){var e=this.nodes(),r=this.cy(),n=r.hasCompoundNodes(),i=r.collection();if(n&&(i=e.filter(function(l){return l.isParent()}),e=e.not(i)),He(t)){var a=t;t=function(){return a}}var s=function(c,f){return c._private.bbAtOldPos=t(c,f)},o=function(c){return c._private.bbAtOldPos};r.startBatch(),e.forEach(s).silentPositions(t),n&&(i.dirtyCompoundBoundsCache(),i.dirtyBoundingBoxCache(),i.updateCompoundBounds(!0));var u=lY(this.boundingBox({useCache:!1}));return e.silentPositions(o),n&&(i.dirtyCompoundBoundsCache(),i.dirtyBoundingBoxCache(),i.updateCompoundBounds(!0)),r.endBatch(),u};To.boundingbox=To.bb=To.boundingBox;To.renderedBoundingbox=To.renderedBoundingBox;var BX=Aa,tl,rf;tl=rf={};var VV=function(e){e.uppercaseName=qC(e.name),e.autoName="auto"+e.uppercaseName,e.labelName="label"+e.uppercaseName,e.outerName="outer"+e.uppercaseName,e.uppercaseOuterName=qC(e.outerName),tl[e.name]=function(){var n=this[0],i=n._private,a=i.cy,s=a._private.styleEnabled;if(n)if(s){if(n.isParent())return n.updateCompoundBounds(),i[e.autoName]||0;var o=n.pstyle(e.name);switch(o.strValue){case"label":return n.recalculateRenderedStyle(),i.rstyle[e.labelName]||0;default:return o.pfValue}}else return 1},tl["outer"+e.uppercaseName]=function(){var n=this[0],i=n._private,a=i.cy,s=a._private.styleEnabled;if(n)if(s){var o=n[e.name](),u=n.pstyle("border-width").pfValue,l=2*n.padding();return o+u+l}else return 1},tl["rendered"+e.uppercaseName]=function(){var n=this[0];if(n){var i=n[e.name]();return i*this.cy().zoom()}},tl["rendered"+e.uppercaseOuterName]=function(){var n=this[0];if(n){var i=n[e.outerName]();return i*this.cy().zoom()}}};VV({name:"width"});VV({name:"height"});rf.padding=function(){var t=this[0],e=t._private;return t.isParent()?(t.updateCompoundBounds(),e.autoPadding!==void 0?e.autoPadding:t.pstyle("padding").pfValue):t.pstyle("padding").pfValue};rf.paddedHeight=function(){var t=this[0];return t.height()+2*t.padding()};rf.paddedWidth=function(){var t=this[0];return t.width()+2*t.padding()};var qX=rf,$X=function(e,r){if(e.isEdge())return r(e)},zX=function(e,r){if(e.isEdge()){var n=e.cy();return Kv(r(e),n.zoom(),n.pan())}},UX=function(e,r){if(e.isEdge()){var n=e.cy(),i=n.pan(),a=n.zoom();return r(e).map(function(s){return Kv(s,a,i)})}},jX=function(e){return e.renderer().getControlPoints(e)},WX=function(e){return e.renderer().getSegmentPoints(e)},HX=function(e){return e.renderer().getSourceEndpoint(e)},GX=function(e){return e.renderer().getTargetEndpoint(e)},KX=function(e){return e.renderer().getEdgeMidpoint(e)},cx={controlPoints:{get:jX,mult:!0},segmentPoints:{get:WX,mult:!0},sourceEndpoint:{get:HX},targetEndpoint:{get:GX},midpoint:{get:KX}},QX=function(e){return"rendered"+e[0].toUpperCase()+e.substr(1)},YX=Object.keys(cx).reduce(function(t,e){var r=cx[e],n=QX(e);return t[e]=function(){return $X(this,r.get)},r.mult?t[n]=function(){return UX(this,r.get)}:t[n]=function(){return zX(this,r.get)},t},{}),XX=xe({},MX,BX,qX,YX);/*!
Event object based on jQuery events, MIT license

https://jquery.org/license/
https://tldrlegal.com/license/mit-license
https://github.com/jquery/jquery/blob/master/src/event.js
*/var FV=function(e,r){this.recycle(e,r)};function Fu(){return!1}function Gf(){return!0}FV.prototype={instanceString:function(){return"event"},recycle:function(e,r){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=Fu,e!=null&&e.preventDefault?(this.type=e.type,this.isDefaultPrevented=e.defaultPrevented?Gf:Fu):e!=null&&e.type?r=e:this.type=e,r!=null&&(this.originalEvent=r.originalEvent,this.type=r.type!=null?r.type:this.type,this.cy=r.cy,this.target=r.target,this.position=r.position,this.renderedPosition=r.renderedPosition,this.namespace=r.namespace,this.layout=r.layout),this.cy!=null&&this.position!=null&&this.renderedPosition==null){var n=this.position,i=this.cy.zoom(),a=this.cy.pan();this.renderedPosition={x:n.x*i+a.x,y:n.y*i+a.y}}this.timeStamp=e&&e.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=Gf;var e=this.originalEvent;e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){this.isPropagationStopped=Gf;var e=this.originalEvent;e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=Gf,this.stopPropagation()},isDefaultPrevented:Fu,isPropagationStopped:Fu,isImmediatePropagationStopped:Fu};var BV=/^([^.]+)(\.(?:[^.]+))?$/,JX=".*",qV={qualifierCompare:function(e,r){return e===r},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(e){return e},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},fx=Object.keys(qV),ZX={};function Xv(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ZX,e=arguments.length>1?arguments[1]:void 0,r=0;r<fx.length;r++){var n=fx[r];this[n]=t[n]||qV[n]}this.context=e||this.context,this.listeners=[],this.emitting=0}var _a=Xv.prototype,$V=function(e,r,n,i,a,s,o){pt(i)&&(a=i,i=null),o&&(s==null?s=o:s=xe({},s,o));for(var u=tt(n)?n:n.split(/\s+/),l=0;l<u.length;l++){var c=u[l];if(!ga(c)){var f=c.match(BV);if(f){var h=f[1],d=f[2]?f[2]:null,v=r(e,c,h,d,i,a,s);if(v===!1)break}}}},hx=function(e,r){return e.addEventFields(e.context,r),new FV(r.type,r)},eJ=function(e,r,n){if(hQ(n)){r(e,n);return}else if(He(n)){r(e,hx(e,n));return}for(var i=tt(n)?n:n.split(/\s+/),a=0;a<i.length;a++){var s=i[a];if(!ga(s)){var o=s.match(BV);if(o){var u=o[1],l=o[2]?o[2]:null,c=hx(e,{type:u,namespace:l,target:e.context});r(e,c)}}}};_a.on=_a.addListener=function(t,e,r,n,i){return $V(this,function(a,s,o,u,l,c,f){pt(c)&&a.listeners.push({event:s,callback:c,type:o,namespace:u,qualifier:l,conf:f})},t,e,r,n,i),this};_a.one=function(t,e,r,n){return this.on(t,e,r,n,{one:!0})};_a.removeListener=_a.off=function(t,e,r,n){var i=this;this.emitting!==0&&(this.listeners=VQ(this.listeners));for(var a=this.listeners,s=function(l){var c=a[l];$V(i,function(f,h,d,v,w,m){if((c.type===d||t==="*")&&(!v&&c.namespace!==".*"||c.namespace===v)&&(!w||f.qualifierCompare(c.qualifier,w))&&(!m||c.callback===m))return a.splice(l,1),!1},t,e,r,n)},o=a.length-1;o>=0;o--)s(o);return this};_a.removeAllListeners=function(){return this.removeListener("*")};_a.emit=_a.trigger=function(t,e,r){var n=this.listeners,i=n.length;return this.emitting++,tt(e)||(e=[e]),eJ(this,function(a,s){r!=null&&(n=[{event:s.event,type:s.type,namespace:s.namespace,callback:r}],i=n.length);for(var o=function(c){var f=n[c];if(f.type===s.type&&(!f.namespace||f.namespace===s.namespace||f.namespace===JX)&&a.eventMatches(a.context,f,s)){var h=[s];e!=null&&BQ(h,e),a.beforeEmit(a.context,f,s),f.conf&&f.conf.one&&(a.listeners=a.listeners.filter(function(w){return w!==f}));var d=a.callbackContext(a.context,f,s),v=f.callback.apply(d,h);a.afterEmit(a.context,f,s),v===!1&&(s.stopPropagation(),s.preventDefault())}},u=0;u<i;u++)o(u);a.bubble(a.context)&&!s.isPropagationStopped()&&a.parent(a.context).emit(s,e)},t),this.emitting--,this};var tJ={qualifierCompare:function(e,r){return e==null||r==null?e==null&&r==null:e.sameText(r)},eventMatches:function(e,r,n){var i=r.qualifier;return i!=null?e!==n.target&&ef(n.target)&&i.matches(n.target):!0},addEventFields:function(e,r){r.cy=e.cy(),r.target=e},callbackContext:function(e,r,n){return r.qualifier!=null?n.target:e},beforeEmit:function(e,r){r.conf&&r.conf.once&&r.conf.onceCollection.removeListener(r.event,r.qualifier,r.callback)},bubble:function(){return!0},parent:function(e){return e.isChild()?e.parent():e.cy()}},Kf=function(e){return Te(e)?new ya(e):e},zV={createEmitter:function(){for(var e=0;e<this.length;e++){var r=this[e],n=r._private;n.emitter||(n.emitter=new Xv(tJ,r))}return this},emitter:function(){return this._private.emitter},on:function(e,r,n){for(var i=Kf(r),a=0;a<this.length;a++){var s=this[a];s.emitter().on(e,i,n)}return this},removeListener:function(e,r,n){for(var i=Kf(r),a=0;a<this.length;a++){var s=this[a];s.emitter().removeListener(e,i,n)}return this},removeAllListeners:function(){for(var e=0;e<this.length;e++){var r=this[e];r.emitter().removeAllListeners()}return this},one:function(e,r,n){for(var i=Kf(r),a=0;a<this.length;a++){var s=this[a];s.emitter().one(e,i,n)}return this},once:function(e,r,n){for(var i=Kf(r),a=0;a<this.length;a++){var s=this[a];s.emitter().on(e,i,n,{once:!0,onceCollection:this})}},emit:function(e,r){for(var n=0;n<this.length;n++){var i=this[n];i.emitter().emit(e,r)}return this},emitAndNotify:function(e,r){if(this.length!==0)return this.cy().notify(e,this),this.emit(e,r),this}};Ye.eventAliasesOn(zV);var UV={nodes:function(e){return this.filter(function(r){return r.isNode()}).filter(e)},edges:function(e){return this.filter(function(r){return r.isEdge()}).filter(e)},byGroup:function(){for(var e=this.spawn(),r=this.spawn(),n=0;n<this.length;n++){var i=this[n];i.isNode()?e.push(i):r.push(i)}return{nodes:e,edges:r}},filter:function(e,r){if(e===void 0)return this;if(Te(e)||Gr(e))return new ya(e).filter(this);if(pt(e)){for(var n=this.spawn(),i=this,a=0;a<i.length;a++){var s=i[a],o=r?e.apply(r,[s,a,i]):e(s,a,i);o&&n.push(s)}return n}return this.spawn()},not:function(e){if(e){Te(e)&&(e=this.filter(e));for(var r=this.spawn(),n=0;n<this.length;n++){var i=this[n],a=e.has(i);a||r.push(i)}return r}else return this},absoluteComplement:function(){var e=this.cy();return e.mutableElements().not(this)},intersect:function(e){if(Te(e)){var r=e;return this.filter(r)}for(var n=this.spawn(),i=this,a=e,s=this.length<e.length,o=s?i:a,u=s?a:i,l=0;l<o.length;l++){var c=o[l];u.has(c)&&n.push(c)}return n},xor:function(e){var r=this._private.cy;Te(e)&&(e=r.$(e));var n=this.spawn(),i=this,a=e,s=function(u,l){for(var c=0;c<u.length;c++){var f=u[c],h=f._private.data.id,d=l.hasElementWithId(h);d||n.push(f)}};return s(i,a),s(a,i),n},diff:function(e){var r=this._private.cy;Te(e)&&(e=r.$(e));var n=this.spawn(),i=this.spawn(),a=this.spawn(),s=this,o=e,u=function(c,f,h){for(var d=0;d<c.length;d++){var v=c[d],w=v._private.data.id,m=f.hasElementWithId(w);m?a.merge(v):h.push(v)}};return u(s,o,n),u(o,s,i),{left:n,right:i,both:a}},add:function(e){var r=this._private.cy;if(!e)return this;if(Te(e)){var n=e;e=r.mutableElements().filter(n)}for(var i=this.spawnSelf(),a=0;a<e.length;a++){var s=e[a],o=!this.has(s);o&&i.push(s)}return i},merge:function(e){var r=this._private,n=r.cy;if(!e)return this;if(e&&Te(e)){var i=e;e=n.mutableElements().filter(i)}for(var a=r.map,s=0;s<e.length;s++){var o=e[s],u=o._private.data.id,l=!a.has(u);if(l){var c=this.length++;this[c]=o,a.set(u,{ele:o,index:c})}}return this},unmergeAt:function(e){var r=this[e],n=r.id(),i=this._private,a=i.map;this[e]=void 0,a.delete(n);var s=e===this.length-1;if(this.length>1&&!s){var o=this.length-1,u=this[o],l=u._private.data.id;this[o]=void 0,this[e]=u,a.set(l,{ele:u,index:e})}return this.length--,this},unmergeOne:function(e){e=e[0];var r=this._private,n=e._private.data.id,i=r.map,a=i.get(n);if(!a)return this;var s=a.index;return this.unmergeAt(s),this},unmerge:function(e){var r=this._private.cy;if(!e)return this;if(e&&Te(e)){var n=e;e=r.mutableElements().filter(n)}for(var i=0;i<e.length;i++)this.unmergeOne(e[i]);return this},unmergeBy:function(e){for(var r=this.length-1;r>=0;r--){var n=this[r];e(n)&&this.unmergeAt(r)}return this},map:function(e,r){for(var n=[],i=this,a=0;a<i.length;a++){var s=i[a],o=r?e.apply(r,[s,a,i]):e(s,a,i);n.push(o)}return n},reduce:function(e,r){for(var n=r,i=this,a=0;a<i.length;a++)n=e(n,i[a],a,i);return n},max:function(e,r){for(var n=-1/0,i,a=this,s=0;s<a.length;s++){var o=a[s],u=r?e.apply(r,[o,s,a]):e(o,s,a);u>n&&(n=u,i=o)}return{value:n,ele:i}},min:function(e,r){for(var n=1/0,i,a=this,s=0;s<a.length;s++){var o=a[s],u=r?e.apply(r,[o,s,a]):e(o,s,a);u<n&&(n=u,i=o)}return{value:n,ele:i}}},Ke=UV;Ke.u=Ke["|"]=Ke["+"]=Ke.union=Ke.or=Ke.add;Ke["\\"]=Ke["!"]=Ke["-"]=Ke.difference=Ke.relativeComplement=Ke.subtract=Ke.not;Ke.n=Ke["&"]=Ke["."]=Ke.and=Ke.intersection=Ke.intersect;Ke["^"]=Ke["(+)"]=Ke["(-)"]=Ke.symmetricDifference=Ke.symdiff=Ke.xor;Ke.fnFilter=Ke.filterFn=Ke.stdFilter=Ke.filter;Ke.complement=Ke.abscomp=Ke.absoluteComplement;var rJ={isNode:function(){return this.group()==="nodes"},isEdge:function(){return this.group()==="edges"},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var e=this[0];if(e)return e._private.group}},jV=function(e,r){var n=e.cy(),i=n.hasCompoundNodes();function a(c){var f=c.pstyle("z-compound-depth");return f.value==="auto"?i?c.zDepth():0:f.value==="bottom"?-1:f.value==="top"?KT:0}var s=a(e)-a(r);if(s!==0)return s;function o(c){var f=c.pstyle("z-index-compare");return f.value==="auto"&&c.isNode()?1:0}var u=o(e)-o(r);if(u!==0)return u;var l=e.pstyle("z-index").value-r.pstyle("z-index").value;return l!==0?l:e.poolIndex()-r.poolIndex()},xd={forEach:function(e,r){if(pt(e))for(var n=this.length,i=0;i<n;i++){var a=this[i],s=r?e.apply(r,[a,i,this]):e(a,i,this);if(s===!1)break}return this},toArray:function(){for(var e=[],r=0;r<this.length;r++)e.push(this[r]);return e},slice:function(e,r){var n=[],i=this.length;r==null&&(r=i),e==null&&(e=0),e<0&&(e=i+e),r<0&&(r=i+r);for(var a=e;a>=0&&a<r&&a<i;a++)n.push(this[a]);return this.spawn(n)},size:function(){return this.length},eq:function(e){return this[e]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return this.length===0},nonempty:function(){return!this.empty()},sort:function(e){if(!pt(e))return this;var r=this.toArray().sort(e);return this.spawn(r)},sortByZIndex:function(){return this.sort(jV)},zDepth:function(){var e=this[0];if(e){var r=e._private,n=r.group;if(n==="nodes"){var i=r.data.parent?e.parents().size():0;return e.isParent()?i:KT-1}else{var a=r.source,s=r.target,o=a.zDepth(),u=s.zDepth();return Math.max(o,u,0)}}}};xd.each=xd.forEach;var nJ=function(){var e="undefined",r=(typeof Symbol>"u"?"undefined":Ft(Symbol))!=e&&Ft(Symbol.iterator)!=e;r&&(xd[Symbol.iterator]=function(){var n=this,i={value:void 0,done:!1},a=0,s=this.length;return XM({next:function(){return a<s?i.value=n[a++]:(i.value=void 0,i.done=!0),i}},Symbol.iterator,function(){return this})})};nJ();var iJ=ar({nodeDimensionsIncludeLabels:!1}),Sh={layoutDimensions:function(e){e=iJ(e);var r;if(!this.takesUpSpace())r={w:0,h:0};else if(e.nodeDimensionsIncludeLabels){var n=this.boundingBox();r={w:n.w,h:n.h}}else r={w:this.outerWidth(),h:this.outerHeight()};return(r.w===0||r.h===0)&&(r.w=r.h=1),r},layoutPositions:function(e,r,n){var i=this.nodes().filter(function(T){return!T.isParent()}),a=this.cy(),s=r.eles,o=function(b){return b.id()},u=hc(n,o);e.emit({type:"layoutstart",layout:e}),e.animations=[];var l=function(b,E,I){var S={x:E.x1+E.w/2,y:E.y1+E.h/2},C={x:(I.x-S.x)*b,y:(I.y-S.y)*b};return{x:S.x+C.x,y:S.y+C.y}},c=r.spacingFactor&&r.spacingFactor!==1,f=function(){if(!c)return null;for(var b=$r(),E=0;E<i.length;E++){var I=i[E],S=u(I,E);hY(b,S.x,S.y)}return b},h=f(),d=hc(function(T,b){var E=u(T,b);if(c){var I=Math.abs(r.spacingFactor);E=l(I,h,E)}return r.transform!=null&&(E=r.transform(T,E)),E},o);if(r.animate){for(var v=0;v<i.length;v++){var w=i[v],m=d(w,v),p=r.animateFilter==null||r.animateFilter(w,v);if(p){var g=w.animation({position:m,duration:r.animationDuration,easing:r.animationEasing});e.animations.push(g)}else w.position(m)}if(r.fit){var y=a.animation({fit:{boundingBox:s.boundingBoxAt(d),padding:r.padding},duration:r.animationDuration,easing:r.animationEasing});e.animations.push(y)}else if(r.zoom!==void 0&&r.pan!==void 0){var _=a.animation({zoom:r.zoom,pan:r.pan,duration:r.animationDuration,easing:r.animationEasing});e.animations.push(_)}e.animations.forEach(function(T){return T.play()}),e.one("layoutready",r.ready),e.emit({type:"layoutready",layout:e}),vu.all(e.animations.map(function(T){return T.promise()})).then(function(){e.one("layoutstop",r.stop),e.emit({type:"layoutstop",layout:e})})}else i.positions(d),r.fit&&a.fit(r.eles,r.padding),r.zoom!=null&&a.zoom(r.zoom),r.pan&&a.pan(r.pan),e.one("layoutready",r.ready),e.emit({type:"layoutready",layout:e}),e.one("layoutstop",r.stop),e.emit({type:"layoutstop",layout:e});return this},layout:function(e){var r=this.cy();return r.makeLayout(xe({},e,{eles:this}))}};Sh.createLayout=Sh.makeLayout=Sh.layout;function WV(t,e,r){var n=r._private,i=n.styleCache=n.styleCache||[],a;return(a=i[t])!=null||(a=i[t]=e(r)),a}function Jv(t,e){return t=cs(t),function(n){return WV(t,e,n)}}function Zv(t,e){t=cs(t);var r=function(i){return e.call(i)};return function(){var i=this[0];if(i)return WV(t,r,i)}}var rr={recalculateRenderedStyle:function(e){var r=this.cy(),n=r.renderer(),i=r.styleEnabled();return n&&i&&n.recalculateRenderedStyle(this,e),this},dirtyStyleCache:function(){var e=this.cy(),r=function(a){return a._private.styleCache=null};if(e.hasCompoundNodes()){var n;n=this.spawnSelf().merge(this.descendants()).merge(this.parents()),n.merge(n.connectedEdges()),n.forEach(r)}else this.forEach(function(i){r(i),i.connectedEdges().forEach(r)});return this},updateStyle:function(e){var r=this._private.cy;if(!r.styleEnabled())return this;if(r.batching()){var n=r._private.batchStyleEles;return n.merge(this),this}var i=r.hasCompoundNodes(),a=this;e=!!(e||e===void 0),i&&(a=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var s=a;return e?s.emitAndNotify("style"):s.emit("style"),a.forEach(function(o){return o._private.styleDirty=!0}),this},cleanStyle:function(){var e=this.cy();if(e.styleEnabled())for(var r=0;r<this.length;r++){var n=this[r];n._private.styleDirty&&(n._private.styleDirty=!1,e.style().apply(n))}},parsedStyle:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=this[0],i=n.cy();if(i.styleEnabled()&&n){this.cleanStyle();var a=n._private.style[e];return a??(r?i.style().getDefaultProperty(e):null)}},numericStyle:function(e){var r=this[0];if(r.cy().styleEnabled()&&r){var n=r.pstyle(e);return n.pfValue!==void 0?n.pfValue:n.value}},numericStyleUnits:function(e){var r=this[0];if(r.cy().styleEnabled()&&r)return r.pstyle(e).units},renderedStyle:function(e){var r=this.cy();if(!r.styleEnabled())return this;var n=this[0];if(n)return r.style().getRenderedStyle(n,e)},style:function(e,r){var n=this.cy();if(!n.styleEnabled())return this;var i=!1,a=n.style();if(He(e)){var s=e;a.applyBypass(this,s,i),this.emitAndNotify("style")}else if(Te(e))if(r===void 0){var o=this[0];return o?a.getStylePropertyValue(o,e):void 0}else a.applyBypass(this,e,r,i),this.emitAndNotify("style");else if(e===void 0){var u=this[0];return u?a.getRawStyle(u):void 0}return this},removeStyle:function(e){var r=this.cy();if(!r.styleEnabled())return this;var n=!1,i=r.style(),a=this;if(e===void 0)for(var s=0;s<a.length;s++){var o=a[s];i.removeAllBypasses(o,n)}else{e=e.split(/\s+/);for(var u=0;u<a.length;u++){var l=a[u];i.removeBypasses(l,e,n)}}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var e=this.cy();if(!e.styleEnabled())return 1;var r=e.hasCompoundNodes(),n=this[0];if(n){var i=n._private,a=n.pstyle("opacity").value;if(!r)return a;var s=i.data.parent?n.parents():null;if(s)for(var o=0;o<s.length;o++){var u=s[o],l=u.pstyle("opacity").value;a=l*a}return a}},transparent:function(){var e=this.cy();if(!e.styleEnabled())return!1;var r=this[0],n=r.cy().hasCompoundNodes();if(r)return n?r.effectiveOpacity()===0:r.pstyle("opacity").value===0},backgrounding:function(){var e=this.cy();if(!e.styleEnabled())return!1;var r=this[0];return!!r._private.backgrounding}};function gg(t,e){var r=t._private,n=r.data.parent?t.parents():null;if(n)for(var i=0;i<n.length;i++){var a=n[i];if(!e(a))return!1}return!0}function nb(t){var e=t.ok,r=t.edgeOkViaNode||t.ok,n=t.parentOk||t.ok;return function(){var i=this.cy();if(!i.styleEnabled())return!0;var a=this[0],s=i.hasCompoundNodes();if(a){var o=a._private;if(!e(a))return!1;if(a.isNode())return!s||gg(a,n);var u=o.source,l=o.target;return r(u)&&(!s||gg(u,r))&&(u===l||r(l)&&(!s||gg(l,r)))}}}var pu=Jv("eleTakesUpSpace",function(t){return t.pstyle("display").value==="element"&&t.width()!==0&&(t.isNode()?t.height()!==0:!0)});rr.takesUpSpace=Zv("takesUpSpace",nb({ok:pu}));var aJ=Jv("eleInteractive",function(t){return t.pstyle("events").value==="yes"&&t.pstyle("visibility").value==="visible"&&pu(t)}),sJ=Jv("parentInteractive",function(t){return t.pstyle("visibility").value==="visible"&&pu(t)});rr.interactive=Zv("interactive",nb({ok:aJ,parentOk:sJ,edgeOkViaNode:pu}));rr.noninteractive=function(){var t=this[0];if(t)return!t.interactive()};var oJ=Jv("eleVisible",function(t){return t.pstyle("visibility").value==="visible"&&t.pstyle("opacity").pfValue!==0&&pu(t)}),uJ=pu;rr.visible=Zv("visible",nb({ok:oJ,edgeOkViaNode:uJ}));rr.hidden=function(){var t=this[0];if(t)return!t.visible()};rr.isBundledBezier=Zv("isBundledBezier",function(){return this.cy().styleEnabled()?!this.removed()&&this.pstyle("curve-style").value==="bezier"&&this.takesUpSpace():!1});rr.bypass=rr.css=rr.style;rr.renderedCss=rr.renderedStyle;rr.removeBypass=rr.removeCss=rr.removeStyle;rr.pstyle=rr.parsedStyle;var ca={};function dx(t){return function(){var e=arguments,r=[];if(e.length===2){var n=e[0],i=e[1];this.on(t.event,n,i)}else if(e.length===1&&pt(e[0])){var a=e[0];this.on(t.event,a)}else if(e.length===0||e.length===1&&tt(e[0])){for(var s=e.length===1?e[0]:null,o=0;o<this.length;o++){var u=this[o],l=!t.ableField||u._private[t.ableField],c=u._private[t.field]!=t.value;if(t.overrideAble){var f=t.overrideAble(u);if(f!==void 0&&(l=f,!f))return this}l&&(u._private[t.field]=t.value,c&&r.push(u))}var h=this.spawn(r);h.updateStyle(),h.emit(t.event),s&&h.emit(s)}return this}}function gu(t){ca[t.field]=function(){var e=this[0];if(e){if(t.overrideField){var r=t.overrideField(e);if(r!==void 0)return r}return e._private[t.field]}},ca[t.on]=dx({event:t.on,field:t.field,ableField:t.ableField,overrideAble:t.overrideAble,value:!0}),ca[t.off]=dx({event:t.off,field:t.field,ableField:t.ableField,overrideAble:t.overrideAble,value:!1})}gu({field:"locked",overrideField:function(e){return e.cy().autolock()?!0:void 0},on:"lock",off:"unlock"});gu({field:"grabbable",overrideField:function(e){return e.cy().autoungrabify()||e.pannable()?!1:void 0},on:"grabify",off:"ungrabify"});gu({field:"selected",ableField:"selectable",overrideAble:function(e){return e.cy().autounselectify()?!1:void 0},on:"select",off:"unselect"});gu({field:"selectable",overrideField:function(e){return e.cy().autounselectify()?!1:void 0},on:"selectify",off:"unselectify"});ca.deselect=ca.unselect;ca.grabbed=function(){var t=this[0];if(t)return t._private.grabbed};gu({field:"active",on:"activate",off:"unactivate"});gu({field:"pannable",on:"panify",off:"unpanify"});ca.inactive=function(){var t=this[0];if(t)return!t._private.active};var wr={},vx=function(e){return function(n){for(var i=this,a=[],s=0;s<i.length;s++){var o=i[s];if(o.isNode()){for(var u=!1,l=o.connectedEdges(),c=0;c<l.length;c++){var f=l[c],h=f.source(),d=f.target();if(e.noIncomingEdges&&d===o&&h!==o||e.noOutgoingEdges&&h===o&&d!==o){u=!0;break}}u||a.push(o)}}return this.spawn(a,!0).filter(n)}},px=function(e){return function(r){for(var n=this,i=[],a=0;a<n.length;a++){var s=n[a];if(s.isNode())for(var o=s.connectedEdges(),u=0;u<o.length;u++){var l=o[u],c=l.source(),f=l.target();e.outgoing&&c===s?(i.push(l),i.push(f)):e.incoming&&f===s&&(i.push(l),i.push(c))}}return this.spawn(i,!0).filter(r)}},gx=function(e){return function(r){for(var n=this,i=[],a={};;){var s=e.outgoing?n.outgoers():n.incomers();if(s.length===0)break;for(var o=!1,u=0;u<s.length;u++){var l=s[u],c=l.id();a[c]||(a[c]=!0,i.push(l),o=!0)}if(!o)break;n=s}return this.spawn(i,!0).filter(r)}};wr.clearTraversalCache=function(){for(var t=0;t<this.length;t++)this[t]._private.traversalCache=null};xe(wr,{roots:vx({noIncomingEdges:!0}),leaves:vx({noOutgoingEdges:!0}),outgoers:un(px({outgoing:!0}),"outgoers"),successors:gx({outgoing:!0}),incomers:un(px({incoming:!0}),"incomers"),predecessors:gx({incoming:!0})});xe(wr,{neighborhood:un(function(t){for(var e=[],r=this.nodes(),n=0;n<r.length;n++)for(var i=r[n],a=i.connectedEdges(),s=0;s<a.length;s++){var o=a[s],u=o.source(),l=o.target(),c=i===u?l:u;c.length>0&&e.push(c[0]),e.push(o[0])}return this.spawn(e,!0).filter(t)},"neighborhood"),closedNeighborhood:function(e){return this.neighborhood().add(this).filter(e)},openNeighborhood:function(e){return this.neighborhood(e)}});wr.neighbourhood=wr.neighborhood;wr.closedNeighbourhood=wr.closedNeighborhood;wr.openNeighbourhood=wr.openNeighborhood;xe(wr,{source:un(function(e){var r=this[0],n;return r&&(n=r._private.source||r.cy().collection()),n&&e?n.filter(e):n},"source"),target:un(function(e){var r=this[0],n;return r&&(n=r._private.target||r.cy().collection()),n&&e?n.filter(e):n},"target"),sources:mx({attr:"source"}),targets:mx({attr:"target"})});function mx(t){return function(r){for(var n=[],i=0;i<this.length;i++){var a=this[i],s=a._private[t.attr];s&&n.push(s)}return this.spawn(n,!0).filter(r)}}xe(wr,{edgesWith:un(yx(),"edgesWith"),edgesTo:un(yx({thisIsSrc:!0}),"edgesTo")});function yx(t){return function(r){var n=[],i=this._private.cy,a=t||{};Te(r)&&(r=i.$(r));for(var s=0;s<r.length;s++)for(var o=r[s]._private.edges,u=0;u<o.length;u++){var l=o[u],c=l._private.data,f=this.hasElementWithId(c.source)&&r.hasElementWithId(c.target),h=r.hasElementWithId(c.source)&&this.hasElementWithId(c.target),d=f||h;d&&((a.thisIsSrc||a.thisIsTgt)&&(a.thisIsSrc&&!f||a.thisIsTgt&&!h)||n.push(l))}return this.spawn(n,!0)}}xe(wr,{connectedEdges:un(function(t){for(var e=[],r=this,n=0;n<r.length;n++){var i=r[n];if(i.isNode())for(var a=i._private.edges,s=0;s<a.length;s++){var o=a[s];e.push(o)}}return this.spawn(e,!0).filter(t)},"connectedEdges"),connectedNodes:un(function(t){for(var e=[],r=this,n=0;n<r.length;n++){var i=r[n];i.isEdge()&&(e.push(i.source()[0]),e.push(i.target()[0]))}return this.spawn(e,!0).filter(t)},"connectedNodes"),parallelEdges:un(wx(),"parallelEdges"),codirectedEdges:un(wx({codirected:!0}),"codirectedEdges")});function wx(t){var e={codirected:!1};return t=xe({},e,t),function(n){for(var i=[],a=this.edges(),s=t,o=0;o<a.length;o++)for(var u=a[o],l=u._private,c=l.source,f=c._private.data.id,h=l.data.target,d=c._private.edges,v=0;v<d.length;v++){var w=d[v],m=w._private.data,p=m.target,g=m.source,y=p===h&&g===f,_=f===p&&h===g;(s.codirected&&y||!s.codirected&&(y||_))&&i.push(w)}return this.spawn(i,!0).filter(n)}}xe(wr,{components:function(e){var r=this,n=r.cy(),i=n.collection(),a=e==null?r.nodes():e.nodes(),s=[];e!=null&&a.empty()&&(a=e.sources());var o=function(c,f){i.merge(c),a.unmerge(c),f.merge(c)};if(a.empty())return r.spawn();var u=function(){var c=n.collection();s.push(c);var f=a[0];o(f,c),r.bfs({directed:!1,roots:f,visit:function(d){return o(d,c)}}),c.forEach(function(h){h.connectedEdges().forEach(function(d){r.has(d)&&c.has(d.source())&&c.has(d.target())&&c.merge(d)})})};do u();while(a.length>0);return s},component:function(){var e=this[0];return e.cy().mutableElements().components(e)[0]}});wr.componentsOf=wr.components;var nr=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(e===void 0){_t("A collection must have a reference to the core");return}var a=new Un,s=!1;if(!r)r=[];else if(r.length>0&&He(r[0])&&!ef(r[0])){s=!0;for(var o=[],u=new du,l=0,c=r.length;l<c;l++){var f=r[l];f.data==null&&(f.data={});var h=f.data;if(h.id==null)h.id=fV();else if(e.hasElementWithId(h.id)||u.has(h.id))continue;var d=new Gv(e,f,!1);o.push(d),u.add(h.id)}r=o}this.length=0;for(var v=0,w=r.length;v<w;v++){var m=r[v][0];if(m!=null){var p=m._private.data.id;(!n||!a.has(p))&&(n&&a.set(p,{index:this.length,ele:m}),this[this.length]=m,this.length++)}}this._private={eles:this,cy:e,get map(){return this.lazyMap==null&&this.rebuildMap(),this.lazyMap},set map(g){this.lazyMap=g},rebuildMap:function(){for(var y=this.lazyMap=new Un,_=this.eles,T=0;T<_.length;T++){var b=_[T];y.set(b.id(),{index:T,ele:b})}}},n&&(this._private.map=a),s&&!i&&this.restore()},at=Gv.prototype=nr.prototype=Object.create(Array.prototype);at.instanceString=function(){return"collection"};at.spawn=function(t,e){return new nr(this.cy(),t,e)};at.spawnSelf=function(){return this.spawn(this)};at.cy=function(){return this._private.cy};at.renderer=function(){return this._private.cy.renderer()};at.element=function(){return this[0]};at.collection=function(){return ZM(this)?this:new nr(this._private.cy,[this])};at.unique=function(){return new nr(this._private.cy,this,!0)};at.hasElementWithId=function(t){return t=""+t,this._private.map.has(t)};at.getElementById=function(t){t=""+t;var e=this._private.cy,r=this._private.map.get(t);return r?r.ele:new nr(e)};at.$id=at.getElementById;at.poolIndex=function(){var t=this._private.cy,e=t._private.elements,r=this[0]._private.data.id;return e._private.map.get(r).index};at.indexOf=function(t){var e=t[0]._private.data.id;return this._private.map.get(e).index};at.indexOfId=function(t){return t=""+t,this._private.map.get(t).index};at.json=function(t){var e=this.element(),r=this.cy();if(e==null&&t)return this;if(e!=null){var n=e._private;if(He(t)){if(r.startBatch(),t.data){e.data(t.data);var i=n.data;if(e.isEdge()){var a=!1,s={},o=t.data.source,u=t.data.target;o!=null&&o!=i.source&&(s.source=""+o,a=!0),u!=null&&u!=i.target&&(s.target=""+u,a=!0),a&&(e=e.move(s))}else{var l="parent"in t.data,c=t.data.parent;l&&(c!=null||i.parent!=null)&&c!=i.parent&&(c===void 0&&(c=null),c!=null&&(c=""+c),e=e.move({parent:c}))}}t.position&&e.position(t.position);var f=function(w,m,p){var g=t[w];g!=null&&g!==n[w]&&(g?e[m]():e[p]())};return f("removed","remove","restore"),f("selected","select","unselect"),f("selectable","selectify","unselectify"),f("locked","lock","unlock"),f("grabbable","grabify","ungrabify"),f("pannable","panify","unpanify"),t.classes!=null&&e.classes(t.classes),r.endBatch(),this}else if(t===void 0){var h={data:zn(n.data),position:zn(n.position),group:n.group,removed:n.removed,selected:n.selected,selectable:n.selectable,locked:n.locked,grabbable:n.grabbable,pannable:n.pannable,classes:null};h.classes="";var d=0;return n.classes.forEach(function(v){return h.classes+=d++===0?v:" "+v}),h}}};at.jsons=function(){for(var t=[],e=0;e<this.length;e++){var r=this[e],n=r.json();t.push(n)}return t};at.clone=function(){for(var t=this.cy(),e=[],r=0;r<this.length;r++){var n=this[r],i=n.json(),a=new Gv(t,i,!1);e.push(a)}return new nr(t,e)};at.copy=at.clone;at.restore=function(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r=this,n=r.cy(),i=n._private,a=[],s=[],o,u=0,l=r.length;u<l;u++){var c=r[u];e&&!c.removed()||(c.isNode()?a.push(c):s.push(c))}o=a.concat(s);var f,h=function(){o.splice(f,1),f--};for(f=0;f<o.length;f++){var d=o[f],v=d._private,w=v.data;if(d.clearTraversalCache(),!(!e&&!v.removed)){if(w.id===void 0)w.id=fV();else if(le(w.id))w.id=""+w.id;else if(ga(w.id)||!Te(w.id)){_t("Can not create element with invalid string ID `"+w.id+"`"),h();continue}else if(n.hasElementWithId(w.id)){_t("Can not create second element with ID `"+w.id+"`"),h();continue}}var m=w.id;if(d.isNode()){var p=v.position;p.x==null&&(p.x=0),p.y==null&&(p.y=0)}if(d.isEdge()){for(var g=d,y=["source","target"],_=y.length,T=!1,b=0;b<_;b++){var E=y[b],I=w[E];le(I)&&(I=w[E]=""+w[E]),I==null||I===""?(_t("Can not create edge `"+m+"` with unspecified "+E),T=!0):n.hasElementWithId(I)||(_t("Can not create edge `"+m+"` with nonexistant "+E+" `"+I+"`"),T=!0)}if(T){h();continue}var S=n.getElementById(w.source),C=n.getElementById(w.target);S.same(C)?S._private.edges.push(g):(S._private.edges.push(g),C._private.edges.push(g)),g._private.source=S,g._private.target=C}v.map=new Un,v.map.set(m,{ele:d,index:0}),v.removed=!1,e&&n.addToPool(d)}for(var R=0;R<a.length;R++){var x=a[R],P=x._private.data;le(P.parent)&&(P.parent=""+P.parent);var A=P.parent,F=A!=null;if(F||x._private.parent){var O=x._private.parent?n.collection().merge(x._private.parent):n.getElementById(A);if(O.empty())P.parent=void 0;else if(O[0].removed())Xe("Node added with missing parent, reference to parent removed"),P.parent=void 0,x._private.parent=null;else{for(var L=!1,D=O;!D.empty();){if(x.same(D)){L=!0,P.parent=void 0;break}D=D.parent()}L||(O[0]._private.children.push(x),x._private.parent=O[0],i.hasCompoundNodes=!0)}}}if(o.length>0){for(var $=o.length===r.length?r:new nr(n,o),z=0;z<$.length;z++){var B=$[z];B.isNode()||(B.parallelEdges().clearTraversalCache(),B.source().clearTraversalCache(),B.target().clearTraversalCache())}var j;i.hasCompoundNodes?j=n.collection().merge($).merge($.connectedNodes()).merge($.parent()):j=$,j.dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(t),t?$.emitAndNotify("add"):e&&$.emit("add")}return r};at.removed=function(){var t=this[0];return t&&t._private.removed};at.inside=function(){var t=this[0];return t&&!t._private.removed};at.remove=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r=this,n=[],i={},a=r._private.cy;function s(A){for(var F=A._private.edges,O=0;O<F.length;O++)u(F[O])}function o(A){for(var F=A._private.children,O=0;O<F.length;O++)u(F[O])}function u(A){var F=i[A.id()];e&&A.removed()||F||(i[A.id()]=!0,A.isNode()?(n.push(A),s(A),o(A)):n.unshift(A))}for(var l=0,c=r.length;l<c;l++){var f=r[l];u(f)}function h(A,F){var O=A._private.edges;ma(O,F),A.clearTraversalCache()}function d(A){A.clearTraversalCache()}var v=[];v.ids={};function w(A,F){F=F[0],A=A[0];var O=A._private.children,L=A.id();ma(O,F),F._private.parent=null,v.ids[L]||(v.ids[L]=!0,v.push(A))}r.dirtyCompoundBoundsCache(),e&&a.removeFromPool(n);for(var m=0;m<n.length;m++){var p=n[m];if(p.isEdge()){var g=p.source()[0],y=p.target()[0];h(g,p),h(y,p);for(var _=p.parallelEdges(),T=0;T<_.length;T++){var b=_[T];d(b),b.isBundledBezier()&&b.dirtyBoundingBoxCache()}}else{var E=p.parent();E.length!==0&&w(E,p)}e&&(p._private.removed=!0)}var I=a._private.elements;a._private.hasCompoundNodes=!1;for(var S=0;S<I.length;S++){var C=I[S];if(C.isParent()){a._private.hasCompoundNodes=!0;break}}var R=new nr(this.cy(),n);R.size()>0&&(t?R.emitAndNotify("remove"):e&&R.emit("remove"));for(var x=0;x<v.length;x++){var P=v[x];(!e||!P.removed())&&P.updateStyle()}return R};at.move=function(t){var e=this._private.cy,r=this,n=!1,i=!1,a=function(v){return v==null?v:""+v};if(t.source!==void 0||t.target!==void 0){var s=a(t.source),o=a(t.target),u=s!=null&&e.hasElementWithId(s),l=o!=null&&e.hasElementWithId(o);(u||l)&&(e.batch(function(){r.remove(n,i),r.emitAndNotify("moveout");for(var d=0;d<r.length;d++){var v=r[d],w=v._private.data;v.isEdge()&&(u&&(w.source=s),l&&(w.target=o))}r.restore(n,i)}),r.emitAndNotify("move"))}else if(t.parent!==void 0){var c=a(t.parent),f=c===null||e.hasElementWithId(c);if(f){var h=c===null?void 0:c;e.batch(function(){var d=r.remove(n,i);d.emitAndNotify("moveout");for(var v=0;v<r.length;v++){var w=r[v],m=w._private.data;w.isNode()&&(m.parent=h)}d.restore(n,i)}),r.emitAndNotify("move")}}return this};[SV,wX,bh,la,Uo,LX,Yv,XX,zV,UV,rJ,xd,Sh,rr,ca,wr].forEach(function(t){xe(at,t)});var lJ={add:function(e){var r,n=this;if(Gr(e)){var i=e;if(i._private.cy===n)r=i.restore();else{for(var a=[],s=0;s<i.length;s++){var o=i[s];a.push(o.json())}r=new nr(n,a)}}else if(tt(e)){var u=e;r=new nr(n,u)}else if(He(e)&&(tt(e.nodes)||tt(e.edges))){for(var l=e,c=[],f=["nodes","edges"],h=0,d=f.length;h<d;h++){var v=f[h],w=l[v];if(tt(w))for(var m=0,p=w.length;m<p;m++){var g=xe({group:v},w[m]);c.push(g)}}r=new nr(n,c)}else{var y=e;r=new Gv(n,y).collection()}return r},remove:function(e){if(!Gr(e)){if(Te(e)){var r=e;e=this.$(r)}}return e.remove()}};/*! Bezier curve function generator. Copyright Gaetan Renaudeau. MIT License: http://en.wikipedia.org/wiki/MIT_License */function cJ(t,e,r,n){var i=4,a=.001,s=1e-7,o=10,u=11,l=1/(u-1),c=typeof Float32Array<"u";if(arguments.length!==4)return!1;for(var f=0;f<4;++f)if(typeof arguments[f]!="number"||isNaN(arguments[f])||!isFinite(arguments[f]))return!1;t=Math.min(t,1),r=Math.min(r,1),t=Math.max(t,0),r=Math.max(r,0);var h=c?new Float32Array(u):new Array(u);function d(C,R){return 1-3*R+3*C}function v(C,R){return 3*R-6*C}function w(C){return 3*C}function m(C,R,x){return((d(R,x)*C+v(R,x))*C+w(R))*C}function p(C,R,x){return 3*d(R,x)*C*C+2*v(R,x)*C+w(R)}function g(C,R){for(var x=0;x<i;++x){var P=p(R,t,r);if(P===0)return R;var A=m(R,t,r)-C;R-=A/P}return R}function y(){for(var C=0;C<u;++C)h[C]=m(C*l,t,r)}function _(C,R,x){var P,A,F=0;do A=R+(x-R)/2,P=m(A,t,r)-C,P>0?x=A:R=A;while(Math.abs(P)>s&&++F<o);return A}function T(C){for(var R=0,x=1,P=u-1;x!==P&&h[x]<=C;++x)R+=l;--x;var A=(C-h[x])/(h[x+1]-h[x]),F=R+A*l,O=p(F,t,r);return O>=a?g(C,F):O===0?F:_(C,R,R+l)}var b=!1;function E(){b=!0,(t!==e||r!==n)&&y()}var I=function(R){return b||E(),t===e&&r===n?R:R===0?0:R===1?1:m(T(R),e,n)};I.getControlPoints=function(){return[{x:t,y:e},{x:r,y:n}]};var S="generateBezier("+[t,e,r,n]+")";return I.toString=function(){return S},I}/*! Runge-Kutta spring physics function generator. Adapted from Framer.js, copyright Koen Bok. MIT License: http://en.wikipedia.org/wiki/MIT_License */var fJ=function(){function t(n){return-n.tension*n.x-n.friction*n.v}function e(n,i,a){var s={x:n.x+a.dx*i,v:n.v+a.dv*i,tension:n.tension,friction:n.friction};return{dx:s.v,dv:t(s)}}function r(n,i){var a={dx:n.v,dv:t(n)},s=e(n,i*.5,a),o=e(n,i*.5,s),u=e(n,i,o),l=1/6*(a.dx+2*(s.dx+o.dx)+u.dx),c=1/6*(a.dv+2*(s.dv+o.dv)+u.dv);return n.x=n.x+l*i,n.v=n.v+c*i,n}return function n(i,a,s){var o={x:-1,v:0,tension:null,friction:null},u=[0],l=0,c=1/1e4,f=16/1e3,h,d,v;for(i=parseFloat(i)||500,a=parseFloat(a)||20,s=s||null,o.tension=i,o.friction=a,h=s!==null,h?(l=n(i,a),d=l/s*f):d=f;v=r(v||o,d),u.push(1+v.x),l+=16,Math.abs(v.x)>c&&Math.abs(v.v)>c;);return h?function(w){return u[w*(u.length-1)|0]}:l}}(),rt=function(e,r,n,i){var a=cJ(e,r,n,i);return function(s,o,u){return s+(o-s)*a(u)}},Ih={linear:function(e,r,n){return e+(r-e)*n},ease:rt(.25,.1,.25,1),"ease-in":rt(.42,0,1,1),"ease-out":rt(0,0,.58,1),"ease-in-out":rt(.42,0,.58,1),"ease-in-sine":rt(.47,0,.745,.715),"ease-out-sine":rt(.39,.575,.565,1),"ease-in-out-sine":rt(.445,.05,.55,.95),"ease-in-quad":rt(.55,.085,.68,.53),"ease-out-quad":rt(.25,.46,.45,.94),"ease-in-out-quad":rt(.455,.03,.515,.955),"ease-in-cubic":rt(.55,.055,.675,.19),"ease-out-cubic":rt(.215,.61,.355,1),"ease-in-out-cubic":rt(.645,.045,.355,1),"ease-in-quart":rt(.895,.03,.685,.22),"ease-out-quart":rt(.165,.84,.44,1),"ease-in-out-quart":rt(.77,0,.175,1),"ease-in-quint":rt(.755,.05,.855,.06),"ease-out-quint":rt(.23,1,.32,1),"ease-in-out-quint":rt(.86,0,.07,1),"ease-in-expo":rt(.95,.05,.795,.035),"ease-out-expo":rt(.19,1,.22,1),"ease-in-out-expo":rt(1,0,0,1),"ease-in-circ":rt(.6,.04,.98,.335),"ease-out-circ":rt(.075,.82,.165,1),"ease-in-out-circ":rt(.785,.135,.15,.86),spring:function(e,r,n){if(n===0)return Ih.linear;var i=fJ(e,r,n);return function(a,s,o){return a+(s-a)*i(o)}},"cubic-bezier":rt};function _x(t,e,r,n,i){if(n===1||e===r)return r;var a=i(e,r,n);return t==null||((t.roundValue||t.color)&&(a=Math.round(a)),t.min!==void 0&&(a=Math.max(a,t.min)),t.max!==void 0&&(a=Math.min(a,t.max))),a}function Ex(t,e){return t.pfValue!=null||t.value!=null?t.pfValue!=null&&(e==null||e.type.units!=="%")?t.pfValue:t.value:t}function Ms(t,e,r,n,i){var a=i!=null?i.type:null;r<0?r=0:r>1&&(r=1);var s=Ex(t,i),o=Ex(e,i);if(le(s)&&le(o))return _x(a,s,o,r,n);if(tt(s)&&tt(o)){for(var u=[],l=0;l<o.length;l++){var c=s[l],f=o[l];if(c!=null&&f!=null){var h=_x(a,c,f,r,n);u.push(h)}else u.push(f)}return u}}function hJ(t,e,r,n){var i=!n,a=t._private,s=e._private,o=s.easing,u=s.startTime,l=n?t:t.cy(),c=l.style();if(!s.easingImpl)if(o==null)s.easingImpl=Ih.linear;else{var f;if(Te(o)){var h=c.parse("transition-timing-function",o);f=h.value}else f=o;var d,v;Te(f)?(d=f,v=[]):(d=f[1],v=f.slice(2).map(function($){return+$})),v.length>0?(d==="spring"&&v.push(s.duration),s.easingImpl=Ih[d].apply(null,v)):s.easingImpl=Ih[d]}var w=s.easingImpl,m;if(s.duration===0?m=1:m=(r-u)/s.duration,s.applying&&(m=s.progress),m<0?m=0:m>1&&(m=1),s.delay==null){var p=s.startPosition,g=s.position;if(g&&i&&!t.locked()){var y={};Bu(p.x,g.x)&&(y.x=Ms(p.x,g.x,m,w)),Bu(p.y,g.y)&&(y.y=Ms(p.y,g.y,m,w)),t.position(y)}var _=s.startPan,T=s.pan,b=a.pan,E=T!=null&&n;E&&(Bu(_.x,T.x)&&(b.x=Ms(_.x,T.x,m,w)),Bu(_.y,T.y)&&(b.y=Ms(_.y,T.y,m,w)),t.emit("pan"));var I=s.startZoom,S=s.zoom,C=S!=null&&n;C&&(Bu(I,S)&&(a.zoom=gc(a.minZoom,Ms(I,S,m,w),a.maxZoom)),t.emit("zoom")),(E||C)&&t.emit("viewport");var R=s.style;if(R&&R.length>0&&i){for(var x=0;x<R.length;x++){var P=R[x],A=P.name,F=P,O=s.startStyle[A],L=c.properties[O.name],D=Ms(O,F,m,w,L);c.overrideBypass(t,A,D)}t.emit("style")}}return s.progress=m,m}function Bu(t,e){return t==null||e==null?!1:le(t)&&le(e)?!0:!!(t&&e)}function dJ(t,e,r,n){var i=e._private;i.started=!0,i.startTime=r-i.progress*i.duration}function Tx(t,e){var r=e._private.aniEles,n=[];function i(c,f){var h=c._private,d=h.animation.current,v=h.animation.queue,w=!1;if(d.length===0){var m=v.shift();m&&d.push(m)}for(var p=function(b){for(var E=b.length-1;E>=0;E--){var I=b[E];I()}b.splice(0,b.length)},g=d.length-1;g>=0;g--){var y=d[g],_=y._private;if(_.stopped){d.splice(g,1),_.hooked=!1,_.playing=!1,_.started=!1,p(_.frames);continue}!_.playing&&!_.applying||(_.playing&&_.applying&&(_.applying=!1),_.started||dJ(c,y,t),hJ(c,y,t,f),_.applying&&(_.applying=!1),p(_.frames),_.step!=null&&_.step(t),y.completed()&&(d.splice(g,1),_.hooked=!1,_.playing=!1,_.started=!1,p(_.completes)),w=!0)}return!f&&d.length===0&&v.length===0&&n.push(c),w}for(var a=!1,s=0;s<r.length;s++){var o=r[s],u=i(o);a=a||u}var l=i(e,!0);(a||l)&&(r.length>0?e.notify("draw",r):e.notify("draw")),r.unmerge(n),e.emit("step")}var vJ={animate:Ye.animate(),animation:Ye.animation(),animated:Ye.animated(),clearQueue:Ye.clearQueue(),delay:Ye.delay(),delayAnimation:Ye.delayAnimation(),stop:Ye.stop(),addToAnimationPool:function(e){var r=this;r.styleEnabled()&&r._private.aniEles.merge(e)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var e=this;if(e._private.animationsRunning=!0,!e.styleEnabled())return;function r(){e._private.animationsRunning&&Td(function(a){Tx(a,e),r()})}var n=e.renderer();n&&n.beforeRender?n.beforeRender(function(a,s){Tx(s,e)},n.beforeRenderPriorities.animations):r()}},pJ={qualifierCompare:function(e,r){return e==null||r==null?e==null&&r==null:e.sameText(r)},eventMatches:function(e,r,n){var i=r.qualifier;return i!=null?e!==n.target&&ef(n.target)&&i.matches(n.target):!0},addEventFields:function(e,r){r.cy=e,r.target=e},callbackContext:function(e,r,n){return r.qualifier!=null?n.target:e}},Qf=function(e){return Te(e)?new ya(e):e},HV={createEmitter:function(){var e=this._private;return e.emitter||(e.emitter=new Xv(pJ,this)),this},emitter:function(){return this._private.emitter},on:function(e,r,n){return this.emitter().on(e,Qf(r),n),this},removeListener:function(e,r,n){return this.emitter().removeListener(e,Qf(r),n),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},one:function(e,r,n){return this.emitter().one(e,Qf(r),n),this},once:function(e,r,n){return this.emitter().one(e,Qf(r),n),this},emit:function(e,r){return this.emitter().emit(e,r),this},emitAndNotify:function(e,r){return this.emit(e),this.notify(e,r),this}};Ye.eventAliasesOn(HV);var c_={png:function(e){var r=this._private.renderer;return e=e||{},r.png(e)},jpg:function(e){var r=this._private.renderer;return e=e||{},e.bg=e.bg||"#fff",r.jpg(e)}};c_.jpeg=c_.jpg;var Ch={layout:function(e){var r=this;if(e==null){_t("Layout options must be specified to make a layout");return}if(e.name==null){_t("A `name` must be specified to make a layout");return}var n=e.name,i=r.extension("layout",n);if(i==null){_t("No such layout `"+n+"` found.  Did you forget to import it and `cytoscape.use()` it?");return}var a;Te(e.eles)?a=r.$(e.eles):a=e.eles!=null?e.eles:r.$();var s=new i(xe({},e,{cy:r,eles:a}));return s}};Ch.createLayout=Ch.makeLayout=Ch.layout;var gJ={notify:function(e,r){var n=this._private;if(this.batching()){n.batchNotifications=n.batchNotifications||{};var i=n.batchNotifications[e]=n.batchNotifications[e]||this.collection();r!=null&&i.merge(r);return}if(n.notificationsEnabled){var a=this.renderer();this.destroyed()||!a||a.notify(e,r)}},notifications:function(e){var r=this._private;return e===void 0?r.notificationsEnabled:(r.notificationsEnabled=!!e,this)},noNotifications:function(e){this.notifications(!1),e(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var e=this._private;return e.batchCount==null&&(e.batchCount=0),e.batchCount===0&&(e.batchStyleEles=this.collection(),e.batchNotifications={}),e.batchCount++,this},endBatch:function(){var e=this._private;if(e.batchCount===0)return this;if(e.batchCount--,e.batchCount===0){e.batchStyleEles.updateStyle();var r=this.renderer();Object.keys(e.batchNotifications).forEach(function(n){var i=e.batchNotifications[n];i.empty()?r.notify(n):r.notify(n,i)})}return this},batch:function(e){return this.startBatch(),e(),this.endBatch(),this},batchData:function(e){var r=this;return this.batch(function(){for(var n=Object.keys(e),i=0;i<n.length;i++){var a=n[i],s=e[a],o=r.getElementById(a);o.data(s)}})}},mJ=ar({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1}),f_={renderTo:function(e,r,n,i){var a=this._private.renderer;return a.renderTo(e,r,n,i),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(e){var r=this,n=r.extension("renderer",e.name);if(n==null){_t("Can not initialise: No such renderer `".concat(e.name,"` found. Did you forget to import it and `cytoscape.use()` it?"));return}e.wheelSensitivity!==void 0&&Xe("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var i=mJ(e);i.cy=r,r._private.renderer=new n(i),this.notify("init")},destroyRenderer:function(){var e=this;e.notify("destroy");var r=e.container();if(r)for(r._cyreg=null;r.childNodes.length>0;)r.removeChild(r.childNodes[0]);e._private.renderer=null,e.mutableElements().forEach(function(n){var i=n._private;i.rscratch={},i.rstyle={},i.animation.current=[],i.animation.queue=[]})},onRender:function(e){return this.on("render",e)},offRender:function(e){return this.off("render",e)}};f_.invalidateDimensions=f_.resize;var xh={collection:function(e,r){return Te(e)?this.$(e):Gr(e)?e.collection():tt(e)?(r||(r={}),new nr(this,e,r.unique,r.removed)):new nr(this)},nodes:function(e){var r=this.$(function(n){return n.isNode()});return e?r.filter(e):r},edges:function(e){var r=this.$(function(n){return n.isEdge()});return e?r.filter(e):r},$:function(e){var r=this._private.elements;return e?r.filter(e):r.spawnSelf()},mutableElements:function(){return this._private.elements}};xh.elements=xh.filter=xh.$;var Er={},bl="t",yJ="f";Er.apply=function(t){for(var e=this,r=e._private,n=r.cy,i=n.collection(),a=0;a<t.length;a++){var s=t[a],o=e.getContextMeta(s);if(!o.empty){var u=e.getContextStyle(o),l=e.applyContextStyle(o,u,s);s._private.appliedInitStyle?e.updateTransitions(s,l.diffProps):s._private.appliedInitStyle=!0;var c=e.updateStyleHints(s);c&&i.push(s)}}return i};Er.getPropertiesDiff=function(t,e){var r=this,n=r._private.propDiffs=r._private.propDiffs||{},i=t+"-"+e,a=n[i];if(a)return a;for(var s=[],o={},u=0;u<r.length;u++){var l=r[u],c=t[u]===bl,f=e[u]===bl,h=c!==f,d=l.mappedProperties.length>0;if(h||f&&d){var v=void 0;h&&d||h?v=l.properties:d&&(v=l.mappedProperties);for(var w=0;w<v.length;w++){for(var m=v[w],p=m.name,g=!1,y=u+1;y<r.length;y++){var _=r[y],T=e[y]===bl;if(T&&(g=_.properties[m.name]!=null,g))break}!o[p]&&!g&&(o[p]=!0,s.push(p))}}}return n[i]=s,s};Er.getContextMeta=function(t){for(var e=this,r="",n,i=t._private.styleCxtKey||"",a=0;a<e.length;a++){var s=e[a],o=s.selector&&s.selector.matches(t);o?r+=bl:r+=yJ}return n=e.getPropertiesDiff(i,r),t._private.styleCxtKey=r,{key:r,diffPropNames:n,empty:n.length===0}};Er.getContextStyle=function(t){var e=t.key,r=this,n=this._private.contextStyles=this._private.contextStyles||{};if(n[e])return n[e];for(var i={_private:{key:e}},a=0;a<r.length;a++){var s=r[a],o=e[a]===bl;if(o)for(var u=0;u<s.properties.length;u++){var l=s.properties[u];i[l.name]=l}}return n[e]=i,i};Er.applyContextStyle=function(t,e,r){for(var n=this,i=t.diffPropNames,a={},s=n.types,o=0;o<i.length;o++){var u=i[o],l=e[u],c=r.pstyle(u);if(!l)if(c)c.bypass?l={name:u,deleteBypassed:!0}:l={name:u,delete:!0};else continue;if(c!==l){if(l.mapped===s.fn&&c!=null&&c.mapping!=null&&c.mapping.value===l.value){var f=c.mapping,h=f.fnValue=l.value(r);if(h===f.prevFnValue)continue}var d=a[u]={prev:c};n.applyParsedProperty(r,l),d.next=r.pstyle(u),d.next&&d.next.bypass&&(d.next=d.next.bypassed)}}return{diffProps:a}};Er.updateStyleHints=function(t){var e=t._private,r=this,n=r.propertyGroupNames,i=r.propertyGroupKeys,a=function(ae,ve,_e){return r.getPropertiesHash(ae,ve,_e)},s=e.styleKey;if(t.removed())return!1;var o=e.group==="nodes",u=t._private.style;n=Object.keys(u);for(var l=0;l<i.length;l++){var c=i[l];e.styleKeys[c]=[io,Zu]}for(var f=function(ae,ve){return e.styleKeys[ve][0]=dc(ae,e.styleKeys[ve][0])},h=function(ae,ve){return e.styleKeys[ve][1]=vc(ae,e.styleKeys[ve][1])},d=function(ae,ve){f(ae,ve),h(ae,ve)},v=function(ae,ve){for(var _e=0;_e<ae.length;_e++){var se=ae.charCodeAt(_e);f(se,ve),h(se,ve)}},w=2e9,m=function(ae){return-128<ae&&ae<128&&Math.floor(ae)!==ae?w-(ae*1024|0):ae},p=0;p<n.length;p++){var g=n[p],y=u[g];if(y!=null){var _=this.properties[g],T=_.type,b=_.groupKey,E=void 0;_.hashOverride!=null?E=_.hashOverride(t,y):y.pfValue!=null&&(E=y.pfValue);var I=_.enums==null?y.value:null,S=E!=null,C=I!=null,R=S||C,x=y.units;if(T.number&&R&&!T.multiple){var P=S?E:I;d(m(P),b),!S&&x!=null&&v(x,b)}else v(y.strValue,b)}}for(var A=[io,Zu],F=0;F<i.length;F++){var O=i[F],L=e.styleKeys[O];A[0]=dc(L[0],A[0]),A[1]=vc(L[1],A[1])}e.styleKey=PQ(A[0],A[1]);var D=e.styleKeys;e.labelDimsKey=Di(D.labelDimensions);var $=a(t,["label"],D.labelDimensions);if(e.labelKey=Di($),e.labelStyleKey=Di(qf(D.commonLabel,$)),!o){var z=a(t,["source-label"],D.labelDimensions);e.sourceLabelKey=Di(z),e.sourceLabelStyleKey=Di(qf(D.commonLabel,z));var B=a(t,["target-label"],D.labelDimensions);e.targetLabelKey=Di(B),e.targetLabelStyleKey=Di(qf(D.commonLabel,B))}if(o){var j=e.styleKeys,Q=j.nodeBody,N=j.nodeBorder,M=j.nodeOutline,q=j.backgroundImage,V=j.compound,W=j.pie,X=[Q,N,M,q,V,W].filter(function(J){return J!=null}).reduce(qf,[io,Zu]);e.nodeKey=Di(X),e.hasPie=W!=null&&W[0]!==io&&W[1]!==Zu}return s!==e.styleKey};Er.clearStyleHints=function(t){var e=t._private;e.styleCxtKey="",e.styleKeys={},e.styleKey=null,e.labelKey=null,e.labelStyleKey=null,e.sourceLabelKey=null,e.sourceLabelStyleKey=null,e.targetLabelKey=null,e.targetLabelStyleKey=null,e.nodeKey=null,e.hasPie=null};Er.applyParsedProperty=function(t,e){var r=this,n=e,i=t._private.style,a,s=r.types,o=r.properties[n.name].type,u=n.bypass,l=i[n.name],c=l&&l.bypass,f=t._private,h="mapping",d=function(Q){return Q==null?null:Q.pfValue!=null?Q.pfValue:Q.value},v=function(){var Q=d(l),N=d(n);r.checkTriggers(t,n.name,Q,N)};if(e.name==="curve-style"&&t.isEdge()&&(e.value!=="bezier"&&t.isLoop()||e.value==="haystack"&&(t.source().isParent()||t.target().isParent()))&&(n=e=this.parse(e.name,"bezier",u)),n.delete)return i[n.name]=void 0,v(),!0;if(n.deleteBypassed)return l?l.bypass?(l.bypassed=void 0,v(),!0):!1:(v(),!0);if(n.deleteBypass)return l?l.bypass?(i[n.name]=l.bypassed,v(),!0):!1:(v(),!0);var w=function(){Xe("Do not assign mappings to elements without corresponding data (i.e. ele `"+t.id()+"` has no mapping for property `"+n.name+"` with data field `"+n.field+"`); try a `["+n.field+"]` selector to limit scope to elements with `"+n.field+"` defined")};switch(n.mapped){case s.mapData:{for(var m=n.field.split("."),p=f.data,g=0;g<m.length&&p;g++){var y=m[g];p=p[y]}if(p==null)return w(),!1;var _;if(le(p)){var T=n.fieldMax-n.fieldMin;T===0?_=0:_=(p-n.fieldMin)/T}else return Xe("Do not use continuous mappers without specifying numeric data (i.e. `"+n.field+": "+p+"` for `"+t.id()+"` is non-numeric)"),!1;if(_<0?_=0:_>1&&(_=1),o.color){var b=n.valueMin[0],E=n.valueMax[0],I=n.valueMin[1],S=n.valueMax[1],C=n.valueMin[2],R=n.valueMax[2],x=n.valueMin[3]==null?1:n.valueMin[3],P=n.valueMax[3]==null?1:n.valueMax[3],A=[Math.round(b+(E-b)*_),Math.round(I+(S-I)*_),Math.round(C+(R-C)*_),Math.round(x+(P-x)*_)];a={bypass:n.bypass,name:n.name,value:A,strValue:"rgb("+A[0]+", "+A[1]+", "+A[2]+")"}}else if(o.number){var F=n.valueMin+(n.valueMax-n.valueMin)*_;a=this.parse(n.name,F,n.bypass,h)}else return!1;if(!a)return w(),!1;a.mapping=n,n=a;break}case s.data:{for(var O=n.field.split("."),L=f.data,D=0;D<O.length&&L;D++){var $=O[D];L=L[$]}if(L!=null&&(a=this.parse(n.name,L,n.bypass,h)),!a)return w(),!1;a.mapping=n,n=a;break}case s.fn:{var z=n.value,B=n.fnValue!=null?n.fnValue:z(t);if(n.prevFnValue=B,B==null)return Xe("Custom function mappers may not return null (i.e. `"+n.name+"` for ele `"+t.id()+"` is null)"),!1;if(a=this.parse(n.name,B,n.bypass,h),!a)return Xe("Custom function mappers may not return invalid values for the property type (i.e. `"+n.name+"` for ele `"+t.id()+"` is invalid)"),!1;a.mapping=zn(n),n=a;break}case void 0:break;default:return!1}return u?(c?n.bypassed=l.bypassed:n.bypassed=l,i[n.name]=n):c?l.bypassed=n:i[n.name]=n,v(),!0};Er.cleanElements=function(t,e){for(var r=0;r<t.length;r++){var n=t[r];if(this.clearStyleHints(n),n.dirtyCompoundBoundsCache(),n.dirtyBoundingBoxCache(),!e)n._private.style={};else for(var i=n._private.style,a=Object.keys(i),s=0;s<a.length;s++){var o=a[s],u=i[o];u!=null&&(u.bypass?u.bypassed=null:i[o]=null)}}};Er.update=function(){var t=this._private.cy,e=t.mutableElements();e.updateStyle()};Er.updateTransitions=function(t,e){var r=this,n=t._private,i=t.pstyle("transition-property").value,a=t.pstyle("transition-duration").pfValue,s=t.pstyle("transition-delay").pfValue;if(i.length>0&&a>0){for(var o={},u=!1,l=0;l<i.length;l++){var c=i[l],f=t.pstyle(c),h=e[c];if(h){var d=h.prev,v=d,w=h.next!=null?h.next:f,m=!1,p=void 0,g=1e-6;v&&(le(v.pfValue)&&le(w.pfValue)?(m=w.pfValue-v.pfValue,p=v.pfValue+g*m):le(v.value)&&le(w.value)?(m=w.value-v.value,p=v.value+g*m):tt(v.value)&&tt(w.value)&&(m=v.value[0]!==w.value[0]||v.value[1]!==w.value[1]||v.value[2]!==w.value[2],p=v.strValue),m&&(o[c]=w.strValue,this.applyBypass(t,c,p),u=!0))}}if(!u)return;n.transitioning=!0,new vu(function(y){s>0?t.delayAnimation(s).play().promise().then(y):y()}).then(function(){return t.animation({style:o,duration:a,easing:t.pstyle("transition-timing-function").value,queue:!1}).play().promise()}).then(function(){r.removeBypasses(t,i),t.emitAndNotify("style"),n.transitioning=!1})}else n.transitioning&&(this.removeBypasses(t,i),t.emitAndNotify("style"),n.transitioning=!1)};Er.checkTrigger=function(t,e,r,n,i,a){var s=this.properties[e],o=i(s);o!=null&&o(r,n)&&a(s)};Er.checkZOrderTrigger=function(t,e,r,n){var i=this;this.checkTrigger(t,e,r,n,function(a){return a.triggersZOrder},function(){i._private.cy.notify("zorder",t)})};Er.checkBoundsTrigger=function(t,e,r,n){this.checkTrigger(t,e,r,n,function(i){return i.triggersBounds},function(i){t.dirtyCompoundBoundsCache(),t.dirtyBoundingBoxCache(),i.triggersBoundsOfParallelBeziers&&e==="curve-style"&&(r==="bezier"||n==="bezier")&&t.parallelEdges().forEach(function(a){a.isBundledBezier()&&a.dirtyBoundingBoxCache()}),i.triggersBoundsOfConnectedEdges&&e==="display"&&(r==="none"||n==="none")&&t.connectedEdges().forEach(function(a){a.dirtyBoundingBoxCache()})})};Er.checkTriggers=function(t,e,r,n){t.dirtyStyleCache(),this.checkZOrderTrigger(t,e,r,n),this.checkBoundsTrigger(t,e,r,n)};var nf={};nf.applyBypass=function(t,e,r,n){var i=this,a=[],s=!0;if(e==="*"||e==="**"){if(r!==void 0)for(var o=0;o<i.properties.length;o++){var u=i.properties[o],l=u.name,c=this.parse(l,r,!0);c&&a.push(c)}}else if(Te(e)){var f=this.parse(e,r,!0);f&&a.push(f)}else if(He(e)){var h=e;n=r;for(var d=Object.keys(h),v=0;v<d.length;v++){var w=d[v],m=h[w];if(m===void 0&&(m=h[Hv(w)]),m!==void 0){var p=this.parse(w,m,!0);p&&a.push(p)}}}else return!1;if(a.length===0)return!1;for(var g=!1,y=0;y<t.length;y++){for(var _=t[y],T={},b=void 0,E=0;E<a.length;E++){var I=a[E];if(n){var S=_.pstyle(I.name);b=T[I.name]={prev:S}}g=this.applyParsedProperty(_,zn(I))||g,n&&(b.next=_.pstyle(I.name))}g&&this.updateStyleHints(_),n&&this.updateTransitions(_,T,s)}return g};nf.overrideBypass=function(t,e,r){e=GT(e);for(var n=0;n<t.length;n++){var i=t[n],a=i._private.style[e],s=this.properties[e].type,o=s.color,u=s.mutiple,l=a?a.pfValue!=null?a.pfValue:a.value:null;!a||!a.bypass?this.applyBypass(i,e,r):(a.value=r,a.pfValue!=null&&(a.pfValue=r),o?a.strValue="rgb("+r.join(",")+")":u?a.strValue=r.join(" "):a.strValue=""+r,this.updateStyleHints(i)),this.checkTriggers(i,e,l,r)}};nf.removeAllBypasses=function(t,e){return this.removeBypasses(t,this.propertyNames,e)};nf.removeBypasses=function(t,e,r){for(var n=!0,i=0;i<t.length;i++){for(var a=t[i],s={},o=0;o<e.length;o++){var u=e[o],l=this.properties[u],c=a.pstyle(l.name);if(!(!c||!c.bypass)){var f="",h=this.parse(u,f,!0),d=s[l.name]={prev:c};this.applyParsedProperty(a,h),d.next=a.pstyle(l.name)}}this.updateStyleHints(a),r&&this.updateTransitions(a,s,n)}};var ib={};ib.getEmSizeInPixels=function(){var t=this.containerCss("font-size");return t!=null?parseFloat(t):1};ib.containerCss=function(t){var e=this._private.cy,r=e.container(),n=e.window();if(n&&r&&n.getComputedStyle)return n.getComputedStyle(r).getPropertyValue(t)};var Jn={};Jn.getRenderedStyle=function(t,e){return e?this.getStylePropertyValue(t,e,!0):this.getRawStyle(t,!0)};Jn.getRawStyle=function(t,e){var r=this;if(t=t[0],t){for(var n={},i=0;i<r.properties.length;i++){var a=r.properties[i],s=r.getStylePropertyValue(t,a.name,e);s!=null&&(n[a.name]=s,n[Hv(a.name)]=s)}return n}};Jn.getIndexedStyle=function(t,e,r,n){var i=t.pstyle(e)[r][n];return i??t.cy().style().getDefaultProperty(e)[r][0]};Jn.getStylePropertyValue=function(t,e,r){var n=this;if(t=t[0],t){var i=n.properties[e];i.alias&&(i=i.pointsTo);var a=i.type,s=t.pstyle(i.name);if(s){var o=s.value,u=s.units,l=s.strValue;if(r&&a.number&&o!=null&&le(o)){var c=t.cy().zoom(),f=function(m){return m*c},h=function(m,p){return f(m)+p},d=tt(o),v=d?u.every(function(w){return w!=null}):u!=null;return v?d?o.map(function(w,m){return h(w,u[m])}).join(" "):h(o,u):d?o.map(function(w){return Te(w)?w:""+f(w)}).join(" "):""+f(o)}else if(l!=null)return l}return null}};Jn.getAnimationStartStyle=function(t,e){for(var r={},n=0;n<e.length;n++){var i=e[n],a=i.name,s=t.pstyle(a);s!==void 0&&(He(s)?s=this.parse(a,s.strValue):s=this.parse(a,s)),s&&(r[a]=s)}return r};Jn.getPropsList=function(t){var e=this,r=[],n=t,i=e.properties;if(n)for(var a=Object.keys(n),s=0;s<a.length;s++){var o=a[s],u=n[o],l=i[o]||i[GT(o)],c=this.parse(l.name,u);c&&r.push(c)}return r};Jn.getNonDefaultPropertiesHash=function(t,e,r){var n=r.slice(),i,a,s,o,u,l;for(u=0;u<e.length;u++)if(i=e[u],a=t.pstyle(i,!1),a!=null)if(a.pfValue!=null)n[0]=dc(o,n[0]),n[1]=vc(o,n[1]);else for(s=a.strValue,l=0;l<s.length;l++)o=s.charCodeAt(l),n[0]=dc(o,n[0]),n[1]=vc(o,n[1]);return n};Jn.getPropertiesHash=Jn.getNonDefaultPropertiesHash;var ep={};ep.appendFromJson=function(t){for(var e=this,r=0;r<t.length;r++){var n=t[r],i=n.selector,a=n.style||n.css,s=Object.keys(a);e.selector(i);for(var o=0;o<s.length;o++){var u=s[o],l=a[u];e.css(u,l)}}return e};ep.fromJson=function(t){var e=this;return e.resetToDefault(),e.appendFromJson(t),e};ep.json=function(){for(var t=[],e=this.defaultLength;e<this.length;e++){for(var r=this[e],n=r.selector,i=r.properties,a={},s=0;s<i.length;s++){var o=i[s];a[o.name]=o.strValue}t.push({selector:n?n.toString():"core",style:a})}return t};var ab={};ab.appendFromString=function(t){var e=this,r=this,n=""+t,i,a,s;n=n.replace(/[/][*](\s|.)+?[*][/]/g,"");function o(){n.length>i.length?n=n.substr(i.length):n=""}function u(){a.length>s.length?a=a.substr(s.length):a=""}for(;;){var l=n.match(/^\s*$/);if(l)break;var c=n.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!c){Xe("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+n);break}i=c[0];var f=c[1];if(f!=="core"){var h=new ya(f);if(h.invalid){Xe("Skipping parsing of block: Invalid selector found in string stylesheet: "+f),o();continue}}var d=c[2],v=!1;a=d;for(var w=[];;){var m=a.match(/^\s*$/);if(m)break;var p=a.match(/^\s*(.+?)\s*:\s*(.+?)(?:\s*;|\s*$)/);if(!p){Xe("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+d),v=!0;break}s=p[0];var g=p[1],y=p[2],_=e.properties[g];if(!_){Xe("Skipping property: Invalid property name in: "+s),u();continue}var T=r.parse(g,y);if(!T){Xe("Skipping property: Invalid property definition in: "+s),u();continue}w.push({name:g,val:y}),u()}if(v){o();break}r.selector(f);for(var b=0;b<w.length;b++){var E=w[b];r.css(E.name,E.val)}o()}return r};ab.fromString=function(t){var e=this;return e.resetToDefault(),e.appendFromString(t),e};var Qt={};(function(){var t=Lt,e=yQ,r=_Q,n=EQ,i=TQ,a=function(X){return"^"+X+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},s=function(X){var J=t+"|\\w+|"+e+"|"+r+"|"+n+"|"+i;return"^"+X+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+t+")\\s*\\,\\s*("+t+")\\s*,\\s*("+J+")\\s*\\,\\s*("+J+")\\)$"},o=[`^url\\s*\\(\\s*['"]?(.+?)['"]?\\s*\\)$`,"^(none)$","^(.+)$"];Qt.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},nonNegativeNumber:{number:!0,min:0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials","null"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","straight-triangle","taxi"]},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","right-rhomboid","polygon"]},overlayShape:{enums:["roundrectangle","round-rectangle","ellipse"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},arrowWidth:{number:!0,units:"%|px|em",implicitUnits:"px",enums:["match-line"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:a("data")},layoutData:{mapping:!0,regex:a("layoutData")},scratch:{mapping:!0,regex:a("scratch")},mapData:{mapping:!0,regex:s("mapData")},mapLayoutData:{mapping:!0,regex:s("mapLayoutData")},mapScratch:{mapping:!0,regex:s("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:o,singleRegexMatchValue:!0},urls:{regexes:o,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position","endpoints"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function(X,J){switch(X.length){case 2:return J[0]!=="deg"&&J[0]!=="rad"&&J[1]!=="deg"&&J[1]!=="rad";case 1:return Te(X[0])||J[0]==="deg"||J[0]==="rad";default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+t+")\\s*,\\s*("+t+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+t+")\\s*,\\s*("+t+")\\s*,\\s*("+t+")\\s*,\\s*("+t+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:function(X){var J=X.length;return J===1||J===2||J===4}}};var u={zeroNonZero:function(X,J){return(X==null||J==null)&&X!==J||X==0&&J!=0?!0:X!=0&&J==0},any:function(X,J){return X!=J},emptyNonEmpty:function(X,J){var ae=ga(X),ve=ga(J);return ae&&!ve||!ae&&ve}},l=Qt.types,c=[{name:"label",type:l.text,triggersBounds:u.any,triggersZOrder:u.emptyNonEmpty},{name:"text-rotation",type:l.textRotation,triggersBounds:u.any},{name:"text-margin-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"text-margin-y",type:l.bidirectionalSize,triggersBounds:u.any}],f=[{name:"source-label",type:l.text,triggersBounds:u.any},{name:"source-text-rotation",type:l.textRotation,triggersBounds:u.any},{name:"source-text-margin-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"source-text-margin-y",type:l.bidirectionalSize,triggersBounds:u.any},{name:"source-text-offset",type:l.size,triggersBounds:u.any}],h=[{name:"target-label",type:l.text,triggersBounds:u.any},{name:"target-text-rotation",type:l.textRotation,triggersBounds:u.any},{name:"target-text-margin-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"target-text-margin-y",type:l.bidirectionalSize,triggersBounds:u.any},{name:"target-text-offset",type:l.size,triggersBounds:u.any}],d=[{name:"font-family",type:l.fontFamily,triggersBounds:u.any},{name:"font-style",type:l.fontStyle,triggersBounds:u.any},{name:"font-weight",type:l.fontWeight,triggersBounds:u.any},{name:"font-size",type:l.size,triggersBounds:u.any},{name:"text-transform",type:l.textTransform,triggersBounds:u.any},{name:"text-wrap",type:l.textWrap,triggersBounds:u.any},{name:"text-overflow-wrap",type:l.textOverflowWrap,triggersBounds:u.any},{name:"text-max-width",type:l.size,triggersBounds:u.any},{name:"text-outline-width",type:l.size,triggersBounds:u.any},{name:"line-height",type:l.positiveNumber,triggersBounds:u.any}],v=[{name:"text-valign",type:l.valign,triggersBounds:u.any},{name:"text-halign",type:l.halign,triggersBounds:u.any},{name:"color",type:l.color},{name:"text-outline-color",type:l.color},{name:"text-outline-opacity",type:l.zeroOneNumber},{name:"text-background-color",type:l.color},{name:"text-background-opacity",type:l.zeroOneNumber},{name:"text-background-padding",type:l.size,triggersBounds:u.any},{name:"text-border-opacity",type:l.zeroOneNumber},{name:"text-border-color",type:l.color},{name:"text-border-width",type:l.size,triggersBounds:u.any},{name:"text-border-style",type:l.borderStyle,triggersBounds:u.any},{name:"text-background-shape",type:l.textBackgroundShape,triggersBounds:u.any},{name:"text-justification",type:l.justification}],w=[{name:"events",type:l.bool,triggersZOrder:u.any},{name:"text-events",type:l.bool,triggersZOrder:u.any}],m=[{name:"display",type:l.display,triggersZOrder:u.any,triggersBounds:u.any,triggersBoundsOfConnectedEdges:!0},{name:"visibility",type:l.visibility,triggersZOrder:u.any},{name:"opacity",type:l.zeroOneNumber,triggersZOrder:u.zeroNonZero},{name:"text-opacity",type:l.zeroOneNumber},{name:"min-zoomed-font-size",type:l.size},{name:"z-compound-depth",type:l.zCompoundDepth,triggersZOrder:u.any},{name:"z-index-compare",type:l.zIndexCompare,triggersZOrder:u.any},{name:"z-index",type:l.number,triggersZOrder:u.any}],p=[{name:"overlay-padding",type:l.size,triggersBounds:u.any},{name:"overlay-color",type:l.color},{name:"overlay-opacity",type:l.zeroOneNumber,triggersBounds:u.zeroNonZero},{name:"overlay-shape",type:l.overlayShape,triggersBounds:u.any}],g=[{name:"underlay-padding",type:l.size,triggersBounds:u.any},{name:"underlay-color",type:l.color},{name:"underlay-opacity",type:l.zeroOneNumber,triggersBounds:u.zeroNonZero},{name:"underlay-shape",type:l.overlayShape,triggersBounds:u.any}],y=[{name:"transition-property",type:l.propList},{name:"transition-duration",type:l.time},{name:"transition-delay",type:l.time},{name:"transition-timing-function",type:l.easing}],_=function(X,J){return J.value==="label"?-X.poolIndex():J.pfValue},T=[{name:"height",type:l.nodeSize,triggersBounds:u.any,hashOverride:_},{name:"width",type:l.nodeSize,triggersBounds:u.any,hashOverride:_},{name:"shape",type:l.nodeShape,triggersBounds:u.any},{name:"shape-polygon-points",type:l.polygonPointList,triggersBounds:u.any},{name:"background-color",type:l.color},{name:"background-fill",type:l.fill},{name:"background-opacity",type:l.zeroOneNumber},{name:"background-blacken",type:l.nOneOneNumber},{name:"background-gradient-stop-colors",type:l.colors},{name:"background-gradient-stop-positions",type:l.percentages},{name:"background-gradient-direction",type:l.gradientDirection},{name:"padding",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"padding-relative-to",type:l.paddingRelativeTo,triggersBounds:u.any},{name:"bounds-expansion",type:l.boundsExpansion,triggersBounds:u.any}],b=[{name:"border-color",type:l.color},{name:"border-opacity",type:l.zeroOneNumber},{name:"border-width",type:l.size,triggersBounds:u.any},{name:"border-style",type:l.borderStyle}],E=[{name:"outline-color",type:l.color},{name:"outline-opacity",type:l.zeroOneNumber},{name:"outline-width",type:l.size,triggersBounds:u.any},{name:"outline-style",type:l.borderStyle},{name:"outline-offset",type:l.size,triggersBounds:u.any}],I=[{name:"background-image",type:l.urls},{name:"background-image-crossorigin",type:l.bgCrossOrigin},{name:"background-image-opacity",type:l.zeroOneNumbers},{name:"background-image-containment",type:l.bgContainment},{name:"background-image-smoothing",type:l.bools},{name:"background-position-x",type:l.bgPos},{name:"background-position-y",type:l.bgPos},{name:"background-width-relative-to",type:l.bgRelativeTo},{name:"background-height-relative-to",type:l.bgRelativeTo},{name:"background-repeat",type:l.bgRepeat},{name:"background-fit",type:l.bgFit},{name:"background-clip",type:l.bgClip},{name:"background-width",type:l.bgWH},{name:"background-height",type:l.bgWH},{name:"background-offset-x",type:l.bgPos},{name:"background-offset-y",type:l.bgPos}],S=[{name:"position",type:l.position,triggersBounds:u.any},{name:"compound-sizing-wrt-labels",type:l.compoundIncludeLabels,triggersBounds:u.any},{name:"min-width",type:l.size,triggersBounds:u.any},{name:"min-width-bias-left",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"min-width-bias-right",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"min-height",type:l.size,triggersBounds:u.any},{name:"min-height-bias-top",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"min-height-bias-bottom",type:l.sizeMaybePercent,triggersBounds:u.any}],C=[{name:"line-style",type:l.lineStyle},{name:"line-color",type:l.color},{name:"line-fill",type:l.fill},{name:"line-cap",type:l.lineCap},{name:"line-opacity",type:l.zeroOneNumber},{name:"line-dash-pattern",type:l.numbers},{name:"line-dash-offset",type:l.number},{name:"line-gradient-stop-colors",type:l.colors},{name:"line-gradient-stop-positions",type:l.percentages},{name:"curve-style",type:l.curveStyle,triggersBounds:u.any,triggersBoundsOfParallelBeziers:!0},{name:"haystack-radius",type:l.zeroOneNumber,triggersBounds:u.any},{name:"source-endpoint",type:l.edgeEndpoint,triggersBounds:u.any},{name:"target-endpoint",type:l.edgeEndpoint,triggersBounds:u.any},{name:"control-point-step-size",type:l.size,triggersBounds:u.any},{name:"control-point-distances",type:l.bidirectionalSizes,triggersBounds:u.any},{name:"control-point-weights",type:l.numbers,triggersBounds:u.any},{name:"segment-distances",type:l.bidirectionalSizes,triggersBounds:u.any},{name:"segment-weights",type:l.numbers,triggersBounds:u.any},{name:"taxi-turn",type:l.bidirectionalSizeMaybePercent,triggersBounds:u.any},{name:"taxi-turn-min-distance",type:l.size,triggersBounds:u.any},{name:"taxi-direction",type:l.axisDirection,triggersBounds:u.any},{name:"edge-distances",type:l.edgeDistances,triggersBounds:u.any},{name:"arrow-scale",type:l.positiveNumber,triggersBounds:u.any},{name:"loop-direction",type:l.angle,triggersBounds:u.any},{name:"loop-sweep",type:l.angle,triggersBounds:u.any},{name:"source-distance-from-node",type:l.size,triggersBounds:u.any},{name:"target-distance-from-node",type:l.size,triggersBounds:u.any}],R=[{name:"ghost",type:l.bool,triggersBounds:u.any},{name:"ghost-offset-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"ghost-offset-y",type:l.bidirectionalSize,triggersBounds:u.any},{name:"ghost-opacity",type:l.zeroOneNumber}],x=[{name:"selection-box-color",type:l.color},{name:"selection-box-opacity",type:l.zeroOneNumber},{name:"selection-box-border-color",type:l.color},{name:"selection-box-border-width",type:l.size},{name:"active-bg-color",type:l.color},{name:"active-bg-opacity",type:l.zeroOneNumber},{name:"active-bg-size",type:l.size},{name:"outside-texture-bg-color",type:l.color},{name:"outside-texture-bg-opacity",type:l.zeroOneNumber}],P=[];Qt.pieBackgroundN=16,P.push({name:"pie-size",type:l.sizeMaybePercent});for(var A=1;A<=Qt.pieBackgroundN;A++)P.push({name:"pie-"+A+"-background-color",type:l.color}),P.push({name:"pie-"+A+"-background-size",type:l.percent}),P.push({name:"pie-"+A+"-background-opacity",type:l.zeroOneNumber});var F=[],O=Qt.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:l.arrowShape,triggersBounds:u.any},{name:"arrow-color",type:l.color},{name:"arrow-fill",type:l.arrowFill},{name:"arrow-width",type:l.arrowWidth}].forEach(function(W){O.forEach(function(X){var J=X+"-"+W.name,ae=W.type,ve=W.triggersBounds;F.push({name:J,type:ae,triggersBounds:ve})})},{});var L=Qt.properties=[].concat(w,y,m,p,g,R,v,d,c,f,h,T,b,E,I,P,S,C,F,x),D=Qt.propertyGroups={behavior:w,transition:y,visibility:m,overlay:p,underlay:g,ghost:R,commonLabel:v,labelDimensions:d,mainLabel:c,sourceLabel:f,targetLabel:h,nodeBody:T,nodeBorder:b,nodeOutline:E,backgroundImage:I,pie:P,compound:S,edgeLine:C,edgeArrow:F,core:x},$=Qt.propertyGroupNames={},z=Qt.propertyGroupKeys=Object.keys(D);z.forEach(function(W){$[W]=D[W].map(function(X){return X.name}),D[W].forEach(function(X){return X.groupKey=W})});var B=Qt.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];Qt.propertyNames=L.map(function(W){return W.name});for(var j=0;j<L.length;j++){var Q=L[j];L[Q.name]=Q}for(var N=0;N<B.length;N++){var M=B[N],q=L[M.pointsTo],V={name:M.name,alias:!0,pointsTo:q};L.push(V),L[M.name]=V}})();Qt.getDefaultProperty=function(t){return this.getDefaultProperties()[t]};Qt.getDefaultProperties=function(){var t=this._private;if(t.defaultProperties!=null)return t.defaultProperties;for(var e=xe({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"overlay-shape":"round-rectangle","underlay-opacity":0,"underlay-color":"#000","underlay-padding":10,"underlay-shape":"round-rectangle","transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid","outline-color":"#999","outline-opacity":1,"outline-width":0,"outline-offset":0,"outline-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(u,l){for(var c=1;c<=Qt.pieBackgroundN;c++){var f=l.name.replace("{{i}}",c),h=l.value;u[f]=h}return u},{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"taxi-turn":"50%","taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"},{name:"arrow-width",value:1}].reduce(function(u,l){return Qt.arrowPrefixes.forEach(function(c){var f=c+"-"+l.name,h=l.value;u[f]=h}),u},{})),r={},n=0;n<this.properties.length;n++){var i=this.properties[n];if(!i.pointsTo){var a=i.name,s=e[a],o=this.parse(a,s);r[a]=o}}return t.defaultProperties=r,t.defaultProperties};Qt.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var tp={};tp.parse=function(t,e,r,n){var i=this;if(pt(e))return i.parseImplWarn(t,e,r,n);var a=n==="mapping"||n===!0||n===!1||n==null?"dontcare":n,s=r?"t":"f",o=""+e,u=uV(t,o,s,a),l=i.propCache=i.propCache||[],c;return(c=l[u])||(c=l[u]=i.parseImplWarn(t,e,r,n)),(r||n==="mapping")&&(c=zn(c),c&&(c.value=zn(c.value))),c};tp.parseImplWarn=function(t,e,r,n){var i=this.parseImpl(t,e,r,n);return!i&&e!=null&&Xe("The style property `".concat(t,": ").concat(e,"` is invalid")),i&&(i.name==="width"||i.name==="height")&&e==="label"&&Xe("The style value of `label` is deprecated for `"+i.name+"`"),i};tp.parseImpl=function(t,e,r,n){var i=this;t=GT(t);var a=i.properties[t],s=e,o=i.types;if(!a||e===void 0)return null;a.alias&&(a=a.pointsTo,t=a.name);var u=Te(e);u&&(e=e.trim());var l=a.type;if(!l)return null;if(r&&(e===""||e===null))return{name:t,value:e,bypass:!0,deleteBypass:!0};if(pt(e))return{name:t,value:e,strValue:"fn",mapped:o.fn,bypass:r};var c,f;if(!(!u||n||e.length<7||e[1]!=="a")){if(e.length>=7&&e[0]==="d"&&(c=new RegExp(o.data.regex).exec(e))){if(r)return!1;var h=o.data;return{name:t,value:c,strValue:""+e,mapped:h,field:c[1],bypass:r}}else if(e.length>=10&&e[0]==="m"&&(f=new RegExp(o.mapData.regex).exec(e))){if(r||l.multiple)return!1;var d=o.mapData;if(!(l.color||l.number))return!1;var v=this.parse(t,f[4]);if(!v||v.mapped)return!1;var w=this.parse(t,f[5]);if(!w||w.mapped)return!1;if(v.pfValue===w.pfValue||v.strValue===w.strValue)return Xe("`"+t+": "+e+"` is not a valid mapper because the output range is zero; converting to `"+t+": "+v.strValue+"`"),this.parse(t,v.strValue);if(l.color){var m=v.value,p=w.value,g=m[0]===p[0]&&m[1]===p[1]&&m[2]===p[2]&&(m[3]===p[3]||(m[3]==null||m[3]===1)&&(p[3]==null||p[3]===1));if(g)return!1}return{name:t,value:f,strValue:""+e,mapped:d,field:f[1],fieldMin:parseFloat(f[2]),fieldMax:parseFloat(f[3]),valueMin:v.value,valueMax:w.value,bypass:r}}}if(l.multiple&&n!=="multiple"){var y;if(u?y=e.split(/\s+/):tt(e)?y=e:y=[e],l.evenMultiple&&y.length%2!==0)return null;for(var _=[],T=[],b=[],E="",I=!1,S=0;S<y.length;S++){var C=i.parse(t,y[S],r,"multiple");I=I||Te(C.value),_.push(C.value),b.push(C.pfValue!=null?C.pfValue:C.value),T.push(C.units),E+=(S>0?" ":"")+C.strValue}return l.validate&&!l.validate(_,T)?null:l.singleEnum&&I?_.length===1&&Te(_[0])?{name:t,value:_[0],strValue:_[0],bypass:r}:null:{name:t,value:_,pfValue:b,strValue:E,bypass:r,units:T}}var R=function(){for(var X=0;X<l.enums.length;X++){var J=l.enums[X];if(J===e)return{name:t,value:e,strValue:""+e,bypass:r}}return null};if(l.number){var x,P="px";if(l.units&&(x=l.units),l.implicitUnits&&(P=l.implicitUnits),!l.unitless)if(u){var A="px|em"+(l.allowPercent?"|\\%":"");x&&(A=x);var F=e.match("^("+Lt+")("+A+")?$");F&&(e=F[1],x=F[2]||P)}else(!x||l.implicitUnits)&&(x=P);if(e=parseFloat(e),isNaN(e)&&l.enums===void 0)return null;if(isNaN(e)&&l.enums!==void 0)return e=s,R();if(l.integer&&!fQ(e)||l.min!==void 0&&(e<l.min||l.strictMin&&e===l.min)||l.max!==void 0&&(e>l.max||l.strictMax&&e===l.max))return null;var O={name:t,value:e,strValue:""+e+(x||""),units:x,bypass:r};return l.unitless||x!=="px"&&x!=="em"?O.pfValue=e:O.pfValue=x==="px"||!x?e:this.getEmSizeInPixels()*e,(x==="ms"||x==="s")&&(O.pfValue=x==="ms"?e:1e3*e),(x==="deg"||x==="rad")&&(O.pfValue=x==="rad"?e:sY(e)),x==="%"&&(O.pfValue=e/100),O}else if(l.propList){var L=[],D=""+e;if(D!=="none"){for(var $=D.split(/\s*,\s*|\s+/),z=0;z<$.length;z++){var B=$[z].trim();i.properties[B]?L.push(B):Xe("`"+B+"` is not a valid property name")}if(L.length===0)return null}return{name:t,value:L,strValue:L.length===0?"none":L.join(" "),bypass:r}}else if(l.color){var j=RQ(e);return j?{name:t,value:j,pfValue:j,strValue:"rgb("+j[0]+","+j[1]+","+j[2]+")",bypass:r}:null}else if(l.regex||l.regexes){if(l.enums){var Q=R();if(Q)return Q}for(var N=l.regexes?l.regexes:[l.regex],M=0;M<N.length;M++){var q=new RegExp(N[M]),V=q.exec(e);if(V)return{name:t,value:l.singleRegexMatchValue?V[1]:V,strValue:""+e,bypass:r}}return null}else return l.string?{name:t,value:""+e,strValue:""+e,bypass:r}:l.enums?R():null};var gr=function t(e){if(!(this instanceof t))return new t(e);if(!HT(e)){_t("A style must have a core reference");return}this._private={cy:e,coreStyle:{}},this.length=0,this.resetToDefault()},_r=gr.prototype;_r.instanceString=function(){return"style"};_r.clear=function(){for(var t=this._private,e=t.cy,r=e.elements(),n=0;n<this.length;n++)this[n]=void 0;return this.length=0,t.contextStyles={},t.propDiffs={},this.cleanElements(r,!0),r.forEach(function(i){var a=i[0]._private;a.styleDirty=!0,a.appliedInitStyle=!1}),this};_r.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this};_r.core=function(t){return this._private.coreStyle[t]||this.getDefaultProperty(t)};_r.selector=function(t){var e=t==="core"?null:new ya(t),r=this.length++;return this[r]={selector:e,properties:[],mappedProperties:[],index:r},this};_r.css=function(){var t=this,e=arguments;if(e.length===1)for(var r=e[0],n=0;n<t.properties.length;n++){var i=t.properties[n],a=r[i.name];a===void 0&&(a=r[Hv(i.name)]),a!==void 0&&this.cssRule(i.name,a)}else e.length===2&&this.cssRule(e[0],e[1]);return this};_r.style=_r.css;_r.cssRule=function(t,e){var r=this.parse(t,e);if(r){var n=this.length-1;this[n].properties.push(r),this[n].properties[r.name]=r,r.name.match(/pie-(\d+)-background-size/)&&r.value&&(this._private.hasPie=!0),r.mapped&&this[n].mappedProperties.push(r);var i=!this[n].selector;i&&(this._private.coreStyle[r.name]=r)}return this};_r.append=function(t){return eV(t)?t.appendToStyle(this):tt(t)?this.appendFromJson(t):Te(t)&&this.appendFromString(t),this};gr.fromJson=function(t,e){var r=new gr(t);return r.fromJson(e),r};gr.fromString=function(t,e){return new gr(t).fromString(e)};[Er,nf,ib,Jn,ep,ab,Qt,tp].forEach(function(t){xe(_r,t)});gr.types=_r.types;gr.properties=_r.properties;gr.propertyGroups=_r.propertyGroups;gr.propertyGroupNames=_r.propertyGroupNames;gr.propertyGroupKeys=_r.propertyGroupKeys;var wJ={style:function(e){if(e){var r=this.setStyle(e);r.update()}return this._private.style},setStyle:function(e){var r=this._private;return eV(e)?r.style=e.generateStyle(this):tt(e)?r.style=gr.fromJson(this,e):Te(e)?r.style=gr.fromString(this,e):r.style=gr(this),r.style},updateStyle:function(){this.mutableElements().updateStyle()}},_J="single",ds={autolock:function(e){if(e!==void 0)this._private.autolock=!!e;else return this._private.autolock;return this},autoungrabify:function(e){if(e!==void 0)this._private.autoungrabify=!!e;else return this._private.autoungrabify;return this},autounselectify:function(e){if(e!==void 0)this._private.autounselectify=!!e;else return this._private.autounselectify;return this},selectionType:function(e){var r=this._private;if(r.selectionType==null&&(r.selectionType=_J),e!==void 0)(e==="additive"||e==="single")&&(r.selectionType=e);else return r.selectionType;return this},panningEnabled:function(e){if(e!==void 0)this._private.panningEnabled=!!e;else return this._private.panningEnabled;return this},userPanningEnabled:function(e){if(e!==void 0)this._private.userPanningEnabled=!!e;else return this._private.userPanningEnabled;return this},zoomingEnabled:function(e){if(e!==void 0)this._private.zoomingEnabled=!!e;else return this._private.zoomingEnabled;return this},userZoomingEnabled:function(e){if(e!==void 0)this._private.userZoomingEnabled=!!e;else return this._private.userZoomingEnabled;return this},boxSelectionEnabled:function(e){if(e!==void 0)this._private.boxSelectionEnabled=!!e;else return this._private.boxSelectionEnabled;return this},pan:function(){var e=arguments,r=this._private.pan,n,i,a,s,o;switch(e.length){case 0:return r;case 1:if(Te(e[0]))return n=e[0],r[n];if(He(e[0])){if(!this._private.panningEnabled)return this;a=e[0],s=a.x,o=a.y,le(s)&&(r.x=s),le(o)&&(r.y=o),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;n=e[0],i=e[1],(n==="x"||n==="y")&&le(i)&&(r[n]=i),this.emit("pan viewport");break}return this.notify("viewport"),this},panBy:function(e,r){var n=arguments,i=this._private.pan,a,s,o,u,l;if(!this._private.panningEnabled)return this;switch(n.length){case 1:He(e)&&(o=n[0],u=o.x,l=o.y,le(u)&&(i.x+=u),le(l)&&(i.y+=l),this.emit("pan viewport"));break;case 2:a=e,s=r,(a==="x"||a==="y")&&le(s)&&(i[a]+=s),this.emit("pan viewport");break}return this.notify("viewport"),this},fit:function(e,r){var n=this.getFitViewport(e,r);if(n){var i=this._private;i.zoom=n.zoom,i.pan=n.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(e,r){if(le(e)&&r===void 0&&(r=e,e=void 0),!(!this._private.panningEnabled||!this._private.zoomingEnabled)){var n;if(Te(e)){var i=e;e=this.$(i)}else if(vQ(e)){var a=e;n={x1:a.x1,y1:a.y1,x2:a.x2,y2:a.y2},n.w=n.x2-n.x1,n.h=n.y2-n.y1}else Gr(e)||(e=this.mutableElements());if(!(Gr(e)&&e.empty())){n=n||e.boundingBox();var s=this.width(),o=this.height(),u;if(r=le(r)?r:0,!isNaN(s)&&!isNaN(o)&&s>0&&o>0&&!isNaN(n.w)&&!isNaN(n.h)&&n.w>0&&n.h>0){u=Math.min((s-2*r)/n.w,(o-2*r)/n.h),u=u>this._private.maxZoom?this._private.maxZoom:u,u=u<this._private.minZoom?this._private.minZoom:u;var l={x:(s-u*(n.x1+n.x2))/2,y:(o-u*(n.y1+n.y2))/2};return{zoom:u,pan:l}}}}},zoomRange:function(e,r){var n=this._private;if(r==null){var i=e;e=i.min,r=i.max}return le(e)&&le(r)&&e<=r?(n.minZoom=e,n.maxZoom=r):le(e)&&r===void 0&&e<=n.maxZoom?n.minZoom=e:le(r)&&e===void 0&&r>=n.minZoom&&(n.maxZoom=r),this},minZoom:function(e){return e===void 0?this._private.minZoom:this.zoomRange({min:e})},maxZoom:function(e){return e===void 0?this._private.maxZoom:this.zoomRange({max:e})},getZoomedViewport:function(e){var r=this._private,n=r.pan,i=r.zoom,a,s,o=!1;if(r.zoomingEnabled||(o=!0),le(e)?s=e:He(e)&&(s=e.level,e.position!=null?a=Kv(e.position,i,n):e.renderedPosition!=null&&(a=e.renderedPosition),a!=null&&!r.panningEnabled&&(o=!0)),s=s>r.maxZoom?r.maxZoom:s,s=s<r.minZoom?r.minZoom:s,o||!le(s)||s===i||a!=null&&(!le(a.x)||!le(a.y)))return null;if(a!=null){var u=n,l=i,c=s,f={x:-c/l*(a.x-u.x)+a.x,y:-c/l*(a.y-u.y)+a.y};return{zoomed:!0,panned:!0,zoom:c,pan:f}}else return{zoomed:!0,panned:!1,zoom:s,pan:n}},zoom:function(e){if(e===void 0)return this._private.zoom;var r=this.getZoomedViewport(e),n=this._private;return r==null||!r.zoomed?this:(n.zoom=r.zoom,r.panned&&(n.pan.x=r.pan.x,n.pan.y=r.pan.y),this.emit("zoom"+(r.panned?" pan":"")+" viewport"),this.notify("viewport"),this)},viewport:function(e){var r=this._private,n=!0,i=!0,a=[],s=!1,o=!1;if(!e)return this;if(le(e.zoom)||(n=!1),He(e.pan)||(i=!1),!n&&!i)return this;if(n){var u=e.zoom;u<r.minZoom||u>r.maxZoom||!r.zoomingEnabled?s=!0:(r.zoom=u,a.push("zoom"))}if(i&&(!s||!e.cancelOnFailedZoom)&&r.panningEnabled){var l=e.pan;le(l.x)&&(r.pan.x=l.x,o=!1),le(l.y)&&(r.pan.y=l.y,o=!1),o||a.push("pan")}return a.length>0&&(a.push("viewport"),this.emit(a.join(" ")),this.notify("viewport")),this},center:function(e){var r=this.getCenterPan(e);return r&&(this._private.pan=r,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(e,r){if(this._private.panningEnabled){if(Te(e)){var n=e;e=this.mutableElements().filter(n)}else Gr(e)||(e=this.mutableElements());if(e.length!==0){var i=e.boundingBox(),a=this.width(),s=this.height();r=r===void 0?this._private.zoom:r;var o={x:(a-r*(i.x1+i.x2))/2,y:(s-r*(i.y1+i.y2))/2};return o}}},reset:function(){return!this._private.panningEnabled||!this._private.zoomingEnabled?this:(this.viewport({pan:{x:0,y:0},zoom:1}),this)},invalidateSize:function(){this._private.sizeCache=null},size:function(){var e=this._private,r=e.container,n=this;return e.sizeCache=e.sizeCache||(r?function(){var i=n.window().getComputedStyle(r),a=function(o){return parseFloat(i.getPropertyValue(o))};return{width:r.clientWidth-a("padding-left")-a("padding-right"),height:r.clientHeight-a("padding-top")-a("padding-bottom")}}():{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var e=this._private.pan,r=this._private.zoom,n=this.renderedExtent(),i={x1:(n.x1-e.x)/r,x2:(n.x2-e.x)/r,y1:(n.y1-e.y)/r,y2:(n.y2-e.y)/r};return i.w=i.x2-i.x1,i.h=i.y2-i.y1,i},renderedExtent:function(){var e=this.width(),r=this.height();return{x1:0,y1:0,x2:e,y2:r,w:e,h:r}},multiClickDebounceTime:function(e){if(e)this._private.multiClickDebounceTime=e;else return this._private.multiClickDebounceTime;return this}};ds.centre=ds.center;ds.autolockNodes=ds.autolock;ds.autoungrabifyNodes=ds.autoungrabify;var _c={data:Ye.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:Ye.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:Ye.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:Ye.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})};_c.attr=_c.data;_c.removeAttr=_c.removeData;var Ec=function(e){var r=this;e=xe({},e);var n=e.container;n&&!Ed(n)&&Ed(n[0])&&(n=n[0]);var i=n?n._cyreg:null;i=i||{},i&&i.cy&&(i.cy.destroy(),i={});var a=i.readies=i.readies||[];n&&(n._cyreg=i),i.cy=r;var s=Pt!==void 0&&n!==void 0&&!e.headless,o=e;o.layout=xe({name:s?"grid":"null"},o.layout),o.renderer=xe({name:s?"canvas":"null"},o.renderer);var u=function(v,w,m){return w!==void 0?w:m!==void 0?m:v},l=this._private={container:n,ready:!1,options:o,elements:new nr(this),listeners:[],aniEles:new nr(this),data:o.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:u(!0,o.zoomingEnabled),userZoomingEnabled:u(!0,o.userZoomingEnabled),panningEnabled:u(!0,o.panningEnabled),userPanningEnabled:u(!0,o.userPanningEnabled),boxSelectionEnabled:u(!0,o.boxSelectionEnabled),autolock:u(!1,o.autolock,o.autolockNodes),autoungrabify:u(!1,o.autoungrabify,o.autoungrabifyNodes),autounselectify:u(!1,o.autounselectify),styleEnabled:o.styleEnabled===void 0?s:o.styleEnabled,zoom:le(o.zoom)?o.zoom:1,pan:{x:He(o.pan)&&le(o.pan.x)?o.pan.x:0,y:He(o.pan)&&le(o.pan.y)?o.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,multiClickDebounceTime:u(250,o.multiClickDebounceTime)};this.createEmitter(),this.selectionType(o.selectionType),this.zoomRange({min:o.minZoom,max:o.maxZoom});var c=function(v,w){var m=v.some(pQ);if(m)return vu.all(v).then(w);w(v)};l.styleEnabled&&r.setStyle([]);var f=xe({},o,o.renderer);r.initRenderer(f);var h=function(v,w,m){r.notifications(!1);var p=r.mutableElements();p.length>0&&p.remove(),v!=null&&(He(v)||tt(v))&&r.add(v),r.one("layoutready",function(y){r.notifications(!0),r.emit(y),r.one("load",w),r.emitAndNotify("load")}).one("layoutstop",function(){r.one("done",m),r.emit("done")});var g=xe({},r._private.options.layout);g.eles=r.elements(),r.layout(g).run()};c([o.style,o.elements],function(d){var v=d[0],w=d[1];l.styleEnabled&&r.style().append(v),h(w,function(){r.startAnimationLoop(),l.ready=!0,pt(o.ready)&&r.on("ready",o.ready);for(var m=0;m<a.length;m++){var p=a[m];r.on("ready",p)}i&&(i.readies=[]),r.emit("ready")},o.done)})},Rd=Ec.prototype;xe(Rd,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},destroyed:function(){return this._private.destroyed},ready:function(e){return this.isReady()?this.emitter().emit("ready",[],e):this.on("ready",e),this},destroy:function(){var e=this;if(!e.destroyed())return e.stopAnimationLoop(),e.destroyRenderer(),this.emit("destroy"),e._private.destroyed=!0,e},hasElementWithId:function(e){return this._private.elements.hasElementWithId(e)},getElementById:function(e){return this._private.elements.getElementById(e)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(e){return this._private.elements.merge(e),this},removeFromPool:function(e){return this._private.elements.unmerge(e),this},container:function(){return this._private.container||null},window:function(){var e=this._private.container;if(e==null)return Pt;var r=this._private.container.ownerDocument;return r===void 0||r==null?Pt:r.defaultView||Pt},mount:function(e){if(e!=null){var r=this,n=r._private,i=n.options;return!Ed(e)&&Ed(e[0])&&(e=e[0]),r.stopAnimationLoop(),r.destroyRenderer(),n.container=e,n.styleEnabled=!0,r.invalidateSize(),r.initRenderer(xe({},i,i.renderer,{name:i.renderer.name==="null"?"canvas":i.renderer.name})),r.startAnimationLoop(),r.style(i.style),r.emit("mount"),r}},unmount:function(){var e=this;return e.stopAnimationLoop(),e.destroyRenderer(),e.initRenderer({name:"null"}),e.emit("unmount"),e},options:function(){return zn(this._private.options)},json:function(e){var r=this,n=r._private,i=r.mutableElements(),a=function(_){return r.getElementById(_.id())};if(He(e)){if(r.startBatch(),e.elements){var s={},o=function(_,T){for(var b=[],E=[],I=0;I<_.length;I++){var S=_[I];if(!S.data.id){Xe("cy.json() cannot handle elements without an ID attribute");continue}var C=""+S.data.id,R=r.getElementById(C);s[C]=!0,R.length!==0?E.push({ele:R,json:S}):(T&&(S.group=T),b.push(S))}r.add(b);for(var x=0;x<E.length;x++){var P=E[x],A=P.ele,F=P.json;A.json(F)}};if(tt(e.elements))o(e.elements);else for(var u=["nodes","edges"],l=0;l<u.length;l++){var c=u[l],f=e.elements[c];tt(f)&&o(f,c)}var h=r.collection();i.filter(function(y){return!s[y.id()]}).forEach(function(y){y.isParent()?h.merge(y):y.remove()}),h.forEach(function(y){return y.children().move({parent:null})}),h.forEach(function(y){return a(y).remove()})}e.style&&r.style(e.style),e.zoom!=null&&e.zoom!==n.zoom&&r.zoom(e.zoom),e.pan&&(e.pan.x!==n.pan.x||e.pan.y!==n.pan.y)&&r.pan(e.pan),e.data&&r.data(e.data);for(var d=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify","multiClickDebounceTime"],v=0;v<d.length;v++){var w=d[v];e[w]!=null&&r[w](e[w])}return r.endBatch(),this}else{var m=!!e,p={};m?p.elements=this.elements().map(function(y){return y.json()}):(p.elements={},i.forEach(function(y){var _=y.group();p.elements[_]||(p.elements[_]=[]),p.elements[_].push(y.json())})),this._private.styleEnabled&&(p.style=r.style().json()),p.data=zn(r.data());var g=n.options;return p.zoomingEnabled=n.zoomingEnabled,p.userZoomingEnabled=n.userZoomingEnabled,p.zoom=n.zoom,p.minZoom=n.minZoom,p.maxZoom=n.maxZoom,p.panningEnabled=n.panningEnabled,p.userPanningEnabled=n.userPanningEnabled,p.pan=zn(n.pan),p.boxSelectionEnabled=n.boxSelectionEnabled,p.renderer=zn(g.renderer),p.hideEdgesOnViewport=g.hideEdgesOnViewport,p.textureOnViewport=g.textureOnViewport,p.wheelSensitivity=g.wheelSensitivity,p.motionBlur=g.motionBlur,p.multiClickDebounceTime=g.multiClickDebounceTime,p}}});Rd.$id=Rd.getElementById;[lJ,vJ,HV,c_,Ch,gJ,f_,xh,wJ,ds,_c].forEach(function(t){xe(Rd,t)});var EJ={fit:!0,directed:!1,padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,depthSort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}},TJ={maximal:!1,acyclic:!1},Vs=function(e){return e.scratch("breadthfirst")},bx=function(e,r){return e.scratch("breadthfirst",r)};function GV(t){this.options=xe({},EJ,TJ,t)}GV.prototype.run=function(){var t=this.options,e=t,r=t.cy,n=e.eles,i=n.nodes().filter(function(se){return!se.isParent()}),a=n,s=e.directed,o=e.acyclic||e.maximal||e.maximalAdjustments>0,u=$r(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()}),l;if(Gr(e.roots))l=e.roots;else if(tt(e.roots)){for(var c=[],f=0;f<e.roots.length;f++){var h=e.roots[f],d=r.getElementById(h);c.push(d)}l=r.collection(c)}else if(Te(e.roots))l=r.$(e.roots);else if(s)l=i.roots();else{var v=n.components();l=r.collection();for(var w=function(te){var me=v[te],ue=me.maxDegree(!1),he=me.filter(function(we){return we.degree(!1)===ue});l=l.add(he)},m=0;m<v.length;m++)w(m)}var p=[],g={},y=function(te,me){p[me]==null&&(p[me]=[]);var ue=p[me].length;p[me].push(te),bx(te,{index:ue,depth:me})},_=function(te,me){var ue=Vs(te),he=ue.depth,we=ue.index;p[he][we]=null,y(te,me)};a.bfs({roots:l,directed:e.directed,visit:function(te,me,ue,he,we){var Fe=te[0],Ae=Fe.id();y(Fe,we),g[Ae]=!0}});for(var T=[],b=0;b<i.length;b++){var E=i[b];g[E.id()]||T.push(E)}var I=function(te){for(var me=p[te],ue=0;ue<me.length;ue++){var he=me[ue];if(he==null){me.splice(ue,1),ue--;continue}bx(he,{depth:te,index:ue})}},S=function(){for(var te=0;te<p.length;te++)I(te)},C=function(te,me){for(var ue=Vs(te),he=te.incomers().filter(function(k){return k.isNode()&&n.has(k)}),we=-1,Fe=te.id(),Ae=0;Ae<he.length;Ae++){var be=he[Ae],Se=Vs(be);we=Math.max(we,Se.depth)}if(ue.depth<=we){if(!e.acyclic&&me[Fe])return null;var G=we+1;return _(te,G),me[Fe]=G,!0}return!1};if(s&&o){var R=[],x={},P=function(te){return R.push(te)},A=function(){return R.shift()};for(i.forEach(function(se){return R.push(se)});R.length>0;){var F=A(),O=C(F,x);if(O)F.outgoers().filter(function(se){return se.isNode()&&n.has(se)}).forEach(P);else if(O===null){Xe("Detected double maximal shift for node `"+F.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}S();var L=0;if(e.avoidOverlap)for(var D=0;D<i.length;D++){var $=i[D],z=$.layoutDimensions(e),B=z.w,j=z.h;L=Math.max(L,B,j)}var Q={},N=function(te){if(Q[te.id()])return Q[te.id()];for(var me=Vs(te).depth,ue=te.neighborhood(),he=0,we=0,Fe=0;Fe<ue.length;Fe++){var Ae=ue[Fe];if(!(Ae.isEdge()||Ae.isParent()||!i.has(Ae))){var be=Vs(Ae);if(be!=null){var Se=be.index,G=be.depth;if(!(Se==null||G==null)){var k=p[G].length;G<me&&(he+=Se/k,we++)}}}}return we=Math.max(1,we),he=he/we,we===0&&(he=0),Q[te.id()]=he,he},M=function(te,me){var ue=N(te),he=N(me),we=ue-he;return we===0?rV(te.id(),me.id()):we};e.depthSort!==void 0&&(M=e.depthSort);for(var q=0;q<p.length;q++)p[q].sort(M),I(q);for(var V=[],W=0;W<T.length;W++)V.push(T[W]);p.unshift(V),S();for(var X=0,J=0;J<p.length;J++)X=Math.max(p[J].length,X);var ae={x:u.x1+u.w/2,y:u.x1+u.h/2},ve=p.reduce(function(se,te){return Math.max(se,te.length)},0),_e=function(te){var me=Vs(te),ue=me.depth,he=me.index,we=p[ue].length,Fe=Math.max(u.w/((e.grid?ve:we)+1),L),Ae=Math.max(u.h/(p.length+1),L),be=Math.min(u.w/2/p.length,u.h/2/p.length);if(be=Math.max(be,L),e.circle){var G=be*ue+be-(p.length>0&&p[0].length<=3?be/2:0),k=2*Math.PI/p[ue].length*he;return ue===0&&p[0].length===1&&(G=1),{x:ae.x+G*Math.cos(k),y:ae.y+G*Math.sin(k)}}else{var Se={x:ae.x+(he+1-(we+1)/2)*Fe,y:(ue+1)*Ae};return Se}};return n.nodes().layoutPositions(this,e,_e),this};var bJ={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function KV(t){this.options=xe({},bJ,t)}KV.prototype.run=function(){var t=this.options,e=t,r=t.cy,n=e.eles,i=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise,a=n.nodes().not(":parent");e.sort&&(a=a.sort(e.sort));for(var s=$r(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()}),o={x:s.x1+s.w/2,y:s.y1+s.h/2},u=e.sweep===void 0?2*Math.PI-2*Math.PI/a.length:e.sweep,l=u/Math.max(1,a.length-1),c,f=0,h=0;h<a.length;h++){var d=a[h],v=d.layoutDimensions(e),w=v.w,m=v.h;f=Math.max(f,w,m)}if(le(e.radius)?c=e.radius:a.length<=1?c=0:c=Math.min(s.h,s.w)/2-f,a.length>1&&e.avoidOverlap){f*=1.75;var p=Math.cos(l)-Math.cos(0),g=Math.sin(l)-Math.sin(0),y=Math.sqrt(f*f/(p*p+g*g));c=Math.max(y,c)}var _=function(b,E){var I=e.startAngle+E*l*(i?1:-1),S=c*Math.cos(I),C=c*Math.sin(I),R={x:o.x+S,y:o.y+C};return R};return n.nodes().layoutPositions(this,e,_),this};var SJ={fit:!0,padding:30,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(e){return e.degree()},levelWidth:function(e){return e.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function QV(t){this.options=xe({},SJ,t)}QV.prototype.run=function(){for(var t=this.options,e=t,r=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise,n=t.cy,i=e.eles,a=i.nodes().not(":parent"),s=$r(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),o={x:s.x1+s.w/2,y:s.y1+s.h/2},u=[],l=0,c=0;c<a.length;c++){var f=a[c],h=void 0;h=e.concentric(f),u.push({value:h,node:f}),f._private.scratch.concentric=h}a.updateStyle();for(var d=0;d<a.length;d++){var v=a[d],w=v.layoutDimensions(e);l=Math.max(l,w.w,w.h)}u.sort(function(se,te){return te.value-se.value});for(var m=e.levelWidth(a),p=[[]],g=p[0],y=0;y<u.length;y++){var _=u[y];if(g.length>0){var T=Math.abs(g[0].value-_.value);T>=m&&(g=[],p.push(g))}g.push(_)}var b=l+e.minNodeSpacing;if(!e.avoidOverlap){var E=p.length>0&&p[0].length>1,I=Math.min(s.w,s.h)/2-b,S=I/(p.length+E?1:0);b=Math.min(b,S)}for(var C=0,R=0;R<p.length;R++){var x=p[R],P=e.sweep===void 0?2*Math.PI-2*Math.PI/x.length:e.sweep,A=x.dTheta=P/Math.max(1,x.length-1);if(x.length>1&&e.avoidOverlap){var F=Math.cos(A)-Math.cos(0),O=Math.sin(A)-Math.sin(0),L=Math.sqrt(b*b/(F*F+O*O));C=Math.max(L,C)}x.r=C,C+=b}if(e.equidistant){for(var D=0,$=0,z=0;z<p.length;z++){var B=p[z],j=B.r-$;D=Math.max(D,j)}$=0;for(var Q=0;Q<p.length;Q++){var N=p[Q];Q===0&&($=N.r),N.r=$,$+=D}}for(var M={},q=0;q<p.length;q++)for(var V=p[q],W=V.dTheta,X=V.r,J=0;J<V.length;J++){var ae=V[J],ve=e.startAngle+(r?1:-1)*W*J,_e={x:o.x+X*Math.cos(ve),y:o.y+X*Math.sin(ve)};M[ae.node.id()]=_e}return i.nodes().layoutPositions(this,e,function(se){var te=se.id();return M[te]}),this};var mg,IJ={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(e,r){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(e){return 2048},nodeOverlap:4,idealEdgeLength:function(e){return 32},edgeElasticity:function(e){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function rp(t){this.options=xe({},IJ,t),this.options.layout=this;var e=this.options.eles.nodes(),r=this.options.eles.edges(),n=r.filter(function(i){var a=i.source().data("id"),s=i.target().data("id"),o=e.some(function(l){return l.data("id")===a}),u=e.some(function(l){return l.data("id")===s});return!o||!u});this.options.eles=this.options.eles.not(n)}rp.prototype.run=function(){var t=this.options,e=t.cy,r=this;r.stopped=!1,(t.animate===!0||t.animate===!1)&&r.emit({type:"layoutstart",layout:r}),t.debug===!0?mg=!0:mg=!1;var n=CJ(e,r,t);mg&&kJ(n),t.randomize&&AJ(n);var i=_i(),a=function(){PJ(n,e,t),t.fit===!0&&e.fit(t.padding)},s=function(h){return!(r.stopped||h>=t.numIter||(DJ(n,t),n.temperature=n.temperature*t.coolingFactor,n.temperature<t.minTemp))},o=function(){if(t.animate===!0||t.animate===!1)a(),r.one("layoutstop",t.stop),r.emit({type:"layoutstop",layout:r});else{var h=t.eles.nodes(),d=YV(n,t,h);h.layoutPositions(r,t,d)}},u=0,l=!0;if(t.animate===!0){var c=function f(){for(var h=0;l&&h<t.refresh;)l=s(u),u++,h++;if(!l)Ix(n,t),o();else{var d=_i();d-i>=t.animationThreshold&&a(),Td(f)}};c()}else{for(;l;)l=s(u),u++;Ix(n,t),o()}return this};rp.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this};rp.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var CJ=function(e,r,n){for(var i=n.eles.edges(),a=n.eles.nodes(),s=$r(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),o={isCompound:e.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:a.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:i.size(),temperature:n.initialTemp,clientWidth:s.w,clientHeight:s.h,boundingBox:s},u=n.eles.components(),l={},c=0;c<u.length;c++)for(var f=u[c],h=0;h<f.length;h++){var d=f[h];l[d.id()]=c}for(var c=0;c<o.nodeSize;c++){var v=a[c],w=v.layoutDimensions(n),m={};m.isLocked=v.locked(),m.id=v.data("id"),m.parentId=v.data("parent"),m.cmptId=l[v.id()],m.children=[],m.positionX=v.position("x"),m.positionY=v.position("y"),m.offsetX=0,m.offsetY=0,m.height=w.w,m.width=w.h,m.maxX=m.positionX+m.width/2,m.minX=m.positionX-m.width/2,m.maxY=m.positionY+m.height/2,m.minY=m.positionY-m.height/2,m.padLeft=parseFloat(v.style("padding")),m.padRight=parseFloat(v.style("padding")),m.padTop=parseFloat(v.style("padding")),m.padBottom=parseFloat(v.style("padding")),m.nodeRepulsion=pt(n.nodeRepulsion)?n.nodeRepulsion(v):n.nodeRepulsion,o.layoutNodes.push(m),o.idToIndex[m.id]=c}for(var p=[],g=0,y=-1,_=[],c=0;c<o.nodeSize;c++){var v=o.layoutNodes[c],T=v.parentId;T!=null?o.layoutNodes[o.idToIndex[T]].children.push(v.id):(p[++y]=v.id,_.push(v.id))}for(o.graphSet.push(_);g<=y;){var b=p[g++],E=o.idToIndex[b],d=o.layoutNodes[E],I=d.children;if(I.length>0){o.graphSet.push(I);for(var c=0;c<I.length;c++)p[++y]=I[c]}}for(var c=0;c<o.graphSet.length;c++)for(var S=o.graphSet[c],h=0;h<S.length;h++){var C=o.idToIndex[S[h]];o.indexToGraph[C]=c}for(var c=0;c<o.edgeSize;c++){var R=i[c],x={};x.id=R.data("id"),x.sourceId=R.data("source"),x.targetId=R.data("target");var P=pt(n.idealEdgeLength)?n.idealEdgeLength(R):n.idealEdgeLength,A=pt(n.edgeElasticity)?n.edgeElasticity(R):n.edgeElasticity,F=o.idToIndex[x.sourceId],O=o.idToIndex[x.targetId],L=o.indexToGraph[F],D=o.indexToGraph[O];if(L!=D){for(var $=xJ(x.sourceId,x.targetId,o),z=o.graphSet[$],B=0,m=o.layoutNodes[F];z.indexOf(m.id)===-1;)m=o.layoutNodes[o.idToIndex[m.parentId]],B++;for(m=o.layoutNodes[O];z.indexOf(m.id)===-1;)m=o.layoutNodes[o.idToIndex[m.parentId]],B++;P*=B*n.nestingFactor}x.idealLength=P,x.elasticity=A,o.layoutEdges.push(x)}return o},xJ=function(e,r,n){var i=RJ(e,r,0,n);return 2>i.count?0:i.graph},RJ=function t(e,r,n,i){var a=i.graphSet[n];if(-1<a.indexOf(e)&&-1<a.indexOf(r))return{count:2,graph:n};for(var s=0,o=0;o<a.length;o++){var u=a[o],l=i.idToIndex[u],c=i.layoutNodes[l].children;if(c.length!==0){var f=i.indexToGraph[i.idToIndex[c[0]]],h=t(e,r,f,i);if(h.count!==0)if(h.count===1){if(s++,s===2)break}else return h}}return{count:s,graph:n}},kJ,AJ=function(e,r){for(var n=e.clientWidth,i=e.clientHeight,a=0;a<e.nodeSize;a++){var s=e.layoutNodes[a];s.children.length===0&&!s.isLocked&&(s.positionX=Math.random()*n,s.positionY=Math.random()*i)}},YV=function(e,r,n){var i=e.boundingBox,a={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return r.boundingBox&&(n.forEach(function(s){var o=e.layoutNodes[e.idToIndex[s.data("id")]];a.x1=Math.min(a.x1,o.positionX),a.x2=Math.max(a.x2,o.positionX),a.y1=Math.min(a.y1,o.positionY),a.y2=Math.max(a.y2,o.positionY)}),a.w=a.x2-a.x1,a.h=a.y2-a.y1),function(s,o){var u=e.layoutNodes[e.idToIndex[s.data("id")]];if(r.boundingBox){var l=(u.positionX-a.x1)/a.w,c=(u.positionY-a.y1)/a.h;return{x:i.x1+l*i.w,y:i.y1+c*i.h}}else return{x:u.positionX,y:u.positionY}}},PJ=function(e,r,n){var i=n.layout,a=n.eles.nodes(),s=YV(e,n,a);a.positions(s),e.ready!==!0&&(e.ready=!0,i.one("layoutready",n.ready),i.emit({type:"layoutready",layout:this}))},DJ=function(e,r,n){OJ(e,r),MJ(e),VJ(e,r),FJ(e),BJ(e)},OJ=function(e,r){for(var n=0;n<e.graphSet.length;n++)for(var i=e.graphSet[n],a=i.length,s=0;s<a;s++)for(var o=e.layoutNodes[e.idToIndex[i[s]]],u=s+1;u<a;u++){var l=e.layoutNodes[e.idToIndex[i[u]]];NJ(o,l,e,r)}},Sx=function(e){return-e+2*e*Math.random()},NJ=function(e,r,n,i){var a=e.cmptId,s=r.cmptId;if(!(a!==s&&!n.isCompound)){var o=r.positionX-e.positionX,u=r.positionY-e.positionY,l=1;o===0&&u===0&&(o=Sx(l),u=Sx(l));var c=LJ(e,r,o,u);if(c>0)var f=i.nodeOverlap*c,h=Math.sqrt(o*o+u*u),d=f*o/h,v=f*u/h;else var w=kd(e,o,u),m=kd(r,-1*o,-1*u),p=m.x-w.x,g=m.y-w.y,y=p*p+g*g,h=Math.sqrt(y),f=(e.nodeRepulsion+r.nodeRepulsion)/y,d=f*p/h,v=f*g/h;e.isLocked||(e.offsetX-=d,e.offsetY-=v),r.isLocked||(r.offsetX+=d,r.offsetY+=v)}},LJ=function(e,r,n,i){if(n>0)var a=e.maxX-r.minX;else var a=r.maxX-e.minX;if(i>0)var s=e.maxY-r.minY;else var s=r.maxY-e.minY;return a>=0&&s>=0?Math.sqrt(a*a+s*s):0},kd=function(e,r,n){var i=e.positionX,a=e.positionY,s=e.height||1,o=e.width||1,u=n/r,l=s/o,c={};return r===0&&0<n||r===0&&0>n?(c.x=i,c.y=a+s/2,c):0<r&&-1*l<=u&&u<=l?(c.x=i+o/2,c.y=a+o*n/2/r,c):0>r&&-1*l<=u&&u<=l?(c.x=i-o/2,c.y=a-o*n/2/r,c):0<n&&(u<=-1*l||u>=l)?(c.x=i+s*r/2/n,c.y=a+s/2,c):(0>n&&(u<=-1*l||u>=l)&&(c.x=i-s*r/2/n,c.y=a-s/2),c)},MJ=function(e,r){for(var n=0;n<e.edgeSize;n++){var i=e.layoutEdges[n],a=e.idToIndex[i.sourceId],s=e.layoutNodes[a],o=e.idToIndex[i.targetId],u=e.layoutNodes[o],l=u.positionX-s.positionX,c=u.positionY-s.positionY;if(!(l===0&&c===0)){var f=kd(s,l,c),h=kd(u,-1*l,-1*c),d=h.x-f.x,v=h.y-f.y,w=Math.sqrt(d*d+v*v),m=Math.pow(i.idealLength-w,2)/i.elasticity;if(w!==0)var p=m*d/w,g=m*v/w;else var p=0,g=0;s.isLocked||(s.offsetX+=p,s.offsetY+=g),u.isLocked||(u.offsetX-=p,u.offsetY-=g)}}},VJ=function(e,r){if(r.gravity!==0)for(var n=1,i=0;i<e.graphSet.length;i++){var a=e.graphSet[i],s=a.length;if(i===0)var o=e.clientHeight/2,u=e.clientWidth/2;else var l=e.layoutNodes[e.idToIndex[a[0]]],c=e.layoutNodes[e.idToIndex[l.parentId]],o=c.positionX,u=c.positionY;for(var f=0;f<s;f++){var h=e.layoutNodes[e.idToIndex[a[f]]];if(!h.isLocked){var d=o-h.positionX,v=u-h.positionY,w=Math.sqrt(d*d+v*v);if(w>n){var m=r.gravity*d/w,p=r.gravity*v/w;h.offsetX+=m,h.offsetY+=p}}}}},FJ=function(e,r){var n=[],i=0,a=-1;for(n.push.apply(n,e.graphSet[0]),a+=e.graphSet[0].length;i<=a;){var s=n[i++],o=e.idToIndex[s],u=e.layoutNodes[o],l=u.children;if(0<l.length&&!u.isLocked){for(var c=u.offsetX,f=u.offsetY,h=0;h<l.length;h++){var d=e.layoutNodes[e.idToIndex[l[h]]];d.offsetX+=c,d.offsetY+=f,n[++a]=l[h]}u.offsetX=0,u.offsetY=0}}},BJ=function(e,r){for(var n=0;n<e.nodeSize;n++){var i=e.layoutNodes[n];0<i.children.length&&(i.maxX=void 0,i.minX=void 0,i.maxY=void 0,i.minY=void 0)}for(var n=0;n<e.nodeSize;n++){var i=e.layoutNodes[n];if(!(0<i.children.length||i.isLocked)){var a=qJ(i.offsetX,i.offsetY,e.temperature);i.positionX+=a.x,i.positionY+=a.y,i.offsetX=0,i.offsetY=0,i.minX=i.positionX-i.width,i.maxX=i.positionX+i.width,i.minY=i.positionY-i.height,i.maxY=i.positionY+i.height,$J(i,e)}}for(var n=0;n<e.nodeSize;n++){var i=e.layoutNodes[n];0<i.children.length&&!i.isLocked&&(i.positionX=(i.maxX+i.minX)/2,i.positionY=(i.maxY+i.minY)/2,i.width=i.maxX-i.minX,i.height=i.maxY-i.minY)}},qJ=function(e,r,n){var i=Math.sqrt(e*e+r*r);if(i>n)var a={x:n*e/i,y:n*r/i};else var a={x:e,y:r};return a},$J=function t(e,r){var n=e.parentId;if(n!=null){var i=r.layoutNodes[r.idToIndex[n]],a=!1;if((i.maxX==null||e.maxX+i.padRight>i.maxX)&&(i.maxX=e.maxX+i.padRight,a=!0),(i.minX==null||e.minX-i.padLeft<i.minX)&&(i.minX=e.minX-i.padLeft,a=!0),(i.maxY==null||e.maxY+i.padBottom>i.maxY)&&(i.maxY=e.maxY+i.padBottom,a=!0),(i.minY==null||e.minY-i.padTop<i.minY)&&(i.minY=e.minY-i.padTop,a=!0),a)return t(i,r)}},Ix=function(e,r){for(var n=e.layoutNodes,i=[],a=0;a<n.length;a++){var s=n[a],o=s.cmptId,u=i[o]=i[o]||[];u.push(s)}for(var l=0,a=0;a<i.length;a++){var c=i[a];if(c){c.x1=1/0,c.x2=-1/0,c.y1=1/0,c.y2=-1/0;for(var f=0;f<c.length;f++){var h=c[f];c.x1=Math.min(c.x1,h.positionX-h.width/2),c.x2=Math.max(c.x2,h.positionX+h.width/2),c.y1=Math.min(c.y1,h.positionY-h.height/2),c.y2=Math.max(c.y2,h.positionY+h.height/2)}c.w=c.x2-c.x1,c.h=c.y2-c.y1,l+=c.w*c.h}}i.sort(function(g,y){return y.w*y.h-g.w*g.h});for(var d=0,v=0,w=0,m=0,p=Math.sqrt(l)*e.clientWidth/e.clientHeight,a=0;a<i.length;a++){var c=i[a];if(c){for(var f=0;f<c.length;f++){var h=c[f];h.isLocked||(h.positionX+=d-c.x1,h.positionY+=v-c.y1)}d+=c.w+r.componentSpacing,w+=c.w+r.componentSpacing,m=Math.max(m,c.h),w>p&&(v+=m+r.componentSpacing,d=0,w=0,m=0)}}},zJ={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(e){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function XV(t){this.options=xe({},zJ,t)}XV.prototype.run=function(){var t=this.options,e=t,r=t.cy,n=e.eles,i=n.nodes().not(":parent");e.sort&&(i=i.sort(e.sort));var a=$r(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()});if(a.h===0||a.w===0)n.nodes().layoutPositions(this,e,function(Q){return{x:a.x1,y:a.y1}});else{var s=i.size(),o=Math.sqrt(s*a.h/a.w),u=Math.round(o),l=Math.round(a.w/a.h*o),c=function(N){if(N==null)return Math.min(u,l);var M=Math.min(u,l);M==u?u=N:l=N},f=function(N){if(N==null)return Math.max(u,l);var M=Math.max(u,l);M==u?u=N:l=N},h=e.rows,d=e.cols!=null?e.cols:e.columns;if(h!=null&&d!=null)u=h,l=d;else if(h!=null&&d==null)u=h,l=Math.ceil(s/u);else if(h==null&&d!=null)l=d,u=Math.ceil(s/l);else if(l*u>s){var v=c(),w=f();(v-1)*w>=s?c(v-1):(w-1)*v>=s&&f(w-1)}else for(;l*u<s;){var m=c(),p=f();(p+1)*m>=s?f(p+1):c(m+1)}var g=a.w/l,y=a.h/u;if(e.condense&&(g=0,y=0),e.avoidOverlap)for(var _=0;_<i.length;_++){var T=i[_],b=T._private.position;(b.x==null||b.y==null)&&(b.x=0,b.y=0);var E=T.layoutDimensions(e),I=e.avoidOverlapPadding,S=E.w+I,C=E.h+I;g=Math.max(g,S),y=Math.max(y,C)}for(var R={},x=function(N,M){return!!R["c-"+N+"-"+M]},P=function(N,M){R["c-"+N+"-"+M]=!0},A=0,F=0,O=function(){F++,F>=l&&(F=0,A++)},L={},D=0;D<i.length;D++){var $=i[D],z=e.position($);if(z&&(z.row!==void 0||z.col!==void 0)){var B={row:z.row,col:z.col};if(B.col===void 0)for(B.col=0;x(B.row,B.col);)B.col++;else if(B.row===void 0)for(B.row=0;x(B.row,B.col);)B.row++;L[$.id()]=B,P(B.row,B.col)}}var j=function(N,M){var q,V;if(N.locked()||N.isParent())return!1;var W=L[N.id()];if(W)q=W.col*g+g/2+a.x1,V=W.row*y+y/2+a.y1;else{for(;x(A,F);)O();q=F*g+g/2+a.x1,V=A*y+y/2+a.y1,P(A,F),O()}return{x:q,y:V}};i.layoutPositions(this,e,j)}return this};var UJ={ready:function(){},stop:function(){}};function sb(t){this.options=xe({},UJ,t)}sb.prototype.run=function(){var t=this.options,e=t.eles,r=this;return t.cy,r.emit("layoutstart"),e.nodes().positions(function(){return{x:0,y:0}}),r.one("layoutready",t.ready),r.emit("layoutready"),r.one("layoutstop",t.stop),r.emit("layoutstop"),this};sb.prototype.stop=function(){return this};var jJ={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,spacingFactor:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function JV(t){this.options=xe({},jJ,t)}JV.prototype.run=function(){var t=this.options,e=t.eles,r=e.nodes(),n=pt(t.positions);function i(a){if(t.positions==null)return tY(a.position());if(n)return t.positions(a);var s=t.positions[a._private.data.id];return s??null}return r.layoutPositions(this,t,function(a,s){var o=i(a);return a.locked()||o==null?!1:o}),this};var WJ={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function ZV(t){this.options=xe({},WJ,t)}ZV.prototype.run=function(){var t=this.options,e=t.cy,r=t.eles,n=$r(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),i=function(s,o){return{x:n.x1+Math.round(Math.random()*n.w),y:n.y1+Math.round(Math.random()*n.h)}};return r.nodes().layoutPositions(this,t,i),this};var HJ=[{name:"breadthfirst",impl:GV},{name:"circle",impl:KV},{name:"concentric",impl:QV},{name:"cose",impl:rp},{name:"grid",impl:XV},{name:"null",impl:sb},{name:"preset",impl:JV},{name:"random",impl:ZV}];function eF(t){this.options=t,this.notifications=0}var Cx=function(){},xx=function(){throw new Error("A headless instance can not render images")};eF.prototype={recalculateRenderedStyle:Cx,notify:function(){this.notifications++},init:Cx,isHeadless:function(){return!0},png:xx,jpg:xx};var ob={};ob.arrowShapeWidth=.3;ob.registerArrowShapes=function(){var t=this.arrowShapes={},e=this,r=function(l,c,f,h,d,v,w){var m=d.x-f/2-w,p=d.x+f/2+w,g=d.y-f/2-w,y=d.y+f/2+w,_=m<=l&&l<=p&&g<=c&&c<=y;return _},n=function(l,c,f,h,d){var v=l*Math.cos(h)-c*Math.sin(h),w=l*Math.sin(h)+c*Math.cos(h),m=v*f,p=w*f,g=m+d.x,y=p+d.y;return{x:g,y}},i=function(l,c,f,h){for(var d=[],v=0;v<l.length;v+=2){var w=l[v],m=l[v+1];d.push(n(w,m,c,f,h))}return d},a=function(l){for(var c=[],f=0;f<l.length;f++){var h=l[f];c.push(h.x,h.y)}return c},s=function(l){return l.pstyle("width").pfValue*l.pstyle("arrow-scale").pfValue*2},o=function(l,c){Te(c)&&(c=t[c]),t[l]=xe({name:l,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(h,d,v,w,m,p){var g=a(i(this.points,v+2*p,w,m)),y=Or(h,d,g);return y},roughCollide:r,draw:function(h,d,v,w){var m=i(this.points,d,v,w);e.arrowShapeImpl("polygon")(h,m)},spacing:function(h){return 0},gap:s},c)};o("none",{collide:bd,roughCollide:bd,draw:QT,spacing:zC,gap:zC}),o("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),o("arrow","triangle"),o("triangle-backcurve",{points:t.triangle.points,controlPoint:[0,-.15],roughCollide:r,draw:function(l,c,f,h,d){var v=i(this.points,c,f,h),w=this.controlPoint,m=n(w[0],w[1],c,f,h);e.arrowShapeImpl(this.name)(l,v,m)},gap:function(l){return s(l)*.8}}),o("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(l,c,f,h,d,v,w){var m=a(i(this.points,f+2*w,h,d)),p=a(i(this.pointsTee,f+2*w,h,d)),g=Or(l,c,m)||Or(l,c,p);return g},draw:function(l,c,f,h,d){var v=i(this.points,c,f,h),w=i(this.pointsTee,c,f,h);e.arrowShapeImpl(this.name)(l,v,w)}}),o("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:function(l,c,f,h,d,v,w){var m=d,p=Math.pow(m.x-l,2)+Math.pow(m.y-c,2)<=Math.pow((f+2*w)*this.radius,2),g=a(i(this.points,f+2*w,h,d));return Or(l,c,g)||p},draw:function(l,c,f,h,d){var v=i(this.pointsTr,c,f,h);e.arrowShapeImpl(this.name)(l,v,h.x,h.y,this.radius*c)},spacing:function(l){return e.getArrowWidth(l.pstyle("width").pfValue,l.pstyle("arrow-scale").value)*this.radius}}),o("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(l,c){var f=this.baseCrossLinePts.slice(),h=c/l,d=3,v=5;return f[d]=f[d]-h,f[v]=f[v]-h,f},collide:function(l,c,f,h,d,v,w){var m=a(i(this.points,f+2*w,h,d)),p=a(i(this.crossLinePts(f,v),f+2*w,h,d)),g=Or(l,c,m)||Or(l,c,p);return g},draw:function(l,c,f,h,d){var v=i(this.points,c,f,h),w=i(this.crossLinePts(c,d),c,f,h);e.arrowShapeImpl(this.name)(l,v,w)}}),o("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(l){return s(l)*.525}}),o("circle",{radius:.15,collide:function(l,c,f,h,d,v,w){var m=d,p=Math.pow(m.x-l,2)+Math.pow(m.y-c,2)<=Math.pow((f+2*w)*this.radius,2);return p},draw:function(l,c,f,h,d){e.arrowShapeImpl(this.name)(l,h.x,h.y,this.radius*c)},spacing:function(l){return e.getArrowWidth(l.pstyle("width").pfValue,l.pstyle("arrow-scale").value)*this.radius}}),o("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(l){return 1},gap:function(l){return 1}}),o("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),o("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(l){return l.pstyle("width").pfValue*l.pstyle("arrow-scale").value}}),o("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(l){return .95*l.pstyle("width").pfValue*l.pstyle("arrow-scale").value}})};var Cs={};Cs.projectIntoViewport=function(t,e){var r=this.cy,n=this.findContainerClientCoords(),i=n[0],a=n[1],s=n[4],o=r.pan(),u=r.zoom(),l=((t-i)/s-o.x)/u,c=((e-a)/s-o.y)/u;return[l,c]};Cs.findContainerClientCoords=function(){if(this.containerBB)return this.containerBB;var t=this.container,e=t.getBoundingClientRect(),r=this.cy.window().getComputedStyle(t),n=function(p){return parseFloat(r.getPropertyValue(p))},i={left:n("padding-left"),right:n("padding-right"),top:n("padding-top"),bottom:n("padding-bottom")},a={left:n("border-left-width"),right:n("border-right-width"),top:n("border-top-width"),bottom:n("border-bottom-width")},s=t.clientWidth,o=t.clientHeight,u=i.left+i.right,l=i.top+i.bottom,c=a.left+a.right,f=e.width/(s+c),h=s-u,d=o-l,v=e.left+i.left+a.left,w=e.top+i.top+a.top;return this.containerBB=[v,w,h,d,f]};Cs.invalidateContainerClientCoordsCache=function(){this.containerBB=null};Cs.findNearestElement=function(t,e,r,n){return this.findNearestElements(t,e,r,n)[0]};Cs.findNearestElements=function(t,e,r,n){var i=this,a=this,s=a.getCachedZSortedEles(),o=[],u=a.cy.zoom(),l=a.cy.hasCompoundNodes(),c=(n?24:8)/u,f=(n?8:2)/u,h=(n?8:2)/u,d=1/0,v,w;r&&(s=s.interactive);function m(E,I){if(E.isNode()){if(w)return;w=E,o.push(E)}if(E.isEdge()&&(I==null||I<d))if(v){if(v.pstyle("z-compound-depth").value===E.pstyle("z-compound-depth").value&&v.pstyle("z-compound-depth").value===E.pstyle("z-compound-depth").value){for(var S=0;S<o.length;S++)if(o[S].isEdge()){o[S]=E,v=E,d=I??d;break}}}else o.push(E),v=E,d=I??d}function p(E){var I=E.outerWidth()+2*f,S=E.outerHeight()+2*f,C=I/2,R=S/2,x=E.position();if(x.x-C<=t&&t<=x.x+C&&x.y-R<=e&&e<=x.y+R){var P=a.nodeShapes[i.getNodeShape(E)];if(P.checkPoint(t,e,0,I,S,x.x,x.y))return m(E,0),!0}}function g(E){var I=E._private,S=I.rscratch,C=E.pstyle("width").pfValue,R=E.pstyle("arrow-scale").value,x=C/2+c,P=x*x,A=x*2,D=I.source,$=I.target,F;if(S.edgeType==="segments"||S.edgeType==="straight"||S.edgeType==="haystack"){for(var O=S.allpts,L=0;L+3<O.length;L+=2)if(vY(t,e,O[L],O[L+1],O[L+2],O[L+3],A)&&P>(F=wY(t,e,O[L],O[L+1],O[L+2],O[L+3])))return m(E,F),!0}else if(S.edgeType==="bezier"||S.edgeType==="multibezier"||S.edgeType==="self"||S.edgeType==="compound"){for(var O=S.allpts,L=0;L+5<S.allpts.length;L+=4)if(pY(t,e,O[L],O[L+1],O[L+2],O[L+3],O[L+4],O[L+5],A)&&P>(F=yY(t,e,O[L],O[L+1],O[L+2],O[L+3],O[L+4],O[L+5])))return m(E,F),!0}for(var D=D||I.source,$=$||I.target,z=i.getArrowWidth(C,R),B=[{name:"source",x:S.arrowStartX,y:S.arrowStartY,angle:S.srcArrowAngle},{name:"target",x:S.arrowEndX,y:S.arrowEndY,angle:S.tgtArrowAngle},{name:"mid-source",x:S.midX,y:S.midY,angle:S.midsrcArrowAngle},{name:"mid-target",x:S.midX,y:S.midY,angle:S.midtgtArrowAngle}],L=0;L<B.length;L++){var j=B[L],Q=a.arrowShapes[E.pstyle(j.name+"-arrow-shape").value],N=E.pstyle("width").pfValue;if(Q.roughCollide(t,e,z,j.angle,{x:j.x,y:j.y},N,c)&&Q.collide(t,e,z,j.angle,{x:j.x,y:j.y},N,c))return m(E),!0}l&&o.length>0&&(p(D),p($))}function y(E,I,S){return Sn(E,I,S)}function _(E,I){var S=E._private,C=h,R;I?R=I+"-":R="",E.boundingBox();var x=S.labelBounds[I||"main"],P=E.pstyle(R+"label").value,A=E.pstyle("text-events").strValue==="yes";if(!(!A||!P)){var F=y(S.rscratch,"labelX",I),O=y(S.rscratch,"labelY",I),L=y(S.rscratch,"labelAngle",I),D=E.pstyle(R+"text-margin-x").pfValue,$=E.pstyle(R+"text-margin-y").pfValue,z=x.x1-C-D,B=x.x2+C-D,j=x.y1-C-$,Q=x.y2+C-$;if(L){var N=Math.cos(L),M=Math.sin(L),q=function(_e,se){return _e=_e-F,se=se-O,{x:_e*N-se*M+F,y:_e*M+se*N+O}},V=q(z,j),W=q(z,Q),X=q(B,j),J=q(B,Q),ae=[V.x+D,V.y+$,X.x+D,X.y+$,J.x+D,J.y+$,W.x+D,W.y+$];if(Or(t,e,ae))return m(E),!0}else if($o(x,t,e))return m(E),!0}}for(var T=s.length-1;T>=0;T--){var b=s[T];b.isNode()?p(b)||_(b):g(b)||_(b)||_(b,"source")||_(b,"target")}return o};Cs.getAllInBox=function(t,e,r,n){var i=this.getCachedZSortedEles().interactive,a=[],s=Math.min(t,r),o=Math.max(t,r),u=Math.min(e,n),l=Math.max(e,n);t=s,r=o,e=u,n=l;for(var c=$r({x1:t,y1:e,x2:r,y2:n}),f=0;f<i.length;f++){var h=i[f];if(h.isNode()){var d=h,v=d.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:!1});JT(c,v)&&!gV(v,c)&&a.push(d)}else{var w=h,m=w._private,p=m.rscratch;if(p.startX!=null&&p.startY!=null&&!$o(c,p.startX,p.startY)||p.endX!=null&&p.endY!=null&&!$o(c,p.endX,p.endY))continue;if(p.edgeType==="bezier"||p.edgeType==="multibezier"||p.edgeType==="self"||p.edgeType==="compound"||p.edgeType==="segments"||p.edgeType==="haystack"){for(var g=m.rstyle.bezierPts||m.rstyle.linePts||m.rstyle.haystackPts,y=!0,_=0;_<g.length;_++)if(!dY(c,g[_])){y=!1;break}y&&a.push(w)}else(p.edgeType==="haystack"||p.edgeType==="straight")&&a.push(w)}}return a};var Ad={};Ad.calculateArrowAngles=function(t){var e=t._private.rscratch,r=e.edgeType==="haystack",n=e.edgeType==="bezier",i=e.edgeType==="multibezier",a=e.edgeType==="segments",s=e.edgeType==="compound",o=e.edgeType==="self",u,l,c,f,h,d,p,g;if(r?(c=e.haystackPts[0],f=e.haystackPts[1],h=e.haystackPts[2],d=e.haystackPts[3]):(c=e.arrowStartX,f=e.arrowStartY,h=e.arrowEndX,d=e.arrowEndY),p=e.midX,g=e.midY,a)u=c-e.segpts[0],l=f-e.segpts[1];else if(i||s||o||n){var v=e.allpts,w=qt(v[0],v[2],v[4],.1),m=qt(v[1],v[3],v[5],.1);u=c-w,l=f-m}else u=c-p,l=f-g;e.srcArrowAngle=$f(u,l);var p=e.midX,g=e.midY;if(r&&(p=(c+h)/2,g=(f+d)/2),u=h-c,l=d-f,a){var v=e.allpts;if(v.length/2%2===0){var y=v.length/2,_=y-2;u=v[y]-v[_],l=v[y+1]-v[_+1]}else{var y=v.length/2-1,_=y-2,T=y+2;u=v[y]-v[_],l=v[y+1]-v[_+1]}}else if(i||s||o){var v=e.allpts,b=e.ctrlpts,E,I,S,C;if(b.length/2%2===0){var R=v.length/2-1,x=R+2,P=x+2;E=qt(v[R],v[x],v[P],0),I=qt(v[R+1],v[x+1],v[P+1],0),S=qt(v[R],v[x],v[P],1e-4),C=qt(v[R+1],v[x+1],v[P+1],1e-4)}else{var x=v.length/2-1,R=x-2,P=x+2;E=qt(v[R],v[x],v[P],.4999),I=qt(v[R+1],v[x+1],v[P+1],.4999),S=qt(v[R],v[x],v[P],.5),C=qt(v[R+1],v[x+1],v[P+1],.5)}u=S-E,l=C-I}if(e.midtgtArrowAngle=$f(u,l),e.midDispX=u,e.midDispY=l,u*=-1,l*=-1,a){var v=e.allpts;if(v.length/2%2!==0){var y=v.length/2-1,T=y+2;u=-(v[T]-v[y]),l=-(v[T+1]-v[y+1])}}if(e.midsrcArrowAngle=$f(u,l),a)u=h-e.segpts[e.segpts.length-2],l=d-e.segpts[e.segpts.length-1];else if(i||s||o||n){var v=e.allpts,A=v.length,w=qt(v[A-6],v[A-4],v[A-2],.9),m=qt(v[A-5],v[A-3],v[A-1],.9);u=h-w,l=d-m}else u=h-p,l=d-g;e.tgtArrowAngle=$f(u,l)};Ad.getArrowWidth=Ad.getArrowHeight=function(t,e){var r=this.arrowWidthCache=this.arrowWidthCache||{},n=r[t+", "+e];return n||(n=Math.max(Math.pow(t*13.37,.9),29)*e,r[t+", "+e]=n,n)};var Tr={};Tr.findMidptPtsEtc=function(t,e){var r=e.posPts,n=e.intersectionPts,i=e.vectorNormInverse,a,s=t.pstyle("source-endpoint"),o=t.pstyle("target-endpoint"),u=s.units!=null&&o.units!=null,l=function(T,b,E,I){var S=I-b,C=E-T,R=Math.sqrt(C*C+S*S);return{x:-S/R,y:C/R}},c=t.pstyle("edge-distances").value;switch(c){case"node-position":a=r;break;case"intersection":a=n;break;case"endpoints":{if(u){var f=this.manualEndptToPx(t.source()[0],s),h=wn(f,2),d=h[0],v=h[1],w=this.manualEndptToPx(t.target()[0],o),m=wn(w,2),p=m[0],g=m[1],y={x1:d,y1:v,x2:p,y2:g};i=l(d,v,p,g),a=y}else Xe("Edge ".concat(t.id()," has edge-distances:endpoints specified without manual endpoints specified via source-endpoint and target-endpoint.  Falling back on edge-distances:intersection (default).")),a=n;break}}return{midptPts:a,vectorNormInverse:i}};Tr.findHaystackPoints=function(t){for(var e=0;e<t.length;e++){var r=t[e],n=r._private,i=n.rscratch;if(!i.haystack){var a=Math.random()*2*Math.PI;i.source={x:Math.cos(a),y:Math.sin(a)},a=Math.random()*2*Math.PI,i.target={x:Math.cos(a),y:Math.sin(a)}}var s=n.source,o=n.target,u=s.position(),l=o.position(),c=s.width(),f=o.width(),h=s.height(),d=o.height(),v=r.pstyle("haystack-radius").value,w=v/2;i.haystackPts=i.allpts=[i.source.x*c*w+u.x,i.source.y*h*w+u.y,i.target.x*f*w+l.x,i.target.y*d*w+l.y],i.midX=(i.allpts[0]+i.allpts[2])/2,i.midY=(i.allpts[1]+i.allpts[3])/2,i.edgeType="haystack",i.haystack=!0,this.storeEdgeProjections(r),this.calculateArrowAngles(r),this.recalculateEdgeLabelProjections(r),this.calculateLabelAngles(r)}};Tr.findSegmentsPoints=function(t,e){var r=t._private.rscratch,n=t.pstyle("segment-weights"),i=t.pstyle("segment-distances"),a=Math.min(n.pfValue.length,i.pfValue.length);r.edgeType="segments",r.segpts=[];for(var s=0;s<a;s++){var o=n.pfValue[s],u=i.pfValue[s],l=1-o,c=o,f=this.findMidptPtsEtc(t,e),h=f.midptPts,d=f.vectorNormInverse,v={x:h.x1*l+h.x2*c,y:h.y1*l+h.y2*c};r.segpts.push(v.x+d.x*u,v.y+d.y*u)}};Tr.findLoopPoints=function(t,e,r,n){var i=t._private.rscratch,a=e.dirCounts,s=e.srcPos,o=t.pstyle("control-point-distances"),u=o?o.pfValue[0]:void 0,l=t.pstyle("loop-direction").pfValue,c=t.pstyle("loop-sweep").pfValue,f=t.pstyle("control-point-step-size").pfValue;i.edgeType="self";var h=r,d=f;n&&(h=0,d=u);var v=l-Math.PI/2,w=v-c/2,m=v+c/2,p=l+"_"+c;h=a[p]===void 0?a[p]=0:++a[p],i.ctrlpts=[s.x+Math.cos(w)*1.4*d*(h/3+1),s.y+Math.sin(w)*1.4*d*(h/3+1),s.x+Math.cos(m)*1.4*d*(h/3+1),s.y+Math.sin(m)*1.4*d*(h/3+1)]};Tr.findCompoundLoopPoints=function(t,e,r,n){var i=t._private.rscratch;i.edgeType="compound";var a=e.srcPos,s=e.tgtPos,o=e.srcW,u=e.srcH,l=e.tgtW,c=e.tgtH,f=t.pstyle("control-point-step-size").pfValue,h=t.pstyle("control-point-distances"),d=h?h.pfValue[0]:void 0,v=r,w=f;n&&(v=0,w=d);var m=50,p={x:a.x-o/2,y:a.y-u/2},g={x:s.x-l/2,y:s.y-c/2},y={x:Math.min(p.x,g.x),y:Math.min(p.y,g.y)},_=.5,T=Math.max(_,Math.log(o*.01)),b=Math.max(_,Math.log(l*.01));i.ctrlpts=[y.x,y.y-(1+Math.pow(m,1.12)/100)*w*(v/3+1)*T,y.x-(1+Math.pow(m,1.12)/100)*w*(v/3+1)*b,y.y]};Tr.findStraightEdgePoints=function(t){t._private.rscratch.edgeType="straight"};Tr.findBezierPoints=function(t,e,r,n,i){var a=t._private.rscratch,s=t.pstyle("control-point-step-size").pfValue,o=t.pstyle("control-point-distances"),u=t.pstyle("control-point-weights"),l=o&&u?Math.min(o.value.length,u.value.length):1,c=o?o.pfValue[0]:void 0,f=u.value[0],h=n;a.edgeType=h?"multibezier":"bezier",a.ctrlpts=[];for(var d=0;d<l;d++){var v=(.5-e.eles.length/2+r)*s*(i?-1:1),w=void 0,m=vV(v);h&&(c=o?o.pfValue[d]:s,f=u.value[d]),n?w=c:w=c!==void 0?m*c:void 0;var p=w!==void 0?w:v,g=1-f,y=f,_=this.findMidptPtsEtc(t,e),T=_.midptPts,b=_.vectorNormInverse,E={x:T.x1*g+T.x2*y,y:T.y1*g+T.y2*y};a.ctrlpts.push(E.x+b.x*p,E.y+b.y*p)}};Tr.findTaxiPoints=function(t,e){var r=t._private.rscratch;r.edgeType="segments";var n="vertical",i="horizontal",a="leftward",s="rightward",o="downward",u="upward",l="auto",c=e.posPts,f=e.srcW,h=e.srcH,d=e.tgtW,v=e.tgtH,w=t.pstyle("edge-distances").value,m=w!=="node-position",p=t.pstyle("taxi-direction").value,g=p,y=t.pstyle("taxi-turn"),_=y.units==="%",T=y.pfValue,b=T<0,E=t.pstyle("taxi-turn-min-distance").pfValue,I=m?(f+d)/2:0,S=m?(h+v)/2:0,C=c.x2-c.x1,R=c.y2-c.y1,x=function(Z,ye){return Z>0?Math.max(Z-ye,0):Math.min(Z+ye,0)},P=x(C,I),A=x(R,S),F=!1;g===l?p=Math.abs(P)>Math.abs(A)?i:n:g===u||g===o?(p=n,F=!0):(g===a||g===s)&&(p=i,F=!0);var O=p===n,L=O?A:P,D=O?R:C,$=vV(D),z=!1;!(F&&(_||b))&&(g===o&&D<0||g===u&&D>0||g===a&&D>0||g===s&&D<0)&&($*=-1,L=$*Math.abs(L),z=!0);var B;if(_){var j=T<0?1+T:T;B=j*L}else{var Q=T<0?L:0;B=Q+T*$}var N=function(Z){return Math.abs(Z)<E||Math.abs(Z)>=Math.abs(L)},M=N(B),q=N(Math.abs(L)-Math.abs(B)),V=M||q;if(V&&!z)if(O){var W=Math.abs(D)<=h/2,X=Math.abs(C)<=d/2;if(W){var J=(c.x1+c.x2)/2,ae=c.y1,ve=c.y2;r.segpts=[J,ae,J,ve]}else if(X){var _e=(c.y1+c.y2)/2,se=c.x1,te=c.x2;r.segpts=[se,_e,te,_e]}else r.segpts=[c.x1,c.y2]}else{var me=Math.abs(D)<=f/2,ue=Math.abs(R)<=v/2;if(me){var he=(c.y1+c.y2)/2,we=c.x1,Fe=c.x2;r.segpts=[we,he,Fe,he]}else if(ue){var Ae=(c.x1+c.x2)/2,be=c.y1,Se=c.y2;r.segpts=[Ae,be,Ae,Se]}else r.segpts=[c.x2,c.y1]}else if(O){var G=c.y1+B+(m?h/2*$:0),k=c.x1,H=c.x2;r.segpts=[k,G,H,G]}else{var ee=c.x1+B+(m?f/2*$:0),K=c.y1,Y=c.y2;r.segpts=[ee,K,ee,Y]}};Tr.tryToCorrectInvalidPoints=function(t,e){var r=t._private.rscratch;if(r.edgeType==="bezier"){var n=e.srcPos,i=e.tgtPos,a=e.srcW,s=e.srcH,o=e.tgtW,u=e.tgtH,l=e.srcShape,c=e.tgtShape,f=!le(r.startX)||!le(r.startY),h=!le(r.arrowStartX)||!le(r.arrowStartY),d=!le(r.endX)||!le(r.endY),v=!le(r.arrowEndX)||!le(r.arrowEndY),w=3,m=this.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.arrowShapeWidth,p=w*m,g=fs({x:r.ctrlpts[0],y:r.ctrlpts[1]},{x:r.startX,y:r.startY}),y=g<p,_=fs({x:r.ctrlpts[0],y:r.ctrlpts[1]},{x:r.endX,y:r.endY}),T=_<p,b=!1;if(f||h||y){b=!0;var E={x:r.ctrlpts[0]-n.x,y:r.ctrlpts[1]-n.y},I=Math.sqrt(E.x*E.x+E.y*E.y),S={x:E.x/I,y:E.y/I},C=Math.max(a,s),R={x:r.ctrlpts[0]+S.x*2*C,y:r.ctrlpts[1]+S.y*2*C},x=l.intersectLine(n.x,n.y,a,s,R.x,R.y,0);y?(r.ctrlpts[0]=r.ctrlpts[0]+S.x*(p-g),r.ctrlpts[1]=r.ctrlpts[1]+S.y*(p-g)):(r.ctrlpts[0]=x[0]+S.x*p,r.ctrlpts[1]=x[1]+S.y*p)}if(d||v||T){b=!0;var P={x:r.ctrlpts[0]-i.x,y:r.ctrlpts[1]-i.y},A=Math.sqrt(P.x*P.x+P.y*P.y),F={x:P.x/A,y:P.y/A},O=Math.max(a,s),L={x:r.ctrlpts[0]+F.x*2*O,y:r.ctrlpts[1]+F.y*2*O},D=c.intersectLine(i.x,i.y,o,u,L.x,L.y,0);T?(r.ctrlpts[0]=r.ctrlpts[0]+F.x*(p-_),r.ctrlpts[1]=r.ctrlpts[1]+F.y*(p-_)):(r.ctrlpts[0]=D[0]+F.x*p,r.ctrlpts[1]=D[1]+F.y*p)}b&&this.findEndpoints(t)}};Tr.storeAllpts=function(t){var e=t._private.rscratch;if(e.edgeType==="multibezier"||e.edgeType==="bezier"||e.edgeType==="self"||e.edgeType==="compound"){e.allpts=[],e.allpts.push(e.startX,e.startY);for(var r=0;r+1<e.ctrlpts.length;r+=2)e.allpts.push(e.ctrlpts[r],e.ctrlpts[r+1]),r+3<e.ctrlpts.length&&e.allpts.push((e.ctrlpts[r]+e.ctrlpts[r+2])/2,(e.ctrlpts[r+1]+e.ctrlpts[r+3])/2);e.allpts.push(e.endX,e.endY);var n,i;e.ctrlpts.length/2%2===0?(n=e.allpts.length/2-1,e.midX=e.allpts[n],e.midY=e.allpts[n+1]):(n=e.allpts.length/2-3,i=.5,e.midX=qt(e.allpts[n],e.allpts[n+2],e.allpts[n+4],i),e.midY=qt(e.allpts[n+1],e.allpts[n+3],e.allpts[n+5],i))}else if(e.edgeType==="straight")e.allpts=[e.startX,e.startY,e.endX,e.endY],e.midX=(e.startX+e.endX+e.arrowStartX+e.arrowEndX)/4,e.midY=(e.startY+e.endY+e.arrowStartY+e.arrowEndY)/4;else if(e.edgeType==="segments")if(e.allpts=[],e.allpts.push(e.startX,e.startY),e.allpts.push.apply(e.allpts,e.segpts),e.allpts.push(e.endX,e.endY),e.segpts.length%4===0){var a=e.segpts.length/2,s=a-2;e.midX=(e.segpts[s]+e.segpts[a])/2,e.midY=(e.segpts[s+1]+e.segpts[a+1])/2}else{var o=e.segpts.length/2-1;e.midX=e.segpts[o],e.midY=e.segpts[o+1]}};Tr.checkForInvalidEdgeWarning=function(t){var e=t[0]._private.rscratch;e.nodesOverlap||le(e.startX)&&le(e.startY)&&le(e.endX)&&le(e.endY)?e.loggedErr=!1:e.loggedErr||(e.loggedErr=!0,Xe("Edge `"+t.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))};Tr.findEdgeControlPoints=function(t){var e=this;if(!(!t||t.length===0)){for(var r=this,n=r.cy,i=n.hasCompoundNodes(),a={map:new Un,get:function(E){var I=this.map.get(E[0]);return I!=null?I.get(E[1]):null},set:function(E,I){var S=this.map.get(E[0]);S==null&&(S=new Un,this.map.set(E[0],S)),S.set(E[1],I)}},s=[],o=[],u=0;u<t.length;u++){var l=t[u],c=l._private,f=l.pstyle("curve-style").value;if(!(l.removed()||!l.takesUpSpace())){if(f==="haystack"){o.push(l);continue}var h=f==="unbundled-bezier"||f==="segments"||f==="straight"||f==="straight-triangle"||f==="taxi",d=f==="unbundled-bezier"||f==="bezier",v=c.source,w=c.target,m=v.poolIndex(),p=w.poolIndex(),g=[m,p].sort(),y=a.get(g);y==null&&(y={eles:[]},a.set(g,y),s.push(g)),y.eles.push(l),h&&(y.hasUnbundled=!0),d&&(y.hasBezier=!0)}}for(var _=function(E){var I=s[E],S=a.get(I),C=void 0;if(!S.hasUnbundled){var R=S.eles[0].parallelEdges().filter(function(Se){return Se.isBundledBezier()});YT(S.eles),R.forEach(function(Se){return S.eles.push(Se)}),S.eles.sort(function(Se,G){return Se.poolIndex()-G.poolIndex()})}var x=S.eles[0],P=x.source(),A=x.target();if(P.poolIndex()>A.poolIndex()){var F=P;P=A,A=F}var O=S.srcPos=P.position(),L=S.tgtPos=A.position(),D=S.srcW=P.outerWidth(),$=S.srcH=P.outerHeight(),z=S.tgtW=A.outerWidth(),B=S.tgtH=A.outerHeight(),j=S.srcShape=r.nodeShapes[e.getNodeShape(P)],Q=S.tgtShape=r.nodeShapes[e.getNodeShape(A)];S.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var N=0;N<S.eles.length;N++){var M=S.eles[N],q=M[0]._private.rscratch,V=M.pstyle("curve-style").value,W=V==="unbundled-bezier"||V==="segments"||V==="taxi",X=!P.same(M.source());if(!S.calculatedIntersection&&P!==A&&(S.hasBezier||S.hasUnbundled)){S.calculatedIntersection=!0;var J=j.intersectLine(O.x,O.y,D,$,L.x,L.y,0),ae=S.srcIntn=J,ve=Q.intersectLine(L.x,L.y,z,B,O.x,O.y,0),_e=S.tgtIntn=ve,se=S.intersectionPts={x1:J[0],x2:ve[0],y1:J[1],y2:ve[1]},te=S.posPts={x1:O.x,x2:L.x,y1:O.y,y2:L.y},me=ve[1]-J[1],ue=ve[0]-J[0],he=Math.sqrt(ue*ue+me*me),we=S.vector={x:ue,y:me},Fe=S.vectorNorm={x:we.x/he,y:we.y/he},Ae={x:-Fe.y,y:Fe.x};S.nodesOverlap=!le(he)||Q.checkPoint(J[0],J[1],0,z,B,L.x,L.y)||j.checkPoint(ve[0],ve[1],0,D,$,O.x,O.y),S.vectorNormInverse=Ae,C={nodesOverlap:S.nodesOverlap,dirCounts:S.dirCounts,calculatedIntersection:!0,hasBezier:S.hasBezier,hasUnbundled:S.hasUnbundled,eles:S.eles,srcPos:L,tgtPos:O,srcW:z,srcH:B,tgtW:D,tgtH:$,srcIntn:_e,tgtIntn:ae,srcShape:Q,tgtShape:j,posPts:{x1:te.x2,y1:te.y2,x2:te.x1,y2:te.y1},intersectionPts:{x1:se.x2,y1:se.y2,x2:se.x1,y2:se.y1},vector:{x:-we.x,y:-we.y},vectorNorm:{x:-Fe.x,y:-Fe.y},vectorNormInverse:{x:-Ae.x,y:-Ae.y}}}var be=X?C:S;q.nodesOverlap=be.nodesOverlap,q.srcIntn=be.srcIntn,q.tgtIntn=be.tgtIntn,i&&(P.isParent()||P.isChild()||A.isParent()||A.isChild())&&(P.parents().anySame(A)||A.parents().anySame(P)||P.same(A)&&P.isParent())?e.findCompoundLoopPoints(M,be,N,W):P===A?e.findLoopPoints(M,be,N,W):V==="segments"?e.findSegmentsPoints(M,be):V==="taxi"?e.findTaxiPoints(M,be):V==="straight"||!W&&S.eles.length%2===1&&N===Math.floor(S.eles.length/2)?e.findStraightEdgePoints(M):e.findBezierPoints(M,be,N,W,X),e.findEndpoints(M),e.tryToCorrectInvalidPoints(M,be),e.checkForInvalidEdgeWarning(M),e.storeAllpts(M),e.storeEdgeProjections(M),e.calculateArrowAngles(M),e.recalculateEdgeLabelProjections(M),e.calculateLabelAngles(M)}},T=0;T<s.length;T++)_(T);this.findHaystackPoints(o)}};function tF(t){var e=[];if(t!=null){for(var r=0;r<t.length;r+=2){var n=t[r],i=t[r+1];e.push({x:n,y:i})}return e}}Tr.getSegmentPoints=function(t){var e=t[0]._private.rscratch,r=e.edgeType;if(r==="segments")return this.recalculateRenderedStyle(t),tF(e.segpts)};Tr.getControlPoints=function(t){var e=t[0]._private.rscratch,r=e.edgeType;if(r==="bezier"||r==="multibezier"||r==="self"||r==="compound")return this.recalculateRenderedStyle(t),tF(e.ctrlpts)};Tr.getEdgeMidpoint=function(t){var e=t[0]._private.rscratch;return this.recalculateRenderedStyle(t),{x:e.midX,y:e.midY}};var af={};af.manualEndptToPx=function(t,e){var r=this,n=t.position(),i=t.outerWidth(),a=t.outerHeight();if(e.value.length===2){var s=[e.pfValue[0],e.pfValue[1]];return e.units[0]==="%"&&(s[0]=s[0]*i),e.units[1]==="%"&&(s[1]=s[1]*a),s[0]+=n.x,s[1]+=n.y,s}else{var o=e.pfValue[0];o=-Math.PI/2+o;var u=2*Math.max(i,a),l=[n.x+Math.cos(o)*u,n.y+Math.sin(o)*u];return r.nodeShapes[this.getNodeShape(t)].intersectLine(n.x,n.y,i,a,l[0],l[1],0)}};af.findEndpoints=function(t){var e=this,r,n=t.source()[0],i=t.target()[0],a=n.position(),s=i.position(),o=t.pstyle("target-arrow-shape").value,u=t.pstyle("source-arrow-shape").value,l=t.pstyle("target-distance-from-node").pfValue,c=t.pstyle("source-distance-from-node").pfValue,f=t.pstyle("curve-style").value,h=t._private.rscratch,d=h.edgeType,v=f==="taxi",w=d==="self"||d==="compound",m=d==="bezier"||d==="multibezier"||w,p=d!=="bezier",g=d==="straight"||d==="segments",y=d==="segments",_=m||p||g,T=w||v,b=t.pstyle("source-endpoint"),E=T?"outside-to-node":b.value,I=t.pstyle("target-endpoint"),S=T?"outside-to-node":I.value;h.srcManEndpt=b,h.tgtManEndpt=I;var C,R,x,P;if(m){var A=[h.ctrlpts[0],h.ctrlpts[1]],F=p?[h.ctrlpts[h.ctrlpts.length-2],h.ctrlpts[h.ctrlpts.length-1]]:A;C=F,R=A}else if(g){var O=y?h.segpts.slice(0,2):[s.x,s.y],L=y?h.segpts.slice(h.segpts.length-2):[a.x,a.y];C=L,R=O}if(S==="inside-to-node")r=[s.x,s.y];else if(I.units)r=this.manualEndptToPx(i,I);else if(S==="outside-to-line")r=h.tgtIntn;else if(S==="outside-to-node"||S==="outside-to-node-or-label"?x=C:(S==="outside-to-line"||S==="outside-to-line-or-label")&&(x=[a.x,a.y]),r=e.nodeShapes[this.getNodeShape(i)].intersectLine(s.x,s.y,i.outerWidth(),i.outerHeight(),x[0],x[1],0),S==="outside-to-node-or-label"||S==="outside-to-line-or-label"){var D=i._private.rscratch,$=D.labelWidth,z=D.labelHeight,B=D.labelX,j=D.labelY,Q=$/2,N=z/2,M=i.pstyle("text-valign").value;M==="top"?j-=N:M==="bottom"&&(j+=N);var q=i.pstyle("text-halign").value;q==="left"?B-=Q:q==="right"&&(B+=Q);var V=mc(x[0],x[1],[B-Q,j-N,B+Q,j-N,B+Q,j+N,B-Q,j+N],s.x,s.y);if(V.length>0){var W=a,X=Fa(W,ao(r)),J=Fa(W,ao(V)),ae=X;if(J<X&&(r=V,ae=J),V.length>2){var ve=Fa(W,{x:V[2],y:V[3]});ve<ae&&(r=[V[2],V[3]])}}}var _e=zf(r,C,e.arrowShapes[o].spacing(t)+l),se=zf(r,C,e.arrowShapes[o].gap(t)+l);if(h.endX=se[0],h.endY=se[1],h.arrowEndX=_e[0],h.arrowEndY=_e[1],E==="inside-to-node")r=[a.x,a.y];else if(b.units)r=this.manualEndptToPx(n,b);else if(E==="outside-to-line")r=h.srcIntn;else if(E==="outside-to-node"||E==="outside-to-node-or-label"?P=R:(E==="outside-to-line"||E==="outside-to-line-or-label")&&(P=[s.x,s.y]),r=e.nodeShapes[this.getNodeShape(n)].intersectLine(a.x,a.y,n.outerWidth(),n.outerHeight(),P[0],P[1],0),E==="outside-to-node-or-label"||E==="outside-to-line-or-label"){var te=n._private.rscratch,me=te.labelWidth,ue=te.labelHeight,he=te.labelX,we=te.labelY,Fe=me/2,Ae=ue/2,be=n.pstyle("text-valign").value;be==="top"?we-=Ae:be==="bottom"&&(we+=Ae);var Se=n.pstyle("text-halign").value;Se==="left"?he-=Fe:Se==="right"&&(he+=Fe);var G=mc(P[0],P[1],[he-Fe,we-Ae,he+Fe,we-Ae,he+Fe,we+Ae,he-Fe,we+Ae],a.x,a.y);if(G.length>0){var k=s,H=Fa(k,ao(r)),ee=Fa(k,ao(G)),K=H;if(ee<H&&(r=[G[0],G[1]],K=ee),G.length>2){var Y=Fa(k,{x:G[2],y:G[3]});Y<K&&(r=[G[2],G[3]])}}}var Ee=zf(r,R,e.arrowShapes[u].spacing(t)+c),Z=zf(r,R,e.arrowShapes[u].gap(t)+c);h.startX=Z[0],h.startY=Z[1],h.arrowStartX=Ee[0],h.arrowStartY=Ee[1],_&&(!le(h.startX)||!le(h.startY)||!le(h.endX)||!le(h.endY)?h.badLine=!0:h.badLine=!1)};af.getSourceEndpoint=function(t){var e=t[0]._private.rscratch;switch(this.recalculateRenderedStyle(t),e.edgeType){case"haystack":return{x:e.haystackPts[0],y:e.haystackPts[1]};default:return{x:e.arrowStartX,y:e.arrowStartY}}};af.getTargetEndpoint=function(t){var e=t[0]._private.rscratch;switch(this.recalculateRenderedStyle(t),e.edgeType){case"haystack":return{x:e.haystackPts[2],y:e.haystackPts[3]};default:return{x:e.arrowEndX,y:e.arrowEndY}}};var ub={};function GJ(t,e,r){for(var n=function(l,c,f,h){return qt(l,c,f,h)},i=e._private,a=i.rstyle.bezierPts,s=0;s<t.bezierProjPcts.length;s++){var o=t.bezierProjPcts[s];a.push({x:n(r[0],r[2],r[4],o),y:n(r[1],r[3],r[5],o)})}}ub.storeEdgeProjections=function(t){var e=t._private,r=e.rscratch,n=r.edgeType;if(e.rstyle.bezierPts=null,e.rstyle.linePts=null,e.rstyle.haystackPts=null,n==="multibezier"||n==="bezier"||n==="self"||n==="compound"){e.rstyle.bezierPts=[];for(var i=0;i+5<r.allpts.length;i+=4)GJ(this,t,r.allpts.slice(i,i+6))}else if(n==="segments")for(var a=e.rstyle.linePts=[],i=0;i+1<r.allpts.length;i+=2)a.push({x:r.allpts[i],y:r.allpts[i+1]});else if(n==="haystack"){var s=r.haystackPts;e.rstyle.haystackPts=[{x:s[0],y:s[1]},{x:s[2],y:s[3]}]}e.rstyle.arrowWidth=this.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.arrowShapeWidth};ub.recalculateEdgeProjections=function(t){this.findEdgeControlPoints(t)};var ti={};ti.recalculateNodeLabelProjection=function(t){var e=t.pstyle("label").strValue;if(!ga(e)){var r,n,i=t._private,a=t.width(),s=t.height(),o=t.padding(),u=t.position(),l=t.pstyle("text-halign").strValue,c=t.pstyle("text-valign").strValue,f=i.rscratch,h=i.rstyle;switch(l){case"left":r=u.x-a/2-o;break;case"right":r=u.x+a/2+o;break;default:r=u.x}switch(c){case"top":n=u.y-s/2-o;break;case"bottom":n=u.y+s/2+o;break;default:n=u.y}f.labelX=r,f.labelY=n,h.labelX=r,h.labelY=n,this.calculateLabelAngles(t),this.applyLabelDimensions(t)}};var rF=function(e,r){var n=Math.atan(r/e);return e===0&&n<0&&(n=n*-1),n},nF=function(e,r){var n=r.x-e.x,i=r.y-e.y;return rF(n,i)},KJ=function(e,r,n,i){var a=gc(0,i-.001,1),s=gc(0,i+.001,1),o=wo(e,r,n,a),u=wo(e,r,n,s);return nF(o,u)};ti.recalculateEdgeLabelProjections=function(t){var e,r=t._private,n=r.rscratch,i=this,a={mid:t.pstyle("label").strValue,source:t.pstyle("source-label").strValue,target:t.pstyle("target-label").strValue};if(a.mid||a.source||a.target){e={x:n.midX,y:n.midY};var s=function(f,h,d){zi(r.rscratch,f,h,d),zi(r.rstyle,f,h,d)};s("labelX",null,e.x),s("labelY",null,e.y);var o=rF(n.midDispX,n.midDispY);s("labelAutoAngle",null,o);var u=function c(){if(c.cache)return c.cache;for(var f=[],h=0;h+5<n.allpts.length;h+=4){var d={x:n.allpts[h],y:n.allpts[h+1]},v={x:n.allpts[h+2],y:n.allpts[h+3]},w={x:n.allpts[h+4],y:n.allpts[h+5]};f.push({p0:d,p1:v,p2:w,startDist:0,length:0,segments:[]})}var m=r.rstyle.bezierPts,p=i.bezierProjPcts.length;function g(E,I,S,C,R){var x=fs(I,S),P=E.segments[E.segments.length-1],A={p0:I,p1:S,t0:C,t1:R,startDist:P?P.startDist+P.length:0,length:x};E.segments.push(A),E.length+=x}for(var y=0;y<f.length;y++){var _=f[y],T=f[y-1];T&&(_.startDist=T.startDist+T.length),g(_,_.p0,m[y*p],0,i.bezierProjPcts[0]);for(var b=0;b<p-1;b++)g(_,m[y*p+b],m[y*p+b+1],i.bezierProjPcts[b],i.bezierProjPcts[b+1]);g(_,m[y*p+p-1],_.p2,i.bezierProjPcts[p-1],1)}return c.cache=f},l=function(f){var h,d=f==="source";if(a[f]){var v=t.pstyle(f+"-text-offset").pfValue;switch(n.edgeType){case"self":case"compound":case"bezier":case"multibezier":{for(var w=u(),m,p=0,g=0,y=0;y<w.length;y++){for(var _=w[d?y:w.length-1-y],T=0;T<_.segments.length;T++){var b=_.segments[d?T:_.segments.length-1-T],E=y===w.length-1&&T===_.segments.length-1;if(p=g,g+=b.length,g>=v||E){m={cp:_,segment:b};break}}if(m)break}var I=m.cp,S=m.segment,C=(v-p)/S.length,R=S.t1-S.t0,x=d?S.t0+R*C:S.t1-R*C;x=gc(0,x,1),e=wo(I.p0,I.p1,I.p2,x),h=KJ(I.p0,I.p1,I.p2,x);break}case"straight":case"segments":case"haystack":{for(var P=0,A,F,O,L,D=n.allpts.length,$=0;$+3<D&&(d?(O={x:n.allpts[$],y:n.allpts[$+1]},L={x:n.allpts[$+2],y:n.allpts[$+3]}):(O={x:n.allpts[D-2-$],y:n.allpts[D-1-$]},L={x:n.allpts[D-4-$],y:n.allpts[D-3-$]}),A=fs(O,L),F=P,P+=A,!(P>=v));$+=2);var z=v-F,B=z/A;B=gc(0,B,1),e=uY(O,L,B),h=nF(O,L);break}}s("labelX",f,e.x),s("labelY",f,e.y),s("labelAutoAngle",f,h)}};l("source"),l("target"),this.applyLabelDimensions(t)}};ti.applyLabelDimensions=function(t){this.applyPrefixedLabelDimensions(t),t.isEdge()&&(this.applyPrefixedLabelDimensions(t,"source"),this.applyPrefixedLabelDimensions(t,"target"))};ti.applyPrefixedLabelDimensions=function(t,e){var r=t._private,n=this.getLabelText(t,e),i=this.calculateLabelDimensions(t,n),a=t.pstyle("line-height").pfValue,s=t.pstyle("text-wrap").strValue,o=Sn(r.rscratch,"labelWrapCachedLines",e)||[],u=s!=="wrap"?1:Math.max(o.length,1),l=i.height/u,c=l*a,f=i.width,h=i.height+(u-1)*(a-1)*l;zi(r.rstyle,"labelWidth",e,f),zi(r.rscratch,"labelWidth",e,f),zi(r.rstyle,"labelHeight",e,h),zi(r.rscratch,"labelHeight",e,h),zi(r.rscratch,"labelLineHeight",e,c)};ti.getLabelText=function(t,e){var r=t._private,n=e?e+"-":"",i=t.pstyle(n+"label").strValue,a=t.pstyle("text-transform").value,s=function(z,B){return B?(zi(r.rscratch,z,e,B),B):Sn(r.rscratch,z,e)};if(!i)return"";a=="none"||(a=="uppercase"?i=i.toUpperCase():a=="lowercase"&&(i=i.toLowerCase()));var o=t.pstyle("text-wrap").value;if(o==="wrap"){var u=s("labelKey");if(u!=null&&s("labelWrapKey")===u)return s("labelWrapCachedText");for(var l="​",c=i.split(`
`),f=t.pstyle("text-max-width").pfValue,h=t.pstyle("text-overflow-wrap").value,d=h==="anywhere",v=[],w=/[\s\u200b]+/,m=d?"":" ",p=0;p<c.length;p++){var g=c[p],y=this.calculateLabelDimensions(t,g),_=y.width;if(d){var T=g.split("").join(l);g=T}if(_>f){for(var b=g.split(w),E="",I=0;I<b.length;I++){var S=b[I],C=E.length===0?S:E+m+S,R=this.calculateLabelDimensions(t,C),x=R.width;x<=f?E+=S+m:(E&&v.push(E),E=S+m)}E.match(/^[\s\u200b]+$/)||v.push(E)}else v.push(g)}s("labelWrapCachedLines",v),i=s("labelWrapCachedText",v.join(`
`)),s("labelWrapKey",u)}else if(o==="ellipsis"){var P=t.pstyle("text-max-width").pfValue,A="",F="…",O=!1;if(this.calculateLabelDimensions(t,i).width<P)return i;for(var L=0;L<i.length;L++){var D=this.calculateLabelDimensions(t,A+i[L]+F).width;if(D>P)break;A+=i[L],L===i.length-1&&(O=!0)}return O||(A+=F),A}return i};ti.getLabelJustification=function(t){var e=t.pstyle("text-justification").strValue,r=t.pstyle("text-halign").strValue;if(e==="auto")if(t.isNode())switch(r){case"left":return"right";case"right":return"left";default:return"center"}else return"center";else return e};ti.calculateLabelDimensions=function(t,e){var r=this,n=cs(e,t._private.labelDimsKey),i=r.labelDimCache||(r.labelDimCache=[]),a=i[n];if(a!=null)return a;var s=0,o=t.pstyle("font-style").strValue,u=t.pstyle("font-size").pfValue,l=t.pstyle("font-family").strValue,c=t.pstyle("font-weight").strValue,f=this.labelCalcCanvas,h=this.labelCalcCanvasContext;if(!f){f=this.labelCalcCanvas=document.createElement("canvas"),h=this.labelCalcCanvasContext=f.getContext("2d");var d=f.style;d.position="absolute",d.left="-9999px",d.top="-9999px",d.zIndex="-1",d.visibility="hidden",d.pointerEvents="none"}h.font="".concat(o," ").concat(c," ").concat(u,"px ").concat(l);for(var v=0,w=0,m=e.split(`
`),p=0;p<m.length;p++){var g=m[p],y=h.measureText(g),_=Math.ceil(y.width),T=u;v=Math.max(_,v),w+=T}return v+=s,w+=s,i[n]={width:v,height:w}};ti.calculateLabelAngle=function(t,e){var r=t._private,n=r.rscratch,i=t.isEdge(),a=e?e+"-":"",s=t.pstyle(a+"text-rotation"),o=s.strValue;return o==="none"?0:i&&o==="autorotate"?n.labelAutoAngle:o==="autorotate"?0:s.pfValue};ti.calculateLabelAngles=function(t){var e=this,r=t.isEdge(),n=t._private,i=n.rscratch;i.labelAngle=e.calculateLabelAngle(t),r&&(i.sourceLabelAngle=e.calculateLabelAngle(t,"source"),i.targetLabelAngle=e.calculateLabelAngle(t,"target"))};var iF={},Rx=28,kx=!1;iF.getNodeShape=function(t){var e=this,r=t.pstyle("shape").value;if(r==="cutrectangle"&&(t.width()<Rx||t.height()<Rx))return kx||(Xe("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),kx=!0),"rectangle";if(t.isParent())return r==="rectangle"||r==="roundrectangle"||r==="round-rectangle"||r==="cutrectangle"||r==="cut-rectangle"||r==="barrel"?r:"rectangle";if(r==="polygon"){var n=t.pstyle("shape-polygon-points").value;return e.nodeShapes.makePolygon(n).name}return r};var np={};np.registerCalculationListeners=function(){var t=this.cy,e=t.collection(),r=this,n=function(s){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e.merge(s),o)for(var u=0;u<s.length;u++){var l=s[u],c=l._private,f=c.rstyle;f.clean=!1,f.cleanConnected=!1}};r.binder(t).on("bounds.* dirty.*",function(s){var o=s.target;n(o)}).on("style.* background.*",function(s){var o=s.target;n(o,!1)});var i=function(s){if(s){var o=r.onUpdateEleCalcsFns;e.cleanStyle();for(var u=0;u<e.length;u++){var l=e[u],c=l._private.rstyle;l.isNode()&&!c.cleanConnected&&(n(l.connectedEdges()),c.cleanConnected=!0)}if(o)for(var f=0;f<o.length;f++){var h=o[f];h(s,e)}r.recalculateRenderedStyle(e),e=t.collection()}};r.flushRenderedStyleQueue=function(){i(!0)},r.beforeRender(i,r.beforeRenderPriorities.eleCalcs)};np.onUpdateEleCalcs=function(t){var e=this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[];e.push(t)};np.recalculateRenderedStyle=function(t,e){var r=function(_){return _._private.rstyle.cleanConnected},n=[],i=[];if(!this.destroyed){e===void 0&&(e=!0);for(var a=0;a<t.length;a++){var s=t[a],o=s._private,u=o.rstyle;s.isEdge()&&(!r(s.source())||!r(s.target()))&&(u.clean=!1),!(e&&u.clean||s.removed())&&s.pstyle("display").value!=="none"&&(o.group==="nodes"?i.push(s):n.push(s),u.clean=!0)}for(var l=0;l<i.length;l++){var c=i[l],f=c._private,h=f.rstyle,d=c.position();this.recalculateNodeLabelProjection(c),h.nodeX=d.x,h.nodeY=d.y,h.nodeW=c.pstyle("width").pfValue,h.nodeH=c.pstyle("height").pfValue}this.recalculateEdgeProjections(n);for(var v=0;v<n.length;v++){var w=n[v],m=w._private,p=m.rstyle,g=m.rscratch;p.srcX=g.arrowStartX,p.srcY=g.arrowStartY,p.tgtX=g.arrowEndX,p.tgtY=g.arrowEndY,p.midX=g.midX,p.midY=g.midY,p.labelAngle=g.labelAngle,p.sourceLabelAngle=g.sourceLabelAngle,p.targetLabelAngle=g.targetLabelAngle}}};var ip={};ip.updateCachedGrabbedEles=function(){var t=this.cachedZSortedEles;if(t){t.drag=[],t.nondrag=[];for(var e=[],r=0;r<t.length;r++){var n=t[r],i=n._private.rscratch;n.grabbed()&&!n.isParent()?e.push(n):i.inDragLayer?t.drag.push(n):t.nondrag.push(n)}for(var r=0;r<e.length;r++){var n=e[r];t.drag.push(n)}}};ip.invalidateCachedZSortedEles=function(){this.cachedZSortedEles=null};ip.getCachedZSortedEles=function(t){if(t||!this.cachedZSortedEles){var e=this.cy.mutableElements().toArray();e.sort(jV),e.interactive=e.filter(function(r){return r.interactive()}),this.cachedZSortedEles=e,this.updateCachedGrabbedEles()}else e=this.cachedZSortedEles;return e};var aF={};[Cs,Ad,Tr,af,ub,ti,iF,np,ip].forEach(function(t){xe(aF,t)});var sF={};sF.getCachedImage=function(t,e,r){var n=this,i=n.imageCache=n.imageCache||{},a=i[t];if(a)return a.image.complete||a.image.addEventListener("load",r),a.image;a=i[t]=i[t]||{};var s=a.image=new Image;s.addEventListener("load",r),s.addEventListener("error",function(){s.error=!0});var o="data:",u=t.substring(0,o.length).toLowerCase()===o;return u||(e=e==="null"?null:e,s.crossOrigin=e),s.src=t,s};var mu={};mu.registerBinding=function(t,e,r,n){var i=Array.prototype.slice.apply(arguments,[1]),a=this.binder(t);return a.on.apply(a,i)};mu.binder=function(t){var e=this,r=e.cy.window(),n=t===r||t===r.document||t===r.document.body||dQ(t);if(e.supportsPassiveEvents==null){var i=!1;try{var a=Object.defineProperty({},"passive",{get:function(){return i=!0,!0}});r.addEventListener("test",null,a)}catch{}e.supportsPassiveEvents=i}var s=function(u,l,c){var f=Array.prototype.slice.call(arguments);return n&&e.supportsPassiveEvents&&(f[2]={capture:c??!1,passive:!1,once:!1}),e.bindings.push({target:t,args:f}),(t.addEventListener||t.on).apply(t,f),this};return{on:s,addEventListener:s,addListener:s,bind:s}};mu.nodeIsDraggable=function(t){return t&&t.isNode()&&!t.locked()&&t.grabbable()};mu.nodeIsGrabbable=function(t){return this.nodeIsDraggable(t)&&t.interactive()};mu.load=function(){var t=this,e=t.cy.window(),r=function(k){return k.selected()},n=function(k,H,ee,K){k==null&&(k=t.cy);for(var Y=0;Y<H.length;Y++){var Ee=H[Y];k.emit({originalEvent:ee,type:Ee,position:K})}},i=function(k){return k.shiftKey||k.metaKey||k.ctrlKey},a=function(k,H){var ee=!0;if(t.cy.hasCompoundNodes()&&k&&k.pannable())for(var K=0;H&&K<H.length;K++){var k=H[K];if(k.isNode()&&k.isParent()&&!k.pannable()){ee=!1;break}}else ee=!0;return ee},s=function(k){k[0]._private.grabbed=!0},o=function(k){k[0]._private.grabbed=!1},u=function(k){k[0]._private.rscratch.inDragLayer=!0},l=function(k){k[0]._private.rscratch.inDragLayer=!1},c=function(k){k[0]._private.rscratch.isGrabTarget=!0},f=function(k){k[0]._private.rscratch.isGrabTarget=!1},h=function(k,H){var ee=H.addToList,K=ee.has(k);!K&&k.grabbable()&&!k.locked()&&(ee.merge(k),s(k))},d=function(k,H){if(k.cy().hasCompoundNodes()&&!(H.inDragLayer==null&&H.addToList==null)){var ee=k.descendants();H.inDragLayer&&(ee.forEach(u),ee.connectedEdges().forEach(u)),H.addToList&&h(ee,H)}},v=function(k,H){H=H||{};var ee=k.cy().hasCompoundNodes();H.inDragLayer&&(k.forEach(u),k.neighborhood().stdFilter(function(K){return!ee||K.isEdge()}).forEach(u)),H.addToList&&k.forEach(function(K){h(K,H)}),d(k,H),p(k,{inDragLayer:H.inDragLayer}),t.updateCachedGrabbedEles()},w=v,m=function(k){k&&(t.getCachedZSortedEles().forEach(function(H){o(H),l(H),f(H)}),t.updateCachedGrabbedEles())},p=function(k,H){if(!(H.inDragLayer==null&&H.addToList==null)&&k.cy().hasCompoundNodes()){var ee=k.ancestors().orphans();if(!ee.same(k)){var K=ee.descendants().spawnSelf().merge(ee).unmerge(k).unmerge(k.descendants()),Y=K.connectedEdges();H.inDragLayer&&(Y.forEach(u),K.forEach(u)),H.addToList&&K.forEach(function(Ee){h(Ee,H)})}}},g=function(){document.activeElement!=null&&document.activeElement.blur!=null&&document.activeElement.blur()},y=typeof MutationObserver<"u",_=typeof ResizeObserver<"u";y?(t.removeObserver=new MutationObserver(function(G){for(var k=0;k<G.length;k++){var H=G[k],ee=H.removedNodes;if(ee)for(var K=0;K<ee.length;K++){var Y=ee[K];if(Y===t.container){t.destroy();break}}}}),t.container.parentNode&&t.removeObserver.observe(t.container.parentNode,{childList:!0})):t.registerBinding(t.container,"DOMNodeRemoved",function(G){t.destroy()});var T=Wv.default(function(){t.cy.resize()},100);y&&(t.styleObserver=new MutationObserver(T),t.styleObserver.observe(t.container,{attributes:!0})),t.registerBinding(e,"resize",T),_&&(t.resizeObserver=new ResizeObserver(T),t.resizeObserver.observe(t.container));var b=function(k,H){for(;k!=null;)H(k),k=k.parentNode},E=function(){t.invalidateContainerClientCoordsCache()};b(t.container,function(G){t.registerBinding(G,"transitionend",E),t.registerBinding(G,"animationend",E),t.registerBinding(G,"scroll",E)}),t.registerBinding(t.container,"contextmenu",function(G){G.preventDefault()});var I=function(){return t.selection[4]!==0},S=function(k){for(var H=t.findContainerClientCoords(),ee=H[0],K=H[1],Y=H[2],Ee=H[3],Z=k.touches?k.touches:[k],ye=!1,Ce=0;Ce<Z.length;Ce++){var Ve=Z[Ce];if(ee<=Ve.clientX&&Ve.clientX<=ee+Y&&K<=Ve.clientY&&Ve.clientY<=K+Ee){ye=!0;break}}if(!ye)return!1;for(var Pe=t.container,Ue=k.target,De=Ue.parentNode,Le=!1;De;){if(De===Pe){Le=!0;break}De=De.parentNode}return!!Le};t.registerBinding(t.container,"mousedown",function(k){if(S(k)){k.preventDefault(),g(),t.hoverData.capture=!0,t.hoverData.which=k.which;var H=t.cy,ee=[k.clientX,k.clientY],K=t.projectIntoViewport(ee[0],ee[1]),Y=t.selection,Ee=t.findNearestElements(K[0],K[1],!0,!1),Z=Ee[0],ye=t.dragData.possibleDragElements;t.hoverData.mdownPos=K,t.hoverData.mdownGPos=ee;var Ce=function(){t.hoverData.tapholdCancelled=!1,clearTimeout(t.hoverData.tapholdTimeout),t.hoverData.tapholdTimeout=setTimeout(function(){if(!t.hoverData.tapholdCancelled){var yt=t.hoverData.down;yt?yt.emit({originalEvent:k,type:"taphold",position:{x:K[0],y:K[1]}}):H.emit({originalEvent:k,type:"taphold",position:{x:K[0],y:K[1]}})}},t.tapholdDuration)};if(k.which==3){t.hoverData.cxtStarted=!0;var Ve={originalEvent:k,type:"cxttapstart",position:{x:K[0],y:K[1]}};Z?(Z.activate(),Z.emit(Ve),t.hoverData.down=Z):H.emit(Ve),t.hoverData.downTime=new Date().getTime(),t.hoverData.cxtDragged=!1}else if(k.which==1){Z&&Z.activate();{if(Z!=null&&t.nodeIsGrabbable(Z)){var Pe=function(yt){return{originalEvent:k,type:yt,position:{x:K[0],y:K[1]}}},Ue=function(yt){yt.emit(Pe("grab"))};if(c(Z),!Z.selected())ye=t.dragData.possibleDragElements=H.collection(),w(Z,{addToList:ye}),Z.emit(Pe("grabon")).emit(Pe("grab"));else{ye=t.dragData.possibleDragElements=H.collection();var De=H.$(function(Le){return Le.isNode()&&Le.selected()&&t.nodeIsGrabbable(Le)});v(De,{addToList:ye}),Z.emit(Pe("grabon")),De.forEach(Ue)}t.redrawHint("eles",!0),t.redrawHint("drag",!0)}t.hoverData.down=Z,t.hoverData.downs=Ee,t.hoverData.downTime=new Date().getTime()}n(Z,["mousedown","tapstart","vmousedown"],k,{x:K[0],y:K[1]}),Z==null?(Y[4]=1,t.data.bgActivePosistion={x:K[0],y:K[1]},t.redrawHint("select",!0),t.redraw()):Z.pannable()&&(Y[4]=1),Ce()}Y[0]=Y[2]=K[0],Y[1]=Y[3]=K[1]}},!1),t.registerBinding(e,"mousemove",function(k){var H=t.hoverData.capture;if(!(!H&&!S(k))){var ee=!1,K=t.cy,Y=K.zoom(),Ee=[k.clientX,k.clientY],Z=t.projectIntoViewport(Ee[0],Ee[1]),ye=t.hoverData.mdownPos,Ce=t.hoverData.mdownGPos,Ve=t.selection,Pe=null;!t.hoverData.draggingEles&&!t.hoverData.dragging&&!t.hoverData.selecting&&(Pe=t.findNearestElement(Z[0],Z[1],!0,!1));var Ue=t.hoverData.last,De=t.hoverData.down,Le=[Z[0]-Ve[2],Z[1]-Ve[3]],yt=t.dragData.possibleDragElements,Ht;if(Ce){var dn=Ee[0]-Ce[0],vn=dn*dn,Gt=Ee[1]-Ce[1],en=Gt*Gt,br=vn+en;t.hoverData.isOverThresholdDrag=Ht=br>=t.desktopTapThreshold2}var ni=i(k);Ht&&(t.hoverData.tapholdCancelled=!0);var ki=function(){var Ln=t.hoverData.dragDelta=t.hoverData.dragDelta||[];Ln.length===0?(Ln.push(Le[0]),Ln.push(Le[1])):(Ln[0]+=Le[0],Ln[1]+=Le[1])};ee=!0,n(Pe,["mousemove","vmousemove","tapdrag"],k,{x:Z[0],y:Z[1]});var As=function(){t.data.bgActivePosistion=void 0,t.hoverData.selecting||K.emit({originalEvent:k,type:"boxstart",position:{x:Z[0],y:Z[1]}}),Ve[4]=1,t.hoverData.selecting=!0,t.redrawHint("select",!0),t.redraw()};if(t.hoverData.which===3){if(Ht){var Oa={originalEvent:k,type:"cxtdrag",position:{x:Z[0],y:Z[1]}};De?De.emit(Oa):K.emit(Oa),t.hoverData.cxtDragged=!0,(!t.hoverData.cxtOver||Pe!==t.hoverData.cxtOver)&&(t.hoverData.cxtOver&&t.hoverData.cxtOver.emit({originalEvent:k,type:"cxtdragout",position:{x:Z[0],y:Z[1]}}),t.hoverData.cxtOver=Pe,Pe&&Pe.emit({originalEvent:k,type:"cxtdragover",position:{x:Z[0],y:Z[1]}}))}}else if(t.hoverData.dragging){if(ee=!0,K.panningEnabled()&&K.userPanningEnabled()){var Ps;if(t.hoverData.justStartedPan){var ff=t.hoverData.mdownPos;Ps={x:(Z[0]-ff[0])*Y,y:(Z[1]-ff[1])*Y},t.hoverData.justStartedPan=!1}else Ps={x:Le[0]*Y,y:Le[1]*Y};K.panBy(Ps),K.emit("dragpan"),t.hoverData.dragged=!0}Z=t.projectIntoViewport(k.clientX,k.clientY)}else if(Ve[4]==1&&(De==null||De.pannable())){if(Ht){if(!t.hoverData.dragging&&K.boxSelectionEnabled()&&(ni||!K.panningEnabled()||!K.userPanningEnabled()))As();else if(!t.hoverData.selecting&&K.panningEnabled()&&K.userPanningEnabled()){var Na=a(De,t.hoverData.downs);Na&&(t.hoverData.dragging=!0,t.hoverData.justStartedPan=!0,Ve[4]=0,t.data.bgActivePosistion=ao(ye),t.redrawHint("select",!0),t.redraw())}De&&De.pannable()&&De.active()&&De.unactivate()}}else{if(De&&De.pannable()&&De.active()&&De.unactivate(),(!De||!De.grabbed())&&Pe!=Ue&&(Ue&&n(Ue,["mouseout","tapdragout"],k,{x:Z[0],y:Z[1]}),Pe&&n(Pe,["mouseover","tapdragover"],k,{x:Z[0],y:Z[1]}),t.hoverData.last=Pe),De)if(Ht){if(K.boxSelectionEnabled()&&ni)De&&De.grabbed()&&(m(yt),De.emit("freeon"),yt.emit("free"),t.dragData.didDrag&&(De.emit("dragfreeon"),yt.emit("dragfree"))),As();else if(De&&De.grabbed()&&t.nodeIsDraggable(De)){var Ar=!t.dragData.didDrag;Ar&&t.redrawHint("eles",!0),t.dragData.didDrag=!0,t.hoverData.draggingEles||v(yt,{inDragLayer:!0});var or={x:0,y:0};if(le(Le[0])&&le(Le[1])&&(or.x+=Le[0],or.y+=Le[1],Ar)){var Pr=t.hoverData.dragDelta;Pr&&le(Pr[0])&&le(Pr[1])&&(or.x+=Pr[0],or.y+=Pr[1])}t.hoverData.draggingEles=!0,yt.silentShift(or).emit("position drag"),t.redrawHint("drag",!0),t.redraw()}}else ki();ee=!0}if(Ve[2]=Z[0],Ve[3]=Z[1],ee)return k.stopPropagation&&k.stopPropagation(),k.preventDefault&&k.preventDefault(),!1}},!1);var C,R,x;t.registerBinding(e,"mouseup",function(k){var H=t.hoverData.capture;if(H){t.hoverData.capture=!1;var ee=t.cy,K=t.projectIntoViewport(k.clientX,k.clientY),Y=t.selection,Ee=t.findNearestElement(K[0],K[1],!0,!1),Z=t.dragData.possibleDragElements,ye=t.hoverData.down,Ce=i(k);if(t.data.bgActivePosistion&&(t.redrawHint("select",!0),t.redraw()),t.hoverData.tapholdCancelled=!0,t.data.bgActivePosistion=void 0,ye&&ye.unactivate(),t.hoverData.which===3){var Ve={originalEvent:k,type:"cxttapend",position:{x:K[0],y:K[1]}};if(ye?ye.emit(Ve):ee.emit(Ve),!t.hoverData.cxtDragged){var Pe={originalEvent:k,type:"cxttap",position:{x:K[0],y:K[1]}};ye?ye.emit(Pe):ee.emit(Pe)}t.hoverData.cxtDragged=!1,t.hoverData.which=null}else if(t.hoverData.which===1){if(n(Ee,["mouseup","tapend","vmouseup"],k,{x:K[0],y:K[1]}),!t.dragData.didDrag&&!t.hoverData.dragged&&!t.hoverData.selecting&&!t.hoverData.isOverThresholdDrag&&(n(ye,["click","tap","vclick"],k,{x:K[0],y:K[1]}),R=!1,k.timeStamp-x<=ee.multiClickDebounceTime()?(C&&clearTimeout(C),R=!0,x=null,n(ye,["dblclick","dbltap","vdblclick"],k,{x:K[0],y:K[1]})):(C=setTimeout(function(){R||n(ye,["oneclick","onetap","voneclick"],k,{x:K[0],y:K[1]})},ee.multiClickDebounceTime()),x=k.timeStamp)),ye==null&&!t.dragData.didDrag&&!t.hoverData.selecting&&!t.hoverData.dragged&&!i(k)&&(ee.$(r).unselect(["tapunselect"]),Z.length>0&&t.redrawHint("eles",!0),t.dragData.possibleDragElements=Z=ee.collection()),Ee==ye&&!t.dragData.didDrag&&!t.hoverData.selecting&&Ee!=null&&Ee._private.selectable&&(t.hoverData.dragging||(ee.selectionType()==="additive"||Ce?Ee.selected()?Ee.unselect(["tapunselect"]):Ee.select(["tapselect"]):Ce||(ee.$(r).unmerge(Ee).unselect(["tapunselect"]),Ee.select(["tapselect"]))),t.redrawHint("eles",!0)),t.hoverData.selecting){var Ue=ee.collection(t.getAllInBox(Y[0],Y[1],Y[2],Y[3]));t.redrawHint("select",!0),Ue.length>0&&t.redrawHint("eles",!0),ee.emit({type:"boxend",originalEvent:k,position:{x:K[0],y:K[1]}});var De=function(Ht){return Ht.selectable()&&!Ht.selected()};ee.selectionType()==="additive"||Ce||ee.$(r).unmerge(Ue).unselect(),Ue.emit("box").stdFilter(De).select().emit("boxselect"),t.redraw()}if(t.hoverData.dragging&&(t.hoverData.dragging=!1,t.redrawHint("select",!0),t.redrawHint("eles",!0),t.redraw()),!Y[4]){t.redrawHint("drag",!0),t.redrawHint("eles",!0);var Le=ye&&ye.grabbed();m(Z),Le&&(ye.emit("freeon"),Z.emit("free"),t.dragData.didDrag&&(ye.emit("dragfreeon"),Z.emit("dragfree")))}}Y[4]=0,t.hoverData.down=null,t.hoverData.cxtStarted=!1,t.hoverData.draggingEles=!1,t.hoverData.selecting=!1,t.hoverData.isOverThresholdDrag=!1,t.dragData.didDrag=!1,t.hoverData.dragged=!1,t.hoverData.dragDelta=[],t.hoverData.mdownPos=null,t.hoverData.mdownGPos=null}},!1);var P=function(k){if(!t.scrollingPage){var H=t.cy,ee=H.zoom(),K=H.pan(),Y=t.projectIntoViewport(k.clientX,k.clientY),Ee=[Y[0]*ee+K.x,Y[1]*ee+K.y];if(t.hoverData.draggingEles||t.hoverData.dragging||t.hoverData.cxtStarted||I()){k.preventDefault();return}if(H.panningEnabled()&&H.userPanningEnabled()&&H.zoomingEnabled()&&H.userZoomingEnabled()){k.preventDefault(),t.data.wheelZooming=!0,clearTimeout(t.data.wheelTimeout),t.data.wheelTimeout=setTimeout(function(){t.data.wheelZooming=!1,t.redrawHint("eles",!0),t.redraw()},150);var Z;k.deltaY!=null?Z=k.deltaY/-250:k.wheelDeltaY!=null?Z=k.wheelDeltaY/1e3:Z=k.wheelDelta/1e3,Z=Z*t.wheelSensitivity;var ye=k.deltaMode===1;ye&&(Z*=33);var Ce=H.zoom()*Math.pow(10,Z);k.type==="gesturechange"&&(Ce=t.gestureStartZoom*k.scale),H.zoom({level:Ce,renderedPosition:{x:Ee[0],y:Ee[1]}}),H.emit(k.type==="gesturechange"?"pinchzoom":"scrollzoom")}}};t.registerBinding(t.container,"wheel",P,!0),t.registerBinding(e,"scroll",function(k){t.scrollingPage=!0,clearTimeout(t.scrollingPageTimeout),t.scrollingPageTimeout=setTimeout(function(){t.scrollingPage=!1},250)},!0),t.registerBinding(t.container,"gesturestart",function(k){t.gestureStartZoom=t.cy.zoom(),t.hasTouchStarted||k.preventDefault()},!0),t.registerBinding(t.container,"gesturechange",function(G){t.hasTouchStarted||P(G)},!0),t.registerBinding(t.container,"mouseout",function(k){var H=t.projectIntoViewport(k.clientX,k.clientY);t.cy.emit({originalEvent:k,type:"mouseout",position:{x:H[0],y:H[1]}})},!1),t.registerBinding(t.container,"mouseover",function(k){var H=t.projectIntoViewport(k.clientX,k.clientY);t.cy.emit({originalEvent:k,type:"mouseover",position:{x:H[0],y:H[1]}})},!1);var A,F,O,L,D,$,z,B,j,Q,N,M,q,V=function(k,H,ee,K){return Math.sqrt((ee-k)*(ee-k)+(K-H)*(K-H))},W=function(k,H,ee,K){return(ee-k)*(ee-k)+(K-H)*(K-H)},X;t.registerBinding(t.container,"touchstart",X=function(k){if(t.hasTouchStarted=!0,!!S(k)){g(),t.touchData.capture=!0,t.data.bgActivePosistion=void 0;var H=t.cy,ee=t.touchData.now,K=t.touchData.earlier;if(k.touches[0]){var Y=t.projectIntoViewport(k.touches[0].clientX,k.touches[0].clientY);ee[0]=Y[0],ee[1]=Y[1]}if(k.touches[1]){var Y=t.projectIntoViewport(k.touches[1].clientX,k.touches[1].clientY);ee[2]=Y[0],ee[3]=Y[1]}if(k.touches[2]){var Y=t.projectIntoViewport(k.touches[2].clientX,k.touches[2].clientY);ee[4]=Y[0],ee[5]=Y[1]}if(k.touches[1]){t.touchData.singleTouchMoved=!0,m(t.dragData.touchDragEles);var Ee=t.findContainerClientCoords();j=Ee[0],Q=Ee[1],N=Ee[2],M=Ee[3],A=k.touches[0].clientX-j,F=k.touches[0].clientY-Q,O=k.touches[1].clientX-j,L=k.touches[1].clientY-Q,q=0<=A&&A<=N&&0<=O&&O<=N&&0<=F&&F<=M&&0<=L&&L<=M;var Z=H.pan(),ye=H.zoom();D=V(A,F,O,L),$=W(A,F,O,L),z=[(A+O)/2,(F+L)/2],B=[(z[0]-Z.x)/ye,(z[1]-Z.y)/ye];var Ce=200,Ve=Ce*Ce;if($<Ve&&!k.touches[2]){var Pe=t.findNearestElement(ee[0],ee[1],!0,!0),Ue=t.findNearestElement(ee[2],ee[3],!0,!0);Pe&&Pe.isNode()?(Pe.activate().emit({originalEvent:k,type:"cxttapstart",position:{x:ee[0],y:ee[1]}}),t.touchData.start=Pe):Ue&&Ue.isNode()?(Ue.activate().emit({originalEvent:k,type:"cxttapstart",position:{x:ee[0],y:ee[1]}}),t.touchData.start=Ue):H.emit({originalEvent:k,type:"cxttapstart",position:{x:ee[0],y:ee[1]}}),t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxt=!0,t.touchData.cxtDragged=!1,t.data.bgActivePosistion=void 0,t.redraw();return}}if(k.touches[2])H.boxSelectionEnabled()&&k.preventDefault();else if(!k.touches[1]){if(k.touches[0]){var De=t.findNearestElements(ee[0],ee[1],!0,!0),Le=De[0];if(Le!=null&&(Le.activate(),t.touchData.start=Le,t.touchData.starts=De,t.nodeIsGrabbable(Le))){var yt=t.dragData.touchDragEles=H.collection(),Ht=null;t.redrawHint("eles",!0),t.redrawHint("drag",!0),Le.selected()?(Ht=H.$(function(br){return br.selected()&&t.nodeIsGrabbable(br)}),v(Ht,{addToList:yt})):w(Le,{addToList:yt}),c(Le);var dn=function(ni){return{originalEvent:k,type:ni,position:{x:ee[0],y:ee[1]}}};Le.emit(dn("grabon")),Ht?Ht.forEach(function(br){br.emit(dn("grab"))}):Le.emit(dn("grab"))}n(Le,["touchstart","tapstart","vmousedown"],k,{x:ee[0],y:ee[1]}),Le==null&&(t.data.bgActivePosistion={x:Y[0],y:Y[1]},t.redrawHint("select",!0),t.redraw()),t.touchData.singleTouchMoved=!1,t.touchData.singleTouchStartTime=+new Date,clearTimeout(t.touchData.tapholdTimeout),t.touchData.tapholdTimeout=setTimeout(function(){t.touchData.singleTouchMoved===!1&&!t.pinching&&!t.touchData.selecting&&n(t.touchData.start,["taphold"],k,{x:ee[0],y:ee[1]})},t.tapholdDuration)}}if(k.touches.length>=1){for(var vn=t.touchData.startPosition=[null,null,null,null,null,null],Gt=0;Gt<ee.length;Gt++)vn[Gt]=K[Gt]=ee[Gt];var en=k.touches[0];t.touchData.startGPosition=[en.clientX,en.clientY]}}},!1);var J;t.registerBinding(window,"touchmove",J=function(k){var H=t.touchData.capture;if(!(!H&&!S(k))){var ee=t.selection,K=t.cy,Y=t.touchData.now,Ee=t.touchData.earlier,Z=K.zoom();if(k.touches[0]){var ye=t.projectIntoViewport(k.touches[0].clientX,k.touches[0].clientY);Y[0]=ye[0],Y[1]=ye[1]}if(k.touches[1]){var ye=t.projectIntoViewport(k.touches[1].clientX,k.touches[1].clientY);Y[2]=ye[0],Y[3]=ye[1]}if(k.touches[2]){var ye=t.projectIntoViewport(k.touches[2].clientX,k.touches[2].clientY);Y[4]=ye[0],Y[5]=ye[1]}var Ce=t.touchData.startGPosition,Ve;if(H&&k.touches[0]&&Ce){for(var Pe=[],Ue=0;Ue<Y.length;Ue++)Pe[Ue]=Y[Ue]-Ee[Ue];var De=k.touches[0].clientX-Ce[0],Le=De*De,yt=k.touches[0].clientY-Ce[1],Ht=yt*yt,dn=Le+Ht;Ve=dn>=t.touchTapThreshold2}if(H&&t.touchData.cxt){k.preventDefault();var vn=k.touches[0].clientX-j,Gt=k.touches[0].clientY-Q,en=k.touches[1].clientX-j,br=k.touches[1].clientY-Q,ni=W(vn,Gt,en,br),ki=ni/$,As=150,Oa=As*As,Ps=1.5,ff=Ps*Ps;if(ki>=ff||ni>=Oa){t.touchData.cxt=!1,t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var Na={originalEvent:k,type:"cxttapend",position:{x:Y[0],y:Y[1]}};t.touchData.start?(t.touchData.start.unactivate().emit(Na),t.touchData.start=null):K.emit(Na)}}if(H&&t.touchData.cxt){var Na={originalEvent:k,type:"cxtdrag",position:{x:Y[0],y:Y[1]}};t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),t.touchData.start?t.touchData.start.emit(Na):K.emit(Na),t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxtDragged=!0;var Ar=t.findNearestElement(Y[0],Y[1],!0,!0);(!t.touchData.cxtOver||Ar!==t.touchData.cxtOver)&&(t.touchData.cxtOver&&t.touchData.cxtOver.emit({originalEvent:k,type:"cxtdragout",position:{x:Y[0],y:Y[1]}}),t.touchData.cxtOver=Ar,Ar&&Ar.emit({originalEvent:k,type:"cxtdragover",position:{x:Y[0],y:Y[1]}}))}else if(H&&k.touches[2]&&K.boxSelectionEnabled())k.preventDefault(),t.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,t.touchData.selecting||K.emit({originalEvent:k,type:"boxstart",position:{x:Y[0],y:Y[1]}}),t.touchData.selecting=!0,t.touchData.didSelect=!0,ee[4]=1,!ee||ee.length===0||ee[0]===void 0?(ee[0]=(Y[0]+Y[2]+Y[4])/3,ee[1]=(Y[1]+Y[3]+Y[5])/3,ee[2]=(Y[0]+Y[2]+Y[4])/3+1,ee[3]=(Y[1]+Y[3]+Y[5])/3+1):(ee[2]=(Y[0]+Y[2]+Y[4])/3,ee[3]=(Y[1]+Y[3]+Y[5])/3),t.redrawHint("select",!0),t.redraw();else if(H&&k.touches[1]&&!t.touchData.didSelect&&K.zoomingEnabled()&&K.panningEnabled()&&K.userZoomingEnabled()&&K.userPanningEnabled()){k.preventDefault(),t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var or=t.dragData.touchDragEles;if(or){t.redrawHint("drag",!0);for(var Pr=0;Pr<or.length;Pr++){var hf=or[Pr]._private;hf.grabbed=!1,hf.rscratch.inDragLayer=!1}}var Ln=t.touchData.start,vn=k.touches[0].clientX-j,Gt=k.touches[0].clientY-Q,en=k.touches[1].clientX-j,br=k.touches[1].clientY-Q,Ib=V(vn,Gt,en,br),TB=Ib/D;if(q){var bB=vn-A,SB=Gt-F,IB=en-O,CB=br-L,xB=(bB+IB)/2,RB=(SB+CB)/2,Tu=K.zoom(),hp=Tu*TB,df=K.pan(),Cb=B[0]*Tu+df.x,xb=B[1]*Tu+df.y,kB={x:-hp/Tu*(Cb-df.x-xB)+Cb,y:-hp/Tu*(xb-df.y-RB)+xb};if(Ln&&Ln.active()){var or=t.dragData.touchDragEles;m(or),t.redrawHint("drag",!0),t.redrawHint("eles",!0),Ln.unactivate().emit("freeon"),or.emit("free"),t.dragData.didDrag&&(Ln.emit("dragfreeon"),or.emit("dragfree"))}K.viewport({zoom:hp,pan:kB,cancelOnFailedZoom:!0}),K.emit("pinchzoom"),D=Ib,A=vn,F=Gt,O=en,L=br,t.pinching=!0}if(k.touches[0]){var ye=t.projectIntoViewport(k.touches[0].clientX,k.touches[0].clientY);Y[0]=ye[0],Y[1]=ye[1]}if(k.touches[1]){var ye=t.projectIntoViewport(k.touches[1].clientX,k.touches[1].clientY);Y[2]=ye[0],Y[3]=ye[1]}if(k.touches[2]){var ye=t.projectIntoViewport(k.touches[2].clientX,k.touches[2].clientY);Y[4]=ye[0],Y[5]=ye[1]}}else if(k.touches[0]&&!t.touchData.didSelect){var pn=t.touchData.start,dp=t.touchData.last,Ar;if(!t.hoverData.draggingEles&&!t.swipePanning&&(Ar=t.findNearestElement(Y[0],Y[1],!0,!0)),H&&pn!=null&&k.preventDefault(),H&&pn!=null&&t.nodeIsDraggable(pn))if(Ve){var or=t.dragData.touchDragEles,Rb=!t.dragData.didDrag;Rb&&v(or,{inDragLayer:!0}),t.dragData.didDrag=!0;var bu={x:0,y:0};if(le(Pe[0])&&le(Pe[1])&&(bu.x+=Pe[0],bu.y+=Pe[1],Rb)){t.redrawHint("eles",!0);var gn=t.touchData.dragDelta;gn&&le(gn[0])&&le(gn[1])&&(bu.x+=gn[0],bu.y+=gn[1])}t.hoverData.draggingEles=!0,or.silentShift(bu).emit("position drag"),t.redrawHint("drag",!0),t.touchData.startPosition[0]==Ee[0]&&t.touchData.startPosition[1]==Ee[1]&&t.redrawHint("eles",!0),t.redraw()}else{var gn=t.touchData.dragDelta=t.touchData.dragDelta||[];gn.length===0?(gn.push(Pe[0]),gn.push(Pe[1])):(gn[0]+=Pe[0],gn[1]+=Pe[1])}if(n(pn||Ar,["touchmove","tapdrag","vmousemove"],k,{x:Y[0],y:Y[1]}),(!pn||!pn.grabbed())&&Ar!=dp&&(dp&&dp.emit({originalEvent:k,type:"tapdragout",position:{x:Y[0],y:Y[1]}}),Ar&&Ar.emit({originalEvent:k,type:"tapdragover",position:{x:Y[0],y:Y[1]}})),t.touchData.last=Ar,H)for(var Pr=0;Pr<Y.length;Pr++)Y[Pr]&&t.touchData.startPosition[Pr]&&Ve&&(t.touchData.singleTouchMoved=!0);if(H&&(pn==null||pn.pannable())&&K.panningEnabled()&&K.userPanningEnabled()){var AB=a(pn,t.touchData.starts);AB&&(k.preventDefault(),t.data.bgActivePosistion||(t.data.bgActivePosistion=ao(t.touchData.startPosition)),t.swipePanning?(K.panBy({x:Pe[0]*Z,y:Pe[1]*Z}),K.emit("dragpan")):Ve&&(t.swipePanning=!0,K.panBy({x:De*Z,y:yt*Z}),K.emit("dragpan"),pn&&(pn.unactivate(),t.redrawHint("select",!0),t.touchData.start=null)));var ye=t.projectIntoViewport(k.touches[0].clientX,k.touches[0].clientY);Y[0]=ye[0],Y[1]=ye[1]}}for(var Ue=0;Ue<Y.length;Ue++)Ee[Ue]=Y[Ue];H&&k.touches.length>0&&!t.hoverData.draggingEles&&!t.swipePanning&&t.data.bgActivePosistion!=null&&(t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),t.redraw())}},!1);var ae;t.registerBinding(e,"touchcancel",ae=function(k){var H=t.touchData.start;t.touchData.capture=!1,H&&H.unactivate()});var ve,_e,se,te;if(t.registerBinding(e,"touchend",ve=function(k){var H=t.touchData.start,ee=t.touchData.capture;if(ee)k.touches.length===0&&(t.touchData.capture=!1),k.preventDefault();else return;var K=t.selection;t.swipePanning=!1,t.hoverData.draggingEles=!1;var Y=t.cy,Ee=Y.zoom(),Z=t.touchData.now,ye=t.touchData.earlier;if(k.touches[0]){var Ce=t.projectIntoViewport(k.touches[0].clientX,k.touches[0].clientY);Z[0]=Ce[0],Z[1]=Ce[1]}if(k.touches[1]){var Ce=t.projectIntoViewport(k.touches[1].clientX,k.touches[1].clientY);Z[2]=Ce[0],Z[3]=Ce[1]}if(k.touches[2]){var Ce=t.projectIntoViewport(k.touches[2].clientX,k.touches[2].clientY);Z[4]=Ce[0],Z[5]=Ce[1]}H&&H.unactivate();var Ve;if(t.touchData.cxt){if(Ve={originalEvent:k,type:"cxttapend",position:{x:Z[0],y:Z[1]}},H?H.emit(Ve):Y.emit(Ve),!t.touchData.cxtDragged){var Pe={originalEvent:k,type:"cxttap",position:{x:Z[0],y:Z[1]}};H?H.emit(Pe):Y.emit(Pe)}t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxt=!1,t.touchData.start=null,t.redraw();return}if(!k.touches[2]&&Y.boxSelectionEnabled()&&t.touchData.selecting){t.touchData.selecting=!1;var Ue=Y.collection(t.getAllInBox(K[0],K[1],K[2],K[3]));K[0]=void 0,K[1]=void 0,K[2]=void 0,K[3]=void 0,K[4]=0,t.redrawHint("select",!0),Y.emit({type:"boxend",originalEvent:k,position:{x:Z[0],y:Z[1]}});var De=function(Oa){return Oa.selectable()&&!Oa.selected()};Ue.emit("box").stdFilter(De).select().emit("boxselect"),Ue.nonempty()&&t.redrawHint("eles",!0),t.redraw()}if(H!=null&&H.unactivate(),k.touches[2])t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);else if(!k.touches[1]){if(!k.touches[0]){if(!k.touches[0]){t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var Le=t.dragData.touchDragEles;if(H!=null){var yt=H._private.grabbed;m(Le),t.redrawHint("drag",!0),t.redrawHint("eles",!0),yt&&(H.emit("freeon"),Le.emit("free"),t.dragData.didDrag&&(H.emit("dragfreeon"),Le.emit("dragfree"))),n(H,["touchend","tapend","vmouseup","tapdragout"],k,{x:Z[0],y:Z[1]}),H.unactivate(),t.touchData.start=null}else{var Ht=t.findNearestElement(Z[0],Z[1],!0,!0);n(Ht,["touchend","tapend","vmouseup","tapdragout"],k,{x:Z[0],y:Z[1]})}var dn=t.touchData.startPosition[0]-Z[0],vn=dn*dn,Gt=t.touchData.startPosition[1]-Z[1],en=Gt*Gt,br=vn+en,ni=br*Ee*Ee;t.touchData.singleTouchMoved||(H||Y.$(":selected").unselect(["tapunselect"]),n(H,["tap","vclick"],k,{x:Z[0],y:Z[1]}),_e=!1,k.timeStamp-te<=Y.multiClickDebounceTime()?(se&&clearTimeout(se),_e=!0,te=null,n(H,["dbltap","vdblclick"],k,{x:Z[0],y:Z[1]})):(se=setTimeout(function(){_e||n(H,["onetap","voneclick"],k,{x:Z[0],y:Z[1]})},Y.multiClickDebounceTime()),te=k.timeStamp)),H!=null&&!t.dragData.didDrag&&H._private.selectable&&ni<t.touchTapThreshold2&&!t.pinching&&(Y.selectionType()==="single"?(Y.$(r).unmerge(H).unselect(["tapunselect"]),H.select(["tapselect"])):H.selected()?H.unselect(["tapunselect"]):H.select(["tapselect"]),t.redrawHint("eles",!0)),t.touchData.singleTouchMoved=!0}}}for(var ki=0;ki<Z.length;ki++)ye[ki]=Z[ki];t.dragData.didDrag=!1,k.touches.length===0&&(t.touchData.dragDelta=[],t.touchData.startPosition=[null,null,null,null,null,null],t.touchData.startGPosition=null,t.touchData.didSelect=!1),k.touches.length<2&&(k.touches.length===1&&(t.touchData.startGPosition=[k.touches[0].clientX,k.touches[0].clientY]),t.pinching=!1,t.redrawHint("eles",!0),t.redraw())},!1),typeof TouchEvent>"u"){var me=[],ue=function(k){return{clientX:k.clientX,clientY:k.clientY,force:1,identifier:k.pointerId,pageX:k.pageX,pageY:k.pageY,radiusX:k.width/2,radiusY:k.height/2,screenX:k.screenX,screenY:k.screenY,target:k.target}},he=function(k){return{event:k,touch:ue(k)}},we=function(k){me.push(he(k))},Fe=function(k){for(var H=0;H<me.length;H++){var ee=me[H];if(ee.event.pointerId===k.pointerId){me.splice(H,1);return}}},Ae=function(k){var H=me.filter(function(ee){return ee.event.pointerId===k.pointerId})[0];H.event=k,H.touch=ue(k)},be=function(k){k.touches=me.map(function(H){return H.touch})},Se=function(k){return k.pointerType==="mouse"||k.pointerType===4};t.registerBinding(t.container,"pointerdown",function(G){Se(G)||(G.preventDefault(),we(G),be(G),X(G))}),t.registerBinding(t.container,"pointerup",function(G){Se(G)||(Fe(G),be(G),ve(G))}),t.registerBinding(t.container,"pointercancel",function(G){Se(G)||(Fe(G),be(G),ae(G))}),t.registerBinding(t.container,"pointermove",function(G){Se(G)||(G.preventDefault(),Ae(G),be(G),J(G))})}};var Ii={};Ii.generatePolygon=function(t,e){return this.nodeShapes[t]={renderer:this,name:t,points:e,draw:function(n,i,a,s,o){this.renderer.nodeShapeImpl("polygon",n,i,a,s,o,this.points)},intersectLine:function(n,i,a,s,o,u,l){return mc(o,u,this.points,n,i,a/2,s/2,l)},checkPoint:function(n,i,a,s,o,u,l){return Ei(n,i,this.points,u,l,s,o,[0,-1],a)}}};Ii.generateEllipse=function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(e,r,n,i,a){this.renderer.nodeShapeImpl(this.name,e,r,n,i,a)},intersectLine:function(e,r,n,i,a,s,o){return EY(a,s,e,r,n/2+o,i/2+o)},checkPoint:function(e,r,n,i,a,s,o){return Ka(e,r,i,a,s,o,n)}}};Ii.generateRoundPolygon=function(t,e){for(var r=new Array(e.length*2),n=0;n<e.length/2;n++){var i=n*2,a=void 0;n<e.length/2-1?a=(n+1)*2:a=0,r[n*4]=e[i],r[n*4+1]=e[i+1];var s=e[a]-e[i],o=e[a+1]-e[i+1],u=Math.sqrt(s*s+o*o);r[n*4+2]=s/u,r[n*4+3]=o/u}return this.nodeShapes[t]={renderer:this,name:t,points:r,draw:function(c,f,h,d,v){this.renderer.nodeShapeImpl("round-polygon",c,f,h,d,v,this.points)},intersectLine:function(c,f,h,d,v,w,m){return TY(v,w,this.points,c,f,h,d)},checkPoint:function(c,f,h,d,v,w,m){return _Y(c,f,this.points,w,m,d,v)}}};Ii.generateRoundRectangle=function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:Sr(4,0),draw:function(e,r,n,i,a){this.renderer.nodeShapeImpl(this.name,e,r,n,i,a)},intersectLine:function(e,r,n,i,a,s,o){return mV(a,s,e,r,n,i,o)},checkPoint:function(e,r,n,i,a,s,o){var u=tf(i,a),l=u*2;return!!(Ei(e,r,this.points,s,o,i,a-l,[0,-1],n)||Ei(e,r,this.points,s,o,i-l,a,[0,-1],n)||Ka(e,r,l,l,s-i/2+u,o-a/2+u,n)||Ka(e,r,l,l,s+i/2-u,o-a/2+u,n)||Ka(e,r,l,l,s+i/2-u,o+a/2-u,n)||Ka(e,r,l,l,s-i/2+u,o+a/2-u,n))}}};Ii.generateCutRectangle=function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:wV(),points:Sr(4,0),draw:function(e,r,n,i,a){this.renderer.nodeShapeImpl(this.name,e,r,n,i,a)},generateCutTrianglePts:function(e,r,n,i){var a=this.cornerLength,s=r/2,o=e/2,u=n-o,l=n+o,c=i-s,f=i+s;return{topLeft:[u,c+a,u+a,c,u+a,c+a],topRight:[l-a,c,l,c+a,l-a,c+a],bottomRight:[l,f-a,l-a,f,l-a,f-a],bottomLeft:[u+a,f,u,f-a,u+a,f-a]}},intersectLine:function(e,r,n,i,a,s,o){var u=this.generateCutTrianglePts(n+2*o,i+2*o,e,r),l=[].concat.apply([],[u.topLeft.splice(0,4),u.topRight.splice(0,4),u.bottomRight.splice(0,4),u.bottomLeft.splice(0,4)]);return mc(a,s,l,e,r)},checkPoint:function(e,r,n,i,a,s,o){if(Ei(e,r,this.points,s,o,i,a-2*this.cornerLength,[0,-1],n)||Ei(e,r,this.points,s,o,i-2*this.cornerLength,a,[0,-1],n))return!0;var u=this.generateCutTrianglePts(i,a,s,o);return Or(e,r,u.topLeft)||Or(e,r,u.topRight)||Or(e,r,u.bottomRight)||Or(e,r,u.bottomLeft)}}};Ii.generateBarrel=function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:Sr(4,0),draw:function(e,r,n,i,a){this.renderer.nodeShapeImpl(this.name,e,r,n,i,a)},intersectLine:function(e,r,n,i,a,s,o){var u=.15,l=.5,c=.85,f=this.generateBarrelBezierPts(n+2*o,i+2*o,e,r),h=function(w){var m=wo({x:w[0],y:w[1]},{x:w[2],y:w[3]},{x:w[4],y:w[5]},u),p=wo({x:w[0],y:w[1]},{x:w[2],y:w[3]},{x:w[4],y:w[5]},l),g=wo({x:w[0],y:w[1]},{x:w[2],y:w[3]},{x:w[4],y:w[5]},c);return[w[0],w[1],m.x,m.y,p.x,p.y,g.x,g.y,w[4],w[5]]},d=[].concat(h(f.topLeft),h(f.topRight),h(f.bottomRight),h(f.bottomLeft));return mc(a,s,d,e,r)},generateBarrelBezierPts:function(e,r,n,i){var a=r/2,s=e/2,o=n-s,u=n+s,l=i-a,c=i+a,f=a_(e,r),h=f.heightOffset,d=f.widthOffset,v=f.ctrlPtOffsetPct*e,w={topLeft:[o,l+h,o+v,l,o+d,l],topRight:[u-d,l,u-v,l,u,l+h],bottomRight:[u,c-h,u-v,c,u-d,c],bottomLeft:[o+d,c,o+v,c,o,c-h]};return w.topLeft.isTop=!0,w.topRight.isTop=!0,w.bottomLeft.isBottom=!0,w.bottomRight.isBottom=!0,w},checkPoint:function(e,r,n,i,a,s,o){var u=a_(i,a),l=u.heightOffset,c=u.widthOffset;if(Ei(e,r,this.points,s,o,i,a-2*l,[0,-1],n)||Ei(e,r,this.points,s,o,i-2*c,a,[0,-1],n))return!0;for(var f=this.generateBarrelBezierPts(i,a,s,o),h=function(E,I,S){var C=S[4],R=S[2],x=S[0],P=S[5],A=S[1],F=Math.min(C,x),O=Math.max(C,x),L=Math.min(P,A),D=Math.max(P,A);if(F<=E&&E<=O&&L<=I&&I<=D){var $=bY(C,R,x),z=gY($[0],$[1],$[2],E),B=z.filter(function(j){return 0<=j&&j<=1});if(B.length>0)return B[0]}return null},d=Object.keys(f),v=0;v<d.length;v++){var w=d[v],m=f[w],p=h(e,r,m);if(p!=null){var g=m[5],y=m[3],_=m[1],T=qt(g,y,_,p);if(m.isTop&&T<=r||m.isBottom&&r<=T)return!0}}return!1}}};Ii.generateBottomRoundrectangle=function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:Sr(4,0),draw:function(e,r,n,i,a){this.renderer.nodeShapeImpl(this.name,e,r,n,i,a)},intersectLine:function(e,r,n,i,a,s,o){var u=e-(n/2+o),l=r-(i/2+o),c=l,f=e+(n/2+o),h=Gi(a,s,e,r,u,l,f,c,!1);return h.length>0?h:mV(a,s,e,r,n,i,o)},checkPoint:function(e,r,n,i,a,s,o){var u=tf(i,a),l=2*u;if(Ei(e,r,this.points,s,o,i,a-l,[0,-1],n)||Ei(e,r,this.points,s,o,i-l,a,[0,-1],n))return!0;var c=i/2+2*n,f=a/2+2*n,h=[s-c,o-f,s-c,o,s+c,o,s+c,o-f];return!!(Or(e,r,h)||Ka(e,r,l,l,s+i/2-u,o+a/2-u,n)||Ka(e,r,l,l,s-i/2+u,o+a/2-u,n))}}};Ii.registerNodeShapes=function(){var t=this.nodeShapes={},e=this;this.generateEllipse(),this.generatePolygon("triangle",Sr(3,0)),this.generateRoundPolygon("round-triangle",Sr(3,0)),this.generatePolygon("rectangle",Sr(4,0)),t.square=t.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();{var r=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",r),this.generateRoundPolygon("round-diamond",r)}this.generatePolygon("pentagon",Sr(5,0)),this.generateRoundPolygon("round-pentagon",Sr(5,0)),this.generatePolygon("hexagon",Sr(6,0)),this.generateRoundPolygon("round-hexagon",Sr(6,0)),this.generatePolygon("heptagon",Sr(7,0)),this.generateRoundPolygon("round-heptagon",Sr(7,0)),this.generatePolygon("octagon",Sr(8,0)),this.generateRoundPolygon("round-octagon",Sr(8,0));var n=new Array(20);{var i=i_(5,0),a=i_(5,Math.PI/5),s=.5*(3-Math.sqrt(5));s*=1.57;for(var o=0;o<a.length/2;o++)a[o*2]*=s,a[o*2+1]*=s;for(var o=0;o<20/4;o++)n[o*4]=i[o*2],n[o*4+1]=i[o*2+1],n[o*4+2]=a[o*2],n[o*4+3]=a[o*2+1]}n=yV(n),this.generatePolygon("star",n),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.generatePolygon("right-rhomboid",[-.333,-1,1,-1,.333,1,-1,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);{var u=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",u),this.generateRoundPolygon("round-tag",u)}t.makePolygon=function(l){var c=l.join("$"),f="polygon-"+c,h;return(h=this[f])?h:e.generatePolygon(f,l)}};var sf={};sf.timeToRender=function(){return this.redrawTotalTime/this.redrawCount};sf.redraw=function(t){t=t||hV();var e=this;e.averageRedrawTime===void 0&&(e.averageRedrawTime=0),e.lastRedrawTime===void 0&&(e.lastRedrawTime=0),e.lastDrawTime===void 0&&(e.lastDrawTime=0),e.requestedFrame=!0,e.renderOptions=t};sf.beforeRender=function(t,e){if(!this.destroyed){e==null&&_t("Priority is not optional for beforeRender");var r=this.beforeRenderCallbacks;r.push({fn:t,priority:e}),r.sort(function(n,i){return i.priority-n.priority})}};var Ax=function(e,r,n){for(var i=e.beforeRenderCallbacks,a=0;a<i.length;a++)i[a].fn(r,n)};sf.startRenderLoop=function(){var t=this,e=t.cy;if(!t.renderLoopStarted){t.renderLoopStarted=!0;var r=function n(i){if(!t.destroyed){if(!e.batching())if(t.requestedFrame&&!t.skipFrame){Ax(t,!0,i);var a=_i();t.render(t.renderOptions);var s=t.lastDrawTime=_i();t.averageRedrawTime===void 0&&(t.averageRedrawTime=s-a),t.redrawCount===void 0&&(t.redrawCount=0),t.redrawCount++,t.redrawTotalTime===void 0&&(t.redrawTotalTime=0);var o=s-a;t.redrawTotalTime+=o,t.lastRedrawTime=o,t.averageRedrawTime=t.averageRedrawTime/2+o/2,t.requestedFrame=!1}else Ax(t,!1,i);t.skipFrame=!1,Td(n)}};Td(r)}};var QJ=function(e){this.init(e)},oF=QJ,yu=oF.prototype;yu.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"];yu.init=function(t){var e=this;e.options=t,e.cy=t.cy;var r=e.container=t.cy.container(),n=e.cy.window();if(n){var i=n.document,a=i.head,s="__________cytoscape_stylesheet",o="__________cytoscape_container",u=i.getElementById(s)!=null;if(r.className.indexOf(o)<0&&(r.className=(r.className||"")+" "+o),!u){var l=i.createElement("style");l.id=s,l.textContent="."+o+" { position: relative; }",a.insertBefore(l,a.children[0])}var c=n.getComputedStyle(r),f=c.getPropertyValue("position");f==="static"&&Xe("A Cytoscape container has style position:static and so can not use UI extensions properly")}e.selection=[void 0,void 0,void 0,void 0,0],e.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],e.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},e.dragData={possibleDragElements:[]},e.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},e.redraws=0,e.showFps=t.showFps,e.debug=t.debug,e.hideEdgesOnViewport=t.hideEdgesOnViewport,e.textureOnViewport=t.textureOnViewport,e.wheelSensitivity=t.wheelSensitivity,e.motionBlurEnabled=t.motionBlur,e.forcedPixelRatio=le(t.pixelRatio)?t.pixelRatio:null,e.motionBlur=t.motionBlur,e.motionBlurOpacity=t.motionBlurOpacity,e.motionBlurTransparency=1-e.motionBlurOpacity,e.motionBlurPxRatio=1,e.mbPxRBlurry=1,e.minMbLowQualFrames=4,e.fullQualityMb=!1,e.clearedForMotionBlur=[],e.desktopTapThreshold=t.desktopTapThreshold,e.desktopTapThreshold2=t.desktopTapThreshold*t.desktopTapThreshold,e.touchTapThreshold=t.touchTapThreshold,e.touchTapThreshold2=t.touchTapThreshold*t.touchTapThreshold,e.tapholdDuration=500,e.bindings=[],e.beforeRenderCallbacks=[],e.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},e.registerNodeShapes(),e.registerArrowShapes(),e.registerCalculationListeners()};yu.notify=function(t,e){var r=this,n=r.cy;if(!this.destroyed){if(t==="init"){r.load();return}if(t==="destroy"){r.destroy();return}(t==="add"||t==="remove"||t==="move"&&n.hasCompoundNodes()||t==="load"||t==="zorder"||t==="mount")&&r.invalidateCachedZSortedEles(),t==="viewport"&&r.redrawHint("select",!0),(t==="load"||t==="resize"||t==="mount")&&(r.invalidateContainerClientCoordsCache(),r.matchCanvasSize(r.container)),r.redrawHint("eles",!0),r.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()}};yu.destroy=function(){var t=this;t.destroyed=!0,t.cy.stopAnimationLoop();for(var e=0;e<t.bindings.length;e++){var r=t.bindings[e],n=r,i=n.target;(i.off||i.removeEventListener).apply(i,n.args)}if(t.bindings=[],t.beforeRenderCallbacks=[],t.onUpdateEleCalcsFns=[],t.removeObserver&&t.removeObserver.disconnect(),t.styleObserver&&t.styleObserver.disconnect(),t.resizeObserver&&t.resizeObserver.disconnect(),t.labelCalcDiv)try{document.body.removeChild(t.labelCalcDiv)}catch{}};yu.isHeadless=function(){return!1};[ob,aF,sF,mu,Ii,sf].forEach(function(t){xe(yu,t)});var yg=1e3/60,uF={setupDequeueing:function(e){return function(){var n=this,i=this.renderer;if(!n.dequeueingSetup){n.dequeueingSetup=!0;var a=Wv.default(function(){i.redrawHint("eles",!0),i.redrawHint("drag",!0),i.redraw()},e.deqRedrawThreshold),s=function(l,c){var f=_i(),h=i.averageRedrawTime,d=i.lastRedrawTime,v=[],w=i.cy.extent(),m=i.getPixelRatio();for(l||i.flushRenderedStyleQueue();;){var p=_i(),g=p-f,y=p-c;if(d<yg){var _=yg-(l?h:0);if(y>=e.deqFastCost*_)break}else if(l){if(g>=e.deqCost*d||g>=e.deqAvgCost*h)break}else if(y>=e.deqNoDrawCost*yg)break;var T=e.deq(n,m,w);if(T.length>0)for(var b=0;b<T.length;b++)v.push(T[b]);else break}v.length>0&&(e.onDeqd(n,v),!l&&e.shouldRedraw(n,v,m,w)&&a())},o=e.priority||QT;i.beforeRender(s,o(n))}}}},YJ=function(){function t(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:bd;jT(this,t),this.idsByKey=new Un,this.keyForId=new Un,this.cachesByLvl=new Un,this.lvls=[],this.getKey=e,this.doesEleInvalidateKey=r}return WT(t,[{key:"getIdsFor",value:function(r){r==null&&_t("Can not get id list for null key");var n=this.idsByKey,i=this.idsByKey.get(r);return i||(i=new du,n.set(r,i)),i}},{key:"addIdForKey",value:function(r,n){r!=null&&this.getIdsFor(r).add(n)}},{key:"deleteIdForKey",value:function(r,n){r!=null&&this.getIdsFor(r).delete(n)}},{key:"getNumberOfIdsForKey",value:function(r){return r==null?0:this.getIdsFor(r).size}},{key:"updateKeyMappingFor",value:function(r){var n=r.id(),i=this.keyForId.get(n),a=this.getKey(r);this.deleteIdForKey(i,n),this.addIdForKey(a,n),this.keyForId.set(n,a)}},{key:"deleteKeyMappingFor",value:function(r){var n=r.id(),i=this.keyForId.get(n);this.deleteIdForKey(i,n),this.keyForId.delete(n)}},{key:"keyHasChangedFor",value:function(r){var n=r.id(),i=this.keyForId.get(n),a=this.getKey(r);return i!==a}},{key:"isInvalid",value:function(r){return this.keyHasChangedFor(r)||this.doesEleInvalidateKey(r)}},{key:"getCachesAt",value:function(r){var n=this.cachesByLvl,i=this.lvls,a=n.get(r);return a||(a=new Un,n.set(r,a),i.push(r)),a}},{key:"getCache",value:function(r,n){return this.getCachesAt(n).get(r)}},{key:"get",value:function(r,n){var i=this.getKey(r),a=this.getCache(i,n);return a!=null&&this.updateKeyMappingFor(r),a}},{key:"getForCachedKey",value:function(r,n){var i=this.keyForId.get(r.id()),a=this.getCache(i,n);return a}},{key:"hasCache",value:function(r,n){return this.getCachesAt(n).has(r)}},{key:"has",value:function(r,n){var i=this.getKey(r);return this.hasCache(i,n)}},{key:"setCache",value:function(r,n,i){i.key=r,this.getCachesAt(n).set(r,i)}},{key:"set",value:function(r,n,i){var a=this.getKey(r);this.setCache(a,n,i),this.updateKeyMappingFor(r)}},{key:"deleteCache",value:function(r,n){this.getCachesAt(n).delete(r)}},{key:"delete",value:function(r,n){var i=this.getKey(r);this.deleteCache(i,n)}},{key:"invalidateKey",value:function(r){var n=this;this.lvls.forEach(function(i){return n.deleteCache(r,i)})}},{key:"invalidate",value:function(r){var n=r.id(),i=this.keyForId.get(n);this.deleteKeyMappingFor(r);var a=this.doesEleInvalidateKey(r);return a&&this.invalidateKey(i),a||this.getNumberOfIdsForKey(i)===0}}]),t}(),Px=25,Yf=50,Rh=-4,h_=3,XJ=7.99,JJ=8,ZJ=1024,eZ=1024,tZ=1024,rZ=.2,nZ=.8,iZ=10,aZ=.15,sZ=.1,oZ=.9,uZ=.9,lZ=100,cZ=1,so={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},fZ=ar({getKey:null,doesEleInvalidateKey:bd,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:lV,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),rl=function(e,r){var n=this;n.renderer=e,n.onDequeues=[];var i=fZ(r);xe(n,i),n.lookup=new YJ(i.getKey,i.doesEleInvalidateKey),n.setupDequeueing()},Bt=rl.prototype;Bt.reasons=so;Bt.getTextureQueue=function(t){var e=this;return e.eleImgCaches=e.eleImgCaches||{},e.eleImgCaches[t]=e.eleImgCaches[t]||[]};Bt.getRetiredTextureQueue=function(t){var e=this,r=e.eleImgCaches.retired=e.eleImgCaches.retired||{},n=r[t]=r[t]||[];return n};Bt.getElementQueue=function(){var t=this,e=t.eleCacheQueue=t.eleCacheQueue||new Jc.default(function(r,n){return n.reqs-r.reqs});return e};Bt.getElementKeyToQueue=function(){var t=this,e=t.eleKeyToCacheQueue=t.eleKeyToCacheQueue||{};return e};Bt.getElement=function(t,e,r,n,i){var a=this,s=this.renderer,o=s.cy.zoom(),u=this.lookup;if(!e||e.w===0||e.h===0||isNaN(e.w)||isNaN(e.h)||!t.visible()||t.removed()||!a.allowEdgeTxrCaching&&t.isEdge()||!a.allowParentTxrCaching&&t.isParent())return null;if(n==null&&(n=Math.ceil(XT(o*r))),n<Rh)n=Rh;else if(o>=XJ||n>h_)return null;var l=Math.pow(2,n),c=e.h*l,f=e.w*l,h=s.eleTextBiggerThanMin(t,l);if(!this.isVisible(t,h))return null;var d=u.get(t,n);if(d&&d.invalidated&&(d.invalidated=!1,d.texture.invalidatedWidth-=d.width),d)return d;var v;if(c<=Px?v=Px:c<=Yf?v=Yf:v=Math.ceil(c/Yf)*Yf,c>tZ||f>eZ)return null;var w=a.getTextureQueue(v),m=w[w.length-2],p=function(){return a.recycleTexture(v,f)||a.addTexture(v,f)};m||(m=w[w.length-1]),m||(m=p()),m.width-m.usedWidth<f&&(m=p());for(var g=function(O){return O&&O.scaledLabelShown===h},y=i&&i===so.dequeue,_=i&&i===so.highQuality,T=i&&i===so.downscale,b,E=n+1;E<=h_;E++){var I=u.get(t,E);if(I){b=I;break}}var S=b&&b.level===n+1?b:null,C=function(){m.context.drawImage(S.texture.canvas,S.x,0,S.width,S.height,m.usedWidth,0,f,c)};if(m.context.setTransform(1,0,0,1,0,0),m.context.clearRect(m.usedWidth,0,f,v),g(S))C();else if(g(b))if(_){for(var R=b.level;R>n;R--)S=a.getElement(t,e,r,R,so.downscale);C()}else return a.queueElement(t,b.level-1),b;else{var x;if(!y&&!_&&!T)for(var P=n-1;P>=Rh;P--){var A=u.get(t,P);if(A){x=A;break}}if(g(x))return a.queueElement(t,n),x;m.context.translate(m.usedWidth,0),m.context.scale(l,l),this.drawElement(m.context,t,e,h,!1),m.context.scale(1/l,1/l),m.context.translate(-m.usedWidth,0)}return d={x:m.usedWidth,texture:m,level:n,scale:l,width:f,height:c,scaledLabelShown:h},m.usedWidth+=Math.ceil(f+JJ),m.eleCaches.push(d),u.set(t,n,d),a.checkTextureFullness(m),d};Bt.invalidateElements=function(t){for(var e=0;e<t.length;e++)this.invalidateElement(t[e])};Bt.invalidateElement=function(t){var e=this,r=e.lookup,n=[],i=r.isInvalid(t);if(i){for(var a=Rh;a<=h_;a++){var s=r.getForCachedKey(t,a);s&&n.push(s)}var o=r.invalidate(t);if(o)for(var u=0;u<n.length;u++){var l=n[u],c=l.texture;c.invalidatedWidth+=l.width,l.invalidated=!0,e.checkTextureUtility(c)}e.removeFromQueue(t)}};Bt.checkTextureUtility=function(t){t.invalidatedWidth>=rZ*t.width&&this.retireTexture(t)};Bt.checkTextureFullness=function(t){var e=this,r=e.getTextureQueue(t.height);t.usedWidth/t.width>nZ&&t.fullnessChecks>=iZ?ma(r,t):t.fullnessChecks++};Bt.retireTexture=function(t){var e=this,r=t.height,n=e.getTextureQueue(r),i=this.lookup;ma(n,t),t.retired=!0;for(var a=t.eleCaches,s=0;s<a.length;s++){var o=a[s];i.deleteCache(o.key,o.level)}YT(a);var u=e.getRetiredTextureQueue(r);u.push(t)};Bt.addTexture=function(t,e){var r=this,n=r.getTextureQueue(t),i={};return n.push(i),i.eleCaches=[],i.height=t,i.width=Math.max(ZJ,e),i.usedWidth=0,i.invalidatedWidth=0,i.fullnessChecks=0,i.canvas=r.renderer.makeOffscreenCanvas(i.width,i.height),i.context=i.canvas.getContext("2d"),i};Bt.recycleTexture=function(t,e){for(var r=this,n=r.getTextureQueue(t),i=r.getRetiredTextureQueue(t),a=0;a<i.length;a++){var s=i[a];if(s.width>=e)return s.retired=!1,s.usedWidth=0,s.invalidatedWidth=0,s.fullnessChecks=0,YT(s.eleCaches),s.context.setTransform(1,0,0,1,0,0),s.context.clearRect(0,0,s.width,s.height),ma(i,s),n.push(s),s}};Bt.queueElement=function(t,e){var r=this,n=r.getElementQueue(),i=r.getElementKeyToQueue(),a=this.getKey(t),s=i[a];if(s)s.level=Math.max(s.level,e),s.eles.merge(t),s.reqs++,n.updateItem(s);else{var o={eles:t.spawn().merge(t),level:e,reqs:1,key:a};n.push(o),i[a]=o}};Bt.dequeue=function(t){for(var e=this,r=e.getElementQueue(),n=e.getElementKeyToQueue(),i=[],a=e.lookup,s=0;s<cZ&&r.size()>0;s++){var o=r.pop(),u=o.key,l=o.eles[0],c=a.hasCache(l,o.level);if(n[u]=null,c)continue;i.push(o);var f=e.getBoundingBox(l);e.getElement(l,f,t,o.level,so.dequeue)}return i};Bt.removeFromQueue=function(t){var e=this,r=e.getElementQueue(),n=e.getElementKeyToQueue(),i=this.getKey(t),a=n[i];a!=null&&(a.eles.length===1?(a.reqs=KT,r.updateItem(a),r.pop(),n[i]=null):a.eles.unmerge(t))};Bt.onDequeue=function(t){this.onDequeues.push(t)};Bt.offDequeue=function(t){ma(this.onDequeues,t)};Bt.setupDequeueing=uF.setupDequeueing({deqRedrawThreshold:lZ,deqCost:aZ,deqAvgCost:sZ,deqNoDrawCost:oZ,deqFastCost:uZ,deq:function(e,r,n){return e.dequeue(r,n)},onDeqd:function(e,r){for(var n=0;n<e.onDequeues.length;n++){var i=e.onDequeues[n];i(r)}},shouldRedraw:function(e,r,n,i){for(var a=0;a<r.length;a++)for(var s=r[a].eles,o=0;o<s.length;o++){var u=s[o].boundingBox();if(JT(u,i))return!0}return!1},priority:function(e){return e.renderer.beforeRenderPriorities.eleTxrDeq}});var hZ=1,Sl=-4,Pd=2,dZ=3.99,vZ=50,pZ=50,gZ=.15,mZ=.1,yZ=.9,wZ=.9,_Z=1,Dx=250,EZ=4e3*4e3,TZ=!0,lF=function(e){var r=this,n=r.renderer=e,i=n.cy;r.layersByLevel={},r.firstGet=!0,r.lastInvalidationTime=_i()-2*Dx,r.skipping=!1,r.eleTxrDeqs=i.collection(),r.scheduleElementRefinement=Wv.default(function(){r.refineElementTextures(r.eleTxrDeqs),r.eleTxrDeqs.unmerge(r.eleTxrDeqs)},pZ),n.beforeRender(function(s,o){o-r.lastInvalidationTime<=Dx?r.skipping=!0:r.skipping=!1},n.beforeRenderPriorities.lyrTxrSkip);var a=function(o,u){return u.reqs-o.reqs};r.layersQueue=new Jc.default(a),r.setupDequeueing()},sr=lF.prototype,Ox=0,bZ=Math.pow(2,53)-1;sr.makeLayer=function(t,e){var r=Math.pow(2,e),n=Math.ceil(t.w*r),i=Math.ceil(t.h*r),a=this.renderer.makeOffscreenCanvas(n,i),s={id:Ox=++Ox%bZ,bb:t,level:e,width:n,height:i,canvas:a,context:a.getContext("2d"),eles:[],elesQueue:[],reqs:0},o=s.context,u=-s.bb.x1,l=-s.bb.y1;return o.scale(r,r),o.translate(u,l),s};sr.getLayers=function(t,e,r){var n=this,i=n.renderer,a=i.cy,s=a.zoom(),o=n.firstGet;if(n.firstGet=!1,r==null){if(r=Math.ceil(XT(s*e)),r<Sl)r=Sl;else if(s>=dZ||r>Pd)return null}n.validateLayersElesOrdering(r,t);var u=n.layersByLevel,l=Math.pow(2,r),c=u[r]=u[r]||[],f,h=n.levelIsComplete(r,t),d,v=function(){var C=function(F){if(n.validateLayersElesOrdering(F,t),n.levelIsComplete(F,t))return d=u[F],!0},R=function(F){if(!d)for(var O=r+F;Sl<=O&&O<=Pd&&!C(O);O+=F);};R(1),R(-1);for(var x=c.length-1;x>=0;x--){var P=c[x];P.invalid&&ma(c,P)}};if(!h)v();else return c;var w=function(){if(!f){f=$r();for(var C=0;C<t.length;C++)pV(f,t[C].boundingBox())}return f},m=function(C){C=C||{};var R=C.after;w();var x=f.w*l*(f.h*l);if(x>EZ)return null;var P=n.makeLayer(f,r);if(R!=null){var A=c.indexOf(R)+1;c.splice(A,0,P)}else(C.insert===void 0||C.insert)&&c.unshift(P);return P};if(n.skipping&&!o)return null;for(var p=null,g=t.length/hZ,y=!o,_=0;_<t.length;_++){var T=t[_],b=T._private.rscratch,E=b.imgLayerCaches=b.imgLayerCaches||{},I=E[r];if(I){p=I;continue}if((!p||p.eles.length>=g||!gV(p.bb,T.boundingBox()))&&(p=m({insert:!0,after:p}),!p))return null;d||y?n.queueLayer(p,T):n.drawEleInLayer(p,T,r,e),p.eles.push(T),E[r]=p}return d||(y?null:c)};sr.getEleLevelForLayerLevel=function(t,e){return t};sr.drawEleInLayer=function(t,e,r,n){var i=this,a=this.renderer,s=t.context,o=e.boundingBox();o.w===0||o.h===0||!e.visible()||(r=i.getEleLevelForLayerLevel(r,n),a.setImgSmoothing(s,!1),a.drawCachedElement(s,e,null,null,r,TZ),a.setImgSmoothing(s,!0))};sr.levelIsComplete=function(t,e){var r=this,n=r.layersByLevel[t];if(!n||n.length===0)return!1;for(var i=0,a=0;a<n.length;a++){var s=n[a];if(s.reqs>0||s.invalid)return!1;i+=s.eles.length}return i===e.length};sr.validateLayersElesOrdering=function(t,e){var r=this.layersByLevel[t];if(r)for(var n=0;n<r.length;n++){for(var i=r[n],a=-1,s=0;s<e.length;s++)if(i.eles[0]===e[s]){a=s;break}if(a<0){this.invalidateLayer(i);continue}for(var o=a,s=0;s<i.eles.length;s++)if(i.eles[s]!==e[o+s]){this.invalidateLayer(i);break}}};sr.updateElementsInLayers=function(t,e){for(var r=this,n=ef(t[0]),i=0;i<t.length;i++)for(var a=n?null:t[i],s=n?t[i]:t[i].ele,o=s._private.rscratch,u=o.imgLayerCaches=o.imgLayerCaches||{},l=Sl;l<=Pd;l++){var c=u[l];c&&(a&&r.getEleLevelForLayerLevel(c.level)!==a.level||e(c,s,a))}};sr.haveLayers=function(){for(var t=this,e=!1,r=Sl;r<=Pd;r++){var n=t.layersByLevel[r];if(n&&n.length>0){e=!0;break}}return e};sr.invalidateElements=function(t){var e=this;t.length!==0&&(e.lastInvalidationTime=_i(),!(t.length===0||!e.haveLayers())&&e.updateElementsInLayers(t,function(n,i,a){e.invalidateLayer(n)}))};sr.invalidateLayer=function(t){if(this.lastInvalidationTime=_i(),!t.invalid){var e=t.level,r=t.eles,n=this.layersByLevel[e];ma(n,t),t.elesQueue=[],t.invalid=!0,t.replacement&&(t.replacement.invalid=!0);for(var i=0;i<r.length;i++){var a=r[i]._private.rscratch.imgLayerCaches;a&&(a[e]=null)}}};sr.refineElementTextures=function(t){var e=this;e.updateElementsInLayers(t,function(n,i,a){var s=n.replacement;if(s||(s=n.replacement=e.makeLayer(n.bb,n.level),s.replaces=n,s.eles=n.eles),!s.reqs)for(var o=0;o<s.eles.length;o++)e.queueLayer(s,s.eles[o])})};sr.enqueueElementRefinement=function(t){this.eleTxrDeqs.merge(t),this.scheduleElementRefinement()};sr.queueLayer=function(t,e){var r=this,n=r.layersQueue,i=t.elesQueue,a=i.hasId=i.hasId||{};if(!t.replacement){if(e){if(a[e.id()])return;i.push(e),a[e.id()]=!0}t.reqs?(t.reqs++,n.updateItem(t)):(t.reqs=1,n.push(t))}};sr.dequeue=function(t){for(var e=this,r=e.layersQueue,n=[],i=0;i<_Z&&r.size()!==0;){var a=r.peek();if(a.replacement){r.pop();continue}if(a.replaces&&a!==a.replaces.replacement){r.pop();continue}if(a.invalid){r.pop();continue}var s=a.elesQueue.shift();s&&(e.drawEleInLayer(a,s,a.level,t),i++),n.length===0&&n.push(!0),a.elesQueue.length===0&&(r.pop(),a.reqs=0,a.replaces&&e.applyLayerReplacement(a),e.requestRedraw())}return n};sr.applyLayerReplacement=function(t){var e=this,r=e.layersByLevel[t.level],n=t.replaces,i=r.indexOf(n);if(!(i<0||n.invalid)){r[i]=t;for(var a=0;a<t.eles.length;a++){var s=t.eles[a]._private,o=s.imgLayerCaches=s.imgLayerCaches||{};o&&(o[t.level]=t)}e.requestRedraw()}};sr.requestRedraw=Wv.default(function(){var t=this.renderer;t.redrawHint("eles",!0),t.redrawHint("drag",!0),t.redraw()},100);sr.setupDequeueing=uF.setupDequeueing({deqRedrawThreshold:vZ,deqCost:gZ,deqAvgCost:mZ,deqNoDrawCost:yZ,deqFastCost:wZ,deq:function(e,r){return e.dequeue(r)},onDeqd:QT,shouldRedraw:lV,priority:function(e){return e.renderer.beforeRenderPriorities.lyrTxrDeq}});var cF={},Nx;function SZ(t,e){for(var r=0;r<e.length;r++){var n=e[r];t.lineTo(n.x,n.y)}}function IZ(t,e,r){for(var n,i=0;i<e.length;i++){var a=e[i];i===0&&(n=a),t.lineTo(a.x,a.y)}t.quadraticCurveTo(r.x,r.y,n.x,n.y)}function Lx(t,e,r){t.beginPath&&t.beginPath();for(var n=e,i=0;i<n.length;i++){var a=n[i];t.lineTo(a.x,a.y)}var s=r,o=r[0];t.moveTo(o.x,o.y);for(var i=1;i<s.length;i++){var a=s[i];t.lineTo(a.x,a.y)}t.closePath&&t.closePath()}function CZ(t,e,r,n,i){t.beginPath&&t.beginPath(),t.arc(r,n,i,0,Math.PI*2,!1);var a=e,s=a[0];t.moveTo(s.x,s.y);for(var o=0;o<a.length;o++){var u=a[o];t.lineTo(u.x,u.y)}t.closePath&&t.closePath()}function xZ(t,e,r,n){t.arc(e,r,n,0,Math.PI*2,!1)}cF.arrowShapeImpl=function(t){return(Nx||(Nx={polygon:SZ,"triangle-backcurve":IZ,"triangle-tee":Lx,"circle-triangle":CZ,"triangle-cross":Lx,circle:xZ}))[t]};var ri={};ri.drawElement=function(t,e,r,n,i,a){var s=this;e.isNode()?s.drawNode(t,e,r,n,i,a):s.drawEdge(t,e,r,n,i,a)};ri.drawElementOverlay=function(t,e){var r=this;e.isNode()?r.drawNodeOverlay(t,e):r.drawEdgeOverlay(t,e)};ri.drawElementUnderlay=function(t,e){var r=this;e.isNode()?r.drawNodeUnderlay(t,e):r.drawEdgeUnderlay(t,e)};ri.drawCachedElementPortion=function(t,e,r,n,i,a,s,o){var u=this,l=r.getBoundingBox(e);if(!(l.w===0||l.h===0)){var c=r.getElement(e,l,n,i,a);if(c!=null){var f=o(u,e);if(f===0)return;var h=s(u,e),d=l.x1,v=l.y1,w=l.w,m=l.h,p,g,y,_,T;if(h!==0){var b=r.getRotationPoint(e);y=b.x,_=b.y,t.translate(y,_),t.rotate(h),T=u.getImgSmoothing(t),T||u.setImgSmoothing(t,!0);var E=r.getRotationOffset(e);p=E.x,g=E.y}else p=d,g=v;var I;f!==1&&(I=t.globalAlpha,t.globalAlpha=I*f),t.drawImage(c.texture.canvas,c.x,0,c.width,c.height,p,g,w,m),f!==1&&(t.globalAlpha=I),h!==0&&(t.rotate(-h),t.translate(-y,-_),T||u.setImgSmoothing(t,!1))}else r.drawElement(t,e)}};var RZ=function(){return 0},kZ=function(e,r){return e.getTextAngle(r,null)},AZ=function(e,r){return e.getTextAngle(r,"source")},PZ=function(e,r){return e.getTextAngle(r,"target")},DZ=function(e,r){return r.effectiveOpacity()},wg=function(e,r){return r.pstyle("text-opacity").pfValue*r.effectiveOpacity()};ri.drawCachedElement=function(t,e,r,n,i,a){var s=this,o=s.data,u=o.eleTxrCache,l=o.lblTxrCache,c=o.slbTxrCache,f=o.tlbTxrCache,h=e.boundingBox(),d=a===!0?u.reasons.highQuality:null;if(!(h.w===0||h.h===0||!e.visible())&&(!n||JT(h,n))){var v=e.isEdge(),w=e.element()._private.rscratch.badLine;s.drawElementUnderlay(t,e),s.drawCachedElementPortion(t,e,u,r,i,d,RZ,DZ),(!v||!w)&&s.drawCachedElementPortion(t,e,l,r,i,d,kZ,wg),v&&!w&&(s.drawCachedElementPortion(t,e,c,r,i,d,AZ,wg),s.drawCachedElementPortion(t,e,f,r,i,d,PZ,wg)),s.drawElementOverlay(t,e)}};ri.drawElements=function(t,e){for(var r=this,n=0;n<e.length;n++){var i=e[n];r.drawElement(t,i)}};ri.drawCachedElements=function(t,e,r,n){for(var i=this,a=0;a<e.length;a++){var s=e[a];i.drawCachedElement(t,s,r,n)}};ri.drawCachedNodes=function(t,e,r,n){for(var i=this,a=0;a<e.length;a++){var s=e[a];s.isNode()&&i.drawCachedElement(t,s,r,n)}};ri.drawLayeredElements=function(t,e,r,n){var i=this,a=i.data.lyrTxrCache.getLayers(e,r);if(a)for(var s=0;s<a.length;s++){var o=a[s],u=o.bb;u.w===0||u.h===0||t.drawImage(o.canvas,u.x1,u.y1,u.w,u.h)}else i.drawCachedElements(t,e,r,n)};var Ci={};Ci.drawEdge=function(t,e,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,s=this,o=e._private.rscratch;if(!(a&&!e.visible())&&!(o.badLine||o.allpts==null||isNaN(o.allpts[0]))){var u;r&&(u=r,t.translate(-u.x1,-u.y1));var l=a?e.pstyle("opacity").value:1,c=a?e.pstyle("line-opacity").value:1,f=e.pstyle("curve-style").value,h=e.pstyle("line-style").value,d=e.pstyle("width").pfValue,v=e.pstyle("line-cap").value,w=l*c,m=l*c,p=function(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:w;f==="straight-triangle"?(s.eleStrokeStyle(t,e,x),s.drawEdgeTrianglePath(e,t,o.allpts)):(t.lineWidth=d,t.lineCap=v,s.eleStrokeStyle(t,e,x),s.drawEdgePath(e,t,o.allpts,h),t.lineCap="butt")},g=function(){i&&s.drawEdgeOverlay(t,e)},y=function(){i&&s.drawEdgeUnderlay(t,e)},_=function(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:m;s.drawArrowheads(t,e,x)},T=function(){s.drawElementText(t,e,null,n)};t.lineJoin="round";var b=e.pstyle("ghost").value==="yes";if(b){var E=e.pstyle("ghost-offset-x").pfValue,I=e.pstyle("ghost-offset-y").pfValue,S=e.pstyle("ghost-opacity").value,C=w*S;t.translate(E,I),p(C),_(C),t.translate(-E,-I)}y(),p(),_(),g(),T(),r&&t.translate(u.x1,u.y1)}};var fF=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(r,n){if(n.visible()){var i=n.pstyle("".concat(e,"-opacity")).value;if(i!==0){var a=this,s=a.usePaths(),o=n._private.rscratch,u=n.pstyle("".concat(e,"-padding")).pfValue,l=2*u,c=n.pstyle("".concat(e,"-color")).value;r.lineWidth=l,o.edgeType==="self"&&!s?r.lineCap="butt":r.lineCap="round",a.colorStrokeStyle(r,c[0],c[1],c[2],i),a.drawEdgePath(n,r,o.allpts,"solid")}}}};Ci.drawEdgeOverlay=fF("overlay");Ci.drawEdgeUnderlay=fF("underlay");Ci.drawEdgePath=function(t,e,r,n){var i=t._private.rscratch,a=e,s,o=!1,u=this.usePaths(),l=t.pstyle("line-dash-pattern").pfValue,c=t.pstyle("line-dash-offset").pfValue;if(u){var f=r.join("$"),h=i.pathCacheKey&&i.pathCacheKey===f;h?(s=e=i.pathCache,o=!0):(s=e=new Path2D,i.pathCacheKey=f,i.pathCache=s)}if(a.setLineDash)switch(n){case"dotted":a.setLineDash([1,1]);break;case"dashed":a.setLineDash(l),a.lineDashOffset=c;break;case"solid":a.setLineDash([]);break}if(!o&&!i.badLine)switch(e.beginPath&&e.beginPath(),e.moveTo(r[0],r[1]),i.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var d=2;d+3<r.length;d+=4)e.quadraticCurveTo(r[d],r[d+1],r[d+2],r[d+3]);break;case"straight":case"segments":case"haystack":for(var v=2;v+1<r.length;v+=2)e.lineTo(r[v],r[v+1]);break}e=a,u?e.stroke(s):e.stroke(),e.setLineDash&&e.setLineDash([])};Ci.drawEdgeTrianglePath=function(t,e,r){e.fillStyle=e.strokeStyle;for(var n=t.pstyle("width").pfValue,i=0;i+1<r.length;i+=2){var a=[r[i+2]-r[i],r[i+3]-r[i+1]],s=Math.sqrt(a[0]*a[0]+a[1]*a[1]),o=[a[1]/s,-a[0]/s],u=[o[0]*n/2,o[1]*n/2];e.beginPath(),e.moveTo(r[i]-u[0],r[i+1]-u[1]),e.lineTo(r[i]+u[0],r[i+1]+u[1]),e.lineTo(r[i+2],r[i+3]),e.closePath(),e.fill()}};Ci.drawArrowheads=function(t,e,r){var n=e._private.rscratch,i=n.edgeType==="haystack";i||this.drawArrowhead(t,e,"source",n.arrowStartX,n.arrowStartY,n.srcArrowAngle,r),this.drawArrowhead(t,e,"mid-target",n.midX,n.midY,n.midtgtArrowAngle,r),this.drawArrowhead(t,e,"mid-source",n.midX,n.midY,n.midsrcArrowAngle,r),i||this.drawArrowhead(t,e,"target",n.arrowEndX,n.arrowEndY,n.tgtArrowAngle,r)};Ci.drawArrowhead=function(t,e,r,n,i,a,s){if(!(isNaN(n)||n==null||isNaN(i)||i==null||isNaN(a)||a==null)){var o=this,u=e.pstyle(r+"-arrow-shape").value;if(u!=="none"){var l=e.pstyle(r+"-arrow-fill").value==="hollow"?"both":"filled",c=e.pstyle(r+"-arrow-fill").value,f=e.pstyle("width").pfValue,h=e.pstyle(r+"-arrow-width"),d=h.value==="match-line"?f:h.pfValue;h.units==="%"&&(d*=f);var v=e.pstyle("opacity").value;s===void 0&&(s=v);var w=t.globalCompositeOperation;(s!==1||c==="hollow")&&(t.globalCompositeOperation="destination-out",o.colorFillStyle(t,255,255,255,1),o.colorStrokeStyle(t,255,255,255,1),o.drawArrowShape(e,t,l,f,u,d,n,i,a),t.globalCompositeOperation=w);var m=e.pstyle(r+"-arrow-color").value;o.colorFillStyle(t,m[0],m[1],m[2],s),o.colorStrokeStyle(t,m[0],m[1],m[2],s),o.drawArrowShape(e,t,c,f,u,d,n,i,a)}}};Ci.drawArrowShape=function(t,e,r,n,i,a,s,o,u){var l=this,c=this.usePaths()&&i!=="triangle-cross",f=!1,h,d=e,v={x:s,y:o},w=t.pstyle("arrow-scale").value,m=this.getArrowWidth(n,w),p=l.arrowShapes[i];if(c){var g=l.arrowPathCache=l.arrowPathCache||[],y=cs(i),_=g[y];_!=null?(h=e=_,f=!0):(h=e=new Path2D,g[y]=h)}f||(e.beginPath&&e.beginPath(),c?p.draw(e,1,0,{x:0,y:0},1):p.draw(e,m,u,v,n),e.closePath&&e.closePath()),e=d,c&&(e.translate(s,o),e.rotate(u),e.scale(m,m)),(r==="filled"||r==="both")&&(c?e.fill(h):e.fill()),(r==="hollow"||r==="both")&&(e.lineWidth=a/(c?m:1),e.lineJoin="miter",c?e.stroke(h):e.stroke()),c&&(e.scale(1/m,1/m),e.rotate(-u),e.translate(-s,-o))};var lb={};lb.safeDrawImage=function(t,e,r,n,i,a,s,o,u,l){if(!(i<=0||a<=0||u<=0||l<=0))try{t.drawImage(e,r,n,i,a,s,o,u,l)}catch(c){Xe(c)}};lb.drawInscribedImage=function(t,e,r,n,i){var a=this,s=r.position(),o=s.x,u=s.y,l=r.cy().style(),c=l.getIndexedStyle.bind(l),f=c(r,"background-fit","value",n),h=c(r,"background-repeat","value",n),d=r.width(),v=r.height(),w=r.padding()*2,m=d+(c(r,"background-width-relative-to","value",n)==="inner"?0:w),p=v+(c(r,"background-height-relative-to","value",n)==="inner"?0:w),g=r._private.rscratch,y=c(r,"background-clip","value",n),_=y==="node",T=c(r,"background-image-opacity","value",n)*i,b=c(r,"background-image-smoothing","value",n),E=e.width||e.cachedW,I=e.height||e.cachedH;(E==null||I==null)&&(document.body.appendChild(e),E=e.cachedW=e.width||e.offsetWidth,I=e.cachedH=e.height||e.offsetHeight,document.body.removeChild(e));var S=E,C=I;if(c(r,"background-width","value",n)!=="auto"&&(c(r,"background-width","units",n)==="%"?S=c(r,"background-width","pfValue",n)*m:S=c(r,"background-width","pfValue",n)),c(r,"background-height","value",n)!=="auto"&&(c(r,"background-height","units",n)==="%"?C=c(r,"background-height","pfValue",n)*p:C=c(r,"background-height","pfValue",n)),!(S===0||C===0)){if(f==="contain"){var R=Math.min(m/S,p/C);S*=R,C*=R}else if(f==="cover"){var R=Math.max(m/S,p/C);S*=R,C*=R}var x=o-m/2,P=c(r,"background-position-x","units",n),A=c(r,"background-position-x","pfValue",n);P==="%"?x+=(m-S)*A:x+=A;var F=c(r,"background-offset-x","units",n),O=c(r,"background-offset-x","pfValue",n);F==="%"?x+=(m-S)*O:x+=O;var L=u-p/2,D=c(r,"background-position-y","units",n),$=c(r,"background-position-y","pfValue",n);D==="%"?L+=(p-C)*$:L+=$;var z=c(r,"background-offset-y","units",n),B=c(r,"background-offset-y","pfValue",n);z==="%"?L+=(p-C)*B:L+=B,g.pathCache&&(x-=o,L-=u,o=0,u=0);var j=t.globalAlpha;t.globalAlpha=T;var Q=a.getImgSmoothing(t),N=!1;if(b==="no"&&Q?(a.setImgSmoothing(t,!1),N=!0):b==="yes"&&!Q&&(a.setImgSmoothing(t,!0),N=!0),h==="no-repeat")_&&(t.save(),g.pathCache?t.clip(g.pathCache):(a.nodeShapes[a.getNodeShape(r)].draw(t,o,u,m,p),t.clip())),a.safeDrawImage(t,e,0,0,E,I,x,L,S,C),_&&t.restore();else{var M=t.createPattern(e,h);t.fillStyle=M,a.nodeShapes[a.getNodeShape(r)].draw(t,o,u,m,p),t.translate(x,L),t.fill(),t.translate(-x,-L)}t.globalAlpha=j,N&&a.setImgSmoothing(t,Q)}};var xs={};xs.eleTextBiggerThanMin=function(t,e){if(!e){var r=t.cy().zoom(),n=this.getPixelRatio(),i=Math.ceil(XT(r*n));e=Math.pow(2,i)}var a=t.pstyle("font-size").pfValue*e,s=t.pstyle("min-zoomed-font-size").pfValue;return!(a<s)};xs.drawElementText=function(t,e,r,n,i){var a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,s=this;if(n==null){if(a&&!s.eleTextBiggerThanMin(e))return}else if(n===!1)return;if(e.isNode()){var o=e.pstyle("label");if(!o||!o.value)return;var u=s.getLabelJustification(e);t.textAlign=u,t.textBaseline="bottom"}else{var l=e.element()._private.rscratch.badLine,c=e.pstyle("label"),f=e.pstyle("source-label"),h=e.pstyle("target-label");if(l||(!c||!c.value)&&(!f||!f.value)&&(!h||!h.value))return;t.textAlign="center",t.textBaseline="bottom"}var d=!r,v;r&&(v=r,t.translate(-v.x1,-v.y1)),i==null?(s.drawText(t,e,null,d,a),e.isEdge()&&(s.drawText(t,e,"source",d,a),s.drawText(t,e,"target",d,a))):s.drawText(t,e,i,d,a),r&&t.translate(v.x1,v.y1)};xs.getFontCache=function(t){var e;this.fontCaches=this.fontCaches||[];for(var r=0;r<this.fontCaches.length;r++)if(e=this.fontCaches[r],e.context===t)return e;return e={context:t},this.fontCaches.push(e),e};xs.setupTextStyle=function(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,n=e.pstyle("font-style").strValue,i=e.pstyle("font-size").pfValue+"px",a=e.pstyle("font-family").strValue,s=e.pstyle("font-weight").strValue,o=r?e.effectiveOpacity()*e.pstyle("text-opacity").value:1,u=e.pstyle("text-outline-opacity").value*o,l=e.pstyle("color").value,c=e.pstyle("text-outline-color").value;t.font=n+" "+s+" "+i+" "+a,t.lineJoin="round",this.colorFillStyle(t,l[0],l[1],l[2],o),this.colorStrokeStyle(t,c[0],c[1],c[2],u)};function _g(t,e,r,n,i){var a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:5,s=arguments.length>6?arguments[6]:void 0;t.beginPath(),t.moveTo(e+a,r),t.lineTo(e+n-a,r),t.quadraticCurveTo(e+n,r,e+n,r+a),t.lineTo(e+n,r+i-a),t.quadraticCurveTo(e+n,r+i,e+n-a,r+i),t.lineTo(e+a,r+i),t.quadraticCurveTo(e,r+i,e,r+i-a),t.lineTo(e,r+a),t.quadraticCurveTo(e,r,e+a,r),t.closePath(),s?t.stroke():t.fill()}xs.getTextAngle=function(t,e){var r,n=t._private,i=n.rscratch,a=e?e+"-":"",s=t.pstyle(a+"text-rotation"),o=Sn(i,"labelAngle",e);return s.strValue==="autorotate"?r=t.isEdge()?o:0:s.strValue==="none"?r=0:r=s.pfValue,r};xs.drawText=function(t,e,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,a=e._private,s=a.rscratch,o=i?e.effectiveOpacity():1;if(!(i&&(o===0||e.pstyle("text-opacity").value===0))){r==="main"&&(r=null);var u=Sn(s,"labelX",r),l=Sn(s,"labelY",r),c,f,h=this.getLabelText(e,r);if(h!=null&&h!==""&&!isNaN(u)&&!isNaN(l)){this.setupTextStyle(t,e,i);var d=r?r+"-":"",v=Sn(s,"labelWidth",r),w=Sn(s,"labelHeight",r),m=e.pstyle(d+"text-margin-x").pfValue,p=e.pstyle(d+"text-margin-y").pfValue,g=e.isEdge(),y=e.pstyle("text-halign").value,_=e.pstyle("text-valign").value;g&&(y="center",_="center"),u+=m,l+=p;var T;switch(n?T=this.getTextAngle(e,r):T=0,T!==0&&(c=u,f=l,t.translate(c,f),t.rotate(T),u=0,l=0),_){case"top":break;case"center":l+=w/2;break;case"bottom":l+=w;break}var b=e.pstyle("text-background-opacity").value,E=e.pstyle("text-border-opacity").value,I=e.pstyle("text-border-width").pfValue,S=e.pstyle("text-background-padding").pfValue,C=e.pstyle("text-background-shape").strValue,R=C.indexOf("round")===0,x=2;if(b>0||I>0&&E>0){var P=u-S;switch(y){case"left":P-=v;break;case"center":P-=v/2;break}var A=l-w-S,F=v+2*S,O=w+2*S;if(b>0){var L=t.fillStyle,D=e.pstyle("text-background-color").value;t.fillStyle="rgba("+D[0]+","+D[1]+","+D[2]+","+b*o+")",R?_g(t,P,A,F,O,x):t.fillRect(P,A,F,O),t.fillStyle=L}if(I>0&&E>0){var $=t.strokeStyle,z=t.lineWidth,B=e.pstyle("text-border-color").value,j=e.pstyle("text-border-style").value;if(t.strokeStyle="rgba("+B[0]+","+B[1]+","+B[2]+","+E*o+")",t.lineWidth=I,t.setLineDash)switch(j){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"double":t.lineWidth=I/4,t.setLineDash([]);break;case"solid":t.setLineDash([]);break}if(R?_g(t,P,A,F,O,x,"stroke"):t.strokeRect(P,A,F,O),j==="double"){var Q=I/2;R?_g(t,P+Q,A+Q,F-Q*2,O-Q*2,x,"stroke"):t.strokeRect(P+Q,A+Q,F-Q*2,O-Q*2)}t.setLineDash&&t.setLineDash([]),t.lineWidth=z,t.strokeStyle=$}}var N=2*e.pstyle("text-outline-width").pfValue;if(N>0&&(t.lineWidth=N),e.pstyle("text-wrap").value==="wrap"){var M=Sn(s,"labelWrapCachedLines",r),q=Sn(s,"labelLineHeight",r),V=v/2,W=this.getLabelJustification(e);switch(W==="auto"||(y==="left"?W==="left"?u+=-v:W==="center"&&(u+=-V):y==="center"?W==="left"?u+=-V:W==="right"&&(u+=V):y==="right"&&(W==="center"?u+=V:W==="right"&&(u+=v))),_){case"top":l-=(M.length-1)*q;break;case"center":case"bottom":l-=(M.length-1)*q;break}for(var X=0;X<M.length;X++)N>0&&t.strokeText(M[X],u,l),t.fillText(M[X],u,l),l+=q}else N>0&&t.strokeText(h,u,l),t.fillText(h,u,l);T!==0&&(t.rotate(-T),t.translate(-c,-f))}}};var wu={};wu.drawNode=function(t,e,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,s=this,o,u,l=e._private,c=l.rscratch,f=e.position();if(!(!le(f.x)||!le(f.y))&&!(a&&!e.visible())){var h=a?e.effectiveOpacity():1,d=s.usePaths(),v,w=!1,m=e.padding();o=e.width()+2*m,u=e.height()+2*m;var p;r&&(p=r,t.translate(-p.x1,-p.y1));for(var g=e.pstyle("background-image"),y=g.value,_=new Array(y.length),T=new Array(y.length),b=0,E=0;E<y.length;E++){var I=y[E],S=_[E]=I!=null&&I!=="none";if(S){var C=e.cy().style().getIndexedStyle(e,"background-image-crossorigin","value",E);b++,T[E]=s.getCachedImage(I,C,function(){l.backgroundTimestamp=Date.now(),e.emitAndNotify("background")})}}var R=e.pstyle("background-blacken").value,x=e.pstyle("border-width").pfValue,P=e.pstyle("background-opacity").value*h,A=e.pstyle("border-color").value,F=e.pstyle("border-style").value,O=e.pstyle("border-opacity").value*h,L=e.pstyle("outline-width").pfValue,D=e.pstyle("outline-color").value,$=e.pstyle("outline-style").value,z=e.pstyle("outline-opacity").value*h,B=e.pstyle("outline-offset").value;t.lineJoin="miter";var j=function(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:P;s.eleFillStyle(t,e,G)},Q=function(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:O;s.colorStrokeStyle(t,A[0],A[1],A[2],G)},N=function(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:z;s.colorStrokeStyle(t,D[0],D[1],D[2],G)},M=function(G,k,H,ee){var K=s.nodePathCache=s.nodePathCache||[],Y=uV(H==="polygon"?H+","+ee.join(","):H,""+k,""+G),Ee=K[Y],Z,ye=!1;return Ee!=null?(Z=Ee,ye=!0,c.pathCache=Z):(Z=new Path2D,K[Y]=c.pathCache=Z),{path:Z,cacheHit:ye}},q=e.pstyle("shape").strValue,V=e.pstyle("shape-polygon-points").pfValue;if(d){t.translate(f.x,f.y);var W=M(o,u,q,V);v=W.path,w=W.cacheHit}var X=function(){if(!w){var G=f;d&&(G={x:0,y:0}),s.nodeShapes[s.getNodeShape(e)].draw(v||t,G.x,G.y,o,u)}d?t.fill(v):t.fill()},J=function(){for(var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:h,k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,H=l.backgrounding,ee=0,K=0;K<T.length;K++){var Y=e.cy().style().getIndexedStyle(e,"background-image-containment","value",K);if(k&&Y==="over"||!k&&Y==="inside"){ee++;continue}_[K]&&T[K].complete&&!T[K].error&&(ee++,s.drawInscribedImage(t,T[K],e,K,G))}l.backgrounding=ee!==b,H!==l.backgrounding&&e.updateStyle(!1)},ae=function(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:h;s.hasPie(e)&&(s.drawPie(t,e,k),G&&(d||s.nodeShapes[s.getNodeShape(e)].draw(t,f.x,f.y,o,u)))},ve=function(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:h,k=(R>0?R:-R)*G,H=R>0?0:255;R!==0&&(s.colorFillStyle(t,H,H,H,k),d?t.fill(v):t.fill())},_e=function(){if(x>0){if(t.lineWidth=x,t.lineCap="butt",t.setLineDash)switch(F){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"solid":case"double":t.setLineDash([]);break}if(d?t.stroke(v):t.stroke(),F==="double"){t.lineWidth=x/3;var G=t.globalCompositeOperation;t.globalCompositeOperation="destination-out",d?t.stroke(v):t.stroke(),t.globalCompositeOperation=G}t.setLineDash&&t.setLineDash([])}},se=function(){if(L>0){if(t.lineWidth=L,t.lineCap="butt",t.setLineDash)switch($){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"solid":case"double":t.setLineDash([]);break}var G=f;d&&(G={x:0,y:0});var k=s.getNodeShape(e),H=(o+x+(L+B))/o,ee=(u+x+(L+B))/u,K=o*H,Y=u*ee,Ee=s.nodeShapes[k].points,Z;if(d){var ye=M(K,Y,k,Ee);Z=ye.path}if(k==="ellipse")s.drawEllipsePath(Z||t,G.x,G.y,K,Y);else if(["round-diamond","round-heptagon","round-hexagon","round-octagon","round-pentagon","round-polygon","round-triangle","round-tag"].includes(k)){var Ce=0,Ve=0,Pe=0;k==="round-diamond"?Ce=(x+B+L)*1.4:k==="round-heptagon"?(Ce=(x+B+L)*1.075,Pe=-(x/2+B+L)/35):k==="round-hexagon"?Ce=(x+B+L)*1.12:k==="round-pentagon"?(Ce=(x+B+L)*1.13,Pe=-(x/2+B+L)/15):k==="round-tag"?(Ce=(x+B+L)*1.12,Ve=(x/2+L+B)*.07):k==="round-triangle"&&(Ce=(x+B+L)*(Math.PI/2),Pe=-(x+B/2+L)/Math.PI),Ce!==0&&(H=(o+Ce)/o,ee=(u+Ce)/u),s.drawRoundPolygonPath(Z||t,G.x+Ve,G.y+Pe,o*H,u*ee,Ee)}else if(["roundrectangle","round-rectangle"].includes(k))s.drawRoundRectanglePath(Z||t,G.x,G.y,K,Y);else if(["cutrectangle","cut-rectangle"].includes(k))s.drawCutRectanglePath(Z||t,G.x,G.y,K,Y);else if(["bottomroundrectangle","bottom-round-rectangle"].includes(k))s.drawBottomRoundRectanglePath(Z||t,G.x,G.y,K,Y);else if(k==="barrel")s.drawBarrelPath(Z||t,G.x,G.y,K,Y);else if(k.startsWith("polygon")||["rhomboid","right-rhomboid","round-tag","tag","vee"].includes(k)){var Ue=(x+L+B)/o;Ee=Sd(Id(Ee,Ue)),s.drawPolygonPath(Z||t,G.x,G.y,o,u,Ee)}else{var De=(x+L+B)/o;Ee=Sd(Id(Ee,-De)),s.drawPolygonPath(Z||t,G.x,G.y,o,u,Ee)}if(d?t.stroke(Z):t.stroke(),$==="double"){t.lineWidth=x/3;var Le=t.globalCompositeOperation;t.globalCompositeOperation="destination-out",d?t.stroke(Z):t.stroke(),t.globalCompositeOperation=Le}t.setLineDash&&t.setLineDash([])}},te=function(){i&&s.drawNodeOverlay(t,e,f,o,u)},me=function(){i&&s.drawNodeUnderlay(t,e,f,o,u)},ue=function(){s.drawElementText(t,e,null,n)},he=e.pstyle("ghost").value==="yes";if(he){var we=e.pstyle("ghost-offset-x").pfValue,Fe=e.pstyle("ghost-offset-y").pfValue,Ae=e.pstyle("ghost-opacity").value,be=Ae*h;t.translate(we,Fe),N(),se(),j(Ae*P),X(),J(be,!0),Q(Ae*O),_e(),ae(R!==0||x!==0),J(be,!1),ve(be),t.translate(-we,-Fe)}d&&t.translate(-f.x,-f.y),me(),d&&t.translate(f.x,f.y),N(),se(),j(),X(),J(h,!0),Q(),_e(),ae(R!==0||x!==0),J(h,!1),ve(),d&&t.translate(-f.x,-f.y),ue(),te(),r&&t.translate(p.x1,p.y1)}};var hF=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(r,n,i,a,s){var o=this;if(n.visible()){var u=n.pstyle("".concat(e,"-padding")).pfValue,l=n.pstyle("".concat(e,"-opacity")).value,c=n.pstyle("".concat(e,"-color")).value,f=n.pstyle("".concat(e,"-shape")).value;if(l>0){if(i=i||n.position(),a==null||s==null){var h=n.padding();a=n.width()+2*h,s=n.height()+2*h}o.colorFillStyle(r,c[0],c[1],c[2],l),o.nodeShapes[f].draw(r,i.x,i.y,a+u*2,s+u*2),r.fill()}}}};wu.drawNodeOverlay=hF("overlay");wu.drawNodeUnderlay=hF("underlay");wu.hasPie=function(t){return t=t[0],t._private.hasPie};wu.drawPie=function(t,e,r,n){e=e[0],n=n||e.position();var i=e.cy().style(),a=e.pstyle("pie-size"),s=n.x,o=n.y,u=e.width(),l=e.height(),c=Math.min(u,l)/2,f=0,h=this.usePaths();h&&(s=0,o=0),a.units==="%"?c=c*a.pfValue:a.pfValue!==void 0&&(c=a.pfValue/2);for(var d=1;d<=i.pieBackgroundN;d++){var v=e.pstyle("pie-"+d+"-background-size").value,w=e.pstyle("pie-"+d+"-background-color").value,m=e.pstyle("pie-"+d+"-background-opacity").value*r,p=v/100;p+f>1&&(p=1-f);var g=1.5*Math.PI+2*Math.PI*f,y=2*Math.PI*p,_=g+y;v===0||f>=1||f+p>1||(t.beginPath(),t.moveTo(s,o),t.arc(s,o,c,g,_),t.closePath(),this.colorFillStyle(t,w[0],w[1],w[2],m),t.fill(),f+=p)}};var Zr={},OZ=100;Zr.getPixelRatio=function(){var t=this.data.contexts[0];if(this.forcedPixelRatio!=null)return this.forcedPixelRatio;var e=t.backingStorePixelRatio||t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/e};Zr.paintCache=function(t){for(var e=this.paintCaches=this.paintCaches||[],r=!0,n,i=0;i<e.length;i++)if(n=e[i],n.context===t){r=!1;break}return r&&(n={context:t},e.push(n)),n};Zr.createGradientStyleFor=function(t,e,r,n,i){var a,s=this.usePaths(),o=r.pstyle(e+"-gradient-stop-colors").value,u=r.pstyle(e+"-gradient-stop-positions").pfValue;if(n==="radial-gradient")if(r.isEdge()){var l=r.sourceEndpoint(),c=r.targetEndpoint(),f=r.midpoint(),h=fs(l,f),d=fs(c,f);a=t.createRadialGradient(f.x,f.y,0,f.x,f.y,Math.max(h,d))}else{var v=s?{x:0,y:0}:r.position(),w=r.paddedWidth(),m=r.paddedHeight();a=t.createRadialGradient(v.x,v.y,0,v.x,v.y,Math.max(w,m))}else if(r.isEdge()){var p=r.sourceEndpoint(),g=r.targetEndpoint();a=t.createLinearGradient(p.x,p.y,g.x,g.y)}else{var y=s?{x:0,y:0}:r.position(),_=r.paddedWidth(),T=r.paddedHeight(),b=_/2,E=T/2,I=r.pstyle("background-gradient-direction").value;switch(I){case"to-bottom":a=t.createLinearGradient(y.x,y.y-E,y.x,y.y+E);break;case"to-top":a=t.createLinearGradient(y.x,y.y+E,y.x,y.y-E);break;case"to-left":a=t.createLinearGradient(y.x+b,y.y,y.x-b,y.y);break;case"to-right":a=t.createLinearGradient(y.x-b,y.y,y.x+b,y.y);break;case"to-bottom-right":case"to-right-bottom":a=t.createLinearGradient(y.x-b,y.y-E,y.x+b,y.y+E);break;case"to-top-right":case"to-right-top":a=t.createLinearGradient(y.x-b,y.y+E,y.x+b,y.y-E);break;case"to-bottom-left":case"to-left-bottom":a=t.createLinearGradient(y.x+b,y.y-E,y.x-b,y.y+E);break;case"to-top-left":case"to-left-top":a=t.createLinearGradient(y.x+b,y.y+E,y.x-b,y.y-E);break}}if(!a)return null;for(var S=u.length===o.length,C=o.length,R=0;R<C;R++)a.addColorStop(S?u[R]:R/(C-1),"rgba("+o[R][0]+","+o[R][1]+","+o[R][2]+","+i+")");return a};Zr.gradientFillStyle=function(t,e,r,n){var i=this.createGradientStyleFor(t,"background",e,r,n);if(!i)return null;t.fillStyle=i};Zr.colorFillStyle=function(t,e,r,n,i){t.fillStyle="rgba("+e+","+r+","+n+","+i+")"};Zr.eleFillStyle=function(t,e,r){var n=e.pstyle("background-fill").value;if(n==="linear-gradient"||n==="radial-gradient")this.gradientFillStyle(t,e,n,r);else{var i=e.pstyle("background-color").value;this.colorFillStyle(t,i[0],i[1],i[2],r)}};Zr.gradientStrokeStyle=function(t,e,r,n){var i=this.createGradientStyleFor(t,"line",e,r,n);if(!i)return null;t.strokeStyle=i};Zr.colorStrokeStyle=function(t,e,r,n,i){t.strokeStyle="rgba("+e+","+r+","+n+","+i+")"};Zr.eleStrokeStyle=function(t,e,r){var n=e.pstyle("line-fill").value;if(n==="linear-gradient"||n==="radial-gradient")this.gradientStrokeStyle(t,e,n,r);else{var i=e.pstyle("line-color").value;this.colorStrokeStyle(t,i[0],i[1],i[2],r)}};Zr.matchCanvasSize=function(t){var e=this,r=e.data,n=e.findContainerClientCoords(),i=n[2],a=n[3],s=e.getPixelRatio(),o=e.motionBlurPxRatio;(t===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_NODE]||t===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_DRAG])&&(s=o);var u=i*s,l=a*s,c;if(!(u===e.canvasWidth&&l===e.canvasHeight)){e.fontCaches=null;var f=r.canvasContainer;f.style.width=i+"px",f.style.height=a+"px";for(var h=0;h<e.CANVAS_LAYERS;h++)c=r.canvases[h],c.width=u,c.height=l,c.style.width=i+"px",c.style.height=a+"px";for(var h=0;h<e.BUFFER_COUNT;h++)c=r.bufferCanvases[h],c.width=u,c.height=l,c.style.width=i+"px",c.style.height=a+"px";e.textureMult=1,s<=1&&(c=r.bufferCanvases[e.TEXTURE_BUFFER],e.textureMult=2,c.width=u*e.textureMult,c.height=l*e.textureMult),e.canvasWidth=u,e.canvasHeight=l}};Zr.renderTo=function(t,e,r,n){this.render({forcedContext:t,forcedZoom:e,forcedPan:r,drawAllLayers:!0,forcedPxRatio:n})};Zr.render=function(t){t=t||hV();var e=t.forcedContext,r=t.drawAllLayers,n=t.drawOnlyNodeLayer,i=t.forcedZoom,a=t.forcedPan,s=this,o=t.forcedPxRatio===void 0?this.getPixelRatio():t.forcedPxRatio,u=s.cy,l=s.data,c=l.canvasNeedsRedraw,f=s.textureOnViewport&&!e&&(s.pinching||s.hoverData.dragging||s.swipePanning||s.data.wheelZooming),h=t.motionBlur!==void 0?t.motionBlur:s.motionBlur,d=s.motionBlurPxRatio,v=u.hasCompoundNodes(),w=s.hoverData.draggingEles,m=!!(s.hoverData.selecting||s.touchData.selecting);h=h&&!e&&s.motionBlurEnabled&&!m;var p=h;e||(s.prevPxRatio!==o&&(s.invalidateContainerClientCoordsCache(),s.matchCanvasSize(s.container),s.redrawHint("eles",!0),s.redrawHint("drag",!0)),s.prevPxRatio=o),!e&&s.motionBlurTimeout&&clearTimeout(s.motionBlurTimeout),h&&(s.mbFrames==null&&(s.mbFrames=0),s.mbFrames++,s.mbFrames<3&&(p=!1),s.mbFrames>s.minMbLowQualFrames&&(s.motionBlurPxRatio=s.mbPxRBlurry)),s.clearingMotionBlur&&(s.motionBlurPxRatio=1),s.textureDrawLastFrame&&!f&&(c[s.NODE]=!0,c[s.SELECT_BOX]=!0);var g=u.style(),y=u.zoom(),_=i!==void 0?i:y,T=u.pan(),b={x:T.x,y:T.y},E={zoom:y,pan:{x:T.x,y:T.y}},I=s.prevViewport,S=I===void 0||E.zoom!==I.zoom||E.pan.x!==I.pan.x||E.pan.y!==I.pan.y;!S&&!(w&&!v)&&(s.motionBlurPxRatio=1),a&&(b=a),_*=o,b.x*=o,b.y*=o;var C=s.getCachedZSortedEles();function R(se,te,me,ue,he){var we=se.globalCompositeOperation;se.globalCompositeOperation="destination-out",s.colorFillStyle(se,255,255,255,s.motionBlurTransparency),se.fillRect(te,me,ue,he),se.globalCompositeOperation=we}function x(se,te){var me,ue,he,we;!s.clearingMotionBlur&&(se===l.bufferContexts[s.MOTIONBLUR_BUFFER_NODE]||se===l.bufferContexts[s.MOTIONBLUR_BUFFER_DRAG])?(me={x:T.x*d,y:T.y*d},ue=y*d,he=s.canvasWidth*d,we=s.canvasHeight*d):(me=b,ue=_,he=s.canvasWidth,we=s.canvasHeight),se.setTransform(1,0,0,1,0,0),te==="motionBlur"?R(se,0,0,he,we):!e&&(te===void 0||te)&&se.clearRect(0,0,he,we),r||(se.translate(me.x,me.y),se.scale(ue,ue)),a&&se.translate(a.x,a.y),i&&se.scale(i,i)}if(f||(s.textureDrawLastFrame=!1),f){if(s.textureDrawLastFrame=!0,!s.textureCache){s.textureCache={},s.textureCache.bb=u.mutableElements().boundingBox(),s.textureCache.texture=s.data.bufferCanvases[s.TEXTURE_BUFFER];var P=s.data.bufferContexts[s.TEXTURE_BUFFER];P.setTransform(1,0,0,1,0,0),P.clearRect(0,0,s.canvasWidth*s.textureMult,s.canvasHeight*s.textureMult),s.render({forcedContext:P,drawOnlyNodeLayer:!0,forcedPxRatio:o*s.textureMult});var E=s.textureCache.viewport={zoom:u.zoom(),pan:u.pan(),width:s.canvasWidth,height:s.canvasHeight};E.mpan={x:(0-E.pan.x)/E.zoom,y:(0-E.pan.y)/E.zoom}}c[s.DRAG]=!1,c[s.NODE]=!1;var A=l.contexts[s.NODE],F=s.textureCache.texture,E=s.textureCache.viewport;A.setTransform(1,0,0,1,0,0),h?R(A,0,0,E.width,E.height):A.clearRect(0,0,E.width,E.height);var O=g.core("outside-texture-bg-color").value,L=g.core("outside-texture-bg-opacity").value;s.colorFillStyle(A,O[0],O[1],O[2],L),A.fillRect(0,0,E.width,E.height);var y=u.zoom();x(A,!1),A.clearRect(E.mpan.x,E.mpan.y,E.width/E.zoom/o,E.height/E.zoom/o),A.drawImage(F,E.mpan.x,E.mpan.y,E.width/E.zoom/o,E.height/E.zoom/o)}else s.textureOnViewport&&!e&&(s.textureCache=null);var D=u.extent(),$=s.pinching||s.hoverData.dragging||s.swipePanning||s.data.wheelZooming||s.hoverData.draggingEles||s.cy.animated(),z=s.hideEdgesOnViewport&&$,B=[];if(B[s.NODE]=!c[s.NODE]&&h&&!s.clearedForMotionBlur[s.NODE]||s.clearingMotionBlur,B[s.NODE]&&(s.clearedForMotionBlur[s.NODE]=!0),B[s.DRAG]=!c[s.DRAG]&&h&&!s.clearedForMotionBlur[s.DRAG]||s.clearingMotionBlur,B[s.DRAG]&&(s.clearedForMotionBlur[s.DRAG]=!0),c[s.NODE]||r||n||B[s.NODE]){var j=h&&!B[s.NODE]&&d!==1,A=e||(j?s.data.bufferContexts[s.MOTIONBLUR_BUFFER_NODE]:l.contexts[s.NODE]),Q=h&&!j?"motionBlur":void 0;x(A,Q),z?s.drawCachedNodes(A,C.nondrag,o,D):s.drawLayeredElements(A,C.nondrag,o,D),s.debug&&s.drawDebugPoints(A,C.nondrag),!r&&!h&&(c[s.NODE]=!1)}if(!n&&(c[s.DRAG]||r||B[s.DRAG])){var j=h&&!B[s.DRAG]&&d!==1,A=e||(j?s.data.bufferContexts[s.MOTIONBLUR_BUFFER_DRAG]:l.contexts[s.DRAG]);x(A,h&&!j?"motionBlur":void 0),z?s.drawCachedNodes(A,C.drag,o,D):s.drawCachedElements(A,C.drag,o,D),s.debug&&s.drawDebugPoints(A,C.drag),!r&&!h&&(c[s.DRAG]=!1)}if(s.showFps||!n&&c[s.SELECT_BOX]&&!r){var A=e||l.contexts[s.SELECT_BOX];if(x(A),s.selection[4]==1&&(s.hoverData.selecting||s.touchData.selecting)){var y=s.cy.zoom(),N=g.core("selection-box-border-width").value/y;A.lineWidth=N,A.fillStyle="rgba("+g.core("selection-box-color").value[0]+","+g.core("selection-box-color").value[1]+","+g.core("selection-box-color").value[2]+","+g.core("selection-box-opacity").value+")",A.fillRect(s.selection[0],s.selection[1],s.selection[2]-s.selection[0],s.selection[3]-s.selection[1]),N>0&&(A.strokeStyle="rgba("+g.core("selection-box-border-color").value[0]+","+g.core("selection-box-border-color").value[1]+","+g.core("selection-box-border-color").value[2]+","+g.core("selection-box-opacity").value+")",A.strokeRect(s.selection[0],s.selection[1],s.selection[2]-s.selection[0],s.selection[3]-s.selection[1]))}if(l.bgActivePosistion&&!s.hoverData.selecting){var y=s.cy.zoom(),M=l.bgActivePosistion;A.fillStyle="rgba("+g.core("active-bg-color").value[0]+","+g.core("active-bg-color").value[1]+","+g.core("active-bg-color").value[2]+","+g.core("active-bg-opacity").value+")",A.beginPath(),A.arc(M.x,M.y,g.core("active-bg-size").pfValue/y,0,2*Math.PI),A.fill()}var q=s.lastRedrawTime;if(s.showFps&&q){q=Math.round(q);var V=Math.round(1e3/q);A.setTransform(1,0,0,1,0,0),A.fillStyle="rgba(255, 0, 0, 0.75)",A.strokeStyle="rgba(255, 0, 0, 0.75)",A.lineWidth=1,A.fillText("1 frame = "+q+" ms = "+V+" fps",0,20);var W=60;A.strokeRect(0,30,250,20),A.fillRect(0,30,250*Math.min(V/W,1),20)}r||(c[s.SELECT_BOX]=!1)}if(h&&d!==1){var X=l.contexts[s.NODE],J=s.data.bufferCanvases[s.MOTIONBLUR_BUFFER_NODE],ae=l.contexts[s.DRAG],ve=s.data.bufferCanvases[s.MOTIONBLUR_BUFFER_DRAG],_e=function(te,me,ue){te.setTransform(1,0,0,1,0,0),ue||!p?te.clearRect(0,0,s.canvasWidth,s.canvasHeight):R(te,0,0,s.canvasWidth,s.canvasHeight);var he=d;te.drawImage(me,0,0,s.canvasWidth*he,s.canvasHeight*he,0,0,s.canvasWidth,s.canvasHeight)};(c[s.NODE]||B[s.NODE])&&(_e(X,J,B[s.NODE]),c[s.NODE]=!1),(c[s.DRAG]||B[s.DRAG])&&(_e(ae,ve,B[s.DRAG]),c[s.DRAG]=!1)}s.prevViewport=E,s.clearingMotionBlur&&(s.clearingMotionBlur=!1,s.motionBlurCleared=!0,s.motionBlur=!0),h&&(s.motionBlurTimeout=setTimeout(function(){s.motionBlurTimeout=null,s.clearedForMotionBlur[s.NODE]=!1,s.clearedForMotionBlur[s.DRAG]=!1,s.motionBlur=!1,s.clearingMotionBlur=!f,s.mbFrames=0,c[s.NODE]=!0,c[s.DRAG]=!0,s.redraw()},OZ)),e||u.emit("render")};var Pa={};Pa.drawPolygonPath=function(t,e,r,n,i,a){var s=n/2,o=i/2;t.beginPath&&t.beginPath(),t.moveTo(e+s*a[0],r+o*a[1]);for(var u=1;u<a.length/2;u++)t.lineTo(e+s*a[u*2],r+o*a[u*2+1]);t.closePath()};Pa.drawRoundPolygonPath=function(t,e,r,n,i,a){var s=n/2,o=i/2,u=ZT(n,i);t.beginPath&&t.beginPath();for(var l=0;l<a.length/4;l++){var c=void 0,f=void 0;l===0?c=a.length-2:c=l*4-2,f=l*4+2;var h=e+s*a[l*4],d=r+o*a[l*4+1],v=-a[c]*a[f]-a[c+1]*a[f+1],w=u/Math.tan(Math.acos(v)/2),m=h-w*a[c],p=d-w*a[c+1],g=h+w*a[f],y=d+w*a[f+1];l===0?t.moveTo(m,p):t.lineTo(m,p),t.arcTo(h,d,g,y,u)}t.closePath()};Pa.drawRoundRectanglePath=function(t,e,r,n,i){var a=n/2,s=i/2,o=tf(n,i);t.beginPath&&t.beginPath(),t.moveTo(e,r-s),t.arcTo(e+a,r-s,e+a,r,o),t.arcTo(e+a,r+s,e,r+s,o),t.arcTo(e-a,r+s,e-a,r,o),t.arcTo(e-a,r-s,e,r-s,o),t.lineTo(e,r-s),t.closePath()};Pa.drawBottomRoundRectanglePath=function(t,e,r,n,i){var a=n/2,s=i/2,o=tf(n,i);t.beginPath&&t.beginPath(),t.moveTo(e,r-s),t.lineTo(e+a,r-s),t.lineTo(e+a,r),t.arcTo(e+a,r+s,e,r+s,o),t.arcTo(e-a,r+s,e-a,r,o),t.lineTo(e-a,r-s),t.lineTo(e,r-s),t.closePath()};Pa.drawCutRectanglePath=function(t,e,r,n,i){var a=n/2,s=i/2,o=wV();t.beginPath&&t.beginPath(),t.moveTo(e-a+o,r-s),t.lineTo(e+a-o,r-s),t.lineTo(e+a,r-s+o),t.lineTo(e+a,r+s-o),t.lineTo(e+a-o,r+s),t.lineTo(e-a+o,r+s),t.lineTo(e-a,r+s-o),t.lineTo(e-a,r-s+o),t.closePath()};Pa.drawBarrelPath=function(t,e,r,n,i){var a=n/2,s=i/2,o=e-a,u=e+a,l=r-s,c=r+s,f=a_(n,i),h=f.widthOffset,d=f.heightOffset,v=f.ctrlPtOffsetPct*h;t.beginPath&&t.beginPath(),t.moveTo(o,l+d),t.lineTo(o,c-d),t.quadraticCurveTo(o+v,c,o+h,c),t.lineTo(u-h,c),t.quadraticCurveTo(u-v,c,u,c-d),t.lineTo(u,l+d),t.quadraticCurveTo(u-v,l,u-h,l),t.lineTo(o+h,l),t.quadraticCurveTo(o+v,l,o,l+d),t.closePath()};var Mx=Math.sin(0),Vx=Math.cos(0),d_={},v_={},dF=Math.PI/40;for(var Fs=0*Math.PI;Fs<2*Math.PI;Fs+=dF)d_[Fs]=Math.sin(Fs),v_[Fs]=Math.cos(Fs);Pa.drawEllipsePath=function(t,e,r,n,i){if(t.beginPath&&t.beginPath(),t.ellipse)t.ellipse(e,r,n/2,i/2,0,0,2*Math.PI);else for(var a,s,o=n/2,u=i/2,l=0*Math.PI;l<2*Math.PI;l+=dF)a=e-o*d_[l]*Mx+o*v_[l]*Vx,s=r+u*v_[l]*Mx+u*d_[l]*Vx,l===0?t.moveTo(a,s):t.lineTo(a,s);t.closePath()};var of={};of.createBuffer=function(t,e){var r=document.createElement("canvas");return r.width=t,r.height=e,[r,r.getContext("2d")]};of.bufferCanvasImage=function(t){var e=this.cy,r=e.mutableElements(),n=r.boundingBox(),i=this.findContainerClientCoords(),a=t.full?Math.ceil(n.w):i[2],s=t.full?Math.ceil(n.h):i[3],o=le(t.maxWidth)||le(t.maxHeight),u=this.getPixelRatio(),l=1;if(t.scale!==void 0)a*=t.scale,s*=t.scale,l=t.scale;else if(o){var c=1/0,f=1/0;le(t.maxWidth)&&(c=l*t.maxWidth/a),le(t.maxHeight)&&(f=l*t.maxHeight/s),l=Math.min(c,f),a*=l,s*=l}o||(a*=u,s*=u,l*=u);var h=document.createElement("canvas");h.width=a,h.height=s,h.style.width=a+"px",h.style.height=s+"px";var d=h.getContext("2d");if(a>0&&s>0){d.clearRect(0,0,a,s),d.globalCompositeOperation="source-over";var v=this.getCachedZSortedEles();if(t.full)d.translate(-n.x1*l,-n.y1*l),d.scale(l,l),this.drawElements(d,v),d.scale(1/l,1/l),d.translate(n.x1*l,n.y1*l);else{var w=e.pan(),m={x:w.x*l,y:w.y*l};l*=e.zoom(),d.translate(m.x,m.y),d.scale(l,l),this.drawElements(d,v),d.scale(1/l,1/l),d.translate(-m.x,-m.y)}t.bg&&(d.globalCompositeOperation="destination-over",d.fillStyle=t.bg,d.rect(0,0,a,s),d.fill())}return h};function NZ(t,e){for(var r=atob(t),n=new ArrayBuffer(r.length),i=new Uint8Array(n),a=0;a<r.length;a++)i[a]=r.charCodeAt(a);return new Blob([n],{type:e})}function Fx(t){var e=t.indexOf(",");return t.substr(e+1)}function vF(t,e,r){var n=function(){return e.toDataURL(r,t.quality)};switch(t.output){case"blob-promise":return new vu(function(i,a){try{e.toBlob(function(s){s!=null?i(s):a(new Error("`canvas.toBlob()` sent a null value in its callback"))},r,t.quality)}catch(s){a(s)}});case"blob":return NZ(Fx(n()),r);case"base64":return Fx(n());case"base64uri":default:return n()}}of.png=function(t){return vF(t,this.bufferCanvasImage(t),"image/png")};of.jpg=function(t){return vF(t,this.bufferCanvasImage(t),"image/jpeg")};var pF={};pF.nodeShapeImpl=function(t,e,r,n,i,a,s){switch(t){case"ellipse":return this.drawEllipsePath(e,r,n,i,a);case"polygon":return this.drawPolygonPath(e,r,n,i,a,s);case"round-polygon":return this.drawRoundPolygonPath(e,r,n,i,a,s);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(e,r,n,i,a);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(e,r,n,i,a);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(e,r,n,i,a);case"barrel":return this.drawBarrelPath(e,r,n,i,a)}};var LZ=gF,Ge=gF.prototype;Ge.CANVAS_LAYERS=3;Ge.SELECT_BOX=0;Ge.DRAG=1;Ge.NODE=2;Ge.BUFFER_COUNT=3;Ge.TEXTURE_BUFFER=0;Ge.MOTIONBLUR_BUFFER_NODE=1;Ge.MOTIONBLUR_BUFFER_DRAG=2;function gF(t){var e=this;e.data={canvases:new Array(Ge.CANVAS_LAYERS),contexts:new Array(Ge.CANVAS_LAYERS),canvasNeedsRedraw:new Array(Ge.CANVAS_LAYERS),bufferCanvases:new Array(Ge.BUFFER_COUNT),bufferContexts:new Array(Ge.CANVAS_LAYERS)};var r="-webkit-tap-highlight-color",n="rgba(0,0,0,0)";e.data.canvasContainer=document.createElement("div");var i=e.data.canvasContainer.style;e.data.canvasContainer.style[r]=n,i.position="relative",i.zIndex="0",i.overflow="hidden";var a=t.cy.container();a.appendChild(e.data.canvasContainer),a.style[r]=n;var s={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};gQ()&&(s["-ms-touch-action"]="none",s["touch-action"]="none");for(var o=0;o<Ge.CANVAS_LAYERS;o++){var u=e.data.canvases[o]=document.createElement("canvas");e.data.contexts[o]=u.getContext("2d"),Object.keys(s).forEach(function(q){u.style[q]=s[q]}),u.style.position="absolute",u.setAttribute("data-id","layer"+o),u.style.zIndex=String(Ge.CANVAS_LAYERS-o),e.data.canvasContainer.appendChild(u),e.data.canvasNeedsRedraw[o]=!1}e.data.topCanvas=e.data.canvases[0],e.data.canvases[Ge.NODE].setAttribute("data-id","layer"+Ge.NODE+"-node"),e.data.canvases[Ge.SELECT_BOX].setAttribute("data-id","layer"+Ge.SELECT_BOX+"-selectbox"),e.data.canvases[Ge.DRAG].setAttribute("data-id","layer"+Ge.DRAG+"-drag");for(var o=0;o<Ge.BUFFER_COUNT;o++)e.data.bufferCanvases[o]=document.createElement("canvas"),e.data.bufferContexts[o]=e.data.bufferCanvases[o].getContext("2d"),e.data.bufferCanvases[o].style.position="absolute",e.data.bufferCanvases[o].setAttribute("data-id","buffer"+o),e.data.bufferCanvases[o].style.zIndex=String(-o-1),e.data.bufferCanvases[o].style.visibility="hidden";e.pathsEnabled=!0;var l=$r(),c=function(V){return{x:(V.x1+V.x2)/2,y:(V.y1+V.y2)/2}},f=function(V){return{x:-V.w/2,y:-V.h/2}},h=function(V){var W=V[0]._private,X=W.oldBackgroundTimestamp===W.backgroundTimestamp;return!X},d=function(V){return V[0]._private.nodeKey},v=function(V){return V[0]._private.labelStyleKey},w=function(V){return V[0]._private.sourceLabelStyleKey},m=function(V){return V[0]._private.targetLabelStyleKey},p=function(V,W,X,J,ae){return e.drawElement(V,W,X,!1,!1,ae)},g=function(V,W,X,J,ae){return e.drawElementText(V,W,X,J,"main",ae)},y=function(V,W,X,J,ae){return e.drawElementText(V,W,X,J,"source",ae)},_=function(V,W,X,J,ae){return e.drawElementText(V,W,X,J,"target",ae)},T=function(V){return V.boundingBox(),V[0]._private.bodyBounds},b=function(V){return V.boundingBox(),V[0]._private.labelBounds.main||l},E=function(V){return V.boundingBox(),V[0]._private.labelBounds.source||l},I=function(V){return V.boundingBox(),V[0]._private.labelBounds.target||l},S=function(V,W){return W},C=function(V){return c(T(V))},R=function(V,W,X){var J=V?V+"-":"";return{x:W.x+X.pstyle(J+"text-margin-x").pfValue,y:W.y+X.pstyle(J+"text-margin-y").pfValue}},x=function(V,W,X){var J=V[0]._private.rscratch;return{x:J[W],y:J[X]}},P=function(V){return R("",x(V,"labelX","labelY"),V)},A=function(V){return R("source",x(V,"sourceLabelX","sourceLabelY"),V)},F=function(V){return R("target",x(V,"targetLabelX","targetLabelY"),V)},O=function(V){return f(T(V))},L=function(V){return f(E(V))},D=function(V){return f(I(V))},$=function(V){var W=b(V),X=f(b(V));if(V.isNode()){switch(V.pstyle("text-halign").value){case"left":X.x=-W.w;break;case"right":X.x=0;break}switch(V.pstyle("text-valign").value){case"top":X.y=-W.h;break;case"bottom":X.y=0;break}}return X},z=e.data.eleTxrCache=new rl(e,{getKey:d,doesEleInvalidateKey:h,drawElement:p,getBoundingBox:T,getRotationPoint:C,getRotationOffset:O,allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),B=e.data.lblTxrCache=new rl(e,{getKey:v,drawElement:g,getBoundingBox:b,getRotationPoint:P,getRotationOffset:$,isVisible:S}),j=e.data.slbTxrCache=new rl(e,{getKey:w,drawElement:y,getBoundingBox:E,getRotationPoint:A,getRotationOffset:L,isVisible:S}),Q=e.data.tlbTxrCache=new rl(e,{getKey:m,drawElement:_,getBoundingBox:I,getRotationPoint:F,getRotationOffset:D,isVisible:S}),N=e.data.lyrTxrCache=new lF(e);e.onUpdateEleCalcs(function(V,W){z.invalidateElements(W),B.invalidateElements(W),j.invalidateElements(W),Q.invalidateElements(W),N.invalidateElements(W);for(var X=0;X<W.length;X++){var J=W[X]._private;J.oldBackgroundTimestamp=J.backgroundTimestamp}});var M=function(V){for(var W=0;W<V.length;W++)N.enqueueElementRefinement(V[W].ele)};z.onDequeue(M),B.onDequeue(M),j.onDequeue(M),Q.onDequeue(M)}Ge.redrawHint=function(t,e){var r=this;switch(t){case"eles":r.data.canvasNeedsRedraw[Ge.NODE]=e;break;case"drag":r.data.canvasNeedsRedraw[Ge.DRAG]=e;break;case"select":r.data.canvasNeedsRedraw[Ge.SELECT_BOX]=e;break}};var MZ=typeof Path2D<"u";Ge.path2dEnabled=function(t){if(t===void 0)return this.pathsEnabled;this.pathsEnabled=!!t};Ge.usePaths=function(){return MZ&&this.pathsEnabled};Ge.setImgSmoothing=function(t,e){t.imageSmoothingEnabled!=null?t.imageSmoothingEnabled=e:(t.webkitImageSmoothingEnabled=e,t.mozImageSmoothingEnabled=e,t.msImageSmoothingEnabled=e)};Ge.getImgSmoothing=function(t){return t.imageSmoothingEnabled!=null?t.imageSmoothingEnabled:t.webkitImageSmoothingEnabled||t.mozImageSmoothingEnabled||t.msImageSmoothingEnabled};Ge.makeOffscreenCanvas=function(t,e){var r;return(typeof OffscreenCanvas>"u"?"undefined":Ft(OffscreenCanvas))!=="undefined"?r=new OffscreenCanvas(t,e):(r=document.createElement("canvas"),r.width=t,r.height=e),r};[cF,ri,Ci,lb,xs,wu,Zr,Pa,of,pF].forEach(function(t){xe(Ge,t)});var VZ=[{name:"null",impl:eF},{name:"base",impl:oF},{name:"canvas",impl:LZ}],FZ=[{type:"layout",extensions:HJ},{type:"renderer",extensions:VZ}],mF={},yF={};function wF(t,e,r){var n=r,i=function(I){Xe("Can not register `"+e+"` for `"+t+"` since `"+I+"` already exists in the prototype and can not be overridden")};if(t==="core"){if(Ec.prototype[e])return i(e);Ec.prototype[e]=r}else if(t==="collection"){if(nr.prototype[e])return i(e);nr.prototype[e]=r}else if(t==="layout"){for(var a=function(I){this.options=I,r.call(this,I),He(this._private)||(this._private={}),this._private.cy=I.cy,this._private.listeners=[],this.createEmitter()},s=a.prototype=Object.create(r.prototype),o=[],u=0;u<o.length;u++){var l=o[u];s[l]=s[l]||function(){return this}}s.start&&!s.run?s.run=function(){return this.start(),this}:!s.start&&s.run&&(s.start=function(){return this.run(),this});var c=r.prototype.stop;s.stop=function(){var E=this.options;if(E&&E.animate){var I=this.animations;if(I)for(var S=0;S<I.length;S++)I[S].stop()}return c?c.call(this):this.emit("layoutstop"),this},s.destroy||(s.destroy=function(){return this}),s.cy=function(){return this._private.cy};var f=function(I){return I._private.cy},h={addEventFields:function(I,S){S.layout=I,S.cy=f(I),S.target=I},bubble:function(){return!0},parent:function(I){return f(I)}};xe(s,{createEmitter:function(){return this._private.emitter=new Xv(h,this),this},emitter:function(){return this._private.emitter},on:function(I,S){return this.emitter().on(I,S),this},one:function(I,S){return this.emitter().one(I,S),this},once:function(I,S){return this.emitter().one(I,S),this},removeListener:function(I,S){return this.emitter().removeListener(I,S),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},emit:function(I,S){return this.emitter().emit(I,S),this}}),Ye.eventAliasesOn(s),n=a}else if(t==="renderer"&&e!=="null"&&e!=="base"){var d=_F("renderer","base"),v=d.prototype,w=r,m=r.prototype,p=function(){d.apply(this,arguments),w.apply(this,arguments)},g=p.prototype;for(var y in v){var _=v[y],T=m[y]!=null;if(T)return i(y);g[y]=_}for(var b in m)g[b]=m[b];v.clientFunctions.forEach(function(E){g[E]=g[E]||function(){_t("Renderer does not implement `renderer."+E+"()` on its prototype")}}),n=p}else if(t==="__proto__"||t==="constructor"||t==="prototype")return _t(t+" is an illegal type to be registered, possibly lead to prototype pollutions");return nV({map:mF,keys:[t,e],value:n})}function _F(t,e){return iV({map:mF,keys:[t,e]})}function BZ(t,e,r,n,i){return nV({map:yF,keys:[t,e,r,n],value:i})}function qZ(t,e,r,n){return iV({map:yF,keys:[t,e,r,n]})}var p_=function(){if(arguments.length===2)return _F.apply(null,arguments);if(arguments.length===3)return wF.apply(null,arguments);if(arguments.length===4)return qZ.apply(null,arguments);if(arguments.length===5)return BZ.apply(null,arguments);_t("Invalid extension access syntax")};Ec.prototype.extension=p_;FZ.forEach(function(t){t.extensions.forEach(function(e){wF(t.type,e.name,e.impl)})});var EF=function t(){if(!(this instanceof t))return new t;this.length=0},vs=EF.prototype;vs.instanceString=function(){return"stylesheet"};vs.selector=function(t){var e=this.length++;return this[e]={selector:t,properties:[]},this};vs.css=function(t,e){var r=this.length-1;if(Te(t))this[r].properties.push({name:t,value:e});else if(He(t))for(var n=t,i=Object.keys(n),a=0;a<i.length;a++){var s=i[a],o=n[s];if(o!=null){var u=gr.properties[s]||gr.properties[Hv(s)];if(u!=null){var l=u.name,c=o;this[r].properties.push({name:l,value:c})}}}return this};vs.style=vs.css;vs.generateStyle=function(t){var e=new gr(t);return this.appendToStyle(e)};vs.appendToStyle=function(t){for(var e=0;e<this.length;e++){var r=this[e],n=r.selector,i=r.properties;t.selector(n);for(var a=0;a<i.length;a++){var s=i[a];t.css(s.name,s.value)}}return t};var $Z="3.28.1",ps=function(e){if(e===void 0&&(e={}),He(e))return new Ec(e);if(Te(e))return p_.apply(p_,arguments)};ps.use=function(t){var e=Array.prototype.slice.call(arguments,1);return e.unshift(ps),t.apply(null,e),this};ps.warnings=function(t){return cV(t)};ps.version=$Z;ps.stylesheet=ps.Stylesheet=EF;var zZ=ps;const TF=Od(zZ);var bF={exports:{}},UZ="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",jZ=UZ,WZ=jZ;function SF(){}function IF(){}IF.resetWarningCache=SF;var HZ=function(){function t(n,i,a,s,o,u){if(u!==WZ){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}t.isRequired=t;function e(){return t}var r={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:IF,resetWarningCache:SF};return r.PropTypes=r,r};bF.exports=HZ();var GZ=bF.exports;const KZ=Od(GZ),{string:Xf,array:Bx,object:Jf,number:qu,bool:zr,oneOfType:Bs,any:Zf,func:$u}=KZ,QZ={id:Xf,className:Xf,style:Bs([Xf,Jf]),elements:Bs([Bx,Zf]),stylesheet:Bs([Bx,Zf]),layout:Bs([Jf,Zf]),pan:Bs([Jf,Zf]),zoom:qu,panningEnabled:zr,userPanningEnabled:zr,minZoom:qu,maxZoom:qu,zoomingEnabled:zr,userZoomingEnabled:zr,boxSelectionEnabled:zr,autoungrabify:zr,autolock:zr,autounselectify:zr,get:$u,toJson:$u,diff:$u,forEach:$u,cy:$u,headless:zr,styleEnabled:zr,hideEdgesOnViewport:zr,textureOnViewport:zr,motionBlur:zr,motionBlurOpacity:qu,wheelSensitivity:qu,pixelRatio:Bs([Xf,Jf])},CF=(t,e)=>{if(((a,s)=>a==null||s==null)(t,e)&&(t!=null||e!=null))return!0;if(t===e)return!1;if(typeof t!="object"||typeof e!="object")return t!==e;const r=Object.keys(t),n=Object.keys(e),i=a=>t[a]!==e[a];return r.length!==n.length||!(!r.some(i)&&!n.some(i))},_n=(t,e)=>t!=null?t[e]:null,YZ={diff:CF,get:_n,toJson:t=>t,forEach:(t,e)=>t.forEach(e),elements:[{data:{id:"a",label:"Example node A"}},{data:{id:"b",label:"Example node B"}},{data:{id:"e",source:"a",target:"b"}}],stylesheet:[{selector:"node",style:{label:"data(label)"}}],zoom:1,pan:{x:0,y:0}},eh=(t,e,r,n)=>r(_n(t,n),_n(e,n)),XZ=(t,e,r,n,i,a,s)=>{t.batch(()=>{(n===CF||eh(e,r,n,"elements"))&&tee(t,_n(e,"elements"),_n(r,"elements"),i,a,s,n),eh(e,r,n,"stylesheet")&&eee(t,_n(e,"stylesheet"),_n(r,"stylesheet"),i),["zoom","minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","pan","panningEnabled","userPanningEnabled","boxSelectionEnabled","autoungrabify","autolock","autounselectify"].forEach(o=>{eh(e,r,n,o)&&JZ(t,o,_n(e,o),_n(r,o),i)})}),eh(e,r,n,"layout")&&ZZ(t,_n(e,"layout"),_n(r,"layout"),i)},JZ=(t,e,r,n,i)=>{t[e](i(n))},ZZ=(t,e,r,n)=>{const i=n(r);i!=null&&t.layout(i).run()},eee=(t,e,r,n)=>{const i=t.style();i!=null&&i.fromJson(n(r)).update()},tee=(t,e,r,n,i,a,s)=>{const o=[],u=t.collection(),l=[],c={},f={},h=d=>i(i(d,"data"),"id");a(r,d=>{const v=h(d);f[v]=d}),e!=null&&a(e,d=>{const v=h(d);c[v]=d,(w=>f[w]!=null)(v)||u.merge(t.getElementById(v))}),a(r,d=>{const v=h(d),w=(m=>c[m])(v);(m=>c[m]!=null)(v)?l.push({ele1:w,ele2:d}):o.push(n(d))}),u.length>0&&t.remove(u),o.length>0&&t.add(o),l.forEach(({ele1:d,ele2:v})=>ree(t,d,v,n,i,s))},ree=(t,e,r,n,i,a)=>{const s=i(i(r,"data"),"id"),o=t.getElementById(s),u={};["data","position","selected","selectable","locked","grabbable","classes"].forEach(c=>{const f=i(r,c);a(f,i(e,c))&&(u[c]=n(f))});const l=i(r,"scratch");a(l,i(e,"scratch"))&&o.scratch(n(l)),Object.keys(u).length>0&&o.json(u)};class nee extends sl.Component{static get propTypes(){return QZ}static get defaultProps(){return YZ}static normalizeElements(e){if(e.length!=null)return e;{let{nodes:r,edges:n}=e;return r==null&&(r=[]),n==null&&(n=[]),r.concat(n)}}constructor(e){super(e),this.displayName="CytoscapeComponent",this.containerRef=sl.createRef()}componentDidMount(){const e=this.containerRef.current,{global:r,headless:n,styleEnabled:i,hideEdgesOnViewport:a,textureOnViewport:s,motionBlur:o,motionBlurOpacity:u,wheelSensitivity:l,pixelRatio:c}=this.props,f=this._cy=new TF({container:e,headless:n,styleEnabled:i,hideEdgesOnViewport:a,textureOnViewport:s,motionBlur:o,motionBlurOpacity:u,wheelSensitivity:l,pixelRatio:c});r&&(window[r]=f),this.updateCytoscape(null,this.props)}updateCytoscape(e,r){const n=this._cy,{diff:i,toJson:a,get:s,forEach:o}=r;XZ(n,e,r,i,a,s,o),r.cy!=null&&r.cy(n)}componentDidUpdate(e){this.updateCytoscape(e,this.props)}componentWillUnmount(){this._cy.destroy()}render(){const{id:e,className:r,style:n}=this.props;return sl.createElement("div",{ref:this.containerRef,id:e,className:r,style:n})}}var xF={exports:{}};function cb(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Eg,qx;function iee(){if(qx)return Eg;qx=1;var t=Fv;function e(){this.__data__=new t,this.size=0}return Eg=e,Eg}var Tg,$x;function aee(){if($x)return Tg;$x=1;function t(e){var r=this.__data__,n=r.delete(e);return this.size=r.size,n}return Tg=t,Tg}var bg,zx;function see(){if(zx)return bg;zx=1;function t(e){return this.__data__.get(e)}return bg=t,bg}var Sg,Ux;function oee(){if(Ux)return Sg;Ux=1;function t(e){return this.__data__.has(e)}return Sg=t,Sg}var Ig,jx;function uee(){if(jx)return Ig;jx=1;var t=Fv,e=BT,r=qT,n=200;function i(a,s){var o=this.__data__;if(o instanceof t){var u=o.__data__;if(!e||u.length<n-1)return u.push([a,s]),this.size=++o.size,this;o=this.__data__=new r(u)}return o.set(a,s),this.size=o.size,this}return Ig=i,Ig}var Cg,Wx;function ap(){if(Wx)return Cg;Wx=1;var t=Fv,e=iee(),r=aee(),n=see(),i=oee(),a=uee();function s(o){var u=this.__data__=new t(o);this.size=u.size}return s.prototype.clear=e,s.prototype.delete=r,s.prototype.get=n,s.prototype.has=i,s.prototype.set=a,Cg=s,Cg}var xg,Hx;function fb(){if(Hx)return xg;Hx=1;function t(e,r){for(var n=-1,i=e==null?0:e.length;++n<i&&r(e[n],n,e)!==!1;);return e}return xg=t,xg}var Rg,Gx;function uf(){if(Gx)return Rg;Gx=1;var t=Uv,e=zv;function r(n,i,a,s){var o=!a;a||(a={});for(var u=-1,l=i.length;++u<l;){var c=i[u],f=s?s(a[c],n[c],c,a,n):void 0;f===void 0&&(f=n[c]),o?e(a,c,f):t(a,c,f)}return a}return Rg=r,Rg}var kg,Kx;function lee(){if(Kx)return kg;Kx=1;function t(e,r){for(var n=-1,i=Array(e);++n<e;)i[n]=r(n);return i}return kg=t,kg}var Ag,Qx;function cee(){if(Qx)return Ag;Qx=1;var t=bs,e=ei,r="[object Arguments]";function n(i){return e(i)&&t(i)==r}return Ag=n,Ag}var Pg,Yx;function lf(){if(Yx)return Pg;Yx=1;var t=cee(),e=ei,r=Object.prototype,n=r.hasOwnProperty,i=r.propertyIsEnumerable,a=t(function(){return arguments}())?t:function(s){return e(s)&&n.call(s,"callee")&&!i.call(s,"callee")};return Pg=a,Pg}var nl={exports:{}},Dg,Xx;function fee(){if(Xx)return Dg;Xx=1;function t(){return!1}return Dg=t,Dg}nl.exports;var Jx;function _u(){return Jx||(Jx=1,function(t,e){var r=Nn,n=fee(),i=e&&!e.nodeType&&e,a=i&&!0&&t&&!t.nodeType&&t,s=a&&a.exports===i,o=s?r.Buffer:void 0,u=o?o.isBuffer:void 0,l=u||n;t.exports=l}(nl,nl.exports)),nl.exports}var Og,Zx;function hb(){if(Zx)return Og;Zx=1;var t=9007199254740991;function e(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=t}return Og=e,Og}var Ng,eR;function hee(){if(eR)return Ng;eR=1;var t=bs,e=hb(),r=ei,n="[object Arguments]",i="[object Array]",a="[object Boolean]",s="[object Date]",o="[object Error]",u="[object Function]",l="[object Map]",c="[object Number]",f="[object Object]",h="[object RegExp]",d="[object Set]",v="[object String]",w="[object WeakMap]",m="[object ArrayBuffer]",p="[object DataView]",g="[object Float32Array]",y="[object Float64Array]",_="[object Int8Array]",T="[object Int16Array]",b="[object Int32Array]",E="[object Uint8Array]",I="[object Uint8ClampedArray]",S="[object Uint16Array]",C="[object Uint32Array]",R={};R[g]=R[y]=R[_]=R[T]=R[b]=R[E]=R[I]=R[S]=R[C]=!0,R[n]=R[i]=R[m]=R[a]=R[p]=R[s]=R[o]=R[u]=R[l]=R[c]=R[f]=R[h]=R[d]=R[v]=R[w]=!1;function x(P){return r(P)&&e(P.length)&&!!R[t(P)]}return Ng=x,Ng}var Lg,tR;function sp(){if(tR)return Lg;tR=1;function t(e){return function(r){return e(r)}}return Lg=t,Lg}var il={exports:{}};il.exports;var rR;function db(){return rR||(rR=1,function(t,e){var r=BM,n=e&&!e.nodeType&&e,i=n&&!0&&t&&!t.nodeType&&t,a=i&&i.exports===n,s=a&&r.process,o=function(){try{var u=i&&i.require&&i.require("util").types;return u||s&&s.binding&&s.binding("util")}catch{}}();t.exports=o}(il,il.exports)),il.exports}var Mg,nR;function cf(){if(nR)return Mg;nR=1;var t=hee(),e=sp(),r=db(),n=r&&r.isTypedArray,i=n?e(n):t;return Mg=i,Mg}var Vg,iR;function RF(){if(iR)return Vg;iR=1;var t=lee(),e=lf(),r=It,n=_u(),i=jv,a=cf(),s=Object.prototype,o=s.hasOwnProperty;function u(l,c){var f=r(l),h=!f&&e(l),d=!f&&!h&&n(l),v=!f&&!h&&!d&&a(l),w=f||h||d||v,m=w?t(l.length,String):[],p=m.length;for(var g in l)(c||o.call(l,g))&&!(w&&(g=="length"||d&&(g=="offset"||g=="parent")||v&&(g=="buffer"||g=="byteLength"||g=="byteOffset")||i(g,p)))&&m.push(g);return m}return Vg=u,Vg}var Fg,aR;function op(){if(aR)return Fg;aR=1;var t=Object.prototype;function e(r){var n=r&&r.constructor,i=typeof n=="function"&&n.prototype||t;return r===i}return Fg=e,Fg}var Bg,sR;function kF(){if(sR)return Bg;sR=1;function t(e,r){return function(n){return e(r(n))}}return Bg=t,Bg}var qg,oR;function dee(){if(oR)return qg;oR=1;var t=kF(),e=t(Object.keys,Object);return qg=e,qg}var $g,uR;function vb(){if(uR)return $g;uR=1;var t=op(),e=dee(),r=Object.prototype,n=r.hasOwnProperty;function i(a){if(!t(a))return e(a);var s=[];for(var o in Object(a))n.call(a,o)&&o!="constructor"&&s.push(o);return s}return $g=i,$g}var zg,lR;function xi(){if(lR)return zg;lR=1;var t=Qc(),e=hb();function r(n){return n!=null&&e(n.length)&&!t(n)}return zg=r,zg}var Ug,cR;function Da(){if(cR)return Ug;cR=1;var t=RF(),e=vb(),r=xi();function n(i){return r(i)?t(i):e(i)}return Ug=n,Ug}var jg,fR;function vee(){if(fR)return jg;fR=1;var t=uf(),e=Da();function r(n,i){return n&&t(i,e(i),n)}return jg=r,jg}var Wg,hR;function pee(){if(hR)return Wg;hR=1;function t(e){var r=[];if(e!=null)for(var n in Object(e))r.push(n);return r}return Wg=t,Wg}var Hg,dR;function gee(){if(dR)return Hg;dR=1;var t=Jr,e=op(),r=pee(),n=Object.prototype,i=n.hasOwnProperty;function a(s){if(!t(s))return r(s);var o=e(s),u=[];for(var l in s)l=="constructor"&&(o||!i.call(s,l))||u.push(l);return u}return Hg=a,Hg}var Gg,vR;function Rs(){if(vR)return Gg;vR=1;var t=RF(),e=gee(),r=xi();function n(i){return r(i)?t(i,!0):e(i)}return Gg=n,Gg}var Kg,pR;function mee(){if(pR)return Kg;pR=1;var t=uf(),e=Rs();function r(n,i){return n&&t(i,e(i),n)}return Kg=r,Kg}var al={exports:{}};al.exports;var gR;function AF(){return gR||(gR=1,function(t,e){var r=Nn,n=e&&!e.nodeType&&e,i=n&&!0&&t&&!t.nodeType&&t,a=i&&i.exports===n,s=a?r.Buffer:void 0,o=s?s.allocUnsafe:void 0;function u(l,c){if(c)return l.slice();var f=l.length,h=o?o(f):new l.constructor(f);return l.copy(h),h}t.exports=u}(al,al.exports)),al.exports}var Qg,mR;function PF(){if(mR)return Qg;mR=1;function t(e,r){for(var n=-1,i=e==null?0:e.length,a=0,s=[];++n<i;){var o=e[n];r(o,n,e)&&(s[a++]=o)}return s}return Qg=t,Qg}var Yg,yR;function DF(){if(yR)return Yg;yR=1;function t(){return[]}return Yg=t,Yg}var Xg,wR;function pb(){if(wR)return Xg;wR=1;var t=PF(),e=DF(),r=Object.prototype,n=r.propertyIsEnumerable,i=Object.getOwnPropertySymbols,a=i?function(s){return s==null?[]:(s=Object(s),t(i(s),function(o){return n.call(s,o)}))}:e;return Xg=a,Xg}var Jg,_R;function yee(){if(_R)return Jg;_R=1;var t=uf(),e=pb();function r(n,i){return t(n,e(n),i)}return Jg=r,Jg}var Zg,ER;function gb(){if(ER)return Zg;ER=1;function t(e,r){for(var n=-1,i=r.length,a=e.length;++n<i;)e[a+n]=r[n];return e}return Zg=t,Zg}var em,TR;function up(){if(TR)return em;TR=1;var t=kF(),e=t(Object.getPrototypeOf,Object);return em=e,em}var tm,bR;function OF(){if(bR)return tm;bR=1;var t=gb(),e=up(),r=pb(),n=DF(),i=Object.getOwnPropertySymbols,a=i?function(s){for(var o=[];s;)t(o,r(s)),s=e(s);return o}:n;return tm=a,tm}var rm,SR;function wee(){if(SR)return rm;SR=1;var t=uf(),e=OF();function r(n,i){return t(n,e(n),i)}return rm=r,rm}var nm,IR;function NF(){if(IR)return nm;IR=1;var t=gb(),e=It;function r(n,i,a){var s=i(n);return e(n)?s:t(s,a(n))}return nm=r,nm}var im,CR;function LF(){if(CR)return im;CR=1;var t=NF(),e=pb(),r=Da();function n(i){return t(i,r,e)}return im=n,im}var am,xR;function _ee(){if(xR)return am;xR=1;var t=NF(),e=OF(),r=Rs();function n(i){return t(i,r,e)}return am=n,am}var sm,RR;function Eee(){if(RR)return sm;RR=1;var t=Is,e=Nn,r=t(e,"DataView");return sm=r,sm}var om,kR;function Tee(){if(kR)return om;kR=1;var t=Is,e=Nn,r=t(e,"Promise");return om=r,om}var um,AR;function MF(){if(AR)return um;AR=1;var t=Is,e=Nn,r=t(e,"Set");return um=r,um}var lm,PR;function bee(){if(PR)return lm;PR=1;var t=Is,e=Nn,r=t(e,"WeakMap");return lm=r,lm}var cm,DR;function Eu(){if(DR)return cm;DR=1;var t=Eee(),e=BT,r=Tee(),n=MF(),i=bee(),a=bs,s=jM(),o="[object Map]",u="[object Object]",l="[object Promise]",c="[object Set]",f="[object WeakMap]",h="[object DataView]",d=s(t),v=s(e),w=s(r),m=s(n),p=s(i),g=a;return(t&&g(new t(new ArrayBuffer(1)))!=h||e&&g(new e)!=o||r&&g(r.resolve())!=l||n&&g(new n)!=c||i&&g(new i)!=f)&&(g=function(y){var _=a(y),T=_==u?y.constructor:void 0,b=T?s(T):"";if(b)switch(b){case d:return h;case v:return o;case w:return l;case m:return c;case p:return f}return _}),cm=g,cm}var fm,OR;function See(){if(OR)return fm;OR=1;var t=Object.prototype,e=t.hasOwnProperty;function r(n){var i=n.length,a=new n.constructor(i);return i&&typeof n[0]=="string"&&e.call(n,"index")&&(a.index=n.index,a.input=n.input),a}return fm=r,fm}var hm,NR;function VF(){if(NR)return hm;NR=1;var t=Nn,e=t.Uint8Array;return hm=e,hm}var dm,LR;function mb(){if(LR)return dm;LR=1;var t=VF();function e(r){var n=new r.constructor(r.byteLength);return new t(n).set(new t(r)),n}return dm=e,dm}var vm,MR;function Iee(){if(MR)return vm;MR=1;var t=mb();function e(r,n){var i=n?t(r.buffer):r.buffer;return new r.constructor(i,r.byteOffset,r.byteLength)}return vm=e,vm}var pm,VR;function Cee(){if(VR)return pm;VR=1;var t=/\w*$/;function e(r){var n=new r.constructor(r.source,t.exec(r));return n.lastIndex=r.lastIndex,n}return pm=e,pm}var gm,FR;function xee(){if(FR)return gm;FR=1;var t=ou,e=t?t.prototype:void 0,r=e?e.valueOf:void 0;function n(i){return r?Object(r.call(i)):{}}return gm=n,gm}var mm,BR;function FF(){if(BR)return mm;BR=1;var t=mb();function e(r,n){var i=n?t(r.buffer):r.buffer;return new r.constructor(i,r.byteOffset,r.length)}return mm=e,mm}var ym,qR;function Ree(){if(qR)return ym;qR=1;var t=mb(),e=Iee(),r=Cee(),n=xee(),i=FF(),a="[object Boolean]",s="[object Date]",o="[object Map]",u="[object Number]",l="[object RegExp]",c="[object Set]",f="[object String]",h="[object Symbol]",d="[object ArrayBuffer]",v="[object DataView]",w="[object Float32Array]",m="[object Float64Array]",p="[object Int8Array]",g="[object Int16Array]",y="[object Int32Array]",_="[object Uint8Array]",T="[object Uint8ClampedArray]",b="[object Uint16Array]",E="[object Uint32Array]";function I(S,C,R){var x=S.constructor;switch(C){case d:return t(S);case a:case s:return new x(+S);case v:return e(S,R);case w:case m:case p:case g:case y:case _:case T:case b:case E:return i(S,R);case o:return new x;case u:case f:return new x(S);case l:return r(S);case c:return new x;case h:return n(S)}}return ym=I,ym}var wm,$R;function BF(){if($R)return wm;$R=1;var t=Jr,e=Object.create,r=function(){function n(){}return function(i){if(!t(i))return{};if(e)return e(i);n.prototype=i;var a=new n;return n.prototype=void 0,a}}();return wm=r,wm}var _m,zR;function qF(){if(zR)return _m;zR=1;var t=BF(),e=up(),r=op();function n(i){return typeof i.constructor=="function"&&!r(i)?t(e(i)):{}}return _m=n,_m}var Em,UR;function kee(){if(UR)return Em;UR=1;var t=Eu(),e=ei,r="[object Map]";function n(i){return e(i)&&t(i)==r}return Em=n,Em}var Tm,jR;function Aee(){if(jR)return Tm;jR=1;var t=kee(),e=sp(),r=db(),n=r&&r.isMap,i=n?e(n):t;return Tm=i,Tm}var bm,WR;function Pee(){if(WR)return bm;WR=1;var t=Eu(),e=ei,r="[object Set]";function n(i){return e(i)&&t(i)==r}return bm=n,bm}var Sm,HR;function Dee(){if(HR)return Sm;HR=1;var t=Pee(),e=sp(),r=db(),n=r&&r.isSet,i=n?e(n):t;return Sm=i,Sm}var Im,GR;function $F(){if(GR)return Im;GR=1;var t=ap(),e=fb(),r=Uv,n=vee(),i=mee(),a=AF(),s=UT,o=yee(),u=wee(),l=LF(),c=_ee(),f=Eu(),h=See(),d=Ree(),v=qF(),w=It,m=_u(),p=Aee(),g=Jr,y=Dee(),_=Da(),T=Rs(),b=1,E=2,I=4,S="[object Arguments]",C="[object Array]",R="[object Boolean]",x="[object Date]",P="[object Error]",A="[object Function]",F="[object GeneratorFunction]",O="[object Map]",L="[object Number]",D="[object Object]",$="[object RegExp]",z="[object Set]",B="[object String]",j="[object Symbol]",Q="[object WeakMap]",N="[object ArrayBuffer]",M="[object DataView]",q="[object Float32Array]",V="[object Float64Array]",W="[object Int8Array]",X="[object Int16Array]",J="[object Int32Array]",ae="[object Uint8Array]",ve="[object Uint8ClampedArray]",_e="[object Uint16Array]",se="[object Uint32Array]",te={};te[S]=te[C]=te[N]=te[M]=te[R]=te[x]=te[q]=te[V]=te[W]=te[X]=te[J]=te[O]=te[L]=te[D]=te[$]=te[z]=te[B]=te[j]=te[ae]=te[ve]=te[_e]=te[se]=!0,te[P]=te[A]=te[Q]=!1;function me(ue,he,we,Fe,Ae,be){var Se,G=he&b,k=he&E,H=he&I;if(we&&(Se=Ae?we(ue,Fe,Ae,be):we(ue)),Se!==void 0)return Se;if(!g(ue))return ue;var ee=w(ue);if(ee){if(Se=h(ue),!G)return s(ue,Se)}else{var K=f(ue),Y=K==A||K==F;if(m(ue))return a(ue,G);if(K==D||K==S||Y&&!Ae){if(Se=k||Y?{}:v(ue),!G)return k?u(ue,i(Se,ue)):o(ue,n(Se,ue))}else{if(!te[K])return Ae?ue:{};Se=d(ue,K,G)}}be||(be=new t);var Ee=be.get(ue);if(Ee)return Ee;be.set(ue,Se),y(ue)?ue.forEach(function(Ce){Se.add(me(Ce,he,we,Ce,ue,be))}):p(ue)&&ue.forEach(function(Ce,Ve){Se.set(Ve,me(Ce,he,we,Ve,ue,be))});var Z=H?k?c:l:k?T:_,ye=ee?void 0:Z(ue);return e(ye||ue,function(Ce,Ve){ye&&(Ve=Ce,Ce=ue[Ve]),r(Se,Ve,me(Ce,he,we,Ve,ue,be))}),Se}return Im=me,Im}var Cm,KR;function Oee(){if(KR)return Cm;KR=1;var t=$F(),e=4;function r(n){return t(n,e)}return Cm=r,Cm}var xm,QR;function yb(){if(QR)return xm;QR=1;function t(e){return function(){return e}}return xm=t,xm}var Rm,YR;function Nee(){if(YR)return Rm;YR=1;function t(e){return function(r,n,i){for(var a=-1,s=Object(r),o=i(r),u=o.length;u--;){var l=o[e?u:++a];if(n(s[l],l,s)===!1)break}return r}}return Rm=t,Rm}var km,XR;function wb(){if(XR)return km;XR=1;var t=Nee(),e=t();return km=e,km}var Am,JR;function _b(){if(JR)return Am;JR=1;var t=wb(),e=Da();function r(n,i){return n&&t(n,i,e)}return Am=r,Am}var Pm,ZR;function Lee(){if(ZR)return Pm;ZR=1;var t=xi();function e(r,n){return function(i,a){if(i==null)return i;if(!t(i))return r(i,a);for(var s=i.length,o=n?s:-1,u=Object(i);(n?o--:++o<s)&&a(u[o],o,u)!==!1;);return i}}return Pm=e,Pm}var Dm,ek;function lp(){if(ek)return Dm;ek=1;var t=_b(),e=Lee(),r=e(t);return Dm=r,Dm}var Om,tk;function ks(){if(tk)return Om;tk=1;function t(e){return e}return Om=t,Om}var Nm,rk;function zF(){if(rk)return Nm;rk=1;var t=ks();function e(r){return typeof r=="function"?r:t}return Nm=e,Nm}var Lm,nk;function UF(){if(nk)return Lm;nk=1;var t=fb(),e=lp(),r=zF(),n=It;function i(a,s){var o=n(a)?t:e;return o(a,r(s))}return Lm=i,Lm}var Mm,ik;function jF(){return ik||(ik=1,Mm=UF()),Mm}var Vm,ak;function Mee(){if(ak)return Vm;ak=1;var t=lp();function e(r,n){var i=[];return t(r,function(a,s,o){n(a,s,o)&&i.push(a)}),i}return Vm=e,Vm}var Fm,sk;function Vee(){if(sk)return Fm;sk=1;var t="__lodash_hash_undefined__";function e(r){return this.__data__.set(r,t),this}return Fm=e,Fm}var Bm,ok;function Fee(){if(ok)return Bm;ok=1;function t(e){return this.__data__.has(e)}return Bm=t,Bm}var qm,uk;function WF(){if(uk)return qm;uk=1;var t=qT,e=Vee(),r=Fee();function n(i){var a=-1,s=i==null?0:i.length;for(this.__data__=new t;++a<s;)this.add(i[a])}return n.prototype.add=n.prototype.push=e,n.prototype.has=r,qm=n,qm}var $m,lk;function Bee(){if(lk)return $m;lk=1;function t(e,r){for(var n=-1,i=e==null?0:e.length;++n<i;)if(r(e[n],n,e))return!0;return!1}return $m=t,$m}var zm,ck;function HF(){if(ck)return zm;ck=1;function t(e,r){return e.has(r)}return zm=t,zm}var Um,fk;function GF(){if(fk)return Um;fk=1;var t=WF(),e=Bee(),r=HF(),n=1,i=2;function a(s,o,u,l,c,f){var h=u&n,d=s.length,v=o.length;if(d!=v&&!(h&&v>d))return!1;var w=f.get(s),m=f.get(o);if(w&&m)return w==o&&m==s;var p=-1,g=!0,y=u&i?new t:void 0;for(f.set(s,o),f.set(o,s);++p<d;){var _=s[p],T=o[p];if(l)var b=h?l(T,_,p,o,s,f):l(_,T,p,s,o,f);if(b!==void 0){if(b)continue;g=!1;break}if(y){if(!e(o,function(E,I){if(!r(y,I)&&(_===E||c(_,E,u,l,f)))return y.push(I)})){g=!1;break}}else if(!(_===T||c(_,T,u,l,f))){g=!1;break}}return f.delete(s),f.delete(o),g}return Um=a,Um}var jm,hk;function qee(){if(hk)return jm;hk=1;function t(e){var r=-1,n=Array(e.size);return e.forEach(function(i,a){n[++r]=[a,i]}),n}return jm=t,jm}var Wm,dk;function Eb(){if(dk)return Wm;dk=1;function t(e){var r=-1,n=Array(e.size);return e.forEach(function(i){n[++r]=i}),n}return Wm=t,Wm}var Hm,vk;function $ee(){if(vk)return Hm;vk=1;var t=ou,e=VF(),r=lu,n=GF(),i=qee(),a=Eb(),s=1,o=2,u="[object Boolean]",l="[object Date]",c="[object Error]",f="[object Map]",h="[object Number]",d="[object RegExp]",v="[object Set]",w="[object String]",m="[object Symbol]",p="[object ArrayBuffer]",g="[object DataView]",y=t?t.prototype:void 0,_=y?y.valueOf:void 0;function T(b,E,I,S,C,R,x){switch(I){case g:if(b.byteLength!=E.byteLength||b.byteOffset!=E.byteOffset)return!1;b=b.buffer,E=E.buffer;case p:return!(b.byteLength!=E.byteLength||!R(new e(b),new e(E)));case u:case l:case h:return r(+b,+E);case c:return b.name==E.name&&b.message==E.message;case d:case w:return b==E+"";case f:var P=i;case v:var A=S&s;if(P||(P=a),b.size!=E.size&&!A)return!1;var F=x.get(b);if(F)return F==E;S|=o,x.set(b,E);var O=n(P(b),P(E),S,C,R,x);return x.delete(b),O;case m:if(_)return _.call(b)==_.call(E)}return!1}return Hm=T,Hm}var Gm,pk;function zee(){if(pk)return Gm;pk=1;var t=LF(),e=1,r=Object.prototype,n=r.hasOwnProperty;function i(a,s,o,u,l,c){var f=o&e,h=t(a),d=h.length,v=t(s),w=v.length;if(d!=w&&!f)return!1;for(var m=d;m--;){var p=h[m];if(!(f?p in s:n.call(s,p)))return!1}var g=c.get(a),y=c.get(s);if(g&&y)return g==s&&y==a;var _=!0;c.set(a,s),c.set(s,a);for(var T=f;++m<d;){p=h[m];var b=a[p],E=s[p];if(u)var I=f?u(E,b,p,s,a,c):u(b,E,p,a,s,c);if(!(I===void 0?b===E||l(b,E,o,u,c):I)){_=!1;break}T||(T=p=="constructor")}if(_&&!T){var S=a.constructor,C=s.constructor;S!=C&&"constructor"in a&&"constructor"in s&&!(typeof S=="function"&&S instanceof S&&typeof C=="function"&&C instanceof C)&&(_=!1)}return c.delete(a),c.delete(s),_}return Gm=i,Gm}var Km,gk;function Uee(){if(gk)return Km;gk=1;var t=ap(),e=GF(),r=$ee(),n=zee(),i=Eu(),a=It,s=_u(),o=cf(),u=1,l="[object Arguments]",c="[object Array]",f="[object Object]",h=Object.prototype,d=h.hasOwnProperty;function v(w,m,p,g,y,_){var T=a(w),b=a(m),E=T?c:i(w),I=b?c:i(m);E=E==l?f:E,I=I==l?f:I;var S=E==f,C=I==f,R=E==I;if(R&&s(w)){if(!s(m))return!1;T=!0,S=!1}if(R&&!S)return _||(_=new t),T||o(w)?e(w,m,p,g,y,_):r(w,m,E,p,g,y,_);if(!(p&u)){var x=S&&d.call(w,"__wrapped__"),P=C&&d.call(m,"__wrapped__");if(x||P){var A=x?w.value():w,F=P?m.value():m;return _||(_=new t),y(A,F,p,g,_)}}return R?(_||(_=new t),n(w,m,p,g,y,_)):!1}return Km=v,Km}var Qm,mk;function KF(){if(mk)return Qm;mk=1;var t=Uee(),e=ei;function r(n,i,a,s,o){return n===i?!0:n==null||i==null||!e(n)&&!e(i)?n!==n&&i!==i:t(n,i,a,s,r,o)}return Qm=r,Qm}var Ym,yk;function jee(){if(yk)return Ym;yk=1;var t=ap(),e=KF(),r=1,n=2;function i(a,s,o,u){var l=o.length,c=l,f=!u;if(a==null)return!c;for(a=Object(a);l--;){var h=o[l];if(f&&h[2]?h[1]!==a[h[0]]:!(h[0]in a))return!1}for(;++l<c;){h=o[l];var d=h[0],v=a[d],w=h[1];if(f&&h[2]){if(v===void 0&&!(d in a))return!1}else{var m=new t;if(u)var p=u(v,w,d,a,s,m);if(!(p===void 0?e(w,v,r|n,u,m):p))return!1}}return!0}return Ym=i,Ym}var Xm,wk;function QF(){if(wk)return Xm;wk=1;var t=Jr;function e(r){return r===r&&!t(r)}return Xm=e,Xm}var Jm,_k;function Wee(){if(_k)return Jm;_k=1;var t=QF(),e=Da();function r(n){for(var i=e(n),a=i.length;a--;){var s=i[a],o=n[s];i[a]=[s,o,t(o)]}return i}return Jm=r,Jm}var Zm,Ek;function YF(){if(Ek)return Zm;Ek=1;function t(e,r){return function(n){return n==null?!1:n[e]===r&&(r!==void 0||e in Object(n))}}return Zm=t,Zm}var ey,Tk;function Hee(){if(Tk)return ey;Tk=1;var t=jee(),e=Wee(),r=YF();function n(i){var a=e(i);return a.length==1&&a[0][2]?r(a[0][0],a[0][1]):function(s){return s===i||t(s,i,a)}}return ey=n,ey}var ty,bk;function Gee(){if(bk)return ty;bk=1;function t(e,r){return e!=null&&r in Object(e)}return ty=t,ty}var ry,Sk;function XF(){if(Sk)return ry;Sk=1;var t=qv,e=lf(),r=It,n=jv,i=hb(),a=hu;function s(o,u,l){u=t(u,o);for(var c=-1,f=u.length,h=!1;++c<f;){var d=a(u[c]);if(!(h=o!=null&&l(o,d)))break;o=o[d]}return h||++c!=f?h:(f=o==null?0:o.length,!!f&&i(f)&&n(d,f)&&(r(o)||e(o)))}return ry=s,ry}var ny,Ik;function JF(){if(Ik)return ny;Ik=1;var t=Gee(),e=XF();function r(n,i){return n!=null&&e(n,i,t)}return ny=r,ny}var iy,Ck;function Kee(){if(Ck)return iy;Ck=1;var t=KF(),e=KM,r=JF(),n=FT,i=QF(),a=YF(),s=hu,o=1,u=2;function l(c,f){return n(c)&&i(f)?a(s(c),f):function(h){var d=e(h,c);return d===void 0&&d===f?r(h,c):t(f,d,o|u)}}return iy=l,iy}var ay,xk;function ZF(){if(xk)return ay;xk=1;function t(e){return function(r){return r==null?void 0:r[e]}}return ay=t,ay}var sy,Rk;function Qee(){if(Rk)return sy;Rk=1;var t=$v;function e(r){return function(n){return t(n,r)}}return sy=e,sy}var oy,kk;function Yee(){if(kk)return oy;kk=1;var t=ZF(),e=Qee(),r=FT,n=hu;function i(a){return r(a)?t(n(a)):e(a)}return oy=i,oy}var uy,Ak;function Ri(){if(Ak)return uy;Ak=1;var t=Hee(),e=Kee(),r=ks(),n=It,i=Yee();function a(s){return typeof s=="function"?s:s==null?r:typeof s=="object"?n(s)?e(s[0],s[1]):t(s):i(s)}return uy=a,uy}var ly,Pk;function eB(){if(Pk)return ly;Pk=1;var t=PF(),e=Mee(),r=Ri(),n=It;function i(a,s){var o=n(a)?t:e;return o(a,r(s,3))}return ly=i,ly}var cy,Dk;function Xee(){if(Dk)return cy;Dk=1;var t=Object.prototype,e=t.hasOwnProperty;function r(n,i){return n!=null&&e.call(n,i)}return cy=r,cy}var fy,Ok;function tB(){if(Ok)return fy;Ok=1;var t=Xee(),e=XF();function r(n,i){return n!=null&&e(n,i,t)}return fy=r,fy}var hy,Nk;function Jee(){if(Nk)return hy;Nk=1;var t=vb(),e=Eu(),r=lf(),n=It,i=xi(),a=_u(),s=op(),o=cf(),u="[object Map]",l="[object Set]",c=Object.prototype,f=c.hasOwnProperty;function h(d){if(d==null)return!0;if(i(d)&&(n(d)||typeof d=="string"||typeof d.splice=="function"||a(d)||o(d)||r(d)))return!d.length;var v=e(d);if(v==u||v==l)return!d.size;if(s(d))return!t(d).length;for(var w in d)if(f.call(d,w))return!1;return!0}return hy=h,hy}var dy,Lk;function rB(){if(Lk)return dy;Lk=1;function t(e){return e===void 0}return dy=t,dy}var vy,Mk;function nB(){if(Mk)return vy;Mk=1;var t=lp(),e=xi();function r(n,i){var a=-1,s=e(n)?Array(n.length):[];return t(n,function(o,u,l){s[++a]=i(o,u,l)}),s}return vy=r,vy}var py,Vk;function iB(){if(Vk)return py;Vk=1;var t=Yc,e=Ri(),r=nB(),n=It;function i(a,s){var o=n(a)?t:r;return o(a,e(s,3))}return py=i,py}var gy,Fk;function Zee(){if(Fk)return gy;Fk=1;function t(e,r,n,i){var a=-1,s=e==null?0:e.length;for(i&&s&&(n=e[++a]);++a<s;)n=r(n,e[a],a,e);return n}return gy=t,gy}var my,Bk;function ete(){if(Bk)return my;Bk=1;function t(e,r,n,i,a){return a(e,function(s,o,u){n=i?(i=!1,s):r(n,s,o,u)}),n}return my=t,my}var yy,qk;function aB(){if(qk)return yy;qk=1;var t=Zee(),e=lp(),r=Ri(),n=ete(),i=It;function a(s,o,u){var l=i(s)?t:n,c=arguments.length<3;return l(s,r(o,4),u,c,e)}return yy=a,yy}var wy,$k;function tte(){if($k)return wy;$k=1;var t=bs,e=It,r=ei,n="[object String]";function i(a){return typeof a=="string"||!e(a)&&r(a)&&t(a)==n}return wy=i,wy}var _y,zk;function rte(){if(zk)return _y;zk=1;var t=ZF(),e=t("length");return _y=e,_y}var Ey,Uk;function nte(){if(Uk)return Ey;Uk=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",i=e+r+n,a="\\ufe0e\\ufe0f",s="\\u200d",o=RegExp("["+s+t+i+a+"]");function u(l){return o.test(l)}return Ey=u,Ey}var Ty,jk;function ite(){if(jk)return Ty;jk=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",i=e+r+n,a="\\ufe0e\\ufe0f",s="["+t+"]",o="["+i+"]",u="\\ud83c[\\udffb-\\udfff]",l="(?:"+o+"|"+u+")",c="[^"+t+"]",f="(?:\\ud83c[\\udde6-\\uddff]){2}",h="[\\ud800-\\udbff][\\udc00-\\udfff]",d="\\u200d",v=l+"?",w="["+a+"]?",m="(?:"+d+"(?:"+[c,f,h].join("|")+")"+w+v+")*",p=w+v+m,g="(?:"+[c+o+"?",o,f,h,s].join("|")+")",y=RegExp(u+"(?="+u+")|"+g+p,"g");function _(T){for(var b=y.lastIndex=0;y.test(T);)++b;return b}return Ty=_,Ty}var by,Wk;function ate(){if(Wk)return by;Wk=1;var t=rte(),e=nte(),r=ite();function n(i){return e(i)?r(i):t(i)}return by=n,by}var Sy,Hk;function ste(){if(Hk)return Sy;Hk=1;var t=vb(),e=Eu(),r=xi(),n=tte(),i=ate(),a="[object Map]",s="[object Set]";function o(u){if(u==null)return 0;if(r(u))return n(u)?i(u):u.length;var l=e(u);return l==a||l==s?u.size:t(u).length}return Sy=o,Sy}var Iy,Gk;function ote(){if(Gk)return Iy;Gk=1;var t=fb(),e=BF(),r=_b(),n=Ri(),i=up(),a=It,s=_u(),o=Qc(),u=Jr,l=cf();function c(f,h,d){var v=a(f),w=v||s(f)||l(f);if(h=n(h,4),d==null){var m=f&&f.constructor;w?d=v?new m:[]:u(f)?d=o(m)?e(i(f)):{}:d={}}return(w?t:r)(f,function(p,g,y){return h(d,p,g,y)}),d}return Iy=c,Iy}var Cy,Kk;function ute(){if(Kk)return Cy;Kk=1;var t=ou,e=lf(),r=It,n=t?t.isConcatSpreadable:void 0;function i(a){return r(a)||e(a)||!!(n&&a&&a[n])}return Cy=i,Cy}var xy,Qk;function Tb(){if(Qk)return xy;Qk=1;var t=gb(),e=ute();function r(n,i,a,s,o){var u=-1,l=n.length;for(a||(a=e),o||(o=[]);++u<l;){var c=n[u];i>0&&a(c)?i>1?r(c,i-1,a,s,o):t(o,c):s||(o[o.length]=c)}return o}return xy=r,xy}var Ry,Yk;function lte(){if(Yk)return Ry;Yk=1;function t(e,r,n){switch(n.length){case 0:return e.call(r);case 1:return e.call(r,n[0]);case 2:return e.call(r,n[0],n[1]);case 3:return e.call(r,n[0],n[1],n[2])}return e.apply(r,n)}return Ry=t,Ry}var ky,Xk;function sB(){if(Xk)return ky;Xk=1;var t=lte(),e=Math.max;function r(n,i,a){return i=e(i===void 0?n.length-1:i,0),function(){for(var s=arguments,o=-1,u=e(s.length-i,0),l=Array(u);++o<u;)l[o]=s[i+o];o=-1;for(var c=Array(i+1);++o<i;)c[o]=s[o];return c[i]=a(l),t(n,this,c)}}return ky=r,ky}var Ay,Jk;function cte(){if(Jk)return Ay;Jk=1;var t=yb(),e=QM,r=ks(),n=e?function(i,a){return e(i,"toString",{configurable:!0,enumerable:!1,value:t(a),writable:!0})}:r;return Ay=n,Ay}var Py,Zk;function fte(){if(Zk)return Py;Zk=1;var t=800,e=16,r=Date.now;function n(i){var a=0,s=0;return function(){var o=r(),u=e-(o-s);if(s=o,u>0){if(++a>=t)return arguments[0]}else a=0;return i.apply(void 0,arguments)}}return Py=n,Py}var Dy,eA;function oB(){if(eA)return Dy;eA=1;var t=cte(),e=fte(),r=e(t);return Dy=r,Dy}var Oy,tA;function cp(){if(tA)return Oy;tA=1;var t=ks(),e=sB(),r=oB();function n(i,a){return r(e(i,a,t),i+"")}return Oy=n,Oy}var Ny,rA;function uB(){if(rA)return Ny;rA=1;function t(e,r,n,i){for(var a=e.length,s=n+(i?1:-1);i?s--:++s<a;)if(r(e[s],s,e))return s;return-1}return Ny=t,Ny}var Ly,nA;function hte(){if(nA)return Ly;nA=1;function t(e){return e!==e}return Ly=t,Ly}var My,iA;function dte(){if(iA)return My;iA=1;function t(e,r,n){for(var i=n-1,a=e.length;++i<a;)if(e[i]===r)return i;return-1}return My=t,My}var Vy,aA;function vte(){if(aA)return Vy;aA=1;var t=uB(),e=hte(),r=dte();function n(i,a,s){return a===a?r(i,a,s):t(i,e,s)}return Vy=n,Vy}var Fy,sA;function pte(){if(sA)return Fy;sA=1;var t=vte();function e(r,n){var i=r==null?0:r.length;return!!i&&t(r,n,0)>-1}return Fy=e,Fy}var By,oA;function gte(){if(oA)return By;oA=1;function t(e,r,n){for(var i=-1,a=e==null?0:e.length;++i<a;)if(n(r,e[i]))return!0;return!1}return By=t,By}var qy,uA;function mte(){if(uA)return qy;uA=1;function t(){}return qy=t,qy}var $y,lA;function yte(){if(lA)return $y;lA=1;var t=MF(),e=mte(),r=Eb(),n=1/0,i=t&&1/r(new t([,-0]))[1]==n?function(a){return new t(a)}:e;return $y=i,$y}var zy,cA;function wte(){if(cA)return zy;cA=1;var t=WF(),e=pte(),r=gte(),n=HF(),i=yte(),a=Eb(),s=200;function o(u,l,c){var f=-1,h=e,d=u.length,v=!0,w=[],m=w;if(c)v=!1,h=r;else if(d>=s){var p=l?null:i(u);if(p)return a(p);v=!1,h=n,m=new t}else m=l?[]:w;e:for(;++f<d;){var g=u[f],y=l?l(g):g;if(g=c||g!==0?g:0,v&&y===y){for(var _=m.length;_--;)if(m[_]===y)continue e;l&&m.push(y),w.push(g)}else h(m,y,c)||(m!==w&&m.push(y),w.push(g))}return w}return zy=o,zy}var Uy,fA;function lB(){if(fA)return Uy;fA=1;var t=xi(),e=ei;function r(n){return e(n)&&t(n)}return Uy=r,Uy}var jy,hA;function _te(){if(hA)return jy;hA=1;var t=Tb(),e=cp(),r=wte(),n=lB(),i=e(function(a){return r(t(a,1,n,!0))});return jy=i,jy}var Wy,dA;function Ete(){if(dA)return Wy;dA=1;var t=Yc;function e(r,n){return t(n,function(i){return r[i]})}return Wy=e,Wy}var Hy,vA;function cB(){if(vA)return Hy;vA=1;var t=Ete(),e=Da();function r(n){return n==null?[]:t(n,e(n))}return Hy=r,Hy}var Gy,pA;function hn(){if(pA)return Gy;pA=1;var t;if(typeof cb=="function")try{t={clone:Oee(),constant:yb(),each:jF(),filter:eB(),has:tB(),isArray:It,isEmpty:Jee(),isFunction:Qc(),isUndefined:rB(),keys:Da(),map:iB(),reduce:aB(),size:ste(),transform:ote(),union:_te(),values:cB()}}catch{}return t||(t=window._),Gy=t,Gy}var Ky,gA;function bb(){if(gA)return Ky;gA=1;var t=hn();Ky=i;var e="\0",r="\0",n="";function i(c){this._isDirected=t.has(c,"directed")?c.directed:!0,this._isMultigraph=t.has(c,"multigraph")?c.multigraph:!1,this._isCompound=t.has(c,"compound")?c.compound:!1,this._label=void 0,this._defaultNodeLabelFn=t.constant(void 0),this._defaultEdgeLabelFn=t.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[r]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}i.prototype._nodeCount=0,i.prototype._edgeCount=0,i.prototype.isDirected=function(){return this._isDirected},i.prototype.isMultigraph=function(){return this._isMultigraph},i.prototype.isCompound=function(){return this._isCompound},i.prototype.setGraph=function(c){return this._label=c,this},i.prototype.graph=function(){return this._label},i.prototype.setDefaultNodeLabel=function(c){return t.isFunction(c)||(c=t.constant(c)),this._defaultNodeLabelFn=c,this},i.prototype.nodeCount=function(){return this._nodeCount},i.prototype.nodes=function(){return t.keys(this._nodes)},i.prototype.sources=function(){var c=this;return t.filter(this.nodes(),function(f){return t.isEmpty(c._in[f])})},i.prototype.sinks=function(){var c=this;return t.filter(this.nodes(),function(f){return t.isEmpty(c._out[f])})},i.prototype.setNodes=function(c,f){var h=arguments,d=this;return t.each(c,function(v){h.length>1?d.setNode(v,f):d.setNode(v)}),this},i.prototype.setNode=function(c,f){return t.has(this._nodes,c)?(arguments.length>1&&(this._nodes[c]=f),this):(this._nodes[c]=arguments.length>1?f:this._defaultNodeLabelFn(c),this._isCompound&&(this._parent[c]=r,this._children[c]={},this._children[r][c]=!0),this._in[c]={},this._preds[c]={},this._out[c]={},this._sucs[c]={},++this._nodeCount,this)},i.prototype.node=function(c){return this._nodes[c]},i.prototype.hasNode=function(c){return t.has(this._nodes,c)},i.prototype.removeNode=function(c){var f=this;if(t.has(this._nodes,c)){var h=function(d){f.removeEdge(f._edgeObjs[d])};delete this._nodes[c],this._isCompound&&(this._removeFromParentsChildList(c),delete this._parent[c],t.each(this.children(c),function(d){f.setParent(d)}),delete this._children[c]),t.each(t.keys(this._in[c]),h),delete this._in[c],delete this._preds[c],t.each(t.keys(this._out[c]),h),delete this._out[c],delete this._sucs[c],--this._nodeCount}return this},i.prototype.setParent=function(c,f){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(t.isUndefined(f))f=r;else{f+="";for(var h=f;!t.isUndefined(h);h=this.parent(h))if(h===c)throw new Error("Setting "+f+" as parent of "+c+" would create a cycle");this.setNode(f)}return this.setNode(c),this._removeFromParentsChildList(c),this._parent[c]=f,this._children[f][c]=!0,this},i.prototype._removeFromParentsChildList=function(c){delete this._children[this._parent[c]][c]},i.prototype.parent=function(c){if(this._isCompound){var f=this._parent[c];if(f!==r)return f}},i.prototype.children=function(c){if(t.isUndefined(c)&&(c=r),this._isCompound){var f=this._children[c];if(f)return t.keys(f)}else{if(c===r)return this.nodes();if(this.hasNode(c))return[]}},i.prototype.predecessors=function(c){var f=this._preds[c];if(f)return t.keys(f)},i.prototype.successors=function(c){var f=this._sucs[c];if(f)return t.keys(f)},i.prototype.neighbors=function(c){var f=this.predecessors(c);if(f)return t.union(f,this.successors(c))},i.prototype.isLeaf=function(c){var f;return this.isDirected()?f=this.successors(c):f=this.neighbors(c),f.length===0},i.prototype.filterNodes=function(c){var f=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});f.setGraph(this.graph());var h=this;t.each(this._nodes,function(w,m){c(m)&&f.setNode(m,w)}),t.each(this._edgeObjs,function(w){f.hasNode(w.v)&&f.hasNode(w.w)&&f.setEdge(w,h.edge(w))});var d={};function v(w){var m=h.parent(w);return m===void 0||f.hasNode(m)?(d[w]=m,m):m in d?d[m]:v(m)}return this._isCompound&&t.each(f.nodes(),function(w){f.setParent(w,v(w))}),f},i.prototype.setDefaultEdgeLabel=function(c){return t.isFunction(c)||(c=t.constant(c)),this._defaultEdgeLabelFn=c,this},i.prototype.edgeCount=function(){return this._edgeCount},i.prototype.edges=function(){return t.values(this._edgeObjs)},i.prototype.setPath=function(c,f){var h=this,d=arguments;return t.reduce(c,function(v,w){return d.length>1?h.setEdge(v,w,f):h.setEdge(v,w),w}),this},i.prototype.setEdge=function(){var c,f,h,d,v=!1,w=arguments[0];typeof w=="object"&&w!==null&&"v"in w?(c=w.v,f=w.w,h=w.name,arguments.length===2&&(d=arguments[1],v=!0)):(c=w,f=arguments[1],h=arguments[3],arguments.length>2&&(d=arguments[2],v=!0)),c=""+c,f=""+f,t.isUndefined(h)||(h=""+h);var m=o(this._isDirected,c,f,h);if(t.has(this._edgeLabels,m))return v&&(this._edgeLabels[m]=d),this;if(!t.isUndefined(h)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(c),this.setNode(f),this._edgeLabels[m]=v?d:this._defaultEdgeLabelFn(c,f,h);var p=u(this._isDirected,c,f,h);return c=p.v,f=p.w,Object.freeze(p),this._edgeObjs[m]=p,a(this._preds[f],c),a(this._sucs[c],f),this._in[f][m]=p,this._out[c][m]=p,this._edgeCount++,this},i.prototype.edge=function(c,f,h){var d=arguments.length===1?l(this._isDirected,arguments[0]):o(this._isDirected,c,f,h);return this._edgeLabels[d]},i.prototype.hasEdge=function(c,f,h){var d=arguments.length===1?l(this._isDirected,arguments[0]):o(this._isDirected,c,f,h);return t.has(this._edgeLabels,d)},i.prototype.removeEdge=function(c,f,h){var d=arguments.length===1?l(this._isDirected,arguments[0]):o(this._isDirected,c,f,h),v=this._edgeObjs[d];return v&&(c=v.v,f=v.w,delete this._edgeLabels[d],delete this._edgeObjs[d],s(this._preds[f],c),s(this._sucs[c],f),delete this._in[f][d],delete this._out[c][d],this._edgeCount--),this},i.prototype.inEdges=function(c,f){var h=this._in[c];if(h){var d=t.values(h);return f?t.filter(d,function(v){return v.v===f}):d}},i.prototype.outEdges=function(c,f){var h=this._out[c];if(h){var d=t.values(h);return f?t.filter(d,function(v){return v.w===f}):d}},i.prototype.nodeEdges=function(c,f){var h=this.inEdges(c,f);if(h)return h.concat(this.outEdges(c,f))};function a(c,f){c[f]?c[f]++:c[f]=1}function s(c,f){--c[f]||delete c[f]}function o(c,f,h,d){var v=""+f,w=""+h;if(!c&&v>w){var m=v;v=w,w=m}return v+n+w+n+(t.isUndefined(d)?e:d)}function u(c,f,h,d){var v=""+f,w=""+h;if(!c&&v>w){var m=v;v=w,w=m}var p={v,w};return d&&(p.name=d),p}function l(c,f){return o(c,f.v,f.w,f.name)}return Ky}var Qy,mA;function Tte(){return mA||(mA=1,Qy="2.1.8"),Qy}var Yy,yA;function bte(){return yA||(yA=1,Yy={Graph:bb(),version:Tte()}),Yy}var Xy,wA;function Ste(){if(wA)return Xy;wA=1;var t=hn(),e=bb();Xy={write:r,read:a};function r(s){var o={options:{directed:s.isDirected(),multigraph:s.isMultigraph(),compound:s.isCompound()},nodes:n(s),edges:i(s)};return t.isUndefined(s.graph())||(o.value=t.clone(s.graph())),o}function n(s){return t.map(s.nodes(),function(o){var u=s.node(o),l=s.parent(o),c={v:o};return t.isUndefined(u)||(c.value=u),t.isUndefined(l)||(c.parent=l),c})}function i(s){return t.map(s.edges(),function(o){var u=s.edge(o),l={v:o.v,w:o.w};return t.isUndefined(o.name)||(l.name=o.name),t.isUndefined(u)||(l.value=u),l})}function a(s){var o=new e(s.options).setGraph(s.value);return t.each(s.nodes,function(u){o.setNode(u.v,u.value),u.parent&&o.setParent(u.v,u.parent)}),t.each(s.edges,function(u){o.setEdge({v:u.v,w:u.w,name:u.name},u.value)}),o}return Xy}var Jy,_A;function Ite(){if(_A)return Jy;_A=1;var t=hn();Jy=e;function e(r){var n={},i=[],a;function s(o){t.has(n,o)||(n[o]=!0,a.push(o),t.each(r.successors(o),s),t.each(r.predecessors(o),s))}return t.each(r.nodes(),function(o){a=[],s(o),a.length&&i.push(a)}),i}return Jy}var Zy,EA;function fB(){if(EA)return Zy;EA=1;var t=hn();Zy=e;function e(){this._arr=[],this._keyIndices={}}return e.prototype.size=function(){return this._arr.length},e.prototype.keys=function(){return this._arr.map(function(r){return r.key})},e.prototype.has=function(r){return t.has(this._keyIndices,r)},e.prototype.priority=function(r){var n=this._keyIndices[r];if(n!==void 0)return this._arr[n].priority},e.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},e.prototype.add=function(r,n){var i=this._keyIndices;if(r=String(r),!t.has(i,r)){var a=this._arr,s=a.length;return i[r]=s,a.push({key:r,priority:n}),this._decrease(s),!0}return!1},e.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var r=this._arr.pop();return delete this._keyIndices[r.key],this._heapify(0),r.key},e.prototype.decrease=function(r,n){var i=this._keyIndices[r];if(n>this._arr[i].priority)throw new Error("New priority is greater than current priority. Key: "+r+" Old: "+this._arr[i].priority+" New: "+n);this._arr[i].priority=n,this._decrease(i)},e.prototype._heapify=function(r){var n=this._arr,i=2*r,a=i+1,s=r;i<n.length&&(s=n[i].priority<n[s].priority?i:s,a<n.length&&(s=n[a].priority<n[s].priority?a:s),s!==r&&(this._swap(r,s),this._heapify(s)))},e.prototype._decrease=function(r){for(var n=this._arr,i=n[r].priority,a;r!==0&&(a=r>>1,!(n[a].priority<i));)this._swap(r,a),r=a},e.prototype._swap=function(r,n){var i=this._arr,a=this._keyIndices,s=i[r],o=i[n];i[r]=o,i[n]=s,a[o.key]=r,a[s.key]=n},Zy}var e0,TA;function hB(){if(TA)return e0;TA=1;var t=hn(),e=fB();e0=n;var r=t.constant(1);function n(a,s,o,u){return i(a,String(s),o||r,u||function(l){return a.outEdges(l)})}function i(a,s,o,u){var l={},c=new e,f,h,d=function(v){var w=v.v!==f?v.v:v.w,m=l[w],p=o(v),g=h.distance+p;if(p<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+v+" Weight: "+p);g<m.distance&&(m.distance=g,m.predecessor=f,c.decrease(w,g))};for(a.nodes().forEach(function(v){var w=v===s?0:Number.POSITIVE_INFINITY;l[v]={distance:w},c.add(v,w)});c.size()>0&&(f=c.removeMin(),h=l[f],h.distance!==Number.POSITIVE_INFINITY);)u(f).forEach(d);return l}return e0}var t0,bA;function Cte(){if(bA)return t0;bA=1;var t=hB(),e=hn();t0=r;function r(n,i,a){return e.transform(n.nodes(),function(s,o){s[o]=t(n,o,i,a)},{})}return t0}var r0,SA;function dB(){if(SA)return r0;SA=1;var t=hn();r0=e;function e(r){var n=0,i=[],a={},s=[];function o(u){var l=a[u]={onStack:!0,lowlink:n,index:n++};if(i.push(u),r.successors(u).forEach(function(h){t.has(a,h)?a[h].onStack&&(l.lowlink=Math.min(l.lowlink,a[h].index)):(o(h),l.lowlink=Math.min(l.lowlink,a[h].lowlink))}),l.lowlink===l.index){var c=[],f;do f=i.pop(),a[f].onStack=!1,c.push(f);while(u!==f);s.push(c)}}return r.nodes().forEach(function(u){t.has(a,u)||o(u)}),s}return r0}var n0,IA;function xte(){if(IA)return n0;IA=1;var t=hn(),e=dB();n0=r;function r(n){return t.filter(e(n),function(i){return i.length>1||i.length===1&&n.hasEdge(i[0],i[0])})}return n0}var i0,CA;function Rte(){if(CA)return i0;CA=1;var t=hn();i0=r;var e=t.constant(1);function r(i,a,s){return n(i,a||e,s||function(o){return i.outEdges(o)})}function n(i,a,s){var o={},u=i.nodes();return u.forEach(function(l){o[l]={},o[l][l]={distance:0},u.forEach(function(c){l!==c&&(o[l][c]={distance:Number.POSITIVE_INFINITY})}),s(l).forEach(function(c){var f=c.v===l?c.w:c.v,h=a(c);o[l][f]={distance:h,predecessor:l}})}),u.forEach(function(l){var c=o[l];u.forEach(function(f){var h=o[f];u.forEach(function(d){var v=h[l],w=c[d],m=h[d],p=v.distance+w.distance;p<m.distance&&(m.distance=p,m.predecessor=w.predecessor)})})}),o}return i0}var a0,xA;function vB(){if(xA)return a0;xA=1;var t=hn();a0=e,e.CycleException=r;function e(n){var i={},a={},s=[];function o(u){if(t.has(a,u))throw new r;t.has(i,u)||(a[u]=!0,i[u]=!0,t.each(n.predecessors(u),o),delete a[u],s.push(u))}if(t.each(n.sinks(),o),t.size(i)!==n.nodeCount())throw new r;return s}function r(){}return r.prototype=new Error,a0}var s0,RA;function kte(){if(RA)return s0;RA=1;var t=vB();s0=e;function e(r){try{t(r)}catch(n){if(n instanceof t.CycleException)return!1;throw n}return!0}return s0}var o0,kA;function pB(){if(kA)return o0;kA=1;var t=hn();o0=e;function e(n,i,a){t.isArray(i)||(i=[i]);var s=(n.isDirected()?n.successors:n.neighbors).bind(n),o=[],u={};return t.each(i,function(l){if(!n.hasNode(l))throw new Error("Graph does not have node: "+l);r(n,l,a==="post",u,s,o)}),o}function r(n,i,a,s,o,u){t.has(s,i)||(s[i]=!0,a||u.push(i),t.each(o(i),function(l){r(n,l,a,s,o,u)}),a&&u.push(i))}return o0}var u0,AA;function Ate(){if(AA)return u0;AA=1;var t=pB();u0=e;function e(r,n){return t(r,n,"post")}return u0}var l0,PA;function Pte(){if(PA)return l0;PA=1;var t=pB();l0=e;function e(r,n){return t(r,n,"pre")}return l0}var c0,DA;function Dte(){if(DA)return c0;DA=1;var t=hn(),e=bb(),r=fB();c0=n;function n(i,a){var s=new e,o={},u=new r,l;function c(h){var d=h.v===l?h.w:h.v,v=u.priority(d);if(v!==void 0){var w=a(h);w<v&&(o[d]=l,u.decrease(d,w))}}if(i.nodeCount()===0)return s;t.each(i.nodes(),function(h){u.add(h,Number.POSITIVE_INFINITY),s.setNode(h)}),u.decrease(i.nodes()[0],0);for(var f=!1;u.size()>0;){if(l=u.removeMin(),t.has(o,l))s.setEdge(l,o[l]);else{if(f)throw new Error("Input graph is not connected: "+i);f=!0}i.nodeEdges(l).forEach(c)}return s}return c0}var f0,OA;function Ote(){return OA||(OA=1,f0={components:Ite(),dijkstra:hB(),dijkstraAll:Cte(),findCycles:xte(),floydWarshall:Rte(),isAcyclic:kte(),postorder:Ate(),preorder:Pte(),prim:Dte(),tarjan:dB(),topsort:vB()}),f0}var h0,NA;function Nte(){if(NA)return h0;NA=1;var t=bte();return h0={Graph:t.Graph,json:Ste(),alg:Ote(),version:t.version},h0}var d0,LA;function On(){if(LA)return d0;LA=1;var t;if(typeof cb=="function")try{t=Nte()}catch{}return t||(t=window.graphlib),d0=t,d0}var v0,MA;function Lte(){if(MA)return v0;MA=1;var t=$F(),e=1,r=4;function n(i){return t(i,e|r)}return v0=n,v0}var p0,VA;function fp(){if(VA)return p0;VA=1;var t=lu,e=xi(),r=jv,n=Jr;function i(a,s,o){if(!n(o))return!1;var u=typeof s;return(u=="number"?e(o)&&r(s,o.length):u=="string"&&s in o)?t(o[s],a):!1}return p0=i,p0}var g0,FA;function Mte(){if(FA)return g0;FA=1;var t=cp(),e=lu,r=fp(),n=Rs(),i=Object.prototype,a=i.hasOwnProperty,s=t(function(o,u){o=Object(o);var l=-1,c=u.length,f=c>2?u[2]:void 0;for(f&&r(u[0],u[1],f)&&(c=1);++l<c;)for(var h=u[l],d=n(h),v=-1,w=d.length;++v<w;){var m=d[v],p=o[m];(p===void 0||e(p,i[m])&&!a.call(o,m))&&(o[m]=h[m])}return o});return g0=s,g0}var m0,BA;function Vte(){if(BA)return m0;BA=1;var t=Ri(),e=xi(),r=Da();function n(i){return function(a,s,o){var u=Object(a);if(!e(a)){var l=t(s,3);a=r(a),s=function(f){return l(u[f],f,u)}}var c=i(a,s,o);return c>-1?u[l?a[c]:c]:void 0}}return m0=n,m0}var y0,qA;function gB(){if(qA)return y0;qA=1;var t=zM,e=1/0,r=17976931348623157e292;function n(i){if(!i)return i===0?i:0;if(i=t(i),i===e||i===-e){var a=i<0?-1:1;return a*r}return i===i?i:0}return y0=n,y0}var w0,$A;function Fte(){if($A)return w0;$A=1;var t=gB();function e(r){var n=t(r),i=n%1;return n===n?i?n-i:n:0}return w0=e,w0}var _0,zA;function Bte(){if(zA)return _0;zA=1;var t=uB(),e=Ri(),r=Fte(),n=Math.max;function i(a,s,o){var u=a==null?0:a.length;if(!u)return-1;var l=o==null?0:r(o);return l<0&&(l=n(u+l,0)),t(a,e(s,3),l)}return _0=i,_0}var E0,UA;function qte(){if(UA)return E0;UA=1;var t=Vte(),e=Bte(),r=t(e);return E0=r,E0}var T0,jA;function mB(){if(jA)return T0;jA=1;var t=Tb();function e(r){var n=r==null?0:r.length;return n?t(r,1):[]}return T0=e,T0}var b0,WA;function $te(){if(WA)return b0;WA=1;var t=wb(),e=zF(),r=Rs();function n(i,a){return i==null?i:t(i,e(a),r)}return b0=n,b0}var S0,HA;function zte(){if(HA)return S0;HA=1;function t(e){var r=e==null?0:e.length;return r?e[r-1]:void 0}return S0=t,S0}var I0,GA;function Ute(){if(GA)return I0;GA=1;var t=zv,e=_b(),r=Ri();function n(i,a){var s={};return a=r(a,3),e(i,function(o,u,l){t(s,u,a(o,u,l))}),s}return I0=n,I0}var C0,KA;function Sb(){if(KA)return C0;KA=1;var t=Ss;function e(r,n,i){for(var a=-1,s=r.length;++a<s;){var o=r[a],u=n(o);if(u!=null&&(l===void 0?u===u&&!t(u):i(u,l)))var l=u,c=o}return c}return C0=e,C0}var x0,QA;function jte(){if(QA)return x0;QA=1;function t(e,r){return e>r}return x0=t,x0}var R0,YA;function Wte(){if(YA)return R0;YA=1;var t=Sb(),e=jte(),r=ks();function n(i){return i&&i.length?t(i,r,e):void 0}return R0=n,R0}var k0,XA;function yB(){if(XA)return k0;XA=1;var t=zv,e=lu;function r(n,i,a){(a!==void 0&&!e(n[i],a)||a===void 0&&!(i in n))&&t(n,i,a)}return k0=r,k0}var A0,JA;function Hte(){if(JA)return A0;JA=1;var t=bs,e=up(),r=ei,n="[object Object]",i=Function.prototype,a=Object.prototype,s=i.toString,o=a.hasOwnProperty,u=s.call(Object);function l(c){if(!r(c)||t(c)!=n)return!1;var f=e(c);if(f===null)return!0;var h=o.call(f,"constructor")&&f.constructor;return typeof h=="function"&&h instanceof h&&s.call(h)==u}return A0=l,A0}var P0,ZA;function wB(){if(ZA)return P0;ZA=1;function t(e,r){if(!(r==="constructor"&&typeof e[r]=="function")&&r!="__proto__")return e[r]}return P0=t,P0}var D0,eP;function Gte(){if(eP)return D0;eP=1;var t=uf(),e=Rs();function r(n){return t(n,e(n))}return D0=r,D0}var O0,tP;function Kte(){if(tP)return O0;tP=1;var t=yB(),e=AF(),r=FF(),n=UT,i=qF(),a=lf(),s=It,o=lB(),u=_u(),l=Qc(),c=Jr,f=Hte(),h=cf(),d=wB(),v=Gte();function w(m,p,g,y,_,T,b){var E=d(m,g),I=d(p,g),S=b.get(I);if(S){t(m,g,S);return}var C=T?T(E,I,g+"",m,p,b):void 0,R=C===void 0;if(R){var x=s(I),P=!x&&u(I),A=!x&&!P&&h(I);C=I,x||P||A?s(E)?C=E:o(E)?C=n(E):P?(R=!1,C=e(I,!0)):A?(R=!1,C=r(I,!0)):C=[]:f(I)||a(I)?(C=E,a(E)?C=v(E):(!c(E)||l(E))&&(C=i(I))):R=!1}R&&(b.set(I,C),_(C,I,y,T,b),b.delete(I)),t(m,g,C)}return O0=w,O0}var N0,rP;function Qte(){if(rP)return N0;rP=1;var t=ap(),e=yB(),r=wb(),n=Kte(),i=Jr,a=Rs(),s=wB();function o(u,l,c,f,h){u!==l&&r(l,function(d,v){if(h||(h=new t),i(d))n(u,l,v,c,o,f,h);else{var w=f?f(s(u,v),d,v+"",u,l,h):void 0;w===void 0&&(w=d),e(u,v,w)}},a)}return N0=o,N0}var L0,nP;function Yte(){if(nP)return L0;nP=1;var t=cp(),e=fp();function r(n){return t(function(i,a){var s=-1,o=a.length,u=o>1?a[o-1]:void 0,l=o>2?a[2]:void 0;for(u=n.length>3&&typeof u=="function"?(o--,u):void 0,l&&e(a[0],a[1],l)&&(u=o<3?void 0:u,o=1),i=Object(i);++s<o;){var c=a[s];c&&n(i,c,s,u)}return i})}return L0=r,L0}var M0,iP;function Xte(){if(iP)return M0;iP=1;var t=Qte(),e=Yte(),r=e(function(n,i,a){t(n,i,a)});return M0=r,M0}var V0,aP;function _B(){if(aP)return V0;aP=1;function t(e,r){return e<r}return V0=t,V0}var F0,sP;function Jte(){if(sP)return F0;sP=1;var t=Sb(),e=_B(),r=ks();function n(i){return i&&i.length?t(i,r,e):void 0}return F0=n,F0}var B0,oP;function Zte(){if(oP)return B0;oP=1;var t=Sb(),e=Ri(),r=_B();function n(i,a){return i&&i.length?t(i,e(a,2),r):void 0}return B0=n,B0}var q0,uP;function ere(){if(uP)return q0;uP=1;var t=$v,e=YM,r=qv;function n(i,a,s){for(var o=-1,u=a.length,l={};++o<u;){var c=a[o],f=t(i,c);s(f,c)&&e(l,r(c,i),f)}return l}return q0=n,q0}var $0,lP;function tre(){if(lP)return $0;lP=1;var t=ere(),e=JF();function r(n,i){return t(n,i,function(a,s){return e(n,s)})}return $0=r,$0}var z0,cP;function rre(){if(cP)return z0;cP=1;var t=mB(),e=sB(),r=oB();function n(i){return r(e(i,void 0,t),i+"")}return z0=n,z0}var U0,fP;function nre(){if(fP)return U0;fP=1;var t=tre(),e=rre(),r=e(function(n,i){return n==null?{}:t(n,i)});return U0=r,U0}var j0,hP;function ire(){if(hP)return j0;hP=1;var t=Math.ceil,e=Math.max;function r(n,i,a,s){for(var o=-1,u=e(t((i-n)/(a||1)),0),l=Array(u);u--;)l[s?u:++o]=n,n+=a;return l}return j0=r,j0}var W0,dP;function are(){if(dP)return W0;dP=1;var t=ire(),e=fp(),r=gB();function n(i){return function(a,s,o){return o&&typeof o!="number"&&e(a,s,o)&&(s=o=void 0),a=r(a),s===void 0?(s=a,a=0):s=r(s),o=o===void 0?a<s?1:-1:r(o),t(a,s,o,i)}}return W0=n,W0}var H0,vP;function sre(){if(vP)return H0;vP=1;var t=are(),e=t();return H0=e,H0}var G0,pP;function ore(){if(pP)return G0;pP=1;function t(e,r){var n=e.length;for(e.sort(r);n--;)e[n]=e[n].value;return e}return G0=t,G0}var K0,gP;function ure(){if(gP)return K0;gP=1;var t=Ss;function e(r,n){if(r!==n){var i=r!==void 0,a=r===null,s=r===r,o=t(r),u=n!==void 0,l=n===null,c=n===n,f=t(n);if(!l&&!f&&!o&&r>n||o&&u&&c&&!l&&!f||a&&u&&c||!i&&c||!s)return 1;if(!a&&!o&&!f&&r<n||f&&i&&s&&!a&&!o||l&&i&&s||!u&&s||!c)return-1}return 0}return K0=e,K0}var Q0,mP;function lre(){if(mP)return Q0;mP=1;var t=ure();function e(r,n,i){for(var a=-1,s=r.criteria,o=n.criteria,u=s.length,l=i.length;++a<u;){var c=t(s[a],o[a]);if(c){if(a>=l)return c;var f=i[a];return c*(f=="desc"?-1:1)}}return r.index-n.index}return Q0=e,Q0}var Y0,yP;function cre(){if(yP)return Y0;yP=1;var t=Yc,e=$v,r=Ri(),n=nB(),i=ore(),a=sp(),s=lre(),o=ks(),u=It;function l(c,f,h){f.length?f=t(f,function(w){return u(w)?function(m){return e(m,w.length===1?w[0]:w)}:w}):f=[o];var d=-1;f=t(f,a(r));var v=n(c,function(w,m,p){var g=t(f,function(y){return y(w)});return{criteria:g,index:++d,value:w}});return i(v,function(w,m){return s(w,m,h)})}return Y0=l,Y0}var X0,wP;function fre(){if(wP)return X0;wP=1;var t=Tb(),e=cre(),r=cp(),n=fp(),i=r(function(a,s){if(a==null)return[];var o=s.length;return o>1&&n(a,s[0],s[1])?s=[]:o>2&&n(s[0],s[1],s[2])&&(s=[s[0]]),e(a,t(s,1),[])});return X0=i,X0}var J0,_P;function hre(){if(_P)return J0;_P=1;var t=zT,e=0;function r(n){var i=++e;return t(n)+i}return J0=r,J0}var Z0,EP;function dre(){if(EP)return Z0;EP=1;function t(e,r,n){for(var i=-1,a=e.length,s=r.length,o={};++i<a;){var u=i<s?r[i]:void 0;n(o,e[i],u)}return o}return Z0=t,Z0}var e1,TP;function vre(){if(TP)return e1;TP=1;var t=Uv,e=dre();function r(n,i){return e(n||[],i||[],t)}return e1=r,e1}var t1,bP;function ht(){if(bP)return t1;bP=1;var t;if(typeof cb=="function")try{t={cloneDeep:Lte(),constant:yb(),defaults:Mte(),each:jF(),filter:eB(),find:qte(),flatten:mB(),forEach:UF(),forIn:$te(),has:tB(),isUndefined:rB(),last:zte(),map:iB(),mapValues:Ute(),max:Wte(),merge:Xte(),min:Jte(),minBy:Zte(),now:qM,pick:nre(),range:sre(),reduce:aB(),sortBy:fre(),uniqueId:hre(),values:cB(),zipObject:vre()}}catch{}return t||(t=window._),t1=t,t1}var r1,SP;function pre(){if(SP)return r1;SP=1,r1=t;function t(){var n={};n._next=n._prev=n,this._sentinel=n}t.prototype.dequeue=function(){var n=this._sentinel,i=n._prev;if(i!==n)return e(i),i},t.prototype.enqueue=function(n){var i=this._sentinel;n._prev&&n._next&&e(n),n._next=i._next,i._next._prev=n,i._next=n,n._prev=i},t.prototype.toString=function(){for(var n=[],i=this._sentinel,a=i._prev;a!==i;)n.push(JSON.stringify(a,r)),a=a._prev;return"["+n.join(", ")+"]"};function e(n){n._prev._next=n._next,n._next._prev=n._prev,delete n._next,delete n._prev}function r(n,i){if(n!=="_next"&&n!=="_prev")return i}return r1}var n1,IP;function gre(){if(IP)return n1;IP=1;var t=ht(),e=On().Graph,r=pre();n1=i;var n=t.constant(1);function i(l,c){if(l.nodeCount()<=1)return[];var f=o(l,c||n),h=a(f.graph,f.buckets,f.zeroIdx);return t.flatten(t.map(h,function(d){return l.outEdges(d.v,d.w)}),!0)}function a(l,c,f){for(var h=[],d=c[c.length-1],v=c[0],w;l.nodeCount();){for(;w=v.dequeue();)s(l,c,f,w);for(;w=d.dequeue();)s(l,c,f,w);if(l.nodeCount()){for(var m=c.length-2;m>0;--m)if(w=c[m].dequeue(),w){h=h.concat(s(l,c,f,w,!0));break}}}return h}function s(l,c,f,h,d){var v=d?[]:void 0;return t.forEach(l.inEdges(h.v),function(w){var m=l.edge(w),p=l.node(w.v);d&&v.push({v:w.v,w:w.w}),p.out-=m,u(c,f,p)}),t.forEach(l.outEdges(h.v),function(w){var m=l.edge(w),p=w.w,g=l.node(p);g.in-=m,u(c,f,g)}),l.removeNode(h.v),v}function o(l,c){var f=new e,h=0,d=0;t.forEach(l.nodes(),function(m){f.setNode(m,{v:m,in:0,out:0})}),t.forEach(l.edges(),function(m){var p=f.edge(m.v,m.w)||0,g=c(m),y=p+g;f.setEdge(m.v,m.w,y),d=Math.max(d,f.node(m.v).out+=g),h=Math.max(h,f.node(m.w).in+=g)});var v=t.range(d+h+3).map(function(){return new r}),w=h+1;return t.forEach(f.nodes(),function(m){u(v,w,f.node(m))}),{graph:f,buckets:v,zeroIdx:w}}function u(l,c,f){f.out?f.in?l[f.out-f.in+c].enqueue(f):l[l.length-1].enqueue(f):l[0].enqueue(f)}return n1}var i1,CP;function mre(){if(CP)return i1;CP=1;var t=ht(),e=gre();i1={run:r,undo:i};function r(a){var s=a.graph().acyclicer==="greedy"?e(a,o(a)):n(a);t.forEach(s,function(u){var l=a.edge(u);a.removeEdge(u),l.forwardName=u.name,l.reversed=!0,a.setEdge(u.w,u.v,l,t.uniqueId("rev"))});function o(u){return function(l){return u.edge(l).weight}}}function n(a){var s=[],o={},u={};function l(c){t.has(u,c)||(u[c]=!0,o[c]=!0,t.forEach(a.outEdges(c),function(f){t.has(o,f.w)?s.push(f):l(f.w)}),delete o[c])}return t.forEach(a.nodes(),l),s}function i(a){t.forEach(a.edges(),function(s){var o=a.edge(s);if(o.reversed){a.removeEdge(s);var u=o.forwardName;delete o.reversed,delete o.forwardName,a.setEdge(s.w,s.v,o,u)}})}return i1}var a1,xP;function qr(){if(xP)return a1;xP=1;var t=ht(),e=On().Graph;a1={addDummyNode:r,simplify:n,asNonCompoundGraph:i,successorWeights:a,predecessorWeights:s,intersectRect:o,buildLayerMatrix:u,normalizeRanks:l,removeEmptyRanks:c,addBorderNode:f,maxRank:h,partition:d,time:v,notime:w};function r(m,p,g,y){var _;do _=t.uniqueId(y);while(m.hasNode(_));return g.dummy=p,m.setNode(_,g),_}function n(m){var p=new e().setGraph(m.graph());return t.forEach(m.nodes(),function(g){p.setNode(g,m.node(g))}),t.forEach(m.edges(),function(g){var y=p.edge(g.v,g.w)||{weight:0,minlen:1},_=m.edge(g);p.setEdge(g.v,g.w,{weight:y.weight+_.weight,minlen:Math.max(y.minlen,_.minlen)})}),p}function i(m){var p=new e({multigraph:m.isMultigraph()}).setGraph(m.graph());return t.forEach(m.nodes(),function(g){m.children(g).length||p.setNode(g,m.node(g))}),t.forEach(m.edges(),function(g){p.setEdge(g,m.edge(g))}),p}function a(m){var p=t.map(m.nodes(),function(g){var y={};return t.forEach(m.outEdges(g),function(_){y[_.w]=(y[_.w]||0)+m.edge(_).weight}),y});return t.zipObject(m.nodes(),p)}function s(m){var p=t.map(m.nodes(),function(g){var y={};return t.forEach(m.inEdges(g),function(_){y[_.v]=(y[_.v]||0)+m.edge(_).weight}),y});return t.zipObject(m.nodes(),p)}function o(m,p){var g=m.x,y=m.y,_=p.x-g,T=p.y-y,b=m.width/2,E=m.height/2;if(!_&&!T)throw new Error("Not possible to find intersection inside of the rectangle");var I,S;return Math.abs(T)*b>Math.abs(_)*E?(T<0&&(E=-E),I=E*_/T,S=E):(_<0&&(b=-b),I=b,S=b*T/_),{x:g+I,y:y+S}}function u(m){var p=t.map(t.range(h(m)+1),function(){return[]});return t.forEach(m.nodes(),function(g){var y=m.node(g),_=y.rank;t.isUndefined(_)||(p[_][y.order]=g)}),p}function l(m){var p=t.min(t.map(m.nodes(),function(g){return m.node(g).rank}));t.forEach(m.nodes(),function(g){var y=m.node(g);t.has(y,"rank")&&(y.rank-=p)})}function c(m){var p=t.min(t.map(m.nodes(),function(T){return m.node(T).rank})),g=[];t.forEach(m.nodes(),function(T){var b=m.node(T).rank-p;g[b]||(g[b]=[]),g[b].push(T)});var y=0,_=m.graph().nodeRankFactor;t.forEach(g,function(T,b){t.isUndefined(T)&&b%_!==0?--y:y&&t.forEach(T,function(E){m.node(E).rank+=y})})}function f(m,p,g,y){var _={width:0,height:0};return arguments.length>=4&&(_.rank=g,_.order=y),r(m,"border",_,p)}function h(m){return t.max(t.map(m.nodes(),function(p){var g=m.node(p).rank;if(!t.isUndefined(g))return g}))}function d(m,p){var g={lhs:[],rhs:[]};return t.forEach(m,function(y){p(y)?g.lhs.push(y):g.rhs.push(y)}),g}function v(m,p){var g=t.now();try{return p()}finally{console.log(m+" time: "+(t.now()-g)+"ms")}}function w(m,p){return p()}return a1}var s1,RP;function yre(){if(RP)return s1;RP=1;var t=ht(),e=qr();s1={run:r,undo:i};function r(a){a.graph().dummyChains=[],t.forEach(a.edges(),function(s){n(a,s)})}function n(a,s){var o=s.v,u=a.node(o).rank,l=s.w,c=a.node(l).rank,f=s.name,h=a.edge(s),d=h.labelRank;if(c!==u+1){a.removeEdge(s);var v,w,m;for(m=0,++u;u<c;++m,++u)h.points=[],w={width:0,height:0,edgeLabel:h,edgeObj:s,rank:u},v=e.addDummyNode(a,"edge",w,"_d"),u===d&&(w.width=h.width,w.height=h.height,w.dummy="edge-label",w.labelpos=h.labelpos),a.setEdge(o,v,{weight:h.weight},f),m===0&&a.graph().dummyChains.push(v),o=v;a.setEdge(o,l,{weight:h.weight},f)}}function i(a){t.forEach(a.graph().dummyChains,function(s){var o=a.node(s),u=o.edgeLabel,l;for(a.setEdge(o.edgeObj,u);o.dummy;)l=a.successors(s)[0],a.removeNode(s),u.points.push({x:o.x,y:o.y}),o.dummy==="edge-label"&&(u.x=o.x,u.y=o.y,u.width=o.width,u.height=o.height),s=l,o=a.node(s)})}return s1}var o1,kP;function Dd(){if(kP)return o1;kP=1;var t=ht();o1={longestPath:e,slack:r};function e(n){var i={};function a(s){var o=n.node(s);if(t.has(i,s))return o.rank;i[s]=!0;var u=t.min(t.map(n.outEdges(s),function(l){return a(l.w)-n.edge(l).minlen}));return(u===Number.POSITIVE_INFINITY||u===void 0||u===null)&&(u=0),o.rank=u}t.forEach(n.sources(),a)}function r(n,i){return n.node(i.w).rank-n.node(i.v).rank-n.edge(i).minlen}return o1}var u1,AP;function EB(){if(AP)return u1;AP=1;var t=ht(),e=On().Graph,r=Dd().slack;u1=n;function n(o){var u=new e({directed:!1}),l=o.nodes()[0],c=o.nodeCount();u.setNode(l,{});for(var f,h;i(u,o)<c;)f=a(u,o),h=u.hasNode(f.v)?r(o,f):-r(o,f),s(u,o,h);return u}function i(o,u){function l(c){t.forEach(u.nodeEdges(c),function(f){var h=f.v,d=c===h?f.w:h;!o.hasNode(d)&&!r(u,f)&&(o.setNode(d,{}),o.setEdge(c,d,{}),l(d))})}return t.forEach(o.nodes(),l),o.nodeCount()}function a(o,u){return t.minBy(u.edges(),function(l){if(o.hasNode(l.v)!==o.hasNode(l.w))return r(u,l)})}function s(o,u,l){t.forEach(o.nodes(),function(c){u.node(c).rank+=l})}return u1}var l1,PP;function wre(){if(PP)return l1;PP=1;var t=ht(),e=EB(),r=Dd().slack,n=Dd().longestPath,i=On().alg.preorder,a=On().alg.postorder,s=qr().simplify;l1=o,o.initLowLimValues=f,o.initCutValues=u,o.calcCutValue=c,o.leaveEdge=d,o.enterEdge=v,o.exchangeEdges=w;function o(y){y=s(y),n(y);var _=e(y);f(_),u(_,y);for(var T,b;T=d(_);)b=v(_,y,T),w(_,y,T,b)}function u(y,_){var T=a(y,y.nodes());T=T.slice(0,T.length-1),t.forEach(T,function(b){l(y,_,b)})}function l(y,_,T){var b=y.node(T),E=b.parent;y.edge(T,E).cutvalue=c(y,_,T)}function c(y,_,T){var b=y.node(T),E=b.parent,I=!0,S=_.edge(T,E),C=0;return S||(I=!1,S=_.edge(E,T)),C=S.weight,t.forEach(_.nodeEdges(T),function(R){var x=R.v===T,P=x?R.w:R.v;if(P!==E){var A=x===I,F=_.edge(R).weight;if(C+=A?F:-F,p(y,T,P)){var O=y.edge(T,P).cutvalue;C+=A?-O:O}}}),C}function f(y,_){arguments.length<2&&(_=y.nodes()[0]),h(y,{},1,_)}function h(y,_,T,b,E){var I=T,S=y.node(b);return _[b]=!0,t.forEach(y.neighbors(b),function(C){t.has(_,C)||(T=h(y,_,T,C,b))}),S.low=I,S.lim=T++,E?S.parent=E:delete S.parent,T}function d(y){return t.find(y.edges(),function(_){return y.edge(_).cutvalue<0})}function v(y,_,T){var b=T.v,E=T.w;_.hasEdge(b,E)||(b=T.w,E=T.v);var I=y.node(b),S=y.node(E),C=I,R=!1;I.lim>S.lim&&(C=S,R=!0);var x=t.filter(_.edges(),function(P){return R===g(y,y.node(P.v),C)&&R!==g(y,y.node(P.w),C)});return t.minBy(x,function(P){return r(_,P)})}function w(y,_,T,b){var E=T.v,I=T.w;y.removeEdge(E,I),y.setEdge(b.v,b.w,{}),f(y),u(y,_),m(y,_)}function m(y,_){var T=t.find(y.nodes(),function(E){return!_.node(E).parent}),b=i(y,T);b=b.slice(1),t.forEach(b,function(E){var I=y.node(E).parent,S=_.edge(E,I),C=!1;S||(S=_.edge(I,E),C=!0),_.node(E).rank=_.node(I).rank+(C?S.minlen:-S.minlen)})}function p(y,_,T){return y.hasEdge(_,T)}function g(y,_,T){return T.low<=_.lim&&_.lim<=T.lim}return l1}var c1,DP;function _re(){if(DP)return c1;DP=1;var t=Dd(),e=t.longestPath,r=EB(),n=wre();c1=i;function i(u){switch(u.graph().ranker){case"network-simplex":o(u);break;case"tight-tree":s(u);break;case"longest-path":a(u);break;default:o(u)}}var a=e;function s(u){e(u),r(u)}function o(u){n(u)}return c1}var f1,OP;function Ere(){if(OP)return f1;OP=1;var t=ht();f1=e;function e(i){var a=n(i);t.forEach(i.graph().dummyChains,function(s){for(var o=i.node(s),u=o.edgeObj,l=r(i,a,u.v,u.w),c=l.path,f=l.lca,h=0,d=c[h],v=!0;s!==u.w;){if(o=i.node(s),v){for(;(d=c[h])!==f&&i.node(d).maxRank<o.rank;)h++;d===f&&(v=!1)}if(!v){for(;h<c.length-1&&i.node(d=c[h+1]).minRank<=o.rank;)h++;d=c[h]}i.setParent(s,d),s=i.successors(s)[0]}})}function r(i,a,s,o){var u=[],l=[],c=Math.min(a[s].low,a[o].low),f=Math.max(a[s].lim,a[o].lim),h,d;h=s;do h=i.parent(h),u.push(h);while(h&&(a[h].low>c||f>a[h].lim));for(d=h,h=o;(h=i.parent(h))!==d;)l.push(h);return{path:u.concat(l.reverse()),lca:d}}function n(i){var a={},s=0;function o(u){var l=s;t.forEach(i.children(u),o),a[u]={low:l,lim:s++}}return t.forEach(i.children(),o),a}return f1}var h1,NP;function Tre(){if(NP)return h1;NP=1;var t=ht(),e=qr();h1={run:r,cleanup:s};function r(o){var u=e.addDummyNode(o,"root",{},"_root"),l=i(o),c=t.max(t.values(l))-1,f=2*c+1;o.graph().nestingRoot=u,t.forEach(o.edges(),function(d){o.edge(d).minlen*=f});var h=a(o)+1;t.forEach(o.children(),function(d){n(o,u,f,h,c,l,d)}),o.graph().nodeRankFactor=f}function n(o,u,l,c,f,h,d){var v=o.children(d);if(!v.length){d!==u&&o.setEdge(u,d,{weight:0,minlen:l});return}var w=e.addBorderNode(o,"_bt"),m=e.addBorderNode(o,"_bb"),p=o.node(d);o.setParent(w,d),p.borderTop=w,o.setParent(m,d),p.borderBottom=m,t.forEach(v,function(g){n(o,u,l,c,f,h,g);var y=o.node(g),_=y.borderTop?y.borderTop:g,T=y.borderBottom?y.borderBottom:g,b=y.borderTop?c:2*c,E=_!==T?1:f-h[d]+1;o.setEdge(w,_,{weight:b,minlen:E,nestingEdge:!0}),o.setEdge(T,m,{weight:b,minlen:E,nestingEdge:!0})}),o.parent(d)||o.setEdge(u,w,{weight:0,minlen:f+h[d]})}function i(o){var u={};function l(c,f){var h=o.children(c);h&&h.length&&t.forEach(h,function(d){l(d,f+1)}),u[c]=f}return t.forEach(o.children(),function(c){l(c,1)}),u}function a(o){return t.reduce(o.edges(),function(u,l){return u+o.edge(l).weight},0)}function s(o){var u=o.graph();o.removeNode(u.nestingRoot),delete u.nestingRoot,t.forEach(o.edges(),function(l){var c=o.edge(l);c.nestingEdge&&o.removeEdge(l)})}return h1}var d1,LP;function bre(){if(LP)return d1;LP=1;var t=ht(),e=qr();d1=r;function r(i){function a(s){var o=i.children(s),u=i.node(s);if(o.length&&t.forEach(o,a),t.has(u,"minRank")){u.borderLeft=[],u.borderRight=[];for(var l=u.minRank,c=u.maxRank+1;l<c;++l)n(i,"borderLeft","_bl",s,u,l),n(i,"borderRight","_br",s,u,l)}}t.forEach(i.children(),a)}function n(i,a,s,o,u,l){var c={width:0,height:0,rank:l,borderType:a},f=u[a][l-1],h=e.addDummyNode(i,"border",c,s);u[a][l]=h,i.setParent(h,o),f&&i.setEdge(f,h,{weight:1})}return d1}var v1,MP;function Sre(){if(MP)return v1;MP=1;var t=ht();v1={adjust:e,undo:r};function e(l){var c=l.graph().rankdir.toLowerCase();(c==="lr"||c==="rl")&&n(l)}function r(l){var c=l.graph().rankdir.toLowerCase();(c==="bt"||c==="rl")&&a(l),(c==="lr"||c==="rl")&&(o(l),n(l))}function n(l){t.forEach(l.nodes(),function(c){i(l.node(c))}),t.forEach(l.edges(),function(c){i(l.edge(c))})}function i(l){var c=l.width;l.width=l.height,l.height=c}function a(l){t.forEach(l.nodes(),function(c){s(l.node(c))}),t.forEach(l.edges(),function(c){var f=l.edge(c);t.forEach(f.points,s),t.has(f,"y")&&s(f)})}function s(l){l.y=-l.y}function o(l){t.forEach(l.nodes(),function(c){u(l.node(c))}),t.forEach(l.edges(),function(c){var f=l.edge(c);t.forEach(f.points,u),t.has(f,"x")&&u(f)})}function u(l){var c=l.x;l.x=l.y,l.y=c}return v1}var p1,VP;function Ire(){if(VP)return p1;VP=1;var t=ht();p1=e;function e(r){var n={},i=t.filter(r.nodes(),function(l){return!r.children(l).length}),a=t.max(t.map(i,function(l){return r.node(l).rank})),s=t.map(t.range(a+1),function(){return[]});function o(l){if(!t.has(n,l)){n[l]=!0;var c=r.node(l);s[c.rank].push(l),t.forEach(r.successors(l),o)}}var u=t.sortBy(i,function(l){return r.node(l).rank});return t.forEach(u,o),s}return p1}var g1,FP;function Cre(){if(FP)return g1;FP=1;var t=ht();g1=e;function e(n,i){for(var a=0,s=1;s<i.length;++s)a+=r(n,i[s-1],i[s]);return a}function r(n,i,a){for(var s=t.zipObject(a,t.map(a,function(h,d){return d})),o=t.flatten(t.map(i,function(h){return t.sortBy(t.map(n.outEdges(h),function(d){return{pos:s[d.w],weight:n.edge(d).weight}}),"pos")}),!0),u=1;u<a.length;)u<<=1;var l=2*u-1;u-=1;var c=t.map(new Array(l),function(){return 0}),f=0;return t.forEach(o.forEach(function(h){var d=h.pos+u;c[d]+=h.weight;for(var v=0;d>0;)d%2&&(v+=c[d+1]),d=d-1>>1,c[d]+=h.weight;f+=h.weight*v})),f}return g1}var m1,BP;function xre(){if(BP)return m1;BP=1;var t=ht();m1=e;function e(r,n){return t.map(n,function(i){var a=r.inEdges(i);if(a.length){var s=t.reduce(a,function(o,u){var l=r.edge(u),c=r.node(u.v);return{sum:o.sum+l.weight*c.order,weight:o.weight+l.weight}},{sum:0,weight:0});return{v:i,barycenter:s.sum/s.weight,weight:s.weight}}else return{v:i}})}return m1}var y1,qP;function Rre(){if(qP)return y1;qP=1;var t=ht();y1=e;function e(i,a){var s={};t.forEach(i,function(u,l){var c=s[u.v]={indegree:0,in:[],out:[],vs:[u.v],i:l};t.isUndefined(u.barycenter)||(c.barycenter=u.barycenter,c.weight=u.weight)}),t.forEach(a.edges(),function(u){var l=s[u.v],c=s[u.w];!t.isUndefined(l)&&!t.isUndefined(c)&&(c.indegree++,l.out.push(s[u.w]))});var o=t.filter(s,function(u){return!u.indegree});return r(o)}function r(i){var a=[];function s(l){return function(c){c.merged||(t.isUndefined(c.barycenter)||t.isUndefined(l.barycenter)||c.barycenter>=l.barycenter)&&n(l,c)}}function o(l){return function(c){c.in.push(l),--c.indegree===0&&i.push(c)}}for(;i.length;){var u=i.pop();a.push(u),t.forEach(u.in.reverse(),s(u)),t.forEach(u.out,o(u))}return t.map(t.filter(a,function(l){return!l.merged}),function(l){return t.pick(l,["vs","i","barycenter","weight"])})}function n(i,a){var s=0,o=0;i.weight&&(s+=i.barycenter*i.weight,o+=i.weight),a.weight&&(s+=a.barycenter*a.weight,o+=a.weight),i.vs=a.vs.concat(i.vs),i.barycenter=s/o,i.weight=o,i.i=Math.min(a.i,i.i),a.merged=!0}return y1}var w1,$P;function kre(){if($P)return w1;$P=1;var t=ht(),e=qr();w1=r;function r(a,s){var o=e.partition(a,function(w){return t.has(w,"barycenter")}),u=o.lhs,l=t.sortBy(o.rhs,function(w){return-w.i}),c=[],f=0,h=0,d=0;u.sort(i(!!s)),d=n(c,l,d),t.forEach(u,function(w){d+=w.vs.length,c.push(w.vs),f+=w.barycenter*w.weight,h+=w.weight,d=n(c,l,d)});var v={vs:t.flatten(c,!0)};return h&&(v.barycenter=f/h,v.weight=h),v}function n(a,s,o){for(var u;s.length&&(u=t.last(s)).i<=o;)s.pop(),a.push(u.vs),o++;return o}function i(a){return function(s,o){return s.barycenter<o.barycenter?-1:s.barycenter>o.barycenter?1:a?o.i-s.i:s.i-o.i}}return w1}var _1,zP;function Are(){if(zP)return _1;zP=1;var t=ht(),e=xre(),r=Rre(),n=kre();_1=i;function i(o,u,l,c){var f=o.children(u),h=o.node(u),d=h?h.borderLeft:void 0,v=h?h.borderRight:void 0,w={};d&&(f=t.filter(f,function(T){return T!==d&&T!==v}));var m=e(o,f);t.forEach(m,function(T){if(o.children(T.v).length){var b=i(o,T.v,l,c);w[T.v]=b,t.has(b,"barycenter")&&s(T,b)}});var p=r(m,l);a(p,w);var g=n(p,c);if(d&&(g.vs=t.flatten([d,g.vs,v],!0),o.predecessors(d).length)){var y=o.node(o.predecessors(d)[0]),_=o.node(o.predecessors(v)[0]);t.has(g,"barycenter")||(g.barycenter=0,g.weight=0),g.barycenter=(g.barycenter*g.weight+y.order+_.order)/(g.weight+2),g.weight+=2}return g}function a(o,u){t.forEach(o,function(l){l.vs=t.flatten(l.vs.map(function(c){return u[c]?u[c].vs:c}),!0)})}function s(o,u){t.isUndefined(o.barycenter)?(o.barycenter=u.barycenter,o.weight=u.weight):(o.barycenter=(o.barycenter*o.weight+u.barycenter*u.weight)/(o.weight+u.weight),o.weight+=u.weight)}return _1}var E1,UP;function Pre(){if(UP)return E1;UP=1;var t=ht(),e=On().Graph;E1=r;function r(i,a,s){var o=n(i),u=new e({compound:!0}).setGraph({root:o}).setDefaultNodeLabel(function(l){return i.node(l)});return t.forEach(i.nodes(),function(l){var c=i.node(l),f=i.parent(l);(c.rank===a||c.minRank<=a&&a<=c.maxRank)&&(u.setNode(l),u.setParent(l,f||o),t.forEach(i[s](l),function(h){var d=h.v===l?h.w:h.v,v=u.edge(d,l),w=t.isUndefined(v)?0:v.weight;u.setEdge(d,l,{weight:i.edge(h).weight+w})}),t.has(c,"minRank")&&u.setNode(l,{borderLeft:c.borderLeft[a],borderRight:c.borderRight[a]}))}),u}function n(i){for(var a;i.hasNode(a=t.uniqueId("_root")););return a}return E1}var T1,jP;function Dre(){if(jP)return T1;jP=1;var t=ht();T1=e;function e(r,n,i){var a={},s;t.forEach(i,function(o){for(var u=r.parent(o),l,c;u;){if(l=r.parent(u),l?(c=a[l],a[l]=u):(c=s,s=u),c&&c!==u){n.setEdge(c,u);return}u=l}})}return T1}var b1,WP;function Ore(){if(WP)return b1;WP=1;var t=ht(),e=Ire(),r=Cre(),n=Are(),i=Pre(),a=Dre(),s=On().Graph,o=qr();b1=u;function u(h){var d=o.maxRank(h),v=l(h,t.range(1,d+1),"inEdges"),w=l(h,t.range(d-1,-1,-1),"outEdges"),m=e(h);f(h,m);for(var p=Number.POSITIVE_INFINITY,g,y=0,_=0;_<4;++y,++_){c(y%2?v:w,y%4>=2),m=o.buildLayerMatrix(h);var T=r(h,m);T<p&&(_=0,g=t.cloneDeep(m),p=T)}f(h,g)}function l(h,d,v){return t.map(d,function(w){return i(h,w,v)})}function c(h,d){var v=new s;t.forEach(h,function(w){var m=w.graph().root,p=n(w,m,v,d);t.forEach(p.vs,function(g,y){w.node(g).order=y}),a(w,v,p.vs)})}function f(h,d){t.forEach(d,function(v){t.forEach(v,function(w,m){h.node(w).order=m})})}return b1}var S1,HP;function Nre(){if(HP)return S1;HP=1;var t=ht(),e=On().Graph,r=qr();S1={positionX:v,findType1Conflicts:n,findType2Conflicts:i,addConflict:s,hasConflict:o,verticalAlignment:u,horizontalCompaction:l,alignCoordinates:h,findSmallestWidthAlignment:f,balance:d};function n(p,g){var y={};function _(T,b){var E=0,I=0,S=T.length,C=t.last(b);return t.forEach(b,function(R,x){var P=a(p,R),A=P?p.node(P).order:S;(P||R===C)&&(t.forEach(b.slice(I,x+1),function(F){t.forEach(p.predecessors(F),function(O){var L=p.node(O),D=L.order;(D<E||A<D)&&!(L.dummy&&p.node(F).dummy)&&s(y,O,F)})}),I=x+1,E=A)}),b}return t.reduce(g,_),y}function i(p,g){var y={};function _(b,E,I,S,C){var R;t.forEach(t.range(E,I),function(x){R=b[x],p.node(R).dummy&&t.forEach(p.predecessors(R),function(P){var A=p.node(P);A.dummy&&(A.order<S||A.order>C)&&s(y,P,R)})})}function T(b,E){var I=-1,S,C=0;return t.forEach(E,function(R,x){if(p.node(R).dummy==="border"){var P=p.predecessors(R);P.length&&(S=p.node(P[0]).order,_(E,C,x,I,S),C=x,I=S)}_(E,C,E.length,S,b.length)}),E}return t.reduce(g,T),y}function a(p,g){if(p.node(g).dummy)return t.find(p.predecessors(g),function(y){return p.node(y).dummy})}function s(p,g,y){if(g>y){var _=g;g=y,y=_}var T=p[g];T||(p[g]=T={}),T[y]=!0}function o(p,g,y){if(g>y){var _=g;g=y,y=_}return t.has(p[g],y)}function u(p,g,y,_){var T={},b={},E={};return t.forEach(g,function(I){t.forEach(I,function(S,C){T[S]=S,b[S]=S,E[S]=C})}),t.forEach(g,function(I){var S=-1;t.forEach(I,function(C){var R=_(C);if(R.length){R=t.sortBy(R,function(O){return E[O]});for(var x=(R.length-1)/2,P=Math.floor(x),A=Math.ceil(x);P<=A;++P){var F=R[P];b[C]===C&&S<E[F]&&!o(y,C,F)&&(b[F]=C,b[C]=T[C]=T[F],S=E[F])}}})}),{root:T,align:b}}function l(p,g,y,_,T){var b={},E=c(p,g,y,T),I=T?"borderLeft":"borderRight";function S(x,P){for(var A=E.nodes(),F=A.pop(),O={};F;)O[F]?x(F):(O[F]=!0,A.push(F),A=A.concat(P(F))),F=A.pop()}function C(x){b[x]=E.inEdges(x).reduce(function(P,A){return Math.max(P,b[A.v]+E.edge(A))},0)}function R(x){var P=E.outEdges(x).reduce(function(F,O){return Math.min(F,b[O.w]-E.edge(O))},Number.POSITIVE_INFINITY),A=p.node(x);P!==Number.POSITIVE_INFINITY&&A.borderType!==I&&(b[x]=Math.max(b[x],P))}return S(C,E.predecessors.bind(E)),S(R,E.successors.bind(E)),t.forEach(_,function(x){b[x]=b[y[x]]}),b}function c(p,g,y,_){var T=new e,b=p.graph(),E=w(b.nodesep,b.edgesep,_);return t.forEach(g,function(I){var S;t.forEach(I,function(C){var R=y[C];if(T.setNode(R),S){var x=y[S],P=T.edge(x,R);T.setEdge(x,R,Math.max(E(p,C,S),P||0))}S=C})}),T}function f(p,g){return t.minBy(t.values(g),function(y){var _=Number.NEGATIVE_INFINITY,T=Number.POSITIVE_INFINITY;return t.forIn(y,function(b,E){var I=m(p,E)/2;_=Math.max(b+I,_),T=Math.min(b-I,T)}),_-T})}function h(p,g){var y=t.values(g),_=t.min(y),T=t.max(y);t.forEach(["u","d"],function(b){t.forEach(["l","r"],function(E){var I=b+E,S=p[I],C;if(S!==g){var R=t.values(S);C=E==="l"?_-t.min(R):T-t.max(R),C&&(p[I]=t.mapValues(S,function(x){return x+C}))}})})}function d(p,g){return t.mapValues(p.ul,function(y,_){if(g)return p[g.toLowerCase()][_];var T=t.sortBy(t.map(p,_));return(T[1]+T[2])/2})}function v(p){var g=r.buildLayerMatrix(p),y=t.merge(n(p,g),i(p,g)),_={},T;t.forEach(["u","d"],function(E){T=E==="u"?g:t.values(g).reverse(),t.forEach(["l","r"],function(I){I==="r"&&(T=t.map(T,function(x){return t.values(x).reverse()}));var S=(E==="u"?p.predecessors:p.successors).bind(p),C=u(p,T,y,S),R=l(p,T,C.root,C.align,I==="r");I==="r"&&(R=t.mapValues(R,function(x){return-x})),_[E+I]=R})});var b=f(p,_);return h(_,b),d(_,p.graph().align)}function w(p,g,y){return function(_,T,b){var E=_.node(T),I=_.node(b),S=0,C;if(S+=E.width/2,t.has(E,"labelpos"))switch(E.labelpos.toLowerCase()){case"l":C=-E.width/2;break;case"r":C=E.width/2;break}if(C&&(S+=y?C:-C),C=0,S+=(E.dummy?g:p)/2,S+=(I.dummy?g:p)/2,S+=I.width/2,t.has(I,"labelpos"))switch(I.labelpos.toLowerCase()){case"l":C=I.width/2;break;case"r":C=-I.width/2;break}return C&&(S+=y?C:-C),C=0,S}}function m(p,g){return p.node(g).width}return S1}var I1,GP;function Lre(){if(GP)return I1;GP=1;var t=ht(),e=qr(),r=Nre().positionX;I1=n;function n(a){a=e.asNonCompoundGraph(a),i(a),t.forEach(r(a),function(s,o){a.node(o).x=s})}function i(a){var s=e.buildLayerMatrix(a),o=a.graph().ranksep,u=0;t.forEach(s,function(l){var c=t.max(t.map(l,function(f){return a.node(f).height}));t.forEach(l,function(f){a.node(f).y=u+c/2}),u+=c+o})}return I1}var C1,KP;function Mre(){if(KP)return C1;KP=1;var t=ht(),e=mre(),r=yre(),n=_re(),i=qr().normalizeRanks,a=Ere(),s=qr().removeEmptyRanks,o=Tre(),u=bre(),l=Sre(),c=Ore(),f=Lre(),h=qr(),d=On().Graph;C1=v;function v(N,M){var q=M&&M.debugTiming?h.time:h.notime;q("layout",function(){var V=q("  buildLayoutGraph",function(){return S(N)});q("  runLayout",function(){w(V,q)}),q("  updateInputGraph",function(){m(N,V)})})}function w(N,M){M("    makeSpaceForEdgeLabels",function(){C(N)}),M("    removeSelfEdges",function(){$(N)}),M("    acyclic",function(){e.run(N)}),M("    nestingGraph.run",function(){o.run(N)}),M("    rank",function(){n(h.asNonCompoundGraph(N))}),M("    injectEdgeLabelProxies",function(){R(N)}),M("    removeEmptyRanks",function(){s(N)}),M("    nestingGraph.cleanup",function(){o.cleanup(N)}),M("    normalizeRanks",function(){i(N)}),M("    assignRankMinMax",function(){x(N)}),M("    removeEdgeLabelProxies",function(){P(N)}),M("    normalize.run",function(){r.run(N)}),M("    parentDummyChains",function(){a(N)}),M("    addBorderSegments",function(){u(N)}),M("    order",function(){c(N)}),M("    insertSelfEdges",function(){z(N)}),M("    adjustCoordinateSystem",function(){l.adjust(N)}),M("    position",function(){f(N)}),M("    positionSelfEdges",function(){B(N)}),M("    removeBorderNodes",function(){D(N)}),M("    normalize.undo",function(){r.undo(N)}),M("    fixupEdgeLabelCoords",function(){O(N)}),M("    undoCoordinateSystem",function(){l.undo(N)}),M("    translateGraph",function(){A(N)}),M("    assignNodeIntersects",function(){F(N)}),M("    reversePoints",function(){L(N)}),M("    acyclic.undo",function(){e.undo(N)})}function m(N,M){t.forEach(N.nodes(),function(q){var V=N.node(q),W=M.node(q);V&&(V.x=W.x,V.y=W.y,M.children(q).length&&(V.width=W.width,V.height=W.height))}),t.forEach(N.edges(),function(q){var V=N.edge(q),W=M.edge(q);V.points=W.points,t.has(W,"x")&&(V.x=W.x,V.y=W.y)}),N.graph().width=M.graph().width,N.graph().height=M.graph().height}var p=["nodesep","edgesep","ranksep","marginx","marginy"],g={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},y=["acyclicer","ranker","rankdir","align"],_=["width","height"],T={width:0,height:0},b=["minlen","weight","width","height","labeloffset"],E={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},I=["labelpos"];function S(N){var M=new d({multigraph:!0,compound:!0}),q=Q(N.graph());return M.setGraph(t.merge({},g,j(q,p),t.pick(q,y))),t.forEach(N.nodes(),function(V){var W=Q(N.node(V));M.setNode(V,t.defaults(j(W,_),T)),M.setParent(V,N.parent(V))}),t.forEach(N.edges(),function(V){var W=Q(N.edge(V));M.setEdge(V,t.merge({},E,j(W,b),t.pick(W,I)))}),M}function C(N){var M=N.graph();M.ranksep/=2,t.forEach(N.edges(),function(q){var V=N.edge(q);V.minlen*=2,V.labelpos.toLowerCase()!=="c"&&(M.rankdir==="TB"||M.rankdir==="BT"?V.width+=V.labeloffset:V.height+=V.labeloffset)})}function R(N){t.forEach(N.edges(),function(M){var q=N.edge(M);if(q.width&&q.height){var V=N.node(M.v),W=N.node(M.w),X={rank:(W.rank-V.rank)/2+V.rank,e:M};h.addDummyNode(N,"edge-proxy",X,"_ep")}})}function x(N){var M=0;t.forEach(N.nodes(),function(q){var V=N.node(q);V.borderTop&&(V.minRank=N.node(V.borderTop).rank,V.maxRank=N.node(V.borderBottom).rank,M=t.max(M,V.maxRank))}),N.graph().maxRank=M}function P(N){t.forEach(N.nodes(),function(M){var q=N.node(M);q.dummy==="edge-proxy"&&(N.edge(q.e).labelRank=q.rank,N.removeNode(M))})}function A(N){var M=Number.POSITIVE_INFINITY,q=0,V=Number.POSITIVE_INFINITY,W=0,X=N.graph(),J=X.marginx||0,ae=X.marginy||0;function ve(_e){var se=_e.x,te=_e.y,me=_e.width,ue=_e.height;M=Math.min(M,se-me/2),q=Math.max(q,se+me/2),V=Math.min(V,te-ue/2),W=Math.max(W,te+ue/2)}t.forEach(N.nodes(),function(_e){ve(N.node(_e))}),t.forEach(N.edges(),function(_e){var se=N.edge(_e);t.has(se,"x")&&ve(se)}),M-=J,V-=ae,t.forEach(N.nodes(),function(_e){var se=N.node(_e);se.x-=M,se.y-=V}),t.forEach(N.edges(),function(_e){var se=N.edge(_e);t.forEach(se.points,function(te){te.x-=M,te.y-=V}),t.has(se,"x")&&(se.x-=M),t.has(se,"y")&&(se.y-=V)}),X.width=q-M+J,X.height=W-V+ae}function F(N){t.forEach(N.edges(),function(M){var q=N.edge(M),V=N.node(M.v),W=N.node(M.w),X,J;q.points?(X=q.points[0],J=q.points[q.points.length-1]):(q.points=[],X=W,J=V),q.points.unshift(h.intersectRect(V,X)),q.points.push(h.intersectRect(W,J))})}function O(N){t.forEach(N.edges(),function(M){var q=N.edge(M);if(t.has(q,"x"))switch((q.labelpos==="l"||q.labelpos==="r")&&(q.width-=q.labeloffset),q.labelpos){case"l":q.x-=q.width/2+q.labeloffset;break;case"r":q.x+=q.width/2+q.labeloffset;break}})}function L(N){t.forEach(N.edges(),function(M){var q=N.edge(M);q.reversed&&q.points.reverse()})}function D(N){t.forEach(N.nodes(),function(M){if(N.children(M).length){var q=N.node(M),V=N.node(q.borderTop),W=N.node(q.borderBottom),X=N.node(t.last(q.borderLeft)),J=N.node(t.last(q.borderRight));q.width=Math.abs(J.x-X.x),q.height=Math.abs(W.y-V.y),q.x=X.x+q.width/2,q.y=V.y+q.height/2}}),t.forEach(N.nodes(),function(M){N.node(M).dummy==="border"&&N.removeNode(M)})}function $(N){t.forEach(N.edges(),function(M){if(M.v===M.w){var q=N.node(M.v);q.selfEdges||(q.selfEdges=[]),q.selfEdges.push({e:M,label:N.edge(M)}),N.removeEdge(M)}})}function z(N){var M=h.buildLayerMatrix(N);t.forEach(M,function(q){var V=0;t.forEach(q,function(W,X){var J=N.node(W);J.order=X+V,t.forEach(J.selfEdges,function(ae){h.addDummyNode(N,"selfedge",{width:ae.label.width,height:ae.label.height,rank:J.rank,order:X+ ++V,e:ae.e,label:ae.label},"_se")}),delete J.selfEdges})})}function B(N){t.forEach(N.nodes(),function(M){var q=N.node(M);if(q.dummy==="selfedge"){var V=N.node(q.e.v),W=V.x+V.width/2,X=V.y,J=q.x-W,ae=V.height/2;N.setEdge(q.e,q.label),N.removeNode(M),q.label.points=[{x:W+2*J/3,y:X-ae},{x:W+5*J/6,y:X-ae},{x:W+J,y:X},{x:W+5*J/6,y:X+ae},{x:W+2*J/3,y:X+ae}],q.label.x=q.x,q.label.y=q.y}})}function j(N,M){return t.mapValues(t.pick(N,M),Number)}function Q(N){var M={};return t.forEach(N,function(q,V){M[V.toLowerCase()]=q}),M}return C1}var x1,QP;function Vre(){if(QP)return x1;QP=1;var t=ht(),e=qr(),r=On().Graph;x1={debugOrdering:n};function n(i){var a=e.buildLayerMatrix(i),s=new r({compound:!0,multigraph:!0}).setGraph({});return t.forEach(i.nodes(),function(o){s.setNode(o,{label:o}),s.setParent(o,"layer"+i.node(o).rank)}),t.forEach(i.edges(),function(o){s.setEdge(o.v,o.w,{},o.name)}),t.forEach(a,function(o,u){var l="layer"+u;s.setNode(l,{rank:"same"}),t.reduce(o,function(c,f){return s.setEdge(c,f,{style:"invis"}),f})}),s}return x1}var R1,YP;function Fre(){return YP||(YP=1,R1="0.8.5"),R1}var k1,XP;function Bre(){return XP||(XP=1,k1={graphlib:On(),layout:Mre(),debug:Vre(),util:{time:qr().time,notime:qr().notime},version:Fre()}),k1}(function(t,e){(function(n,i){t.exports=i(Bre())})(Us,function(r){return function(n){var i={};function a(s){if(i[s])return i[s].exports;var o=i[s]={i:s,l:!1,exports:{}};return n[s].call(o.exports,o,o.exports,a),o.l=!0,o.exports}return a.m=n,a.c=i,a.d=function(s,o,u){a.o(s,o)||Object.defineProperty(s,o,{enumerable:!0,get:u})},a.r=function(s){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},a.t=function(s,o){if(o&1&&(s=a(s)),o&8||o&4&&typeof s=="object"&&s&&s.__esModule)return s;var u=Object.create(null);if(a.r(u),Object.defineProperty(u,"default",{enumerable:!0,value:s}),o&2&&typeof s!="string")for(var l in s)a.d(u,l,(function(c){return s[c]}).bind(null,l));return u},a.n=function(s){var o=s&&s.__esModule?function(){return s.default}:function(){return s};return a.d(o,"a",o),o},a.o=function(s,o){return Object.prototype.hasOwnProperty.call(s,o)},a.p="",a(a.s=0)}([function(n,i,a){var s=a(1),o=function(l){l&&l("layout","dagre",s)};typeof cytoscape<"u"&&o(cytoscape),n.exports=o},function(n,i,a){function s(h){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?s=function(v){return typeof v}:s=function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v},s(h)}var o=function(d){return typeof d=="function"},u=a(2),l=a(3),c=a(4);function f(h){this.options=l({},u,h)}f.prototype.run=function(){var h=this.options,d=this,v=h.cy,w=h.eles,m=function(B,j){return o(j)?j.apply(B,[B]):j},p=h.boundingBox||{x1:0,y1:0,w:v.width(),h:v.height()};p.x2===void 0&&(p.x2=p.x1+p.w),p.w===void 0&&(p.w=p.x2-p.x1),p.y2===void 0&&(p.y2=p.y1+p.h),p.h===void 0&&(p.h=p.y2-p.y1);var g=new c.graphlib.Graph({multigraph:!0,compound:!0}),y={},_=function(B,j){j!=null&&(y[B]=j)};_("nodesep",h.nodeSep),_("edgesep",h.edgeSep),_("ranksep",h.rankSep),_("rankdir",h.rankDir),_("align",h.align),_("ranker",h.ranker),_("acyclicer",h.acyclicer),g.setGraph(y),g.setDefaultEdgeLabel(function(){return{}}),g.setDefaultNodeLabel(function(){return{}});var T=w.nodes();o(h.sort)&&(T=T.sort(h.sort));for(var b=0;b<T.length;b++){var E=T[b],I=E.layoutDimensions(h);g.setNode(E.id(),{width:I.w,height:I.h,name:E.id()})}for(var S=0;S<T.length;S++){var C=T[S];C.isChild()&&g.setParent(C.id(),C.parent().id())}var R=w.edges().stdFilter(function(z){return!z.source().isParent()&&!z.target().isParent()});o(h.sort)&&(R=R.sort(h.sort));for(var x=0;x<R.length;x++){var P=R[x];g.setEdge(P.source().id(),P.target().id(),{minlen:m(P,h.minLen),weight:m(P,h.edgeWeight),name:P.id()},P.id())}c.layout(g);for(var A=g.nodes(),F=0;F<A.length;F++){var O=A[F],L=g.node(O);v.getElementById(O).scratch().dagre=L}var D;h.boundingBox?(D={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0},T.forEach(function(z){var B=z.scratch().dagre;D.x1=Math.min(D.x1,B.x),D.x2=Math.max(D.x2,B.x),D.y1=Math.min(D.y1,B.y),D.y2=Math.max(D.y2,B.y)}),D.w=D.x2-D.x1,D.h=D.y2-D.y1):D=p;var $=function(B){if(h.boundingBox){var j=D.w===0?0:(B.x-D.x1)/D.w,Q=D.h===0?0:(B.y-D.y1)/D.h;return{x:p.x1+j*p.w,y:p.y1+Q*p.h}}else return B};return T.layoutPositions(d,h,function(z){z=s(z)==="object"?z:this;var B=z.scratch().dagre;return $({x:B.x,y:B.y})}),this},n.exports=f},function(n,i){var a={nodeSep:void 0,edgeSep:void 0,rankSep:void 0,rankDir:void 0,align:void 0,acyclicer:void 0,ranker:void 0,minLen:function(o){return 1},edgeWeight:function(o){return 1},fit:!0,padding:30,spacingFactor:void 0,nodeDimensionsIncludeLabels:!1,animate:!1,animateFilter:function(o,u){return!0},animationDuration:500,animationEasing:void 0,boundingBox:void 0,transform:function(o,u){return u},ready:function(){},sort:void 0,stop:function(){}};n.exports=a},function(n,i){n.exports=Object.assign!=null?Object.assign.bind(Object):function(a){for(var s=arguments.length,o=new Array(s>1?s-1:0),u=1;u<s;u++)o[u-1]=arguments[u];return o.forEach(function(l){Object.keys(l).forEach(function(c){return a[c]=l[c]})}),a}},function(n,i){n.exports=r}])})})(xF);var qre=xF.exports;const $re=Od(qre),g_=180,zre=[{selector:"node",style:{"background-color":"#666",color:"#fff",label:"data(title)","text-valign":"center","text-wrap":"wrap","text-max-width":`${g_}px`,shape:"round-rectangle",width:"data(width)",height:"data(height)"}},{selector:"edge",style:{width:3,"line-color":"#ccc","target-arrow-color":"#ccc","target-arrow-shape":"triangle","curve-style":"bezier"}}],Ure=8,jre=10,Wre=10,Hre=25;function Gre(t){const e=t.title.length*Ure,r=Math.min(g_,e)+2*jre,i=Math.floor(e/g_)*Hre+2*Wre;return{width:r,height:i}}const Kre=()=>{const t=su();if(t===null)return null;const e=i=>i.dependencies===void 0?[]:i.dependencies.map(s=>({data:{source:s,target:i.id}})).filter(s=>t.some(o=>o.id===s.data.source)),r=t.map(i=>({data:{...i,...Gre(i)}})),n=t.map(e).flat();return[...r,...n]};TF.use($re);const JP={name:"dagre",rankDir:"LR",nodeDimensionsIncludeLabels:!0},Qre=()=>{const t=Kre(),e=ie.useRef(null);return t===null?U.jsx(U.Fragment,{children:"Loading..."}):U.jsxs(U.Fragment,{children:[U.jsx(Nt,{onClick:()=>{var r;return(r=e.current)==null?void 0:r.layout(JP).run()},children:"Reset Layout"}),U.jsx(nee,{className:"Cytoscape",cy:r=>e.current=r,stylesheet:zre,layout:JP,elements:t})]})},Yre=()=>U.jsxs("div",{children:[U.jsx("h1",{children:"Reflect"}),U.jsx(Qre,{})]}),Xre=()=>{const t=NM(),e=su();return t===null?U.jsx(U.Fragment,{children:"Loading..."}):U.jsxs(U.Fragment,{children:[U.jsx("h1",{children:"Menu"}),U.jsxs(Kc,{children:[U.jsx(fi,{to:"capture",children:"Capture"}),t===0?U.jsxs(Nt,{disabled:!0,children:["Process (",t,")"]}):U.jsxs(fi,{to:"process",children:["Process (",t,")"]}),(e==null?void 0:e.length)===0?U.jsx(Nt,{disabled:!0,children:"Engage"}):U.jsx(fi,{to:"engage",children:"Engage"}),(e==null?void 0:e.length)===0?U.jsx(Nt,{disabled:!0,children:"Reflect"}):U.jsx(fi,{to:"reflect",children:"Reflect"})]})]})},Jre=()=>U.jsx(fi,{className:"HomeButton",to:"/",children:"Home"}),Zre=()=>U.jsx(Nt,{onClick:()=>VU(OT),className:"LogOutButton",children:"Log Out"}),ene=()=>{const{user:t}=NT();return t&&U.jsx("p",{className:"UserEmail",children:t.email})};function tne(){return U.jsx(yH,{children:U.jsx(wH,{children:U.jsxs(TH,{children:[U.jsx(Jre,{}),U.jsx(Zre,{}),U.jsx(ene,{}),U.jsxs(mE,{children:[U.jsx(an,{path:"capture",element:U.jsx(SH,{})}),U.jsx(an,{path:"process/*",element:U.jsx(GH,{})}),U.jsx(an,{path:"engage/*",element:U.jsx(FH,{})}),U.jsx(an,{path:"reflect/*",element:U.jsx(Yre,{})}),U.jsx(an,{path:"*",element:U.jsx(Xre,{})})]})]})})})}function rne(){const{initialized:t,user:e}=NT();return t?t&&e===null?U.jsx(vH,{}):U.jsx(tne,{}):U.jsx(U.Fragment,{children:"Loading..."})}function nne(){return U.jsx("div",{className:"AppLayout",children:U.jsx(rne,{})})}const ine=A1.createRoot(document.getElementById("root"));ine.render(U.jsx(sl.StrictMode,{children:U.jsx(Z$,{basename:"desk",children:U.jsx(nne,{})})}));
//# sourceMappingURL=index-uAidOVvR.js.map
